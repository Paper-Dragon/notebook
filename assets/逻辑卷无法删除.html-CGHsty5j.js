import{ah as o,ai as t,ar as s,am as a}from"./app-DLLpMjhl.js";const n={};function r(m,e){return a(),t("div",null,e[0]||(e[0]=[s(`<h1 id="逻辑卷删除问题" tabindex="-1"><a class="header-anchor" href="#逻辑卷删除问题"><span>逻辑卷删除问题</span></a></h1><p>存储池名称：fs2 逻辑卷名称：fs2 逻辑卷文件系统被占用(Logical volume /dev/<em>/</em> contains a filesystem in use.)</p><p>[root@f1s2001 ldnas]# lvremove -f /dev/fs2/fs2 Logical volume fs2/fs2 contains a filesystem in use.</p><h1 id="逻辑卷可能被挂载了" tabindex="-1"><a class="header-anchor" href="#逻辑卷可能被挂载了"><span>逻辑卷可能被挂载了</span></a></h1><p>​ df 查看挂载详情，找到对应逻辑卷进行卸载操作后，再执行删除 ​ 若挂载信息为： ​ /dev/fs2/fs2 1038336 32996 1005340 4% /mnt ​ 执行 umount /dev/fs2/fs2 或 umount /mnt 进行卸载</p><pre><code>    若出现umount 错误：
        umount: /mnt: target is busy.
        (In some cases useful info about processes that use
         the device is found by lsof(8) or fuser(1))

    此错误说明/mnt 目录可能被占用了，可关闭或杀死占用程序，通过此命令查找占用进程：
        fuser -m /dev/fs2/fs2 或 fuser -m /mnt
        返回：/mnt:                17311c
        杀死进程： kill -9 17311
        也可通过 lsof -p 17311 命令查找到相关进程进行关闭
</code></pre><p>之后再执行删除操作 逻辑卷被其他设备占用(Logical volume /dev/<em>/</em> is used by another device.)</p><p>[root@f1s2001 ldnas]# lvremove -f /dev/fs2/fs2 Logical volume fs2/fs2 is used by another device. 逻辑卷被其他设备占用了，需要先释放掉设备，首先查找到逻辑卷的映射 [root@f1s2001 fine1]# dmsetup info -c | grep fs2 fs2-fs2 253 1 L--w 1 1 0 LVM-OC1NaKa5z4xnsTcIS5chrT4nclVg53lBhaaduekEB7M50Qz70o9vg4sDfSdQSaq9</p><p>然后查找映射设备，命令中的253 和1 在上个命令返回结果中 [root@f1s2001 fine1]# ls -la /sys/dev/block/253:1/holders total 0 drwxr-xr-x 2 root root 0 Nov 18 10:25 . drwxr-xr-x 8 root root 0 Nov 18 10:07 .. lrwxrwxrwx 1 root root 0 Nov 18 10:25 md125 -&gt; ../../md125</p><p>删除md 设备，命令如下： [root@f1s2001 fine1]# mdadm -S /dev/md125 mdadm: stopped /dev/md125</p><pre><code>*若为dm 设备，则删除对应dm-？设备，如：
     dmsetup remove /dev/dm-18
</code></pre><p>之后再进行逻辑卷的删除</p>`,12)]))}const f=o(n,[["render",r]]),p=JSON.parse('{"path":"/note-book/OperaSystems/%E9%80%BB%E8%BE%91%E5%8D%B7%E6%97%A0%E6%B3%95%E5%88%A0%E9%99%A4.html","title":"逻辑卷删除问题","lang":"zh-CN","frontmatter":{"description":"逻辑卷删除问题 存储池名称：fs2 逻辑卷名称：fs2 逻辑卷文件系统被占用(Logical volume /dev// contains a filesystem in use.) [root@f1s2001 ldnas]# lvremove -f /dev/fs2/fs2 Logical volume fs2/fs2 contains a file...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"逻辑卷删除问题\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-03-26T05:54:05.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Paper-Dragon\\",\\"url\\":\\"https://github.com/Paper-Dragon\\",\\"email\\":\\"2678885646@qq.com\\"}]}"],["meta",{"property":"og:url","content":"https://www.geekery.cn/note-book/OperaSystems/%E9%80%BB%E8%BE%91%E5%8D%B7%E6%97%A0%E6%B3%95%E5%88%A0%E9%99%A4.html"}],["meta",{"property":"og:site_name","content":"运维开发绿皮书"}],["meta",{"property":"og:title","content":"逻辑卷删除问题"}],["meta",{"property":"og:description","content":"逻辑卷删除问题 存储池名称：fs2 逻辑卷名称：fs2 逻辑卷文件系统被占用(Logical volume /dev// contains a filesystem in use.) [root@f1s2001 ldnas]# lvremove -f /dev/fs2/fs2 Logical volume fs2/fs2 contains a file..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-26T05:54:05.000Z"}],["meta",{"property":"article:modified_time","content":"2024-03-26T05:54:05.000Z"}]]},"git":{"createdTime":1691939318000,"updatedTime":1711432445000,"contributors":[{"name":"Paper-Dragon","username":"Paper-Dragon","email":"2678885646@qq.com","commits":1,"url":"https://github.com/Paper-Dragon"},{"name":"PaperDragon-SH","username":"PaperDragon-SH","email":"2678885646@qq.com","commits":1,"url":"https://github.com/PaperDragon-SH"}],"changelog":[{"hash":"1b400120ce50b26af2d618d8059663b5a0a122e7","time":1711432445000,"email":"2678885646@qq.com","author":"PaperDragon-SH","message":"一些空格错误"},{"hash":"392a519398b2e846f316619fbe831e100164de7c","time":1691939318000,"email":"2678885646@qq.com","author":"Paper-Dragon","message":"Create The Worid!"}]},"readingTime":{"minutes":1.38,"words":415},"filePathRelative":"note-book/OperaSystems/逻辑卷无法删除.md","excerpt":"\\n<p>存储池名称：fs2\\n逻辑卷名称：fs2\\n逻辑卷文件系统被占用(Logical volume /dev/<em>/</em> contains a filesystem in use.)</p>\\n<p>[root@f1s2001 ldnas]# lvremove -f /dev/fs2/fs2\\nLogical volume fs2/fs2 contains a filesystem in use.</p>\\n<h1>逻辑卷可能被挂载了</h1>\\n<p>​        df 查看挂载详情，找到对应逻辑卷进行卸载操作后，再执行删除\\n​        若挂载信息为：\\n​            /dev/fs2/fs2   1038336    32996   1005340   4% /mnt\\n​        执行 umount /dev/fs2/fs2 或 umount /mnt 进行卸载</p>","autoDesc":true}');export{f as comp,p as data};
