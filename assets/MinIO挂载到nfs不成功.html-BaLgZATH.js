import{ah as n,ai as a,ar as i,am as o}from"./app-huHx0yVU.js";const t="/assets/b390fb7d1ac006cf10b52294210348ab-16918418773061-DMCH66y0.png",s="/assets/5ab750ee93dd42e3bb43496ffff3b6fc-16918418809433-3OixNbBt.png",r={};function p(c,e){return o(),a("div",null,e[0]||(e[0]=[i('<h1 id="minio挂载到nfs不成功" tabindex="-1"><a class="header-anchor" href="#minio挂载到nfs不成功"><span>MinIO挂载到nfs不成功</span></a></h1><h2 id="error-unable-to-initialize-backend-no-locks-available" tabindex="-1"><a class="header-anchor" href="#error-unable-to-initialize-backend-no-locks-available"><span>ERROR Unable to initialize backend: no locks available.</span></a></h2><p><img src="'+t+`" alt="001.png"></p><p>服务器做了nas共享存储后，修改minio的数据目录为nas共享目录，启动minio服务失败，报错信息如上图所示：</p><p>从这个日志来看，应该是minio拿不到nfs文件系统的锁。 解决方案</p><pre><code>nfs挂载时加nolock参数

使用nfsv4,而不是用nfsv3
</code></pre><p>参考</p><p>GitLab底层也是用的minio,GitLab官方文档是这么写的</p><p>File locking: GitLab requires advisory file locking, which is only supported natively in NFS version 4. NFSv3 also supports locking as long as Linux Kernel 2.6.5+ is used. We recommend using version 4 and do not specifically test NFSv3</p><p>https://docs.gitlab.com/ee/administration/nfs.html</p><p><img src="`+s+'" alt="002.jpg"> 总结</p><p>最后我们选择了方案2，但是Minio官网是推荐用nfsv4协议挂载.</p>',12)]))}const m=n(r,[["render",p]]),d=JSON.parse('{"path":"/note-book/MinIO/MinIO%E6%8C%82%E8%BD%BD%E5%88%B0nfs%E4%B8%8D%E6%88%90%E5%8A%9F.html","title":"MinIO挂载到nfs不成功","lang":"zh-CN","frontmatter":{"description":"MinIO挂载到nfs不成功 ERROR Unable to initialize backend: no locks available. 001.png 服务器做了nas共享存储后，修改minio的数据目录为nas共享目录，启动minio服务失败，报错信息如上图所示： 从这个日志来看，应该是minio拿不到nfs文件系统的锁。 解决方案 参考 Gi...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"MinIO挂载到nfs不成功\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-11-01T09:17:48.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Paper-Dragon\\",\\"url\\":\\"https://github.com/Paper-Dragon\\",\\"email\\":\\"2678885646@qq.com\\"}]}"],["meta",{"property":"og:url","content":"https://www.geekery.cn/note-book/MinIO/MinIO%E6%8C%82%E8%BD%BD%E5%88%B0nfs%E4%B8%8D%E6%88%90%E5%8A%9F.html"}],["meta",{"property":"og:site_name","content":"运维开发绿皮书"}],["meta",{"property":"og:title","content":"MinIO挂载到nfs不成功"}],["meta",{"property":"og:description","content":"MinIO挂载到nfs不成功 ERROR Unable to initialize backend: no locks available. 001.png 服务器做了nas共享存储后，修改minio的数据目录为nas共享目录，启动minio服务失败，报错信息如上图所示： 从这个日志来看，应该是minio拿不到nfs文件系统的锁。 解决方案 参考 Gi..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-01T09:17:48.000Z"}],["meta",{"property":"article:modified_time","content":"2024-11-01T09:17:48.000Z"}]]},"git":{"createdTime":1691939318000,"updatedTime":1730452668000,"contributors":[{"name":"Paper-Dragon","username":"Paper-Dragon","email":"2678885646@qq.com","commits":2,"url":"https://github.com/Paper-Dragon"},{"name":"PaperDragon-SH","username":"PaperDragon-SH","email":"2678885646@qq.com","commits":3,"url":"https://github.com/PaperDragon-SH"}],"changelog":[{"hash":"6ab7eb83988778fac940fa21b76fbec53d5cae3c","time":1730452668000,"email":"2678885646@qq.com","author":"PaperDragon-SH","message":"optimize"},{"hash":"e8d3e738fa02125b7bd03751b73db8b48a6ac481","time":1727010472000,"email":"2678885646@qq.com","author":"Paper-Dragon","message":"fixed markdown"},{"hash":"d74772409850c3fdf9cbc69297a8f8cef29f7ef7","time":1710838438000,"email":"2678885646@qq.com","author":"PaperDragon-SH","message":"MinIO格式化标题"},{"hash":"054c2b7f8f8b4d4062535169d69938af5fb08b13","time":1702539742000,"email":"2678885646@qq.com","author":"PaperDragon-SH","message":"图片显示问题"},{"hash":"392a519398b2e846f316619fbe831e100164de7c","time":1691939318000,"email":"2678885646@qq.com","author":"Paper-Dragon","message":"Create The Worid!"}]},"readingTime":{"minutes":0.69,"words":208},"filePathRelative":"note-book/MinIO/MinIO挂载到nfs不成功.md","excerpt":"\\n<h2>ERROR Unable to initialize backend: no locks available.</h2>\\n<p></p>\\n<p>服务器做了nas共享存储后，修改minio的数据目录为nas共享目录，启动minio服务失败，报错信息如上图所示：</p>\\n<p>从这个日志来看，应该是minio拿不到nfs文件系统的锁。\\n解决方案</p>\\n<pre><code>nfs挂载时加nolock参数\\n\\n使用nfsv4,而不是用nfsv3\\n</code></pre>\\n<p>参考</p>\\n<p>GitLab底层也是用的minio,GitLab官方文档是这么写的</p>\\n<p>File locking: GitLab requires advisory file locking, which is only supported natively in NFS version 4. NFSv3 also supports locking as long as Linux Kernel 2.6.5+ is used. We recommend using version 4 and do not specifically test NFSv3</p>","autoDesc":true}');export{m as comp,d as data};
