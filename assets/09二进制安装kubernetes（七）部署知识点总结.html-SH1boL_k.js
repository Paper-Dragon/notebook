import{ah as a,ai as s,an as t,am as r}from"./app-x_i33zP2.js";const i="/assets/1034759-20191120110308446-345298667-B7GoKLX-.png",n={};function o(p,e){return r(),s("div",null,e[0]||(e[0]=[t('<h1 id="二进制安装kubernetes-七-部署知识点总结" tabindex="-1"><a class="header-anchor" href="#二进制安装kubernetes-七-部署知识点总结"><span>二进制安装kubernetes（七）部署知识点总结</span></a></h1><p>1、k8s各个组件之间通信，在高版本中，基本都是使用TSL通信，所以申请证书，是必不可少的，而且建议使用二进制安装，或者在接手一套K8S集群的时候，第一件事情是检查证书有效期，证书过期或者TSL通信问题会报x509相关错误。</p><p>可以从k8s kubelet-kuberconfig 使用 echo &#39;证书&#39; | base64 -d 反解获得k8s证书(比如阿里云)</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># cfssl-certinfo -domain=ca.pem -cert=client.pem</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+i+`" alt="img"></p><p>2、在安装k8s运算节点的时候，建议关闭kubelet节点的swap交换分区，否则要在启动脚本中指定--fail-swap-on=&quot;false&quot;，在屋里内存足够大的情况下，建议关闭交换分区。</p><p>3、etcd在大规模集群中，可以跟apiserver、controller-manager、scheduler分开部署，但是apiserver、controller-manager、scheduler这三个服务，尽量部署在一起，因为controller-manager、scheduler跟apiserver通信是使用本机的127.0.0.1:8080端口进行通信，这样会节省网络资源。</p><p>4、linux内核版本大于3.8.X</p><p>5、使用supervisord管理服务的时候，为了避免在重启的时候出现端口存在(默认supervisord不会stop子进程)，需要在服务的.ini配置文件中添加以下两项：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>killasgroup=true  #这个东西主要用于，supervisord管理的子进程，这个子进程本身还有，子进程。那么我们如果仅仅干掉supervisord的子进程的话，子进程的子进程，有可能会变成孤儿进程。所以咱们可以设置可个选项，把整个该子进程的，整个进程组都干掉。 设置为true的话，一般killasgroup也会被设置为true。需要注意的是，该选项发送的是stop信号，默认为false。。非必须设置。</span></span>
<span class="line"><span>stopasgroup=true  #这个和上面的stopasgroup类似，不过发送的是kill信号</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,10)]))}const c=a(n,[["render",o]]),d=JSON.parse(`{"path":"/note-book/Kubernetes/09%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85kubernetes%EF%BC%88%E4%B8%83%EF%BC%89%E9%83%A8%E7%BD%B2%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html","title":"二进制安装kubernetes（七）部署知识点总结","lang":"zh-CN","frontmatter":{"description":"二进制安装kubernetes（七）部署知识点总结 1、k8s各个组件之间通信，在高版本中，基本都是使用TSL通信，所以申请证书，是必不可少的，而且建议使用二进制安装，或者在接手一套K8S集群的时候，第一件事情是检查证书有效期，证书过期或者TSL通信问题会报x509相关错误。 可以从k8s kubelet-kuberconfig 使用 echo '证书...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"二进制安装kubernetes（七）部署知识点总结\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-03-07T08:15:04.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Paper-Dragon\\",\\"url\\":\\"https://github.com/Paper-Dragon\\",\\"email\\":\\"2678885646@qq.com\\"}]}"],["meta",{"property":"og:url","content":"https://www.geekery.cn/note-book/Kubernetes/09%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85kubernetes%EF%BC%88%E4%B8%83%EF%BC%89%E9%83%A8%E7%BD%B2%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html"}],["meta",{"property":"og:site_name","content":"运维开发绿皮书"}],["meta",{"property":"og:title","content":"二进制安装kubernetes（七）部署知识点总结"}],["meta",{"property":"og:description","content":"二进制安装kubernetes（七）部署知识点总结 1、k8s各个组件之间通信，在高版本中，基本都是使用TSL通信，所以申请证书，是必不可少的，而且建议使用二进制安装，或者在接手一套K8S集群的时候，第一件事情是检查证书有效期，证书过期或者TSL通信问题会报x509相关错误。 可以从k8s kubelet-kuberconfig 使用 echo '证书..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-07T08:15:04.000Z"}],["meta",{"property":"article:modified_time","content":"2024-03-07T08:15:04.000Z"}]]},"git":{"createdTime":1691939318000,"updatedTime":1709799304000,"contributors":[{"name":"Paper-Dragon","username":"Paper-Dragon","email":"2678885646@qq.com","commits":1,"url":"https://github.com/Paper-Dragon"},{"name":"PaperDragon-SH","username":"PaperDragon-SH","email":"2678885646@qq.com","commits":3,"url":"https://github.com/PaperDragon-SH"}],"changelog":[{"hash":"d9487231a8c7ade839488b74acab413e440a9cab","time":1709799304000,"email":"2678885646@qq.com","author":"PaperDragon-SH","message":"sort"},{"hash":"e0a7ae42f69cf645f433f10580b4a6e84f4968c4","time":1709795863000,"email":"2678885646@qq.com","author":"PaperDragon-SH","message":"二进制安装kubernetes（七） 部署知识点总结.assets"},{"hash":"51cde88d31badf76d82dba8c3389d8dcf4285171","time":1709795777000,"email":"2678885646@qq.com","author":"PaperDragon-SH","message":"二进制安装kubernetes（七）部署知识点总结"},{"hash":"392a519398b2e846f316619fbe831e100164de7c","time":1691939318000,"email":"2678885646@qq.com","author":"Paper-Dragon","message":"Create The Worid!"}]},"readingTime":{"minutes":1.66,"words":499},"filePathRelative":"note-book/Kubernetes/09二进制安装kubernetes（七）部署知识点总结.md","localizedDate":"2023年8月13日","excerpt":"\\n<p>1、k8s各个组件之间通信，在高版本中，基本都是使用TSL通信，所以申请证书，是必不可少的，而且建议使用二进制安装，或者在接手一套K8S集群的时候，第一件事情是检查证书有效期，证书过期或者TSL通信问题会报x509相关错误。</p>\\n<p>可以从k8s kubelet-kuberconfig 使用 echo '证书' | base64 -d 反解获得k8s证书(比如阿里云)</p>\\n<div class=\\"language- line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span># cfssl-certinfo -domain=ca.pem -cert=client.pem</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>","autoDesc":true}`);export{c as comp,d as data};
