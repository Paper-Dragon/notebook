import{aq as a,ar as e,aw as s,av as n}from"./app-CIflzKGN.js";const t="/assets/image-20231110113058910-D1JdPi76.png",h={};function r(d,i){return n(),e("div",null,i[0]||(i[0]=[s('<h1 id="英伟达开源驱动和闭源驱动冲突问题" tabindex="-1"><a class="header-anchor" href="#英伟达开源驱动和闭源驱动冲突问题"><span>英伟达开源驱动和闭源驱动冲突问题</span></a></h1><h2 id="起因" tabindex="-1"><a class="header-anchor" href="#起因"><span>起因</span></a></h2><p>今天朋友安装驱动遇到了一些问题，给了一张日志图片问我怎么办，我看着显示报错最后一行显示 PCI-E xxx.xxxx.xxx nouveau。就是nvidia显卡驱动的问题八九不离十了。</p><p>nvidia给了不同类型的驱动多种版本，开源驱动对Linux支持较差，在切换闭源官方驱动的时候经常出现各种问题。</p><p><img src="'+t+'" alt="image-20231110113058910"></p><p>下面是安装步骤的总结</p><h2 id="正常安装步骤" tabindex="-1"><a class="header-anchor" href="#正常安装步骤"><span>正常安装步骤</span></a></h2><h3 id="检查开源驱动的存在情况" tabindex="-1"><a class="header-anchor" href="#检查开源驱动的存在情况"><span>检查开源驱动的存在情况</span></a></h3><p>运行如下指令：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lsmod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nouveau</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果有内容输出，则说明nouveau已被启用，需要执行下一个步骤以将nouveau禁用；</p><p>如果没有内容输出，则可以直接安装nvidia驱动。</p><h3 id="开源驱动加入黑名单" tabindex="-1"><a class="header-anchor" href="#开源驱动加入黑名单"><span>开源驱动加入黑名单</span></a></h3><p>blacklist.conf文件的位置：/etc/modprobe.d/blacklist.conf</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/modprobe.d/blacklist.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在该文件最后插入以下两行内容：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">blacklist</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nouveau</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">options</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nouveau</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> modeset=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="更新验证生效" tabindex="-1"><a class="header-anchor" href="#更新验证生效"><span>更新验证生效</span></a></h3><p>通过如下命令更新系统，使刚刚修改的文件生效：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">update-initramfs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="安装闭源驱动" tabindex="-1"><a class="header-anchor" href="#安装闭源驱动"><span>安装闭源驱动</span></a></h3><p>首先通过如下命令获取该.run文件的执行权限。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">chmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +x</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> NVIDIA-Linux-x86_64-535.54.03.run</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>通过如下命令运行下载好的.run文件：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./NVIDIA-Linux-x86_64-535.54.03.run</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="重启" tabindex="-1"><a class="header-anchor" href="#重启"><span>重启</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">reboot</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="报错处理" tabindex="-1"><a class="header-anchor" href="#报错处理"><span>报错处理</span></a></h2><h3 id="无法安装" tabindex="-1"><a class="header-anchor" href="#无法安装"><span>无法安装</span></a></h3><blockquote><p>you appear to be running an x server; please exit x before installing.`</p></blockquote><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./NVIDIAxxxx.run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --no-x-check</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="无法开机" tabindex="-1"><a class="header-anchor" href="#无法开机"><span>无法开机</span></a></h3><h4 id="引导界面更改mode" tabindex="-1"><a class="header-anchor" href="#引导界面更改mode"><span>引导界面更改mode</span></a></h4><p>进入grub界面，将这个界面的最后部分的“quiet splash —”改为“nomodeset”。F10保存，就可以进入安装界面，进行安装。</p><h4 id="按照正常安装步骤进行安装" tabindex="-1"><a class="header-anchor" href="#按照正常安装步骤进行安装"><span>按照正常安装步骤进行安装</span></a></h4>',35)]))}const p=a(h,[["render",r],["__file","英伟达开源驱动和闭源驱动冲突问题.html.vue"]]),o=JSON.parse('{"path":"/note-book/AI-Training/%E8%8B%B1%E4%BC%9F%E8%BE%BE%E5%BC%80%E6%BA%90%E9%A9%B1%E5%8A%A8%E5%92%8C%E9%97%AD%E6%BA%90%E9%A9%B1%E5%8A%A8%E5%86%B2%E7%AA%81%E9%97%AE%E9%A2%98.html","title":"英伟达开源驱动和闭源驱动冲突问题","lang":"zh-CN","frontmatter":{"0":"c","1":"a","2":"t","3":"e","4":"g","5":"o","6":"r","7":"y","8":"：","9":" ","10":"N","11":"v","12":"i","13":"d","14":"i","15":"a","description":"英伟达开源驱动和闭源驱动冲突问题 起因 今天朋友安装驱动遇到了一些问题，给了一张日志图片问我怎么办，我看着显示报错最后一行显示 PCI-E xxx.xxxx.xxx nouveau。就是nvidia显卡驱动的问题八九不离十了。 nvidia给了不同类型的驱动多种版本，开源驱动对Linux支持较差，在切换闭源官方驱动的时候经常出现各种问题。 image-...","head":[["meta",{"property":"og:url","content":"https://www.geekery.cn/note-book/AI-Training/%E8%8B%B1%E4%BC%9F%E8%BE%BE%E5%BC%80%E6%BA%90%E9%A9%B1%E5%8A%A8%E5%92%8C%E9%97%AD%E6%BA%90%E9%A9%B1%E5%8A%A8%E5%86%B2%E7%AA%81%E9%97%AE%E9%A2%98.html"}],["meta",{"property":"og:site_name","content":"运维开发绿皮书"}],["meta",{"property":"og:title","content":"英伟达开源驱动和闭源驱动冲突问题"}],["meta",{"property":"og:description","content":"英伟达开源驱动和闭源驱动冲突问题 起因 今天朋友安装驱动遇到了一些问题，给了一张日志图片问我怎么办，我看着显示报错最后一行显示 PCI-E xxx.xxxx.xxx nouveau。就是nvidia显卡驱动的问题八九不离十了。 nvidia给了不同类型的驱动多种版本，开源驱动对Linux支持较差，在切换闭源官方驱动的时候经常出现各种问题。 image-..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-06-17T03:28:49.000Z"}],["meta",{"property":"article:modified_time","content":"2024-06-17T03:28:49.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"英伟达开源驱动和闭源驱动冲突问题\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-06-17T03:28:49.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"PaperDragon\\",\\"url\\":\\"https://github.com/Paper-Dragon\\",\\"email\\":\\"2678885646@qq.com\\"}]}"]]},"git":{"createdTime":1699592127000,"updatedTime":1718594929000,"contributors":[{"name":"PaperDragon-SH","username":"PaperDragon-SH","email":"2678885646@qq.com","commits":4,"url":"https://github.com/PaperDragon-SH"}]},"readingTime":{"minutes":1.47,"words":441},"filePathRelative":"note-book/AI-Training/英伟达开源驱动和闭源驱动冲突问题.md","localizedDate":"2023年11月10日","excerpt":"\\n<h2>起因</h2>\\n<p>今天朋友安装驱动遇到了一些问题，给了一张日志图片问我怎么办，我看着显示报错最后一行显示 PCI-E xxx.xxxx.xxx\\nnouveau。就是nvidia显卡驱动的问题八九不离十了。</p>\\n<p>nvidia给了不同类型的驱动多种版本，开源驱动对Linux支持较差，在切换闭源官方驱动的时候经常出现各种问题。</p>\\n<p></p>\\n<p>下面是安装步骤的总结</p>\\n<h2>正常安装步骤</h2>\\n<h3>检查开源驱动的存在情况</h3>\\n<p>运行如下指令：</p>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" data-title=\\"bash\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">lsmod</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> | </span><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">grep</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> nouveau</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{p as comp,o as data};
