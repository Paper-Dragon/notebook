import{ah as i,ai as a,ar as n,am as e}from"./app-CVDXZq0x.js";const t={};function h(l,s){return e(),a("div",null,s[0]||(s[0]=[n(`<h1 id="api规范" tabindex="-1"><a class="header-anchor" href="#api规范"><span>API规范</span></a></h1><h2 id="总体检查" tabindex="-1"><a class="header-anchor" href="#总体检查"><span>总体检查</span></a></h2><h3 id="livez-verbose-存活检查" tabindex="-1"><a class="header-anchor" href="#livez-verbose-存活检查"><span>/livez?verbose 存活检查</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">curl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://127.0.0.1:6443/livez?verbose</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -k</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#--cacert /etc/kubernetes/pki/ca.pem </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#--cert /etc/kubernetes/pki/apiserver.pem </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#--key /etc/kubernetes/pki/apiserver-key.pem</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 不加verbose只会打印OK</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>显示如下结果</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]ping ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]log ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]etcd ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/start-kube-apiserver-admission-initializer ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/generic-apiserver-start-informers ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/priority-and-fairness-config-consumer ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/priority-and-fairness-filter ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/storage-object-count-tracker-hook ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/start-apiextensions-informers ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/start-apiextensions-controllers ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/crd-informer-synced ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/bootstrap-controller ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/rbac/bootstrap-roles ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/scheduling/bootstrap-system-priority-classes ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/priority-and-fairness-config-producer ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/start-cluster-authentication-info-controller ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/aggregator-reload-proxy-client-cert ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/start-kube-aggregator-informers ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/apiservice-registration-controller ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/apiservice-status-available-controller ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/kube-apiserver-autoregistration ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]autoregister-completion ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/apiservice-openapi-controller ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/apiservice-openapiv3-controller ok</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">livez</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> check</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> passed</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="healthz-verbose-健康检查" tabindex="-1"><a class="header-anchor" href="#healthz-verbose-健康检查"><span>/healthz?verbose 健康检查</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">curl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://127.0.0.1:6443/healthz?verbose</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -k</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 不加verbose只会打印OK</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>显示如下结果</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]ping ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]log ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]etcd ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/start-kube-apiserver-admission-initializer ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/generic-apiserver-start-informers ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/priority-and-fairness-config-consumer ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/priority-and-fairness-filter ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/storage-object-count-tracker-hook ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/start-apiextensions-informers ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/start-apiextensions-controllers ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/crd-informer-synced ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/bootstrap-controller ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/rbac/bootstrap-roles ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/scheduling/bootstrap-system-priority-classes ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/priority-and-fairness-config-producer ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/start-cluster-authentication-info-controller ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/aggregator-reload-proxy-client-cert ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/start-kube-aggregator-informers ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/apiservice-registration-controller ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/apiservice-status-available-controller ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/kube-apiserver-autoregistration ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]autoregister-completion ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/apiservice-openapi-controller ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/apiservice-openapiv3-controller ok</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">healthz</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> check</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> passed</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="readyz-verbose-存活检查" tabindex="-1"><a class="header-anchor" href="#readyz-verbose-存活检查"><span>/readyz?verbose 存活检查</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">curl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://127.0.0.1:6443/readyz?verbose</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -k</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 不加verbose只会打印OK</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>显示如下结果</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@k8s-master01 bootstrap]# curl --cacert /etc/kubernetes/pki/ca.pem --cert /etc/kubernetes/pki/apiserver.pem --key /etc/kubernetes/pki/apiserver-key.pem</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]ping ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]log ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]etcd ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]etcd-readiness ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]informer-sync ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/start-kube-apiserver-admission-initializer ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/generic-apiserver-start-informers ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/priority-and-fairness-config-consumer ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/priority-and-fairness-filter ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/storage-object-count-tracker-hook ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/start-apiextensions-informers ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/start-apiextensions-controllers ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/crd-informer-synced ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/bootstrap-controller ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/rbac/bootstrap-roles ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/scheduling/bootstrap-system-priority-classes ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/priority-and-fairness-config-producer ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/start-cluster-authentication-info-controller ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/aggregator-reload-proxy-client-cert ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/start-kube-aggregator-informers ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/apiservice-registration-controller ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/apiservice-status-available-controller ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/kube-apiserver-autoregistration ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]autoregister-completion ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/apiservice-openapi-controller ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]poststarthook/apiservice-openapiv3-controller ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]shutdown ok</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">readyz</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> check</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> passed</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="kube-controller-manager" tabindex="-1"><a class="header-anchor" href="#kube-controller-manager"><span>kube-controller-manager</span></a></h2><h3 id="健康检查-10257" tabindex="-1"><a class="header-anchor" href="#健康检查-10257"><span>健康检查 10257</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">curl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -k</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://11.0.1.201:10257/healthz</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">curl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -k</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://11.0.1.201:10257/healthz?verbose</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-k</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 允许不验证ssl证书</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-json"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]leaderElection ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]podgc ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]horizontalpodautoscaling ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]csrcleaner ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]clusterrole-aggregation ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]ephemeral-volume ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]endpointslicemirroring ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]garbagecollector ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]daemonset ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]csrapproving ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]attachdetach ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]serviceaccount ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]resourcequota ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]disruption ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]cronjob ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]ttl ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]persistentvolume-binder ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]endpoint ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]pv-protection ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]nodeipam ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]ttl-after-finished ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]tokencleaner ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]csrsigning ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]endpointslice ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]deployment ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]bootstrapsigner ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]nodelifecycle ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]persistentvolume-expander ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]replicationcontroller ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]job ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]replicaset ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]statefulset ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]pvc-protection ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]root-ca-cert-publisher ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]namespace ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">healthz check passed</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="kube-scheduler" tabindex="-1"><a class="header-anchor" href="#kube-scheduler"><span>kube-scheduler</span></a></h2><h3 id="健康检查-10259" tabindex="-1"><a class="header-anchor" href="#健康检查-10259"><span>健康检查 10259</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">curl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -k</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://11.0.1.201:10259/healthz?verbose</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>结果</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]leaderElection ok</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">healthz</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> check</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> passed</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="kubelet" tabindex="-1"><a class="header-anchor" href="#kubelet"><span>kubelet</span></a></h2><h3 id="健康检查-10248" tabindex="-1"><a class="header-anchor" href="#健康检查-10248"><span>健康检查 10248</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">curl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:10248/healthz?verbose</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> curl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:10248/healthz?verbose</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]ping ok</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">healthz</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> check</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> passed</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="只读端口-10255" tabindex="-1"><a class="header-anchor" href="#只读端口-10255"><span>只读端口 10255</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">curl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> http://11.0.1.201:10255/healthz?verbose</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]ping ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]log ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]syncloop ok</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">healthz</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> check</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> passed</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="加密端口-10250" tabindex="-1"><a class="header-anchor" href="#加密端口-10250"><span>加密端口 10250</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">curl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -k</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://11.0.1.201:10250/healthz?verbose</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --cacert</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/kubernetes/pki/ca.pem</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --cert</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/kubernetes/pki/apiserver.pem</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --key</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/kubernetes/pki/apiserver-key.pem</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]ping ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]log ok</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]syncloop ok</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">healthz</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> check</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> passed</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="kube-proxy" tabindex="-1"><a class="header-anchor" href="#kube-proxy"><span>kube-proxy</span></a></h2><h3 id="metrics-10249" tabindex="-1"><a class="header-anchor" href="#metrics-10249"><span><strong>metrics</strong> 10249</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">curl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:10249/healthz?verbose</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[+]ping ok</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">healthz</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> check</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> passed</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="健康检查-10256" tabindex="-1"><a class="header-anchor" href="#健康检查-10256"><span>健康检查 10256</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">curl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> http://11.0.1.201:10256/healthz?verbose</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;lastUpdated&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;2022-12-11 15:57:27.988339654 +0800 CST m=+12402.346822757&quot;,&quot;currentTime&quot;:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;2022-12-11 15:57:27.988339654 +0800 CST m=+12402.346822757&quot;}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,37)]))}const p=i(t,[["render",h]]),r=JSON.parse('{"path":"/note-book/Kubernetes/Kubernetes%20Api%20Endpoint.html","title":"API规范","lang":"zh-CN","frontmatter":{"description":"API规范 总体检查 /livez?verbose 存活检查 显示如下结果 /healthz?verbose 健康检查 显示如下结果 /readyz?verbose 存活检查 显示如下结果 kube-controller-manager 健康检查 10257 kube-scheduler 健康检查 10259 结果 kubelet 健康检查 10248...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"API规范\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-08-13T15:08:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Paper-Dragon\\",\\"url\\":\\"https://github.com/Paper-Dragon\\",\\"email\\":\\"2678885646@qq.com\\"}]}"],["meta",{"property":"og:url","content":"https://www.geekery.cn/note-book/Kubernetes/Kubernetes%20Api%20Endpoint.html"}],["meta",{"property":"og:site_name","content":"运维开发绿皮书"}],["meta",{"property":"og:title","content":"API规范"}],["meta",{"property":"og:description","content":"API规范 总体检查 /livez?verbose 存活检查 显示如下结果 /healthz?verbose 健康检查 显示如下结果 /readyz?verbose 存活检查 显示如下结果 kube-controller-manager 健康检查 10257 kube-scheduler 健康检查 10259 结果 kubelet 健康检查 10248..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-08-13T15:08:38.000Z"}],["meta",{"property":"article:modified_time","content":"2023-08-13T15:08:38.000Z"}]]},"git":{"createdTime":1691939318000,"updatedTime":1691939318000,"contributors":[{"name":"Paper-Dragon","username":"Paper-Dragon","email":"2678885646@qq.com","commits":1,"url":"https://github.com/Paper-Dragon"}],"changelog":[{"hash":"392a519398b2e846f316619fbe831e100164de7c","time":1691939318000,"email":"2678885646@qq.com","author":"Paper-Dragon","message":"Create The Worid!"}]},"readingTime":{"minutes":2.3,"words":691},"filePathRelative":"note-book/Kubernetes/Kubernetes Api Endpoint.md","excerpt":"\\n<h2>总体检查</h2>\\n<h3>/livez?verbose 存活检查</h3>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code class=\\"language-bash\\"><span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">curl</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> https://127.0.0.1:6443/livez?verbose</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> -k</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\">#--cacert /etc/kubernetes/pki/ca.pem </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\">#--cert /etc/kubernetes/pki/apiserver.pem </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\">#--key /etc/kubernetes/pki/apiserver-key.pem</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\"># 不加verbose只会打印OK</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{p as comp,r as data};
