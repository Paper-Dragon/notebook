import{ah as s,ai as a,an as n,am as e}from"./app-DyiN31aH.js";const t={};function l(h,i){return e(),a("div",null,i[0]||(i[0]=[n(`<h1 id="gitlab的ci中日志超过4194304bytes的问题" tabindex="-1"><a class="header-anchor" href="#gitlab的ci中日志超过4194304bytes的问题"><span>GitLab的CI中日志超过4194304bytes的问题</span></a></h1><blockquote><p>报错信息： 在GitLab面板的job里面显示日志超过4MB无法继续显示更多日志，在写gitlab-ci文件的时候如果遇到报错根本无法调试，这是一个致命的问题。尤其是xcode编译xcarchive然后再打包为ipa文件的时候，日志动不动就是5MB多，下面的文档给出解决方案。</p><p>Job&#39;s log exceeded limit of 4194304 bytes</p></blockquote><h2 id="问题的原因" tabindex="-1"><a class="header-anchor" href="#问题的原因"><span>问题的原因</span></a></h2><p>根据描述及任务执行状态的初步判断，是因为控制台输出的信息量过大，超出了GitLab Runner默认允许的大小。</p><h2 id="解决方法" tabindex="-1"><a class="header-anchor" href="#解决方法"><span>解决方法</span></a></h2><ul><li>找到gitlab-runner的配置文件，（如果找不到可以使用命令 <code>gitlab-runner list</code> 命令能够看到字段ConfigFile，即为当前使用的runner配置）</li><li>在runner字段下添加output_limit字段设置大小，我这写为1048576大小，也就是最大1G</li><li>重启runner</li></ul><p>在mac中如果使用的是brew安装的runner，默认配置文件在</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /Users/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">用户</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">名&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/.gitlab-runner/config.toml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>修改好的配置</p><div class="language-toml line-numbers-mode" data-highlighter="shiki" data-ext="toml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">concurrent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">check_interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">shutdown_timeout</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">session_server</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  session_timeout</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1800</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[[</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">runners</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;C4a0-170 Mac Bash 6c32g500g&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  url</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://gitlabr.c4a.com/&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">34</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  token</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;EK...BM&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  token_obtained_at</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2024-06-06T09:37:57Z</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  token_expires_at</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0001-01-01T00:00:00Z</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  executor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;shell&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  output_limit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1048576</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  [</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">runners</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">custom_build_dir</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  [</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">runners</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cache</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    MaxUploadedArchiveSize</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    [</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">runners</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cache</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">s3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    [</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">runners</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cache</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gcs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    [</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">runners</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cache</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">azure</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重启runner</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gitlab-runner</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> restart</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="结果" tabindex="-1"><a class="header-anchor" href="#结果"><span>结果</span></a></h2><p>经过验证，完美解决问题。</p>`,14)]))}const k=s(t,[["render",l]]),r=JSON.parse(`{"path":"/note-book/Gitlab/GitLab%E7%9A%84CI%E4%B8%AD%E6%97%A5%E5%BF%97%E8%B6%85%E8%BF%874194304bytes%E7%9A%84%E9%97%AE%E9%A2%98.html","title":"GitLab的CI中日志超过4194304bytes的问题","lang":"zh-CN","frontmatter":{"description":"GitLab的CI中日志超过4194304bytes的问题 报错信息： 在GitLab面板的job里面显示日志超过4MB无法继续显示更多日志，在写gitlab-ci文件的时候如果遇到报错根本无法调试，这是一个致命的问题。尤其是xcode编译xcarchive然后再打包为ipa文件的时候，日志动不动就是5MB多，下面的文档给出解决方案。 Job's lo...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"GitLab的CI中日志超过4194304bytes的问题\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-11-15T03:02:22.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Paper-Dragon\\",\\"url\\":\\"https://github.com/Paper-Dragon\\",\\"email\\":\\"2678885646@qq.com\\"}]}"],["meta",{"property":"og:url","content":"https://www.geekery.cn/note-book/Gitlab/GitLab%E7%9A%84CI%E4%B8%AD%E6%97%A5%E5%BF%97%E8%B6%85%E8%BF%874194304bytes%E7%9A%84%E9%97%AE%E9%A2%98.html"}],["meta",{"property":"og:site_name","content":"运维开发绿皮书"}],["meta",{"property":"og:title","content":"GitLab的CI中日志超过4194304bytes的问题"}],["meta",{"property":"og:description","content":"GitLab的CI中日志超过4194304bytes的问题 报错信息： 在GitLab面板的job里面显示日志超过4MB无法继续显示更多日志，在写gitlab-ci文件的时候如果遇到报错根本无法调试，这是一个致命的问题。尤其是xcode编译xcarchive然后再打包为ipa文件的时候，日志动不动就是5MB多，下面的文档给出解决方案。 Job's lo..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-15T03:02:22.000Z"}],["meta",{"property":"article:modified_time","content":"2024-11-15T03:02:22.000Z"}]]},"git":{"createdTime":1731639742000,"updatedTime":1731639742000,"contributors":[{"name":"PaperDragon-SH","username":"PaperDragon-SH","email":"2678885646@qq.com","commits":1,"url":"https://github.com/PaperDragon-SH"}],"changelog":[{"hash":"3ac688edf46cae106b882d8ba587e0190d6da70b","time":1731639742000,"email":"2678885646@qq.com","author":"PaperDragon-SH","message":"GitLab的CI中日志超过4194304bytes的问题"}]},"readingTime":{"minutes":1.14,"words":342},"filePathRelative":"note-book/Gitlab/GitLab的CI中日志超过4194304bytes的问题.md","excerpt":"\\n<blockquote>\\n<p>报错信息： 在GitLab面板的job里面显示日志超过4MB无法继续显示更多日志，在写gitlab-ci文件的时候如果遇到报错根本无法调试，这是一个致命的问题。尤其是xcode编译xcarchive然后再打包为ipa文件的时候，日志动不动就是5MB多，下面的文档给出解决方案。</p>\\n<p>Job's log exceeded limit of 4194304 bytes</p>\\n</blockquote>\\n<h2>问题的原因</h2>\\n<p>根据描述及任务执行状态的初步判断，是因为控制台输出的信息量过大，超出了GitLab Runner默认允许的大小。</p>","autoDesc":true}`);export{k as comp,r as data};
