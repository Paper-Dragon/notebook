import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{aj as e,ao as a,am as t}from"./app-ZcCElEx9.js";const n="/assets/screen1-Da2YtxTZ.jpg",l="/assets/screen3-ByclnYTy.jpg",h="/assets/screen4-CkAwHLMx.jpg",r="/assets/screen6-C-x3c_gk.jpg",p="/assets/screen8-C9Bg-BuB.jpg",d="/assets/screen9-DIn3ZItQ.jpg",k="/assets/screen10-CXlxTDa3.jpg",g="/assets/screen12-BrbxkgZ_.jpg",o="/assets/screen13-D45r80Ew.jpg",c="/assets/screen15-trOTTlvy.jpg",b="/assets/screen16-XS-Lujnx.jpg",u="/assets/screen17-BTPon_Hp.jpg",y="/assets/screen18-mV93xW3c.jpg",m="/assets/screen19-DyZ2NvXO.jpg",A="/assets/screen20-o5io-Sic.jpg",F="/assets/screen22--eja4_ZG.jpg",v="/assets/screen24-U-gr5S_J.jpg",f="/assets/screen25-BvzyILdb.jpg",C="/assets/screen26-BvGdXST8.jpg",_="/assets/screen27-qe12RH9l.jpg",x="/assets/screen28-Bw2Gi8sg.jpg",E="/assets/screen29-CdXtQJgq.jpg",B="/assets/screen30-DrHh2L23.jpg",z="/assets/screen31-7b8eIx3I.jpg",D="/assets/screen33-CUpiRsWL.jpg",j="/assets/screen35-CGa-Poy5.jpg",R="/assets/screen37-Vz_CWIaP.jpg",O="/assets/screen39-B7fExP9D.jpg",U="/assets/screen40-dTzIDWII.jpg",q="/assets/screen42-DMH0_ljp.jpg",P={};function T(w,i){return t(),e("div",null,i[0]||(i[0]=[a('<h1 id="ubuntu安装openresty教程" tabindex="-1"><a class="header-anchor" href="#ubuntu安装openresty教程"><span>Ubuntu安装OpenResty教程</span></a></h1><blockquote><p>参考链接： https://blog.openresty.com.cn/cn/ubuntu20-or-install/</p><p>适合于Ubuntu各个版本，并非只有20.04。都可以被成功an&#39;z</p></blockquote><p>今天我想演示一下如何通过 <code>apt-get</code> 在 Ubuntu 20.04 上安装 OpenResty 。</p><figure><img src="'+n+'" alt="截图 1" tabindex="0" loading="lazy"><figcaption>截图 1</figcaption></figure><p>我们将在这个视频中使用这个全新安装的 Ubuntu 20.04 。</p><p>我们可以到 <a href="http://openresty.org/cn/linux-packages.html#ubuntu" target="_blank" rel="noopener noreferrer">openresty.org 网站</a>上找到相关的说明，这里可以找到所有启用 APT 仓库和安装 OpenResty Deb 包的命令。</p><figure><img src="'+l+'" alt="截图 3" tabindex="0" loading="lazy"><figcaption>截图 3</figcaption></figure><p>回到我们的 Ubuntu 20.04 系统。如果你已经有服务监听本地 80 端口，那么你应该先禁用它。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lsof</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i:80</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+h+'" alt="截图 4" tabindex="0" loading="lazy"><figcaption>截图 4</figcaption></figure><p>在这里，我们没有任何这样的服务。</p><p>首先，要确保系统时间正确。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ntpdate</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> time.google.com</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+r+'" alt="截图 6" tabindex="0" loading="lazy"><figcaption>截图 6</figcaption></figure><p>你可能想在这里使用你附近的其他 NTP 服务器。</p><p>我们应该通过添加 GPG 公钥来安装一些需要的组件。这些可以在之后删除。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt-get</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --no-install-recommends</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> wget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gnupg</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ca-certificates</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+p+'" alt="截图 8" tabindex="0" loading="lazy"><figcaption>截图 8</figcaption></figure><p>然后导入我们的 GPG 密钥。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wget</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -O</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://openresty.org/package/pubkey.gpg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt-key</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> add</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+d+`" alt="截图 9" tabindex="0" loading="lazy"><figcaption>截图 9</figcaption></figure><p>接着添加我们的官方 APT 库。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;deb http://openresty.org/package/ubuntu $(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lsb_release</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -sc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">) main&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">openresty.list</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> openresty.list</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/apt/sources.list.d/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+k+'" alt="截图 10" tabindex="0" loading="lazy"><figcaption>截图 10</figcaption></figure><p>请注意，这是针对 <code>x86_64</code> 或 <code>amd64</code> 系统的。</p><p>对于 Aarch64 或 ARM64 系统，你应该使用这个 URL 来代替。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;deb http://openresty.org/package/arm64/ubuntu $(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lsb_release</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -sc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">) main&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+g+'" alt="截图 12" tabindex="0" loading="lazy"><figcaption>截图 12</figcaption></figure><p>现在更新 APT 索引。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> update</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+o+'" alt="截图 13" tabindex="0" loading="lazy"><figcaption>截图 13</figcaption></figure><p>请注意，这里我们需要 <code>sudo</code>。</p><p>现在是时候安装我们的主要 RPM 包，<code>openresty</code>。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt-get</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --no-install-recommends</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> openresty</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+c+'" alt="截图 15" tabindex="0" loading="lazy"><figcaption>截图 15</figcaption></figure><p>检查 <code>openresty</code> 可执行文件是否可用。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">which</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> openresty</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+b+'" alt="截图 16" tabindex="0" loading="lazy"><figcaption>截图 16</figcaption></figure><p>这个 <code>openresty</code> 可执行文件只是一个符号链接。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">file</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> `</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">which</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> openresty`</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+u+'" alt="截图 17" tabindex="0" loading="lazy"><figcaption>截图 17</figcaption></figure><p>并检查其版本。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">openresty</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -V</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+y+'" alt="截图 18" tabindex="0" loading="lazy"><figcaption>截图 18</figcaption></figure><p>我们可以像这样启动默认的 openresty 服务。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> start</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> openresty</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+m+'" alt="截图 19" tabindex="0" loading="lazy"><figcaption>截图 19</figcaption></figure><p>检查 nginx 进程是否启动并运行。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ps</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> aux</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nginx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+A+'" alt="截图 20" tabindex="0" loading="lazy"><figcaption>截图 20</figcaption></figure><p>完美。</p><p>用 <code>curl</code> 命令测试默认主页。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">curl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+F+'" alt="截图 22" tabindex="0" loading="lazy"><figcaption>截图 22</figcaption></figure><p>是的，它的工作。</p><p>但请注意，resty 命令行工具还没有安装。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">which</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> resty</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+v+'" alt="截图 24" tabindex="0" loading="lazy"><figcaption>截图 24</figcaption></figure><p>如果你想要它，那么你可以从同一个仓库安装 <code>openresty-resty</code> RPM 包。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt-get</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> openresty-resty</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+f+`" alt="截图 25" tabindex="0" loading="lazy"><figcaption>截图 25</figcaption></figure><p>现在应该可以了。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">which</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> resty</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">resty</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;print(&quot;Hello Resty&quot;)&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+C+'" alt="截图 26" tabindex="0" loading="lazy"><figcaption>截图 26</figcaption></figure><p>同样，如果你想使用 <code>restydoc</code> 命令行工具，你应该安装 <code>openresty-doc</code> 包。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt-get</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> openresty-restydoc</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+_+'" alt="截图 27" tabindex="0" loading="lazy"><figcaption>截图 27</figcaption></figure><p>现在也有了。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">restydoc</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> content_by_lua_file</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+x+'" alt="截图 28" tabindex="0" loading="lazy"><figcaption>截图 28</figcaption></figure><p>我们也可以安装 OPM 来安装更多由 OpenResty 社区贡献的 Lua 模块。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt-get</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> openresty-opm</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+E+'" alt="截图 29" tabindex="0" loading="lazy"><figcaption>截图 29</figcaption></figure><p>现在可以尝试安装 James Hurst 编写的 <code>lua-resty-http</code> 库。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> opm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pintsized/lua-resty-http</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+B+'" alt="截图 30" tabindex="0" loading="lazy"><figcaption>截图 30</figcaption></figure><p>试着用 <code>resty</code> 工具加载它。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">resty</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;require &quot;resty.http&quot;&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+z+'" alt="截图 31" tabindex="0" loading="lazy"><figcaption>截图 31</figcaption></figure><p>成功了！</p><p>还有一个 OpenResty 的调试构建，其中包括调试日志和所有启用的内部断言。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt-get</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> openresty-debug</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+D+'" alt="截图 33" tabindex="0" loading="lazy"><figcaption>截图 33</figcaption></figure><p>我们可以这样调用这个调试版的 openresty 。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">which</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> openresty-debug</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这个 <code>openresty-debug</code> 可执行文件也是一个符号链接。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">file</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> `</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">which</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> openresty-debug`</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+j+'" alt="截图 35" tabindex="0" loading="lazy"><figcaption>截图 35</figcaption></figure><p>我们不应该在生产中使用它，因为它比发行版慢得多。</p><p>此外，还有可以通过 Valgrind 检查内存问题的特殊构建。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> list</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> openresty-valgrind</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+R+`" alt="截图 37" tabindex="0" loading="lazy"><figcaption>截图 37</figcaption></figure><p>当你有内存问题要调试时，可以试试这些。我们可能会在以后的教程中涉及这些内容。</p><p>要将 OpenResty 包升级到最新版本，只需运行这些命令。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> update</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt-get</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --only-upgrade</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;openresty*&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+O+'" alt="截图 39" tabindex="0" loading="lazy"><figcaption>截图 39</figcaption></figure><p>检查我们 openresty 仓库中所有可用的软件包。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> list</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;openresty*&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">less</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+U+'" alt="截图 40" tabindex="0" loading="lazy"><figcaption>截图 40</figcaption></figure><p>这里有很多二进制包。</p><p>可以在网页上找到所有这些 Deb 包的详细文档，https://openresty.org/en/deb-packages.html ，有很多软件包供用户选择。</p><figure><img src="'+q+'" alt="截图 42" tabindex="0" loading="lazy"><figcaption>截图 42</figcaption></figure>',102)]))}const G=s(P,[["render",T],["__file","Ubuntu安装OpenResty教程.html.vue"]]),H=JSON.parse(`{"path":"/note-book/Nginx-OpenResty/Ubuntu%E5%AE%89%E8%A3%85OpenResty%E6%95%99%E7%A8%8B.html","title":"Ubuntu安装OpenResty教程","lang":"zh-CN","frontmatter":{"description":"Ubuntu安装OpenResty教程 参考链接： https://blog.openresty.com.cn/cn/ubuntu20-or-install/ 适合于Ubuntu各个版本，并非只有20.04。都可以被成功an'z 今天我想演示一下如何通过 apt-get 在 Ubuntu 20.04 上安装 OpenResty 。 截图 1截图 1 我...","head":[["meta",{"property":"og:url","content":"https://www.geekery.cn/note-book/Nginx-OpenResty/Ubuntu%E5%AE%89%E8%A3%85OpenResty%E6%95%99%E7%A8%8B.html"}],["meta",{"property":"og:site_name","content":"运维开发绿皮书"}],["meta",{"property":"og:title","content":"Ubuntu安装OpenResty教程"}],["meta",{"property":"og:description","content":"Ubuntu安装OpenResty教程 参考链接： https://blog.openresty.com.cn/cn/ubuntu20-or-install/ 适合于Ubuntu各个版本，并非只有20.04。都可以被成功an'z 今天我想演示一下如何通过 apt-get 在 Ubuntu 20.04 上安装 OpenResty 。 截图 1截图 1 我..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-05-29T02:44:55.000Z"}],["meta",{"property":"article:modified_time","content":"2024-05-29T02:44:55.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Ubuntu安装OpenResty教程\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-05-29T02:44:55.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"PaperDragon\\",\\"url\\":\\"https://github.com/Paper-Dragon\\",\\"email\\":\\"2678885646@qq.com\\"}]}"]]},"headers":[],"git":{"createdTime":1705983643000,"updatedTime":1716950695000,"contributors":[{"name":"PaperDragon-SH","email":"2678885646@qq.com","commits":1}]},"readingTime":{"minutes":4.03,"words":1209},"filePathRelative":"note-book/Nginx-OpenResty/Ubuntu安装OpenResty教程.md","localizedDate":"2024年1月23日","excerpt":"\\n<blockquote>\\n<p>参考链接： https://blog.openresty.com.cn/cn/ubuntu20-or-install/</p>\\n<p>适合于Ubuntu各个版本，并非只有20.04。都可以被成功an'z</p>\\n</blockquote>\\n<p>今天我想演示一下如何通过 <code>apt-get</code> 在 Ubuntu 20.04 上安装 OpenResty 。</p>\\n<figure><figcaption>截图 1</figcaption></figure>\\n<p>我们将在这个视频中使用这个全新安装的 Ubuntu 20.04 。</p>\\n<p>我们可以到 <a href=\\"http://openresty.org/cn/linux-packages.html#ubuntu\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">openresty.org 网站</a>上找到相关的说明，这里可以找到所有启用 APT 仓库和安装 OpenResty Deb 包的命令。</p>","autoDesc":true}`);export{G as comp,H as data};
