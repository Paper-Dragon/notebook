import{ah as s,ai as a,ar as n,am as i}from"./app-BIg6ez9O.js";const r="/assets/webp-16918409243531-BYjG9CrP.webp",t="/assets/image-20220516193153415-16918409997831-D6p3uS7G.png",l="/assets/image-20220516193203467-16918410015233-4X1RWepU.png",d={};function c(p,e){return i(),a("div",null,e[0]||(e[0]=[n('<h1 id="二进制安装kubernetes-四-kube-scheduler组件安装" tabindex="-1"><a class="header-anchor" href="#二进制安装kubernetes-四-kube-scheduler组件安装"><span>二进制安装kubernetes（四）kube-scheduler组件安装</span></a></h1><h2 id="介绍资料转载地址-https-www-jianshu-com-p-c4c60ccda8d0" tabindex="-1"><a class="header-anchor" href="#介绍资料转载地址-https-www-jianshu-com-p-c4c60ccda8d0"><span>介绍资料转载地址：https://www.jianshu.com/p/c4c60ccda8d0</span></a></h2><h2 id="kube-scheduler在集群中的作用" tabindex="-1"><a class="header-anchor" href="#kube-scheduler在集群中的作用"><span>kube-scheduler在集群中的作用</span></a></h2><p>kube-scheduler是以插件形式存在的组件，正因为以插件形式存在，所以其具有可扩展可定制的特性。kube-scheduler相当于整个集群的调度决策者，其通过预选和优选两个过程决定容器的最佳调度位置。</p><h2 id="kube-scheduler源码中的关键性调用链" tabindex="-1"><a class="header-anchor" href="#kube-scheduler源码中的关键性调用链"><span>kube-scheduler源码中的关键性调用链</span></a></h2><p><img src="'+r+`" alt="img"></p><p>kube-scheduler部署在hdss7-21,22上：</p><p>创建启动脚本：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># vi /opt/kubernetes/server/bin/kube-scheduler.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>#!/bin/sh</span></span>
<span class="line"><span>./kube-scheduler \\</span></span>
<span class="line"><span>  --leader-elect  \\</span></span>
<span class="line"><span>  --log-dir /data/logs/kubernetes/kube-scheduler \\</span></span>
<span class="line"><span>  --master http://127.0.0.1:8080 \\</span></span>
<span class="line"><span>  --v 2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行权限：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># chmod +x /opt/kubernetes/server/bin/kube-scheduler.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>创建日志存储目录：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># mkdir -p /data/logs/kubernetes/kube-scheduler</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>编辑supervisord脚本：红色部分第二台需要修改</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span> # vi /etc/supervisord.d/kube-scheduler.ini</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[program:kube-scheduler-7-21]</span></span>
<span class="line"><span>command=/opt/kubernetes/server/bin/kube-scheduler.sh                     ; the program (relative uses PATH, can take args)</span></span>
<span class="line"><span>numprocs=1                                                               ; number of processes copies to start (def 1)</span></span>
<span class="line"><span>directory=/opt/kubernetes/server/bin                                     ; directory to cwd to before exec (def no cwd)</span></span>
<span class="line"><span>autostart=true                                                           ; start at supervisord start (default: true)</span></span>
<span class="line"><span>autorestart=true                                                         ; retstart at unexpected quit (default: true)</span></span>
<span class="line"><span>startsecs=30                                                             ; number of secs prog must stay running (def. 1)</span></span>
<span class="line"><span>startretries=3                                                           ; max # of serial start failures (default 3)</span></span>
<span class="line"><span>exitcodes=0,2                                                            ; &#39;expected&#39; exit codes for process (default 0,2)</span></span>
<span class="line"><span>stopsignal=QUIT                                                          ; signal used to kill process (default TERM)</span></span>
<span class="line"><span>stopwaitsecs=10                                                          ; max num secs to wait b4 SIGKILL (default 10)</span></span>
<span class="line"><span>user=root                                                                ; setuid to this UNIX account to run the program</span></span>
<span class="line"><span>redirect_stderr=true                                                     ; redirect proc stderr to stdout (default false)</span></span>
<span class="line"><span>stdout_logfile=/data/logs/kubernetes/kube-scheduler/scheduler.stdout.log ; stderr log path, NONE for none; default AUTO</span></span>
<span class="line"><span>stdout_logfile_maxbytes=64MB                                             ; max # logfile bytes b4 rotation (default 50MB)</span></span>
<span class="line"><span>stdout_logfile_backups=4                                                 ; # of stdout logfile backups (default 10)</span></span>
<span class="line"><span>stdout_capture_maxbytes=1MB                                              ; number of bytes in &#39;capturemode&#39; (default 0)</span></span>
<span class="line"><span>stdout_events_enabled=false                                              ; emit events on stdout writes (default false)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更新supervisord：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># supervisorctl update</span></span>
<span class="line"><span># supervisorctl status</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+t+`" alt="image-20220516193153415"></p><p>检查一下状态：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># ln -s /opt/kubernetes/server/bin/kubectl /usr/bin/kubectl</span></span>
<span class="line"><span># kubectl get cs</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+l+'" alt="image-20220516193203467"></p><p>至此kube-scheduler已经安装完成，接下来安装kubelet。</p>',24)]))}const h=s(d,[["render",c]]),o=JSON.parse('{"path":"/note-book/Kubernetes/06%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85kubernetes%EF%BC%88%E5%9B%9B%EF%BC%89kube-scheduler%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85.html","title":"二进制安装kubernetes（四）kube-scheduler组件安装","lang":"zh-CN","frontmatter":{"description":"二进制安装kubernetes（四）kube-scheduler组件安装 介绍资料转载地址：https://www.jianshu.com/p/c4c60ccda8d0 kube-scheduler在集群中的作用 kube-scheduler是以插件形式存在的组件，正因为以插件形式存在，所以其具有可扩展可定制的特性。kube-scheduler相当于整...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"二进制安装kubernetes（四）kube-scheduler组件安装\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-03-07T08:15:04.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Paper-Dragon\\",\\"url\\":\\"https://github.com/Paper-Dragon\\",\\"email\\":\\"2678885646@qq.com\\"}]}"],["meta",{"property":"og:url","content":"https://www.geekery.cn/note-book/Kubernetes/06%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85kubernetes%EF%BC%88%E5%9B%9B%EF%BC%89kube-scheduler%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85.html"}],["meta",{"property":"og:site_name","content":"运维开发绿皮书"}],["meta",{"property":"og:title","content":"二进制安装kubernetes（四）kube-scheduler组件安装"}],["meta",{"property":"og:description","content":"二进制安装kubernetes（四）kube-scheduler组件安装 介绍资料转载地址：https://www.jianshu.com/p/c4c60ccda8d0 kube-scheduler在集群中的作用 kube-scheduler是以插件形式存在的组件，正因为以插件形式存在，所以其具有可扩展可定制的特性。kube-scheduler相当于整..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-07T08:15:04.000Z"}],["meta",{"property":"article:modified_time","content":"2024-03-07T08:15:04.000Z"}]]},"git":{"createdTime":1691939318000,"updatedTime":1709799304000,"contributors":[{"name":"Paper-Dragon","username":"Paper-Dragon","email":"2678885646@qq.com","commits":1,"url":"https://github.com/Paper-Dragon"},{"name":"PaperDragon-SH","username":"PaperDragon-SH","email":"2678885646@qq.com","commits":2,"url":"https://github.com/PaperDragon-SH"}],"changelog":[{"hash":"d9487231a8c7ade839488b74acab413e440a9cab","time":1709799304000,"email":"2678885646@qq.com","author":"PaperDragon-SH","message":"sort"},{"hash":"689ed979bcef4574230ed39e74804134c2169429","time":1709796454000,"email":"2678885646@qq.com","author":"PaperDragon-SH","message":"二进制安装kubernetes（四） kube-scheduler组件安装"},{"hash":"392a519398b2e846f316619fbe831e100164de7c","time":1691939318000,"email":"2678885646@qq.com","author":"Paper-Dragon","message":"Create The Worid!"}]},"readingTime":{"minutes":1.5,"words":449},"filePathRelative":"note-book/Kubernetes/06二进制安装kubernetes（四）kube-scheduler组件安装.md","excerpt":"\\n<h2>介绍资料转载地址：https://www.jianshu.com/p/c4c60ccda8d0</h2>\\n<h2>kube-scheduler在集群中的作用</h2>\\n<p>kube-scheduler是以插件形式存在的组件，正因为以插件形式存在，所以其具有可扩展可定制的特性。kube-scheduler相当于整个集群的调度决策者，其通过预选和优选两个过程决定容器的最佳调度位置。</p>\\n<h2>kube-scheduler源码中的关键性调用链</h2>\\n<p></p>\\n<p>kube-scheduler部署在hdss7-21,22上：</p>\\n<p>创建启动脚本：</p>\\n<div class=\\"language- line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code class=\\"language-\\"><span class=\\"line\\"><span># vi /opt/kubernetes/server/bin/kube-scheduler.sh</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{h as comp,o as data};
