import{a as i,c as n,g as a,o as l}from"./app-DGNtXnri.js";const e="/assets/907596-20180407215024091-433702120-DcmGx3Ar.png",p="/assets/907596-20180407215319157-2011576019--lW1XQlo.png",h="/assets/907596-20180407215527740-501171157-BZvFjYeG.png",t="/assets/907596-20180407224020893-587829372-DBoF6SBW.png",k="/assets/907596-20180407224119811-217734152-CTym0clA.png",d="/assets/907596-20180407224246905-832890893-CMqMkMWk.png",r="/assets/907596-20180407224259485-817815131-DCSLsop-.png",c="/assets/907596-20180407224504255-28838527-k4vTKrkT.png",g="/assets/907596-20180407224512191-301366982-DFK1p6in.png",v="/assets/907596-20180407224754246-1424015193-CkK9Knwc.png",m="/assets/907596-20180407224801293-2061544736-uB_VnAOc.png",A={};function o(F,s){return l(),n("div",null,[...s[0]||(s[0]=[a(`<h1 id="bind9之web管理namedmanager" tabindex="-1"><a class="header-anchor" href="#bind9之web管理namedmanager"><span>Bind9之Web管理NamedManager</span></a></h1><p>NamedManager 是一个基于Web的DNS管理系统，**可用来添加、调整和删除DNS的zones/records数据。**它使用Bind作为底层DNS服务，提供一个现代Ajax的Web界面，支持 IPv4和IPv6。该应用程序很稳定，在生产环境中使用没有任何问题。过多的介绍在此就不做说明了，下面说下NamedManager环境部署过程：</p><h2 id="_1-下载namedmanager的rpm安装包" tabindex="-1"><a class="header-anchor" href="#_1-下载namedmanager的rpm安装包"><span>1）下载NamedManager的rpm安装包</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@dns ~]# hostname</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dns.kevin.cn</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@dns named]# cat /etc/hosts</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">127.0.0.1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   localhost</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> localhost.localdomain</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> localhost4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> localhost4.localdomain4</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         localhost</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> localhost.localdomain</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> localhost6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> localhost6.localdomain6</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">192.168.10.206</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dns.kevin.cn</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@dns ~]# ifconfig |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 192.168</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          inet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> addr:192.168.10.206</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Bcast:192.168.10.255</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Mask:255.255.255.0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@dns named]# ping dns.kevin.cn</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">PING</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dns.kevin.cn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (192.168.10.206) 56(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">84</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) bytes of data.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">64</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bytes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dns.kevin.cn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (192.168.10.206): </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">icmp_seq</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">1</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> ttl</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">64</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> time</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">0.027</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ms</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">64</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bytes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dns.kevin.cn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (192.168.10.206): </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">icmp_seq</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">2</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> ttl</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">64</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> time</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">0.043</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ms</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">......</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@dns ~]# cd /usr/local/src/</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@dns src]# wget http://repos.jethrocarr.com/pub/amberdms/linux/centos/6/amberdms-custom/i386/namedmanager-bind-1.8.0-1.el6.noarch.rpm</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@dns src]# wget http://repos.jethrocarr.com/pub/amberdms/linux/centos/6/amberdms-custom/i386/namedmanager-www-1.8.0-1.el6.noarch.rpm</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@dns src]# ll</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">total</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1352</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-rw-r--r--.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  109584</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Dec</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 22</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  2013</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> namedmanager-bind-1.8.0-1.el6.noarch.rpm</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-rw-r--r--.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1270108</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Dec</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 22</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  2013</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> namedmanager-www-1.8.0-1.el6.noarch.rpm</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-安装namedmanager" tabindex="-1"><a class="header-anchor" href="#_2-安装namedmanager"><span>2）安装namedmanager</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@dns src]# yum install perl httpd mod_ssl mysql-server php php-intl php-ldap php-mysql php-soap php-xml</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>修改/etc/httpd/conf/httpd.conf</span></span>
<span class="line"><span>[root@dns src]# vim /etc/httpd/conf/httpd.conf</span></span>
<span class="line"><span>......</span></span>
<span class="line"><span>ServerName dns.kevin.cn:80</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>[root@dns src]# service mysqld start</span></span>
<span class="line"><span>[root@dns src]# service httpd start</span></span>
<span class="line"><span>[root@dns src]# lsof -i:3306</span></span>
<span class="line"><span>COMMAND   PID  USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span></span>
<span class="line"><span>mysqld  16589 mysql   10u  IPv4  77732      0t0  TCP *:mysql (LISTEN)</span></span>
<span class="line"><span>[root@dns src]# lsof -i:80</span></span>
<span class="line"><span>COMMAND   PID   USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span></span>
<span class="line"><span>httpd   16621   root    4u  IPv6  77759      0t0  TCP *:http (LISTEN)</span></span>
<span class="line"><span>httpd   16623 apache    4u  IPv6  77759      0t0  TCP *:http (LISTEN)</span></span>
<span class="line"><span>httpd   16624 apache    4u  IPv6  77759      0t0  TCP *:http (LISTEN)</span></span>
<span class="line"><span>httpd   16625 apache    4u  IPv6  77759      0t0  TCP *:http (LISTEN)</span></span>
<span class="line"><span>httpd   16626 apache    4u  IPv6  77759      0t0  TCP *:http (LISTEN)</span></span>
<span class="line"><span>httpd   16627 apache    4u  IPv6  77759      0t0  TCP *:http (LISTEN)</span></span>
<span class="line"><span>httpd   16628 apache    4u  IPv6  77759      0t0  TCP *:http (LISTEN)</span></span>
<span class="line"><span>httpd   16629 apache    4u  IPv6  77759      0t0  TCP *:http (LISTEN)</span></span>
<span class="line"><span>httpd   16630 apache    4u  IPv6  77759      0t0  TCP *:http (LISTEN)</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>[root@dns src]# chkconfig mysqld on</span></span>
<span class="line"><span>[root@dns src]# chkconfig httpd on</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>[root@dns src]# mysqladmin -u root password 123456</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>[root@dns src]# rpm -Uvh namedmanager-www-1.8.0-1.el6.noarch.rpm</span></span>
<span class="line"><span>[root@dns src]# cd /usr/share/namedmanager/resources/</span></span>
<span class="line"><span>[root@dns resources]# ./autoinstall.pl</span></span>
<span class="line"><span>autoinstall.pl</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>This script setups the NamedManager database components:</span></span>
<span class="line"><span> * NamedManager MySQL user</span></span>
<span class="line"><span> * NamedManager database</span></span>
<span class="line"><span> * NamedManager configuration files</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>THIS SCRIPT ONLY NEEDS TO BE RUN FOR THE VERY FIRST INSTALL OF NAMEDMANAGER.</span></span>
<span class="line"><span>DO NOT RUN FOR ANY OTHER REASON</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>Please enter MySQL root password (if any): 123456        //输入mysql密码</span></span>
<span class="line"><span>Searching ../sql/ for latest install schema...</span></span>
<span class="line"><span>../sql//version_20131222_install.sql is the latest file and will be used for the install.</span></span>
<span class="line"><span>Importing file ../sql//version_20131222_install.sql</span></span>
<span class="line"><span>Creating user...</span></span>
<span class="line"><span>Updating configuration file...</span></span>
<span class="line"><span>DB installation complete!</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>You can now login with the default username/password of setup/setup123 at http://localhost/namedmanager</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>[root@dns resources]# cd /usr/local/src/</span></span>
<span class="line"><span>[root@dns src]# yum install bind php-process</span></span>
<span class="line"><span>[root@dns src]# rpm -Uvh namedmanager-bind-1.8.0-1.el6.noarch.rpm</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>修改/etc/named.conf</span></span>
<span class="line"><span>[root@dns src]# cp /etc/named.conf /etc/named.conf.bak</span></span>
<span class="line"><span>[root@dns src]# vim /etc/named.conf</span></span>
<span class="line"><span>options {</span></span>
<span class="line"><span>        listen-on port 53 { any; };</span></span>
<span class="line"><span>//      listen-on-v6 port 53 { ::1; };</span></span>
<span class="line"><span>        directory &quot;/var/named&quot;;</span></span>
<span class="line"><span>        dump-file       &quot;/var/named/data/cache_dump.db&quot;;</span></span>
<span class="line"><span>        statistics-file &quot;/var/named/data/named_stats.txt&quot;;</span></span>
<span class="line"><span>        memstatistics-file &quot;/var/named/data/named_mem_stats.txt&quot;;</span></span>
<span class="line"><span>        allow-query     { any; };</span></span>
<span class="line"><span>        allow-query-cache     { any; };         //DNS查询的缓存功能。实际上不建议开启此功能，即删除这一行配置。如果打开了，当DNS解析修改后，因为缓存原因，需等待一段时间才能生效。</span></span>
<span class="line"><span>        recursion yes;</span></span>
<span class="line"><span>        forward first;</span></span>
<span class="line"><span>        forwarders {</span></span>
<span class="line"><span>            223.5.5.5;</span></span>
<span class="line"><span>            223.6.6.6;</span></span>
<span class="line"><span>            8.8.8.8;</span></span>
<span class="line"><span>            8.8.4.4;</span></span>
<span class="line"><span>          };</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>        dnssec-enable yes;</span></span>
<span class="line"><span>        dnssec-validation yes;</span></span>
<span class="line"><span>        dnssec-lookaside auto;</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>        bindkeys-file &quot;/etc/named.iscdlv.key&quot;;</span></span>
<span class="line"><span>        managed-keys-directory &quot;/var/named/dynamic&quot;;</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>        };</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>logging {                           </span></span>
<span class="line"><span>        channel default_debug {</span></span>
<span class="line"><span>        file &quot;data/named.run&quot;;</span></span>
<span class="line"><span>        severity dynamic;</span></span>
<span class="line"><span>        };</span></span>
<span class="line"><span>};</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>zone &quot;.&quot; {</span></span>
<span class="line"><span>        type hint;      </span></span>
<span class="line"><span>        file &quot;named.ca&quot;;</span></span>
<span class="line"><span>        };</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>include &quot;/etc/named.rfc1912.zones&quot;;</span></span>
<span class="line"><span>include &quot;/etc/named.root.key&quot;;</span></span>
<span class="line"><span>include &quot;/etc/named.namedmanager.conf&quot;;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>==========================================================</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>如果要bind可以在chroot的模式下运行</span></span>
<span class="line"><span>[root@dns src]# yum install bind-chroot</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>建立“/etc/named.namedmanager.conf”文件的硬连接</span></span>
<span class="line"><span>[root@dns src]# ln /etc/named.namedmanager.conf /var/named/chroot/etc/named.namedmanager.conf</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>如果不建立硬连接named启动时，会提示找不到“/etc/named.namedmanager.conf”。</span></span>
<span class="line"><span>这是因为：</span></span>
<span class="line"><span>bind-chroot是bind的一个功能，使bind可以在一个chroot的模式下运行。也就是说,bind运行时的/(根)目录,并不是系统真正的/(根)目录，只是系统中的一个子目录而已。</span></span>
<span class="line"><span>这样做的目的是为了提高安全性。因为在chroot的模式下，bind可以访问的范围仅限于这个子目录的范围里，无法进一步提升,进入到系统的其他目录中。</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>chroot可以改变程序运行时所参考的根目录(/)位置，即将某个特定的子目录作为程序的虚拟根目录，并且对程序运行时可以使用的系统资源，用户权限和所在目录进行严</span></span>
<span class="line"><span>格控制，程序只在这个虚拟的根目录下具有权限，一旦跳出该目录就无任何权限。例如在centos中，/var/name/chroot实际上是根目录(/)的虚拟目录，所以虚拟目录中的</span></span>
<span class="line"><span>/etc目录实际上是/var/named/chroot/etc目录，而/var/named目录实际上是/var/named/chroot/var/named目录。chroot功能的优点是：如果有黑客通过Bind侵入系统，也只能被限定在chroot目录及其子目录中，其破坏力也仅局限在该虚拟目录中，不会威胁到整个服务器</span></span>
<span class="line"><span>的安全。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>==========================================================</p><h2 id="_3-启动named服务" tabindex="-1"><a class="header-anchor" href="#_3-启动named服务"><span>3）启动named服务</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@dns src]# service named start</span></span>
<span class="line"><span>[root@dns src]# chkconfig named on</span></span>
<span class="line"><span>[root@dns src]# lsof -i:53</span></span>
<span class="line"><span>COMMAND   PID  USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span></span>
<span class="line"><span>named   16864 named   20u  IPv4  81946      0t0  TCP localhost:domain (LISTEN)</span></span>
<span class="line"><span>named   16864 named   21u  IPv4  81948      0t0  TCP 192.168.10.206:domain (LISTEN)</span></span>
<span class="line"><span>named   16864 named  512u  IPv4  81945      0t0  UDP localhost:domain</span></span>
<span class="line"><span>named   16864 named  513u  IPv4  81947      0t0  UDP 192.168.10.206:domain</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>修改/etc/namedmanager/config-bind.php</span></span>
<span class="line"><span>[root@dns src]# cp /etc/namedmanager/config-bind.php /etc/namedmanager/config-bind.php.bak</span></span>
<span class="line"><span>[root@dns src]# vim /etc/namedmanager/config-bind.php</span></span>
<span class="line"><span>.......</span></span>
<span class="line"><span>$config[&quot;api_url&quot;]      = &quot;http://192.168.10.206/namedmanager&quot;;          // 应用程序的安装位置</span></span>
<span class="line"><span>$config[&quot;api_server_name&quot;]  = &quot;dns.kevin.cn&quot;;                            // 此处必须与httpd配置里的Name Server名称一致</span></span>
<span class="line"><span>$config[&quot;api_auth_key&quot;]     = &quot;Dns&quot;;</span></span>
<span class="line"><span>......</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-设置防火墙" tabindex="-1"><a class="header-anchor" href="#_4-设置防火墙"><span>4）设置防火墙</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>namedmanager部署机本机要么关闭iptables，要么安装如下设置：</span></span>
<span class="line"><span>[root@dns src]# setenforce 0</span></span>
<span class="line"><span>[root@dns src]# getenforce</span></span>
<span class="line"><span>[root@dns src]# vim /etc/sysconfig/selinux</span></span>
<span class="line"><span>.......</span></span>
<span class="line"><span>SELINUX=disabled</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>[root@dns src]# iptables -F</span></span>
<span class="line"><span>[root@dns src]# iptables -P INPUT DROP</span></span>
<span class="line"><span>[root@dns src]# iptables -P FORWARD DROP</span></span>
<span class="line"><span>[root@dns src]# iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT</span></span>
<span class="line"><span>[root@dns src]# iptables -A INPUT -i lo -p all -j ACCEPT</span></span>
<span class="line"><span>[root@dns src]# iptables -A INPUT -p icmp -j ACCEPT</span></span>
<span class="line"><span>[root@dns src]# iptables -A INPUT -p tcp --dport 22 -j ACCEPT</span></span>
<span class="line"><span>[root@dns src]# iptables -A INPUT -p tcp --dport 53 -j ACCEPT</span></span>
<span class="line"><span>[root@dns src]# iptables -A INPUT -p udp --dport 53 -j ACCEPT</span></span>
<span class="line"><span>[root@dns src]# iptables -A INPUT -p tcp --dport 80 -j ACCEPT</span></span>
<span class="line"><span>[root@dns src]# iptables -A INPUT -p tcp --dport 443 -j ACCEPT</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>禁用IPV6。添加域名记录（正向解析与反向解析）。设置开机启动服务，并重启服务器。</span></span>
<span class="line"><span>[root@dns src]# vim /etc/modprobe.d/dist.conf         //文件结尾添加如下内容：</span></span>
<span class="line"><span>......</span></span>
<span class="line"><span>alias net-pf-10 off</span></span>
<span class="line"><span>alias ipv6 off</span></span>
<span class="line"><span>chkconfig ip6tables off</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>[root@dns src]# chkconfig httpd on</span></span>
<span class="line"><span>[root@dns src]# chkconfig mysqld on</span></span>
<span class="line"><span>[root@dns src]# chkconfig named on</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>[root@dns src]# init 6      //或者执行&quot;reboot&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-访问namedmanager" tabindex="-1"><a class="header-anchor" href="#_5-访问namedmanager"><span>5）访问namedmanager</span></a></h2><p>访问 http://192.168.10.206/namedmanager ，<strong>默认用户名和密码（setup，setup123）</strong>。不要忘记在用户管理中修改用户名和密码。</p><p><img src="`+e+'" alt="img"></p><p><strong>接着设置API key（如下图。设置邮箱地址和API key，这个key是在上面的/etc/namedmanager/config-bind.php文件中设置的）</strong></p><p><img src="'+p+'" alt="img"></p><p>添加服务器。Name Server FQDN的名称要和httpd中的ServerName一致。（如下添加部署机的主机名或者ip地址都可以）</p><p><img src="'+h+'" alt="img"></p><p><img src="'+t+'" alt="img"></p><p><strong>添加正向域名解析</strong></p><p><img src="'+k+'" alt="img"></p><p><strong>添加反向域名解析（如果有多个ip段的客户机，那么就如下图添加多个反向解析配置）</strong></p><p><img src="'+d+'" alt="img"></p><p><strong>查看正反向解析域名添加情况</strong></p><p><strong><img src="'+r+'" alt="img"></strong></p><p><strong>上面已经成功添加了正反向解析域名，现在尝试添加一些域名的A记录和PTR记录</strong></p><p><strong>先添加A正向解析记录</strong></p><p><strong><img src="'+c+'" alt="img"></strong></p><p><strong><img src="'+g+'" alt="img"></strong></p><p><strong>由于上面在添加A正向解析的时候，已经勾选了PTR反向解析（如果没有勾选，则需要手动添加PTR反向解析记录），故这时候已经有了上面那几个域名的反向解析记录了：</strong></p><p><strong><img src="'+v+'" alt="img"></strong></p><p><strong><img src="'+m+`" alt="img"></strong></p><p><strong>如上，已经添加了几个正反向解析记录，现在到namedmanager部署机器本机上查看相关的正反向解析配置：</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@dns ~]# cd /var/named/</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@dns named]# ll</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">total</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 40</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-rw-r--r--.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   490</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Apr</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  7</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 14:48</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 10.168.192.in-addr.arpa.zone</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">drwxr-x---.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 7</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  named</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 4096</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Apr</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  7</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 13:37</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> chroot</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">drwxrwx---.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> named</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> named</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 4096</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Apr</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  7</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 13:39</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> data</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">drwxrwx---.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> named</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> named</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 4096</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Apr</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  7</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 14:40</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dynamic</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-rw-r--r--.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   455</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Apr</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  7</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 14:45</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kevin.cn.zone</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-rw-r-----.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  named</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3289</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Apr</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 11</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  2017</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> named.ca</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-rw-r-----.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  named</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  152</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Dec</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 15</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  2009</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> named.empty</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-rw-r-----.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  named</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  152</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Jun</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 21</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  2007</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> named.localhost</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-rw-r-----.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  named</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  168</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Dec</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 15</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  2009</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> named.loopback</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">drwxrwx---.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> named</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> named</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 4096</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Jan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 20:57</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> slaves</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">A记录的正向解析配置为：</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@dns named]# cat kevin.cn.zone</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$ORIGIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> kevin.cn.</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$TTL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 120</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">@</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       IN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SOA</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dns.kevin.cn.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> wangshibo.kevin.com.</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            2018040703</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">serial</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            21600</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">refresh</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            3600</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">retry</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            604800</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">expiry</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            120</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">minimum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ttl</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        )</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Nameservers</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kevin.cn.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   86400</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> NS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dns.kevin.cn.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Mailservers</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Reverse</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DNS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Records</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (PTR)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">CNAME</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">HOST</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> RECORDS</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">db01</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    120</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> A</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 192.168.10.205</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">db02</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    120</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> A</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 192.168.10.209</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dns</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 120</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> A</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 192.168.10.206</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">web01</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   120</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> A</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 192.168.10.202</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">web02</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   120</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> A</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 192.168.10.203</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">PTR记录的反向解析配置为：</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@dns named]# cat 10.168.192.in-addr.arpa.zone</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$ORIGIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 10.168.192.in-addr.arpa.</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$TTL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 120</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">@</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       IN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SOA</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dns.kevin.cn.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> wangshibo.kevin.com.</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            2018040704</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">serial</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            21600</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">refresh</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            3600</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">retry</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            604800</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">expiry</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            120</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">minimum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ttl</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        )</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Nameservers</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">10.168.192.in-addr.arpa.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    86400</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> NS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dns.kevin.cn.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Mailservers</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Reverse</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DNS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Records</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (PTR)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">202</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 120</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PTR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> web01.kevin.cn.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">203</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 120</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PTR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> web02.kevin.cn.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">205</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 120</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PTR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> db01.kevin.cn.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">206</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 120</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PTR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dns.kevin.cn.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">209</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 120</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PTR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> db02.kevin.cn.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">CNAME</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">HOST</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> RECORDS</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>5）设置客户机的DNS配置</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">将namedmanager本机以及所有的客户机的DNS地址都设置成192.168.10.206（即namedmanager部署机的ip地址）</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@storage01 ~]# ifconfig|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 192</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          inet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> addr:192.168.10.202</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Bcast:192.168.10.255</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Mask:255.255.255.0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@storage01 ~]# cat /etc/resolv.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">domain</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kevin.cn</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">search</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kevin.cn</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nameserver</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 192.168.10.206</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@storage01 ~]# ping www.baidu.com                         //这里走的是DNS配置中的forwarders转发的解析</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">PING</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www.a.shifen.com</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (14.215.177.38) 56(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">84</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) bytes of data.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">64</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bytes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 14.215.177.38:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> icmp_seq=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ttl=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">49</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> time=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">37.6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ms</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">64</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bytes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 14.215.177.38:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> icmp_seq=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ttl=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">49</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> time=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">37.5</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ms</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">64</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bytes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 14.215.177.38:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> icmp_seq=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ttl=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">49</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> time=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">37.4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ms</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">.....</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@storage01 ~]# ping web02.kevin.cn</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">PING</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> web02.kevin.cn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (192.168.10.203) 56(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">84</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) bytes of data.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">64</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bytes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> web02.kevin.cn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (192.168.10.203): </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">icmp_seq</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">1</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> ttl</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">64</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> time</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">0.136</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ms</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">64</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bytes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> web02.kevin.cn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (192.168.10.203): </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">icmp_seq</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">2</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> ttl</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">64</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> time</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">0.212</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ms</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">64</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bytes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> web02.kevin.cn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (192.168.10.203): </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">icmp_seq</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">3</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> ttl</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">64</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> time</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">0.132</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ms</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">.....</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">在客户机上检查下正反向解析是否成功：</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@storage01 ~]# host 192.168.10.209</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">209.10.168.192.in-addr.arpa</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> domain</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pointer</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> db02.kevin.cn.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@storage01 ~]# host db01.kevin.cn</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">db01.kevin.cn</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> has</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> address</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 192.168.10.205</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="注意一下" tabindex="-1"><a class="header-anchor" href="#注意一下"><span><strong>注意一下：</strong></span></a></h2><p>1）以上是在单机部署的BindManager服务，如果是线上环境的话，建议在多台机器上部署（至少两台机器）同样的BindManger服务，比如BindManager01、BindManager02两台机器； 2）在客户机的/etc/resolv.conf文件里将DNS地址配置成其中的一个BindManager部署机的ip地址，比如配置成BindManager01地址； 3）将BindManager01的正反向解析文件实时同步到BindManager02机器上（直接同步/var/named这个目录即可）；两台机器的BindaManger相关服务都要是启动状态。 4）如果BindManager01服务器发生故障，不能正常提供DNS解析服务。此时，可以迅速将BindManager02的ip地址修改成BindManager01的ip地址。这样就能很快的实现故障转移了。</p>`,40)])])}const b=i(A,[["render",o]]),u=JSON.parse('{"path":"/note-book/DNS/Bind9%E4%B9%8BWeb%E7%AE%A1%E7%90%86NamedManager.html","title":"Bind9之Web管理NamedManager","lang":"zh-CN","frontmatter":{"description":"Bind9之Web管理NamedManager NamedManager 是一个基于Web的DNS管理系统，**可用来添加、调整和删除DNS的zones/records数据。**它使用Bind作为底层DNS服务，提供一个现代Ajax的Web界面，支持 IPv4和IPv6。该应用程序很稳定，在生产环境中使用没有任何问题。过多的介绍在此就不做说明了，下面说...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Bind9之Web管理NamedManager\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-03-20T09:19:01.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Paper-Dragon\\",\\"url\\":\\"https://github.com/Paper-Dragon\\",\\"email\\":\\"2678885646@qq.com\\"}]}"],["meta",{"property":"og:url","content":"https://www.geekery.cn/note-book/DNS/Bind9%E4%B9%8BWeb%E7%AE%A1%E7%90%86NamedManager.html"}],["meta",{"property":"og:site_name","content":"运维开发绿皮书"}],["meta",{"property":"og:title","content":"Bind9之Web管理NamedManager"}],["meta",{"property":"og:description","content":"Bind9之Web管理NamedManager NamedManager 是一个基于Web的DNS管理系统，**可用来添加、调整和删除DNS的zones/records数据。**它使用Bind作为底层DNS服务，提供一个现代Ajax的Web界面，支持 IPv4和IPv6。该应用程序很稳定，在生产环境中使用没有任何问题。过多的介绍在此就不做说明了，下面说..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-20T09:19:01.000Z"}],["meta",{"property":"article:modified_time","content":"2024-03-20T09:19:01.000Z"}]]},"git":{"createdTime":1691939318000,"updatedTime":1710926341000,"contributors":[{"name":"Paper-Dragon","username":"Paper-Dragon","email":"2678885646@qq.com","commits":2,"url":"https://github.com/Paper-Dragon"},{"name":"PaperDragon-SH","username":"PaperDragon-SH","email":"2678885646@qq.com","commits":1,"url":"https://github.com/PaperDragon-SH"}],"changelog":[{"hash":"607ebb0d8018e2f5da17fcad6300af4a8917c749","time":1710926341000,"email":"2678885646@qq.com","author":"PaperDragon-SH","message":"111111"},{"hash":"9ac7e0bcabe419c8b3c1baa8f257318daab8f9fd","time":1706422344000,"email":"2678885646@qq.com","author":"Paper-Dragon","message":"rename dns system"},{"hash":"392a519398b2e846f316619fbe831e100164de7c","time":1691939318000,"email":"2678885646@qq.com","author":"Paper-Dragon","message":"Create The Worid!"}]},"readingTime":{"minutes":8.45,"words":2536},"filePathRelative":"note-book/DNS/Bind9之Web管理NamedManager.md","excerpt":"\\n<p>NamedManager 是一个基于Web的DNS管理系统，**可用来添加、调整和删除DNS的zones/records数据。**它使用Bind作为底层DNS服务，提供一个现代Ajax的Web界面，支持 IPv4和IPv6。该应用程序很稳定，在生产环境中使用没有任何问题。过多的介绍在此就不做说明了，下面说下NamedManager环境部署过程：</p>\\n<h2>1）下载NamedManager的rpm安装包</h2>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code class=\\"language-bash\\"><span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">[root@dns ~]# hostname</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">dns.kevin.cn</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">[root@dns named]# cat /etc/hosts</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">127.0.0.1</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">   localhost</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> localhost.localdomain</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> localhost4</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> localhost4.localdomain4</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\\">:</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">:1</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">         localhost</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> localhost.localdomain</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> localhost6</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> localhost6.localdomain6</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">192.168.10.206</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> dns.kevin.cn</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">[root@dns ~]# ifconfig |</span><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">grep</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 192.168</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">          inet</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> addr:192.168.10.206</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">  Bcast:192.168.10.255</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">  Mask:255.255.255.0</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">[root@dns named]# ping dns.kevin.cn</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">PING</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> dns.kevin.cn</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> (192.168.10.206) 56(</span><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">84</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">) bytes of data.</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">64</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> bytes</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> from</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> dns.kevin.cn</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> (192.168.10.206): </span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">icmp_seq</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">1</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\"> ttl</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">64</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\"> time</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">0.027</span><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\"> ms</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">64</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> bytes</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> from</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> dns.kevin.cn</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> (192.168.10.206): </span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">icmp_seq</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">2</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\"> ttl</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">64</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\"> time</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">0.043</span><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\"> ms</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\\">......</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">  </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">[root@dns ~]# cd /usr/local/src/</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">[root@dns src]# wget http://repos.jethrocarr.com/pub/amberdms/linux/centos/6/amberdms-custom/i386/namedmanager-bind-1.8.0-1.el6.noarch.rpm</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">[root@dns src]# wget http://repos.jethrocarr.com/pub/amberdms/linux/centos/6/amberdms-custom/i386/namedmanager-www-1.8.0-1.el6.noarch.rpm</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">  </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">[root@dns src]# ll</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">total</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 1352</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">-rw-r--r--.</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 1</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> root</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> root</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">  109584</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> Dec</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 22</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">  2013</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> namedmanager-bind-1.8.0-1.el6.noarch.rpm</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">-rw-r--r--.</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 1</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> root</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> root</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 1270108</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> Dec</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 22</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">  2013</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> namedmanager-www-1.8.0-1.el6.noarch.rpm</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{b as comp,u as data};
