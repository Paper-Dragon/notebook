import{a as i,c as a,g as h,o as k}from"./app-CRDN5Xxg.js";const n={};function l(t,s){return k(),a("div",null,[...s[0]||(s[0]=[h(`<h1 id="goaccess给ftp生成分析图" tabindex="-1"><a class="header-anchor" href="#goaccess给ftp生成分析图"><span>goaccess给ftp生成分析图</span></a></h1><blockquote><p>官网：https://goaccess.io/</p><p>源码： https://github.com/allinurl/goaccess</p></blockquote><h2 id="日志格式" tabindex="-1"><a class="header-anchor" href="#日志格式"><span>日志格式</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Sat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Oct</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 7</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2023</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 14:41:57</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 113.57.80.113</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 61</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /catfish.txt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> _</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> POST</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> g</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LiuDanYi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ftp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 200</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Wed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Oct</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2023</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 16:20:24</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 24</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 113.57.80.113</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 62537788</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /textbook/ppts/L4-数据集成技术基础.pptx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> _</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GET</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> g</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LiuDanYi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ftp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 200</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Wed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Oct</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2023</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 16:19:15</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 113.57.80.113</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 137039</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /textbook/works/作业3_catfish.pdf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> _</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GET</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> g</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LiuDanYi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ftp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 200</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Wed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Oct</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2023</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 16:18:09</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 113.57.80.113</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 137039</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /textbook/works/作业3_catfish.pdf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> _</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GET</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> g</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LiuDanYi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ftp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 200</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Wed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Oct</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2023</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 16:16:45</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 113.57.80.113</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 267</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /salmon_score.txt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> _</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GET</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> g</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LiuDanYi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ftp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 200</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Sat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Sep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 23</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2023</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 17:57:18</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 113.57.80.8</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 61</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /salmon.txt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> _</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> POST</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> g</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LiuDanYi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ftp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 200</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="识别格式" tabindex="-1"><a class="header-anchor" href="#识别格式"><span>识别格式</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">time-format 参数 time-format 后跟随一个空格符，指定日志的时间格式，包含普通字符与特殊格式说明符的任意组合。他们都由百分号 (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)开始。参考 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">man</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> strftime\`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">。</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %T</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 或者</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %H:%M:%S.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">​</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">注意:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 如果给定的时间戳以微秒计算，则必须在</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> time-format</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 中使用参数</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">​</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">date-format</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 参数</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> date-format</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 后跟随一个空格符，指定日志的日期格式，包含普通字符与特殊格式说明符的任意组合。他们都由百分号</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (%)开始。参考 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">man</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> strftime\`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">​</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">注意:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 如果给定的时间戳以微秒计算，则必须在</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> time-format</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 中使用参数</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">​</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log-format</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 参数</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> log-format</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 后跟随一个空格符或者制表分隔符</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">\\t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">，用于指定日志字符串格式。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">​</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">特殊格式说明符</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%x</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 匹配</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> time-format</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 和</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> date-format</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 变量的日期和时间字段。用于使用时间戳来代替日期和时间两个独立变量的场景。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 匹配</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> time-format</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 变量的时间字段。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 匹配</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> date-format</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 变量的日期字段。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 根据</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> canonical</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 名称设定的服务器名称</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">服务区或者虚拟主机</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 请求文档时由</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> HTTP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 验证决定的用户</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ID。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%h</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 主机</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">客户端IP地址，IPv4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 或者</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IPv6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%r</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 客户端请求的行数。这些请求使用分隔符</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">单引号，双引号</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">引用的部分可以被解析。否则，需要使用由特殊格式说明符</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">例如：%m,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %U,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 和</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %H</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">组合格式去解析独立的字段。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">注意:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 既可以使用</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %r</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 获取完整的请求，也可以使用</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %m,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %U,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> and</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %H</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 去组合你的请求，但是不能同时使用。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 请求的方法。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%U</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 请求的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> URL。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">注意:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 如果查询字符串在</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %U中，则无需使用</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %q。但是，如果</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> URL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 路径中没有包含任何查询字符串，则你可以使用</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 查询字符串将附加在请求后面。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 查询字符串。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%H</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 请求协议。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 服务器回传客户端的状态码。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 回传客户端的对象的大小。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%R</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> HTTP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 请求的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;Referer&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 值。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> HTTP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 请求的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;UserAgent&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 值。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%D</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 处理请求的时间消耗，使用微秒计算。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%T</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 处理请求的时间消耗，使用带秒和毫秒计算。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 处理请求的时间消耗，使用十进制数表示的毫秒计算。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%^</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 忽略此字段。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%~</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 继续解析日志字符串直到找到一个非空字符</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(!</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isspace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">。</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">~h 在 X-Forwarded-For (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">XFF</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) 字段中的主机(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">客户端</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 地址，IPv4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 或者</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IPv6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">针对</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> XFF，</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GoAccess</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 使用了一个特殊符号，即由一个波浪号+主机说明符构成，然后紧跟由大括号封装起来的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> XFF</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 限定字段</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">例：~h</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{,</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;})。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">举例如下， ~h{,&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> }</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 用于解析</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;11.25.11.53, 17.68.33.17&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 字段由一对双引号，一个逗号和一个空格限定。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 注意</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">为了得到平均，累计，最大处理时间，将需要开始在</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Web</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 服务器中记录响应次数。在</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Nginx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 中可以添加</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $request_time</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 到日志格式中，或者</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %D</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 在</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Apache</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 中。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 重要</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">如果同时使用了多个处理时间的特殊说明符，则在格式字符串中第一个指定的选项具有最高优先级。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="中文goaccess" tabindex="-1"><a class="header-anchor" href="#中文goaccess"><span>中文goaccess</span></a></h2><p>使用变量LANG来改变生成的语言</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">LANG</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">zh_CN.utf-8</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> goaccess</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --date-format=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;%b %d&#39;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --time-format=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;%T&#39;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --log-format=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;%^ %d %t %^ %T %h %b %U %^ _ %m %^ %e %^ %^ %^ %s&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> snapper.log</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> index.html</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,9)])])}const e=i(n,[["render",l]]),d=JSON.parse('{"path":"/note-book/goaccess/goaccess%E7%BB%99ftp%E7%94%9F%E6%88%90%E5%88%86%E6%9E%90%E5%9B%BE.html","title":"goaccess给ftp生成分析图","lang":"zh-CN","frontmatter":{"description":"goaccess给ftp生成分析图 官网：https://goaccess.io/ 源码： https://github.com/allinurl/goaccess 日志格式 识别格式 中文goaccess 使用变量LANG来改变生成的语言","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"goaccess给ftp生成分析图\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-05-29T02:44:55.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Paper-Dragon\\",\\"url\\":\\"https://github.com/Paper-Dragon\\",\\"email\\":\\"2678885646@qq.com\\"}]}"],["meta",{"property":"og:url","content":"https://www.geekery.cn/note-book/goaccess/goaccess%E7%BB%99ftp%E7%94%9F%E6%88%90%E5%88%86%E6%9E%90%E5%9B%BE.html"}],["meta",{"property":"og:site_name","content":"运维开发绿皮书"}],["meta",{"property":"og:title","content":"goaccess给ftp生成分析图"}],["meta",{"property":"og:description","content":"goaccess给ftp生成分析图 官网：https://goaccess.io/ 源码： https://github.com/allinurl/goaccess 日志格式 识别格式 中文goaccess 使用变量LANG来改变生成的语言"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-05-29T02:44:55.000Z"}],["meta",{"property":"article:modified_time","content":"2024-05-29T02:44:55.000Z"}]]},"git":{"createdTime":1697698698000,"updatedTime":1716950695000,"contributors":[{"name":"PaperDragon-SH","username":"PaperDragon-SH","email":"2678885646@qq.com","commits":2,"url":"https://github.com/PaperDragon-SH"}],"changelog":[{"hash":"d6ac4a6a6d047dec32f09cb26c03cf826736a81b","time":1716950695000,"email":"2678885646@qq.com","author":"PaperDragon-SH","message":"Openresty和lua脚本实战"},{"hash":"accd6e4a96f85cae2d071795c037b063b470b59f","time":1697698698000,"email":"2678885646@qq.com","author":"PaperDragon-SH","message":"src\\\\note-book\\\\goaccess\\\\goaccess给ftp生成分析图.md"}]},"readingTime":{"minutes":3.43,"words":1030},"filePathRelative":"note-book/goaccess/goaccess给ftp生成分析图.md","excerpt":"\\n<blockquote>\\n<p>官网：https://goaccess.io/</p>\\n<p>源码： https://github.com/allinurl/goaccess</p>\\n</blockquote>\\n<h2>日志格式</h2>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code class=\\"language-bash\\"><span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">Sat</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> Oct</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 7</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 2023</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> 14:41:57</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 1</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 113.57.80.113</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 61</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> /catfish.txt</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> b</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> _</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> POST</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> g</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> LiuDanYi</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> ftp</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 0</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E5C07B\\"> *</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 200</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">Wed</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> Oct</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 4</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 2023</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> 16:20:24</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 24</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 113.57.80.113</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 62537788</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> /textbook/ppts/L4-数据集成技术基础.pptx</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> b</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> _</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> GET</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> g</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> LiuDanYi</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> ftp</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 0</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E5C07B\\"> *</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 200</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">Wed</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> Oct</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 4</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 2023</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> 16:19:15</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 1</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 113.57.80.113</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 137039</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> /textbook/works/作业3_catfish.pdf</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> b</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> _</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> GET</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> g</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> LiuDanYi</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> ftp</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 0</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E5C07B\\"> *</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 200</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">Wed</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> Oct</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 4</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 2023</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> 16:18:09</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 1</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 113.57.80.113</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 137039</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> /textbook/works/作业3_catfish.pdf</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> b</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> _</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> GET</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> g</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> LiuDanYi</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> ftp</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 0</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E5C07B\\"> *</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 200</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">Wed</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> Oct</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 4</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 2023</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> 16:16:45</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 1</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 113.57.80.113</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 267</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> /salmon_score.txt</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> b</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> _</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> GET</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> g</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> LiuDanYi</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> ftp</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 0</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E5C07B\\"> *</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 200</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">Sat</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> Sep</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 23</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 2023</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> 17:57:18</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 1</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 113.57.80.8</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 61</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> /salmon.txt</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> b</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> _</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> POST</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> g</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> LiuDanYi</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> ftp</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 0</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E5C07B\\"> *</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 200</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{e as comp,d as data};
