import{ah as s,ai as t,ar as i,am as a}from"./app-BMcHTqkZ.js";const r="/assets/1095387-20200702144144218-1510180891-C8wiQ0T1.png",n="/assets/1095387-20200702144354238-115206460-s6mgxc9m.png",o="/assets/1095387-20200702144524006-1506216148-B3bcy7m6.png",p="/assets/1095387-20200702144739664-1804553367-DEzOT56l.png",h="/assets/1095387-20200702144937143-1265960970-BvM9TGNH.png",l="/assets/1095387-20200702145241222-1099637665-BBm6IKV_.png",m="/assets/1095387-20200702145259588-415488905-uI2OEDeq.png",d={};function c(g,e){return a(),t("div",null,e[0]||(e[0]=[i('<h1 id="prometheus监控windows主机" tabindex="-1"><a class="header-anchor" href="#prometheus监控windows主机"><span>Prometheus监控Windows主机</span></a></h1><h2 id="_1-基本说明" tabindex="-1"><a class="header-anchor" href="#_1-基本说明"><span>1. 基本说明</span></a></h2><p>使用Prometheus监控Windows主机与Linux主机方式相近，均借助社区的Exporter采集数据，并通过暴露接口供Prometheus获取主机数据。</p><p>监控Linux的Exporter地址为：<a href="https://github.com/prometheus/node_exporter" target="_blank" rel="noopener noreferrer">https://github.com/prometheus/node_exporter</a>。</p><p>监控Windows主机的Exporter地址为：<a href="https://github.com/prometheus-community/windows_exporter" target="_blank" rel="noopener noreferrer">https://github.com/prometheus-community/windows_exporter</a>。</p><h2 id="_2-安装windows-exporter" tabindex="-1"><a class="header-anchor" href="#_2-安装windows-exporter"><span>2. 安装Windows Exporter</span></a></h2><p>无论是监控Linux还是Windows，对应的exporter都提供了二进制文件和msi文件。对于Windows系统，可直接从以下地址下载最新的msi文件，并安装到相应的Windows主机上。</p><p>MSI文件下载地址：<a href="https://github.com/prometheus-community/windows_exporter/releases" target="_blank" rel="noopener noreferrer">https://github.com/prometheus-community/windows_exporter/releases</a></p><p>下载时，选择对应的msi文件，如下所示： <img src="'+r+'" alt="img"></p><p>下载完成后，双击该文件即可完成安装，安装界面如下： <img src="'+n+'" alt="img"></p><p>安装完成后，可在任务管理器中看到对应的进程： <img src="'+o+'" alt="img"></p><p>安装完成后，可测试是否有数据产生。默认情况下，其端口为9182，路径为metrics，测试页面如下： <img src="'+p+`" alt="img"></p><h2 id="_3-配置prometheus采集数据" tabindex="-1"><a class="header-anchor" href="#_3-配置prometheus采集数据"><span>3. 配置Prometheus采集数据</span></a></h2><p>在Prometheus的配置文件中添加如下配置：</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">- </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">job_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;WindowsServerMonitor&#39;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  static_configs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">targets</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;10.101.3.3:9182&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      labels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        server_type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;windows&#39;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  relabel_configs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">source_labels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">__address__</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      target_label</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">instance</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置完成后，检查Prometheus是否有数据产生，示例如下： <img src="`+h+'" alt="img"></p><h2 id="_4-配置grafana展示数据" tabindex="-1"><a class="header-anchor" href="#_4-配置grafana展示数据"><span>4. 配置Grafana展示数据</span></a></h2><p>首先，从以下地址下载模板：<a href="https://grafana.com/grafana/dashboards/12566" target="_blank" rel="noopener noreferrer">https://grafana.com/grafana/dashboards/12566</a></p><p>数据展示效果如下： <img src="'+l+'" alt="img"><img src="'+m+'" alt="img"></p>',19)]))}const k=s(d,[["render",c]]),_=JSON.parse('{"path":"/note-book/Prometheus/Prometheus%E7%9B%91%E6%8E%A7Windows%E4%B8%BB%E6%9C%BA.html","title":"Prometheus监控Windows主机","lang":"zh-CN","frontmatter":{"description":"Prometheus监控Windows主机 1. 基本说明 使用Prometheus监控Windows主机与Linux主机方式相近，均借助社区的Exporter采集数据，并通过暴露接口供Prometheus获取主机数据。 监控Linux的Exporter地址为：https://github.com/prometheus/node_exporter。 监...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Prometheus监控Windows主机\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-12-24T16:33:15.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Paper-Dragon\\",\\"url\\":\\"https://github.com/Paper-Dragon\\",\\"email\\":\\"2678885646@qq.com\\"}]}"],["meta",{"property":"og:url","content":"https://www.geekery.cn/note-book/Prometheus/Prometheus%E7%9B%91%E6%8E%A7Windows%E4%B8%BB%E6%9C%BA.html"}],["meta",{"property":"og:site_name","content":"运维开发绿皮书"}],["meta",{"property":"og:title","content":"Prometheus监控Windows主机"}],["meta",{"property":"og:description","content":"Prometheus监控Windows主机 1. 基本说明 使用Prometheus监控Windows主机与Linux主机方式相近，均借助社区的Exporter采集数据，并通过暴露接口供Prometheus获取主机数据。 监控Linux的Exporter地址为：https://github.com/prometheus/node_exporter。 监..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-12-24T16:33:15.000Z"}],["meta",{"property":"article:modified_time","content":"2024-12-24T16:33:15.000Z"}]]},"git":{"createdTime":1691939318000,"updatedTime":1735057995000,"contributors":[{"name":"Paper-Dragon","username":"Paper-Dragon","email":"2678885646@qq.com","commits":2,"url":"https://github.com/Paper-Dragon"}],"changelog":[{"hash":"a0de6d605c26b6f672c90a0b4417b6c4ade32b33","time":1735057995000,"email":"2678885646@qq.com","author":"Paper-Dragon","message":"优化Prometheus监控Windows主机 文档"},{"hash":"392a519398b2e846f316619fbe831e100164de7c","time":1691939318000,"email":"2678885646@qq.com","author":"Paper-Dragon","message":"Create The Worid!"}]},"readingTime":{"minutes":1.32,"words":396},"filePathRelative":"note-book/Prometheus/Prometheus监控Windows主机.md","excerpt":"\\n<h2>1. 基本说明</h2>\\n<p>使用Prometheus监控Windows主机与Linux主机方式相近，均借助社区的Exporter采集数据，并通过暴露接口供Prometheus获取主机数据。</p>\\n<p>监控Linux的Exporter地址为：<a href=\\"https://github.com/prometheus/node_exporter\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/prometheus/node_exporter</a>。</p>\\n<p>监控Windows主机的Exporter地址为：<a href=\\"https://github.com/prometheus-community/windows_exporter\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/prometheus-community/windows_exporter</a>。</p>","autoDesc":true}');export{k as comp,_ as data};
