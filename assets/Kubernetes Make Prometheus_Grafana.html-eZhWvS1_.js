import{ah as p,ai as e,ar as a,aj as s,am as l}from"./app-CIgVqGNV.js";const t={};function o(u,n){return l(),e("div",null,n[0]||(n[0]=[a('<h1 id="kubernetes-make-prometheus-grafana" tabindex="-1"><a class="header-anchor" href="#kubernetes-make-prometheus-grafana"><span>Kubernetes Make Prometheus+Grafana</span></a></h1><h3 id="kubernetes-create-prometheus-grafana" tabindex="-1"><a class="header-anchor" href="#kubernetes-create-prometheus-grafana"><span>Kubernetes Create Prometheus+Grafana</span></a></h3><h4 id="一、背景" tabindex="-1"><a class="header-anchor" href="#一、背景"><span>一、背景</span></a></h4><p>Prometheus作为一个采用tidb时序数据库为数据存储的监控软件，因为嵌合当前主流容器化，所以一直处于广泛使用的状态，常用监控面板grafana，可以接收多种dataresource，结合数据源支持的语法可以对数据进行分析，实时展示监控值。</p><h4 id="二、准备工作" tabindex="-1"><a class="header-anchor" href="#二、准备工作"><span>二、准备工作</span></a></h4><h5 id="_1、主机分布" tabindex="-1"><a class="header-anchor" href="#_1、主机分布"><span>1、主机分布</span></a></h5>',6),s("th",{colspan:"1",rowspan:"1"},"192.168.52.135(master)",-1),s("th",{colspan:"1",rowspan:"1"},"nfs-server",-1),s("p",null,"nfs-server",-1),s("td",{colspan:"1",rowspan:"1"},"192.168.52.136(node01)",-1),s("td",{colspan:"1",rowspan:"1"},"nfs-client",-1),s("p",null,"nfs-client",-1),s("td",{colspan:"1",rowspan:"1"},"192.168.52.137(node02)",-1),s("td",{colspan:"1",rowspan:"1"},"nfs-client",-1),a(`<p>nfs-client</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@master ~]# kubectl get node  --show-labels</span></span>
<span class="line"><span>NAME     STATUS   ROLES                  AGE     VERSION   LABELS</span></span>
<span class="line"><span>master   Ready    control-plane,master   5h32m   v1.21.3   beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/arch=amd64,kubernetes.io/hostname=master,kubernetes.io/os=linux,node-exporter=true,node-role.kubernetes.io/control-plane=,node-role.kubernetes.io/master=,node.kubernetes.io/exclude-from-external-load-balancers=</span></span>
<span class="line"><span>node01   Ready    node                   3h7m    v1.21.3   beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/arch=amd64,kubernetes.io/hostname=node01,kubernetes.io/os=linux,node-exporter=true,node-role.kubernetes.io/node=node01</span></span>
<span class="line"><span>node02   Ready    node                   3h6m    v1.21.3   beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/arch=amd64,kubernetes.io/hostname=node02,kubernetes.io/os=linux,node-exporter=true,node-role.kubernetes.io/node=node02</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>kubeadm装机，roles不会显示node，操作如下即可。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@master ~]# kubectl label node node01 node-role.kubernetes.io/node=node01</span></span>
<span class="line"><span>[root@master ~]# kubectl label node node02 node-role.kubernetes.io/node=node02</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@master ~]# kubectl get pods -A</span></span>
<span class="line"><span>NAMESPACE      NAME                             READY   STATUS    RESTARTS   AGE</span></span>
<span class="line"><span>kube-flannel   kube-flannel-ds-94z57            1/1     Running   1          3h5m</span></span>
<span class="line"><span>kube-flannel   kube-flannel-ds-v986m            1/1     Running   1          3h5m</span></span>
<span class="line"><span>kube-flannel   kube-flannel-ds-ztdz5            1/1     Running   1          3h5m</span></span>
<span class="line"><span>kube-system    coredns-59d64cd4d4-bhm59         1/1     Running   1          5h35m</span></span>
<span class="line"><span>kube-system    coredns-59d64cd4d4-wpk7n         1/1     Running   1          5h35m</span></span>
<span class="line"><span>kube-system    etcd-master                      1/1     Running   2          5h35m</span></span>
<span class="line"><span>kube-system    kube-apiserver-master            1/1     Running   2          5h35m</span></span>
<span class="line"><span>kube-system    kube-controller-manager-master   1/1     Running   1          174m</span></span>
<span class="line"><span>kube-system    kube-proxy-2rpld                 1/1     Running   1          3h10m</span></span>
<span class="line"><span>kube-system    kube-proxy-8fpbj                 1/1     Running   2          5h35m</span></span>
<span class="line"><span>kube-system    kube-proxy-gvwm5                 1/1     Running   1          3h10m</span></span>
<span class="line"><span>kube-system    kube-scheduler-master            1/1     Running   1          175m</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>2、master检查</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>#查询master是否正常 </span></span>
<span class="line"><span>kubectl get cs </span></span>
<span class="line"><span>#若为unhealthy </span></span>
<span class="line"><span>vim /etc/kubernetes/manifests/kube-scheduler.yaml </span></span>
<span class="line"><span>vim /etc/kubernetes/manifests/kube-controller-manager.yaml</span></span>
<span class="line"><span> #将- --port=0注释掉</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="_3、时间校准" tabindex="-1"><a class="header-anchor" href="#_3、时间校准"><span>3、时间校准</span></a></h5><p>因为Prometheus对时间一致要求很高，为保证浏览器和服务器时间一致，需要如下操作。所有节点都需要操作。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@master ~]# yum -y install ntp ntpdate</span></span>
<span class="line"><span>[root@master ~]# ntpdate ntp1.aliyun.com</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="三、nfs本地存储" tabindex="-1"><a class="header-anchor" href="#三、nfs本地存储"><span>三、nfs本地存储</span></a></h4><h5 id="_1、部署nfs" tabindex="-1"><a class="header-anchor" href="#_1、部署nfs"><span>1、部署NFS</span></a></h5><p>192.168.52.135为nfs-server，其他俩个node为client，所有节点都需要安装，若node节点未安装，node会因无client挂载nfs失败。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@master ~]# yum -y install nfs-utils</span></span>
<span class="line"><span>[root@master ~]# systemctl enable nfs</span></span>
<span class="line"><span>[root@master ~]# systemctl start nfs</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="_2、创建共享目录" tabindex="-1"><a class="header-anchor" href="#_2、创建共享目录"><span>2、创建共享目录</span></a></h5><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@master ~]# mkdir -p /data/nfs/{prometheus,grafana,grafana-plugin}</span></span>
<span class="line"><span>[root@master ~]# chown -R 65534.65534 /data/nfs/prometheus           #这里非常重要，否则prometheus无法启动，即便是设置了777权限也会报错</span></span>
<span class="line"><span>[root@master ~]# chmod 777 /data/nfs/{prometheus,grafana,grafana-plugin}    #这里需要打开所有用户可读写</span></span>
<span class="line"><span>[root@master nfs]# ll</span></span>
<span class="line"><span>总用量 0</span></span>
<span class="line"><span>drwxrwxrwx 4 root      root      28 4月  12 16:44 grafana</span></span>
<span class="line"><span>drwxrwxrwx 4 root      root      50 4月  12 17:37 grafana-plugin</span></span>
<span class="line"><span>drwxrwxrwx 4 nfsnobody nfsnobody 70 4月  12 15:33 prometheus</span></span>
<span class="line"><span>[root@master nfs]# pwd</span></span>
<span class="line"><span>/data/nfs</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="_3、设置nfs共享" tabindex="-1"><a class="header-anchor" href="#_3、设置nfs共享"><span>3、设置nfs共享</span></a></h5><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@master ~]# echo &quot;/data/nfs *(rw,no_root_squash,async,insecure)&quot;&amp;gt;&amp;gt;/etc/exports</span></span>
<span class="line"><span>[root@master ~]# systemctl restart nfs</span></span>
<span class="line"><span>[root@master ~]# exportfs</span></span>
<span class="line"><span>/data/nfs       &amp;lt;world&amp;gt;</span></span>
<span class="line"><span>[root@master ~]# showmount -e 127.0.0.1</span></span>
<span class="line"><span>Export list for 127.0.0.1:</span></span>
<span class="line"><span>/data/nfs *</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>四、部署node-exporter</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@master ~]# cat node-exporter.yaml</span></span>
<span class="line"><span>---</span></span>
<span class="line"><span>apiVersion: apps/v1</span></span>
<span class="line"><span>kind: DaemonSet</span></span>
<span class="line"><span>metadata:</span></span>
<span class="line"><span>  name: node-exporter</span></span>
<span class="line"><span>  namespace: kube-system</span></span>
<span class="line"><span>  labels:</span></span>
<span class="line"><span>    k8s-app: node-exporter</span></span>
<span class="line"><span>spec:</span></span>
<span class="line"><span>  selector:</span></span>
<span class="line"><span>    matchLabels:</span></span>
<span class="line"><span>      k8s-app: node-exporter</span></span>
<span class="line"><span>  template:</span></span>
<span class="line"><span>    metadata:</span></span>
<span class="line"><span>      labels:</span></span>
<span class="line"><span>        k8s-app: node-exporter</span></span>
<span class="line"><span>    spec:</span></span>
<span class="line"><span>      hostNetwork: true</span></span>
<span class="line"><span>      hostPID: true</span></span>
<span class="line"><span>      hostIPC: true</span></span>
<span class="line"><span>      tolerations:</span></span>
<span class="line"><span>      - key: &quot;disk&quot;</span></span>
<span class="line"><span>        operator: &quot;Equal&quot;</span></span>
<span class="line"><span>        value: &quot;ssd&quot;</span></span>
<span class="line"><span>        effect: &quot;NoSchedule&quot;</span></span>
<span class="line"><span>      - key: &quot;node-role.kubernetes.io/master&quot;</span></span>
<span class="line"><span>        operator: &quot;Equal&quot;</span></span>
<span class="line"><span>        value: &quot;true&quot;</span></span>
<span class="line"><span>        effect: &quot;PreferNoSchedule&quot;</span></span>
<span class="line"><span>      - key: &quot;esnode&quot;</span></span>
<span class="line"><span>        operator: &quot;Equal&quot;</span></span>
<span class="line"><span>        value: &quot;es&quot;</span></span>
<span class="line"><span>        effect: &quot;NoSchedule&quot;</span></span>
<span class="line"><span>      containers:</span></span>
<span class="line"><span>      - image: prom/node-exporter</span></span>
<span class="line"><span>        name: node-exporter</span></span>
<span class="line"><span>        resources:</span></span>
<span class="line"><span>          requests:</span></span>
<span class="line"><span>            cpu: 128m</span></span>
<span class="line"><span>        securityContext:</span></span>
<span class="line"><span>          privileged: true</span></span>
<span class="line"><span>        args:</span></span>
<span class="line"><span>        - --path.procfs</span></span>
<span class="line"><span>        - /host/proc</span></span>
<span class="line"><span>        - --path.sysfs</span></span>
<span class="line"><span>        - /host/sys</span></span>
<span class="line"><span>        - --collector.filesystem.ignored-mount-points</span></span>
<span class="line"><span>        - &#39;&quot;^/(sys|proc|dev|host|etc)($|/)&quot;&#39;</span></span>
<span class="line"><span>        volumeMounts:</span></span>
<span class="line"><span>        - name: dev</span></span>
<span class="line"><span>          mountPath: /host/dev</span></span>
<span class="line"><span>        - name: proc</span></span>
<span class="line"><span>          mountPath: /host/proc</span></span>
<span class="line"><span>        - name: sys</span></span>
<span class="line"><span>          mountPath: /host/sys</span></span>
<span class="line"><span>        - name: rootfs</span></span>
<span class="line"><span>          mountPath: /host/rootfs</span></span>
<span class="line"><span>        ports:</span></span>
<span class="line"><span>        - containerPort: 9100</span></span>
<span class="line"><span>          protocol: TCP</span></span>
<span class="line"><span>          name: http</span></span>
<span class="line"><span>      volumes:</span></span>
<span class="line"><span>        - name: proc</span></span>
<span class="line"><span>          hostPath:</span></span>
<span class="line"><span>            path: /proc</span></span>
<span class="line"><span>        - name: dev</span></span>
<span class="line"><span>          hostPath:</span></span>
<span class="line"><span>            path: /dev</span></span>
<span class="line"><span>        - name: sys</span></span>
<span class="line"><span>          hostPath:</span></span>
<span class="line"><span>            path: /sys</span></span>
<span class="line"><span>        - name: rootfs</span></span>
<span class="line"><span>          hostPath:</span></span>
<span class="line"><span>            path: /</span></span>
<span class="line"><span>[root@master ~]# kubectl apply -f node-exporter.yaml</span></span>
<span class="line"><span>[root@master ~]# kubectl get pods -A | grep node</span></span>
<span class="line"><span>kube-system    node-exporter-4ltj5              1/1     Running   0          111m</span></span>
<span class="line"><span>kube-system    node-exporter-tbv66              1/1     Running   0          111m</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>上述生成了俩个pod，master节点没有数据上报，这时</p><ul><li>key: &quot;node-role.kubernetes.io/master&quot; operator: &quot;Equal&quot; value: &quot;true&quot; effect: &quot;PreferNoSchedule&quot; 这个就起作用了，master做了taints限制。</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@master ~]# kubectl describe node master | grep Taints</span></span>
<span class="line"><span>Taints:             node-role.kubernetes.io/master:NoSchedule</span></span>
<span class="line"><span>[root@master ~]# kubectl taint node master node-role.kubernetes.io/master:NoSchedule-</span></span>
<span class="line"><span>node/master untainted</span></span>
<span class="line"><span>[root@master ~]# kubectl taint node master node-role.kubernetes.io/master:NoSchedule</span></span>
<span class="line"><span>node/master tainted</span></span>
<span class="line"><span>[root@master ~]# kubectl get pods -A | grep node</span></span>
<span class="line"><span>kube-system    node-exporter-4ltj5              1/1     Running   0          115m</span></span>
<span class="line"><span>kube-system    node-exporter-7522q              1/1     Running   0          113m</span></span>
<span class="line"><span>kube-system    node-exporter-tbv66              1/1     Running   0          115m</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="五、部署prometheus" tabindex="-1"><a class="header-anchor" href="#五、部署prometheus"><span>五、部署Prometheus</span></a></h4><h5 id="_1、configmap资源" tabindex="-1"><a class="header-anchor" href="#_1、configmap资源"><span>1、configmap资源</span></a></h5><p>生成configmap，便于挂载prometheus.yml内容</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@master ~]# cat prometheus-configmap.yaml</span></span>
<span class="line"><span>apiVersion: v1</span></span>
<span class="line"><span>kind: ConfigMap</span></span>
<span class="line"><span>metadata:</span></span>
<span class="line"><span>  name: prometheus-config</span></span>
<span class="line"><span>  namespace: kube-system</span></span>
<span class="line"><span>data:</span></span>
<span class="line"><span>  prometheus.yml: |</span></span>
<span class="line"><span>    global:</span></span>
<span class="line"><span>      scrape_interval:     15s</span></span>
<span class="line"><span>      evaluation_interval: 15s</span></span>
<span class="line"><span>    scrape_configs:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - job_name: prometheus</span></span>
<span class="line"><span>      honor_timestamps: true</span></span>
<span class="line"><span>      scrape_interval: 15s</span></span>
<span class="line"><span>      scrape_timeout: 15s</span></span>
<span class="line"><span>      scheme: http</span></span>
<span class="line"><span>      metrics_path: /metrics</span></span>
<span class="line"><span>      static_configs:</span></span>
<span class="line"><span>      - targets:</span></span>
<span class="line"><span>        - localhost:9090</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - job_name: &#39;kubernetes-apiservers&#39;</span></span>
<span class="line"><span>      kubernetes_sd_configs:</span></span>
<span class="line"><span>      - role: endpoints</span></span>
<span class="line"><span>      scheme: https</span></span>
<span class="line"><span>      tls_config:</span></span>
<span class="line"><span>        ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt</span></span>
<span class="line"><span>      bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token</span></span>
<span class="line"><span>      relabel_configs:</span></span>
<span class="line"><span>      - source_labels: [__meta_kubernetes_namespace, __meta_kubernetes_service_name, __meta_kubernetes_endpoint_port_name]</span></span>
<span class="line"><span>        action: keep</span></span>
<span class="line"><span>        regex: default;kubernetes;https</span></span>
<span class="line"><span>    - job_name: &#39;kubernetes-nodes&#39;</span></span>
<span class="line"><span>      kubernetes_sd_configs:</span></span>
<span class="line"><span>      - role: node</span></span>
<span class="line"><span>      scheme: https</span></span>
<span class="line"><span>      tls_config:</span></span>
<span class="line"><span>        ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt</span></span>
<span class="line"><span>      bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token</span></span>
<span class="line"><span>      relabel_configs:</span></span>
<span class="line"><span>      - action: labelmap</span></span>
<span class="line"><span>        regex: __meta_kubernetes_node_label_(.+)</span></span>
<span class="line"><span>      - target_label: __address__</span></span>
<span class="line"><span>        replacement: kubernetes.default.svc:443</span></span>
<span class="line"><span>      - source_labels: [__meta_kubernetes_node_name]</span></span>
<span class="line"><span>        regex: (.+)</span></span>
<span class="line"><span>        target_label: __metrics_path__</span></span>
<span class="line"><span>        replacement: /api/v1/nodes/\${1}/proxy/metrics</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - job_name: &#39;kubernetes-cadvisor&#39;</span></span>
<span class="line"><span>      kubernetes_sd_configs:</span></span>
<span class="line"><span>      - role: node</span></span>
<span class="line"><span>      scheme: https</span></span>
<span class="line"><span>      tls_config:</span></span>
<span class="line"><span>        ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt</span></span>
<span class="line"><span>      bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token</span></span>
<span class="line"><span>      relabel_configs:</span></span>
<span class="line"><span>      - action: labelmap</span></span>
<span class="line"><span>        regex: __meta_kubernetes_node_label_(.+)</span></span>
<span class="line"><span>      - target_label: __address__</span></span>
<span class="line"><span>        replacement: kubernetes.default.svc:443</span></span>
<span class="line"><span>      - source_labels: [__meta_kubernetes_node_name]</span></span>
<span class="line"><span>        regex: (.+)</span></span>
<span class="line"><span>        target_label: __metrics_path__</span></span>
<span class="line"><span>        replacement: /api/v1/nodes/\${1}/proxy/metrics/cadvisor</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - job_name: &#39;kubernetes-service-endpoints&#39;</span></span>
<span class="line"><span>      kubernetes_sd_configs:</span></span>
<span class="line"><span>      - role: endpoints</span></span>
<span class="line"><span>      relabel_configs:</span></span>
<span class="line"><span>      - source_labels: [__meta_kubernetes_service_annotation_prometheus_io_scrape]</span></span>
<span class="line"><span>        action: keep</span></span>
<span class="line"><span>        regex: true</span></span>
<span class="line"><span>      - source_labels: [__meta_kubernetes_service_annotation_prometheus_io_scheme]</span></span>
<span class="line"><span>        action: replace</span></span>
<span class="line"><span>        target_label: __scheme__</span></span>
<span class="line"><span>        regex: (https?)</span></span>
<span class="line"><span>      - source_labels: [__meta_kubernetes_service_annotation_prometheus_io_path]</span></span>
<span class="line"><span>        action: replace</span></span>
<span class="line"><span>        target_label: __metrics_path__</span></span>
<span class="line"><span>        regex: (.+)</span></span>
<span class="line"><span>      - source_labels: [__address__, __meta_kubernetes_service_annotation_prometheus_io_port]</span></span>
<span class="line"><span>        action: replace</span></span>
<span class="line"><span>        target_label: __address__</span></span>
<span class="line"><span>        regex: ([^:]+)(?::\\d+)?;(\\d+)</span></span>
<span class="line"><span>        replacement: $1:$2</span></span>
<span class="line"><span>      - action: labelmap</span></span>
<span class="line"><span>        regex: __meta_kubernetes_service_label_(.+)</span></span>
<span class="line"><span>      - source_labels: [__meta_kubernetes_namespace]</span></span>
<span class="line"><span>        action: replace</span></span>
<span class="line"><span>        target_label: kubernetes_namespace</span></span>
<span class="line"><span>      - source_labels: [__meta_kubernetes_service_name]</span></span>
<span class="line"><span>        action: replace</span></span>
<span class="line"><span>        target_label: kubernetes_name</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - job_name: &#39;kubernetes-services&#39;</span></span>
<span class="line"><span>      kubernetes_sd_configs:</span></span>
<span class="line"><span>      - role: service</span></span>
<span class="line"><span>      metrics_path: /probe</span></span>
<span class="line"><span>      params:</span></span>
<span class="line"><span>        module: [http_2xx]</span></span>
<span class="line"><span>      relabel_configs:</span></span>
<span class="line"><span>      - source_labels: [__meta_kubernetes_service_annotation_prometheus_io_probe]</span></span>
<span class="line"><span>        action: keep</span></span>
<span class="line"><span>        regex: true</span></span>
<span class="line"><span>      - source_labels: [__address__]</span></span>
<span class="line"><span>        target_label: __param_target</span></span>
<span class="line"><span>      - target_label: __address__</span></span>
<span class="line"><span>        replacement: blackbox-exporter.example.com:9115</span></span>
<span class="line"><span>      - source_labels: [__param_target]</span></span>
<span class="line"><span>        target_label: instance</span></span>
<span class="line"><span>      - action: labelmap</span></span>
<span class="line"><span>        regex: __meta_kubernetes_service_label_(.+)</span></span>
<span class="line"><span>      - source_labels: [__meta_kubernetes_namespace]</span></span>
<span class="line"><span>        target_label: kubernetes_namespace</span></span>
<span class="line"><span>      - source_labels: [__meta_kubernetes_service_name]</span></span>
<span class="line"><span>        target_label: kubernetes_name</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - job_name: &#39;kubernetes-ingresses&#39;</span></span>
<span class="line"><span>      kubernetes_sd_configs:</span></span>
<span class="line"><span>      - role: ingress</span></span>
<span class="line"><span>      relabel_configs:</span></span>
<span class="line"><span>      - source_labels: [__meta_kubernetes_ingress_annotation_prometheus_io_probe]</span></span>
<span class="line"><span>        action: keep</span></span>
<span class="line"><span>        regex: true</span></span>
<span class="line"><span>      - source_labels: [__meta_kubernetes_ingress_scheme,__address__,__meta_kubernetes_ingress_path]</span></span>
<span class="line"><span>        regex: (.+);(.+);(.+)</span></span>
<span class="line"><span>        replacement: \${1}://\${2}\${3}</span></span>
<span class="line"><span>        target_label: __param_target</span></span>
<span class="line"><span>      - target_label: __address__</span></span>
<span class="line"><span>        replacement: blackbox-exporter.example.com:9115</span></span>
<span class="line"><span>      - source_labels: [__param_target]</span></span>
<span class="line"><span>        target_label: instance</span></span>
<span class="line"><span>      - action: labelmap</span></span>
<span class="line"><span>        regex: __meta_kubernetes_ingress_label_(.+)</span></span>
<span class="line"><span>      - source_labels: [__meta_kubernetes_namespace]</span></span>
<span class="line"><span>        target_label: kubernetes_namespace</span></span>
<span class="line"><span>      - source_labels: [__meta_kubernetes_ingress_name]</span></span>
<span class="line"><span>        target_label: kubernetes_name</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - job_name: &#39;kubernetes-pods&#39;</span></span>
<span class="line"><span>      kubernetes_sd_configs:</span></span>
<span class="line"><span>      - role: pod</span></span>
<span class="line"><span>      relabel_configs:</span></span>
<span class="line"><span>      - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_scrape]</span></span>
<span class="line"><span>        action: keep</span></span>
<span class="line"><span>        regex: true</span></span>
<span class="line"><span>      - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_path]</span></span>
<span class="line"><span>        action: replace</span></span>
<span class="line"><span>        target_label: __metrics_path__</span></span>
<span class="line"><span>        regex: (.+)</span></span>
<span class="line"><span>      - source_labels: [__address__, __meta_kubernetes_pod_annotation_prometheus_io_port]</span></span>
<span class="line"><span>        action: replace</span></span>
<span class="line"><span>        regex: ([^:]+)(?::\\d+)?;(\\d+)</span></span>
<span class="line"><span>        replacement: $1:$2</span></span>
<span class="line"><span>        target_label: __address__</span></span>
<span class="line"><span>      - action: labelmap</span></span>
<span class="line"><span>        regex: __meta_kubernetes_pod_label_(.+)</span></span>
<span class="line"><span>      - source_labels: [__meta_kubernetes_namespace]</span></span>
<span class="line"><span>        action: replace</span></span>
<span class="line"><span>        target_label: kubernetes_namespace</span></span>
<span class="line"><span>      - source_labels: [__meta_kubernetes_pod_name]</span></span>
<span class="line"><span>        action: replace</span></span>
<span class="line"><span>        target_label: kubernetes_pod_name</span></span>
<span class="line"><span>    - job_name: &#39;k8s-node&#39;</span></span>
<span class="line"><span>      kubernetes_sd_configs:</span></span>
<span class="line"><span>      - role: node</span></span>
<span class="line"><span>      relabel_configs:</span></span>
<span class="line"><span>      - source_labels: [__address__]</span></span>
<span class="line"><span>        regex: &#39;(.*):10250&#39;</span></span>
<span class="line"><span>        replacement: &#39;\${1}:9100&#39;</span></span>
<span class="line"><span>        target_label: __address__</span></span>
<span class="line"><span>        action: replace</span></span>
<span class="line"><span>      - action: labelmap</span></span>
<span class="line"><span>        regex: __meta_kubernetes_node_label_(.+)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="_2、rbac资源" tabindex="-1"><a class="header-anchor" href="#_2、rbac资源"><span>2、rbac资源</span></a></h5><p>生成一个Prometheus的用户，分发好角色。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@master ~]# cat prometheus-rbac.yaml</span></span>
<span class="line"><span>apiVersion: rbac.authorization.k8s.io/v1</span></span>
<span class="line"><span>kind: ClusterRole</span></span>
<span class="line"><span>metadata:</span></span>
<span class="line"><span>  name: prometheus</span></span>
<span class="line"><span>rules:</span></span>
<span class="line"><span>- apiGroups: [&quot;&quot;]</span></span>
<span class="line"><span>  resources:</span></span>
<span class="line"><span>  - nodes</span></span>
<span class="line"><span>  - nodes/proxy</span></span>
<span class="line"><span>  - services</span></span>
<span class="line"><span>  - endpoints</span></span>
<span class="line"><span>  - pods</span></span>
<span class="line"><span>  verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;]</span></span>
<span class="line"><span>- apiGroups: [&quot;&quot;]</span></span>
<span class="line"><span>  resources:</span></span>
<span class="line"><span>  - configmaps</span></span>
<span class="line"><span>  verbs: [&quot;get&quot;]</span></span>
<span class="line"><span>- apiGroups:</span></span>
<span class="line"><span>  - extensions</span></span>
<span class="line"><span>  resources:</span></span>
<span class="line"><span>  - ingresses</span></span>
<span class="line"><span>  verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;]</span></span>
<span class="line"><span>- nonResourceURLs: [&quot;/metrics&quot;]</span></span>
<span class="line"><span>  verbs: [&quot;get&quot;]</span></span>
<span class="line"><span>---</span></span>
<span class="line"><span>apiVersion: v1</span></span>
<span class="line"><span>kind: ServiceAccount</span></span>
<span class="line"><span>metadata:</span></span>
<span class="line"><span>  name: prometheus</span></span>
<span class="line"><span>  namespace: kube-system</span></span>
<span class="line"><span>---</span></span>
<span class="line"><span>apiVersion: rbac.authorization.k8s.io/v1</span></span>
<span class="line"><span>kind: ClusterRoleBinding</span></span>
<span class="line"><span>metadata:</span></span>
<span class="line"><span>  name: prometheus</span></span>
<span class="line"><span>roleRef:</span></span>
<span class="line"><span>  apiGroup: rbac.authorization.k8s.io</span></span>
<span class="line"><span>  kind: ClusterRole</span></span>
<span class="line"><span>  name: prometheus</span></span>
<span class="line"><span>subjects:</span></span>
<span class="line"><span>- kind: ServiceAccount</span></span>
<span class="line"><span>  name: prometheus</span></span>
<span class="line"><span>  namespace: kube-system</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="_3、pvc资源" tabindex="-1"><a class="header-anchor" href="#_3、pvc资源"><span>3、pvc资源</span></a></h5><p>有状态服务，利用nfs目录，生成pv、pvc。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@master ~]# cat prometheus-pvc.yaml</span></span>
<span class="line"><span>apiVersion: v1</span></span>
<span class="line"><span>kind: Namespace</span></span>
<span class="line"><span>metadata:</span></span>
<span class="line"><span>  name: kube-system</span></span>
<span class="line"><span></span></span>
<span class="line"><span>---</span></span>
<span class="line"><span></span></span>
<span class="line"><span>apiVersion: v1</span></span>
<span class="line"><span>kind: PersistentVolume</span></span>
<span class="line"><span>metadata:</span></span>
<span class="line"><span>  name: nfs-pv-prometheus</span></span>
<span class="line"><span>  labels:</span></span>
<span class="line"><span>    pv: nfs-pv-prometheus</span></span>
<span class="line"><span>spec:</span></span>
<span class="line"><span>  capacity:</span></span>
<span class="line"><span>    storage: 10Gi</span></span>
<span class="line"><span>  accessModes:</span></span>
<span class="line"><span>    - ReadWriteMany</span></span>
<span class="line"><span>  persistentVolumeReclaimPolicy: Retain</span></span>
<span class="line"><span>  nfs:</span></span>
<span class="line"><span>    path: /data/nfs/prometheus</span></span>
<span class="line"><span>    server: 192.168.52.135</span></span>
<span class="line"><span></span></span>
<span class="line"><span>---</span></span>
<span class="line"><span></span></span>
<span class="line"><span>kind: PersistentVolumeClaim</span></span>
<span class="line"><span>apiVersion: v1</span></span>
<span class="line"><span>metadata:</span></span>
<span class="line"><span>  name: nfs-pvc-prometheus</span></span>
<span class="line"><span>  namespace: kube-system</span></span>
<span class="line"><span>spec:</span></span>
<span class="line"><span>  accessModes:</span></span>
<span class="line"><span>    - ReadWriteMany</span></span>
<span class="line"><span>  resources:</span></span>
<span class="line"><span>    requests:</span></span>
<span class="line"><span>      storage: 10Gi</span></span>
<span class="line"><span>  selector:</span></span>
<span class="line"><span>    matchLabels:</span></span>
<span class="line"><span>      pv: nfs-pv-prometheus</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="_4、deployment资源" tabindex="-1"><a class="header-anchor" href="#_4、deployment资源"><span>4、deployment资源</span></a></h5><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@master ~]# cat prometheus-deploy.yaml</span></span>
<span class="line"><span>---</span></span>
<span class="line"><span>apiVersion: apps/v1</span></span>
<span class="line"><span>kind: Deployment</span></span>
<span class="line"><span>metadata:</span></span>
<span class="line"><span>  labels:</span></span>
<span class="line"><span>    name: prometheus-deployment</span></span>
<span class="line"><span>  name: prometheus</span></span>
<span class="line"><span>  namespace: kube-system</span></span>
<span class="line"><span>spec:</span></span>
<span class="line"><span>  replicas: 1</span></span>
<span class="line"><span>  selector:</span></span>
<span class="line"><span>    matchLabels:</span></span>
<span class="line"><span>      app: prometheus</span></span>
<span class="line"><span>  template:</span></span>
<span class="line"><span>    metadata:</span></span>
<span class="line"><span>      labels:</span></span>
<span class="line"><span>        app: prometheus</span></span>
<span class="line"><span>    spec:</span></span>
<span class="line"><span>      containers:</span></span>
<span class="line"><span>      - image: prom/prometheus:v2.27.1</span></span>
<span class="line"><span>        name: prometheus</span></span>
<span class="line"><span>        command:</span></span>
<span class="line"><span>        - &quot;/bin/prometheus&quot;</span></span>
<span class="line"><span>        args:</span></span>
<span class="line"><span>        - &quot;--config.file=/etc/prometheus/prometheus.yml&quot;</span></span>
<span class="line"><span>        - &quot;--storage.tsdb.path=/prometheus&quot;</span></span>
<span class="line"><span>        - &quot;--storage.tsdb.retention=24h&quot;</span></span>
<span class="line"><span>        - &quot;--web.enable-admin-api&quot;</span></span>
<span class="line"><span>        - &quot;--web.enable-lifecycle&quot;</span></span>
<span class="line"><span>        ports:</span></span>
<span class="line"><span>        - containerPort: 9090</span></span>
<span class="line"><span>          protocol: TCP</span></span>
<span class="line"><span>        volumeMounts:</span></span>
<span class="line"><span>        - mountPath: &quot;/prometheus&quot;</span></span>
<span class="line"><span>          name: data</span></span>
<span class="line"><span>        - mountPath: &quot;/etc/prometheus&quot;</span></span>
<span class="line"><span>          name: config-volume</span></span>
<span class="line"><span>        resources:</span></span>
<span class="line"><span>          requests:</span></span>
<span class="line"><span>            cpu: 100m</span></span>
<span class="line"><span>            memory: 100Mi</span></span>
<span class="line"><span>          limits:</span></span>
<span class="line"><span>            cpu: 500m</span></span>
<span class="line"><span>            memory: 1024Mi</span></span>
<span class="line"><span>      serviceAccountName: prometheus</span></span>
<span class="line"><span>      volumes:</span></span>
<span class="line"><span>      - name: data</span></span>
<span class="line"><span>        persistentVolumeClaim:</span></span>
<span class="line"><span>          claimName: nfs-pvc-prometheus</span></span>
<span class="line"><span>      - name: config-volume</span></span>
<span class="line"><span>        configMap:</span></span>
<span class="line"><span>          name: prometheus-config</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="_5、service资源" tabindex="-1"><a class="header-anchor" href="#_5、service资源"><span>5、service资源</span></a></h5><p>nodeport type提供外部入口</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@master ~]# cat prometheus-svc.yaml</span></span>
<span class="line"><span>---</span></span>
<span class="line"><span>kind: Service</span></span>
<span class="line"><span>apiVersion: v1</span></span>
<span class="line"><span>metadata:</span></span>
<span class="line"><span>  labels:</span></span>
<span class="line"><span>    app: prometheus</span></span>
<span class="line"><span>  name: prometheus</span></span>
<span class="line"><span>  namespace: kube-system</span></span>
<span class="line"><span>spec:</span></span>
<span class="line"><span>  type: NodePort</span></span>
<span class="line"><span>  ports:</span></span>
<span class="line"><span>  - port: 9090</span></span>
<span class="line"><span>    targetPort: 9090</span></span>
<span class="line"><span>    nodePort: 30003</span></span>
<span class="line"><span>  selector:</span></span>
<span class="line"><span>    app: prometheus</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@master ~]# kubectl apply -f prometheus-configmap.yaml</span></span>
<span class="line"><span>[root@master ~]# kubectl apply -f prometheus-rbac.yaml</span></span>
<span class="line"><span>[root@master ~]# kubectl apply -f prometheus-pvc.yaml</span></span>
<span class="line"><span>[root@master ~]# kubectl apply -f prometheus-deploy.yaml</span></span>
<span class="line"><span>[root@master ~]# kubectl apply -f prometheus-svc.yaml</span></span>
<span class="line"><span>[root@master ~]# kubectl get pod,pv,pvc,svc,cm,serviceaccount -A | grep prometheus</span></span>
<span class="line"><span>kube-system    pod/prometheus-854c547b7d-dc5gs      1/1     Running   0          153m</span></span>
<span class="line"><span>            persistentvolume/nfs-pv-prometheus       10Gi       RWX            Retain           Bound    kube-system/nfs-pvc-prometheus                               153m</span></span>
<span class="line"><span>kube-system   persistentvolumeclaim/nfs-pvc-prometheus       Bound    nfs-pv-prometheus       10Gi       RWX                           153m</span></span>
<span class="line"><span>kube-system   service/prometheus   NodePort    10.98.163.37   &amp;lt;none&amp;gt;        9090:30003/TCP           178m</span></span>
<span class="line"><span>kube-system       configmap/prometheus-config                    1      179m</span></span>
<span class="line"><span>kube-system       serviceaccount/prometheus                           1         179m</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><img loading="lazy" src="https://www.chenjiao.cloud/upload/prometheus.png" alt="prometheus.png" width="100%" height="100%" style="display:inline-block;"><h4 id="六、部署grafana" tabindex="-1"><a class="header-anchor" href="#六、部署grafana"><span>六、部署grafana</span></a></h4><h5 id="_1、grafana-configmap资源" tabindex="-1"><a class="header-anchor" href="#_1、grafana-configmap资源"><span>1、grafana-configmap资源</span></a></h5><p>整合了datasource,dashboard， http://prometheus:9090(http://prometheus-service-name:port)</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@master ~]# cat grafana-cm.yaml</span></span>
<span class="line"><span>apiVersion: v1</span></span>
<span class="line"><span>kind: ConfigMap</span></span>
<span class="line"><span>metadata:</span></span>
<span class="line"><span>  name: grafana-datasources</span></span>
<span class="line"><span>  namespace: kube-system</span></span>
<span class="line"><span>data:</span></span>
<span class="line"><span>  data_source.yaml: |</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        &quot;apiVersion&quot;: 1,</span></span>
<span class="line"><span>        &quot;datasources&quot;: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>                &quot;access&quot;: &quot;proxy&quot;,</span></span>
<span class="line"><span>                &quot;editable&quot;: false,</span></span>
<span class="line"><span>                &quot;name&quot;: &quot;Prometheus&quot;,</span></span>
<span class="line"><span>                &quot;orgId&quot;: 1,</span></span>
<span class="line"><span>                &quot;type&quot;: &quot;prometheus&quot;,</span></span>
<span class="line"><span>                &quot;url&quot;: &quot;http://prometheus:9090&quot;,</span></span>
<span class="line"><span>                &quot;version&quot;: 1</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        ]</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>---</span></span>
<span class="line"><span>apiVersion: v1</span></span>
<span class="line"><span>kind: ConfigMap</span></span>
<span class="line"><span>metadata:</span></span>
<span class="line"><span>  name: grafana-dashboards</span></span>
<span class="line"><span>  namespace: kube-system</span></span>
<span class="line"><span>data:</span></span>
<span class="line"><span>  dashboards.yaml: |-</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        &quot;apiVersion&quot;: 1,</span></span>
<span class="line"><span>        &quot;providers&quot;: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>                &quot;folder&quot;: &quot;Default&quot;,</span></span>
<span class="line"><span>                &quot;name&quot;: &quot;0&quot;,</span></span>
<span class="line"><span>                &quot;options&quot;: {</span></span>
<span class="line"><span>                    &quot;path&quot;: &quot;/grafana-dashboard-definitions/0&quot;</span></span>
<span class="line"><span>                },</span></span>
<span class="line"><span>                &quot;orgId&quot;: 1,</span></span>
<span class="line"><span>                &quot;type&quot;: &quot;file&quot;</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        ]</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>---</span></span>
<span class="line"><span>apiVersion: v1</span></span>
<span class="line"><span>kind: ConfigMap</span></span>
<span class="line"><span>metadata:</span></span>
<span class="line"><span>  name: grafana-k8s-pod-resource</span></span>
<span class="line"><span>  namespace: kube-system</span></span>
<span class="line"><span>data:</span></span>
<span class="line"><span>  Kubernetes-Pod-Resources.json: |</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>      &quot;annotations&quot;: {</span></span>
<span class="line"><span>        &quot;list&quot;: [</span></span>
<span class="line"><span>          {</span></span>
<span class="line"><span>            &quot;builtIn&quot;: 1,</span></span>
<span class="line"><span>            &quot;datasource&quot;: &quot;-- Grafana --&quot;,</span></span>
<span class="line"><span>            &quot;enable&quot;: true,</span></span>
<span class="line"><span>            &quot;hide&quot;: true,</span></span>
<span class="line"><span>            &quot;iconColor&quot;: &quot;rgba(0, 211, 255, 1)&quot;,</span></span>
<span class="line"><span>            &quot;name&quot;: &quot;Annotations &amp;amp; Alerts&quot;,</span></span>
<span class="line"><span>            &quot;type&quot;: &quot;dashboard&quot;</span></span>
<span class="line"><span>          }</span></span>
<span class="line"><span>        ]</span></span>
<span class="line"><span>      },</span></span>
<span class="line"><span>      &quot;description&quot;: &quot;Shows resource usage of Kubernetes pods.&quot;,</span></span>
<span class="line"><span>      &quot;editable&quot;: true,</span></span>
<span class="line"><span>      &quot;gnetId&quot;: 737,</span></span>
<span class="line"><span>      &quot;graphTooltip&quot;: 0,</span></span>
<span class="line"><span>      &quot;id&quot;: 1,</span></span>
<span class="line"><span>      &quot;iteration&quot;: 1624950781810,</span></span>
<span class="line"><span>      &quot;links&quot;: [],</span></span>
<span class="line"><span>      &quot;panels&quot;: [</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          &quot;collapsed&quot;: false,</span></span>
<span class="line"><span>          &quot;datasource&quot;: null,</span></span>
<span class="line"><span>          &quot;gridPos&quot;: {</span></span>
<span class="line"><span>            &quot;h&quot;: 1,</span></span>
<span class="line"><span>            &quot;w&quot;: 24,</span></span>
<span class="line"><span>            &quot;x&quot;: 0,</span></span>
<span class="line"><span>            &quot;y&quot;: 0</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;id&quot;: 35,</span></span>
<span class="line"><span>          &quot;panels&quot;: [],</span></span>
<span class="line"><span>          &quot;title&quot;: &quot;节点资源统计&quot;,</span></span>
<span class="line"><span>          &quot;type&quot;: &quot;row&quot;</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          &quot;cacheTimeout&quot;: null,</span></span>
<span class="line"><span>          &quot;datasource&quot;: &quot;Prometheus&quot;,</span></span>
<span class="line"><span>          &quot;fieldConfig&quot;: {</span></span>
<span class="line"><span>            &quot;defaults&quot;: {</span></span>
<span class="line"><span>              &quot;color&quot;: {</span></span>
<span class="line"><span>                &quot;mode&quot;: &quot;thresholds&quot;</span></span>
<span class="line"><span>              },</span></span>
<span class="line"><span>              &quot;mappings&quot;: [</span></span>
<span class="line"><span>                {</span></span>
<span class="line"><span>                  &quot;options&quot;: {</span></span>
<span class="line"><span>                    &quot;match&quot;: &quot;null&quot;,</span></span>
<span class="line"><span>                    &quot;result&quot;: {</span></span>
<span class="line"><span>                      &quot;text&quot;: &quot;N/A&quot;</span></span>
<span class="line"><span>                    }</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  &quot;type&quot;: &quot;special&quot;</span></span>
<span class="line"><span>                }</span></span>
<span class="line"><span>              ],</span></span>
<span class="line"><span>              &quot;max&quot;: 100,</span></span>
<span class="line"><span>              &quot;min&quot;: 0,</span></span>
<span class="line"><span>              &quot;thresholds&quot;: {</span></span>
<span class="line"><span>                &quot;mode&quot;: &quot;absolute&quot;,</span></span>
<span class="line"><span>                &quot;steps&quot;: [</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    &quot;color&quot;: &quot;rgba(50, 172, 45, 0.97)&quot;,</span></span>
<span class="line"><span>                    &quot;value&quot;: null</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    &quot;color&quot;: &quot;rgba(237, 129, 40, 0.89)&quot;,</span></span>
<span class="line"><span>                    &quot;value&quot;: 65</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    &quot;color&quot;: &quot;rgba(245, 54, 54, 0.9)&quot;,</span></span>
<span class="line"><span>                    &quot;value&quot;: 90</span></span>
<span class="line"><span>                  }</span></span>
<span class="line"><span>                ]</span></span>
<span class="line"><span>              },</span></span>
<span class="line"><span>              &quot;unit&quot;: &quot;percent&quot;</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            &quot;overrides&quot;: []</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;gridPos&quot;: {</span></span>
<span class="line"><span>            &quot;h&quot;: 5,</span></span>
<span class="line"><span>            &quot;w&quot;: 8,</span></span>
<span class="line"><span>            &quot;x&quot;: 0,</span></span>
<span class="line"><span>            &quot;y&quot;: 1</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;id&quot;: 4,</span></span>
<span class="line"><span>          &quot;interval&quot;: null,</span></span>
<span class="line"><span>          &quot;links&quot;: [],</span></span>
<span class="line"><span>          &quot;maxDataPoints&quot;: 100,</span></span>
<span class="line"><span>          &quot;options&quot;: {</span></span>
<span class="line"><span>            &quot;orientation&quot;: &quot;horizontal&quot;,</span></span>
<span class="line"><span>            &quot;reduceOptions&quot;: {</span></span>
<span class="line"><span>              &quot;calcs&quot;: [</span></span>
<span class="line"><span>                &quot;lastNotNull&quot;</span></span>
<span class="line"><span>              ],</span></span>
<span class="line"><span>              &quot;fields&quot;: &quot;&quot;,</span></span>
<span class="line"><span>              &quot;values&quot;: false</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            &quot;showThresholdLabels&quot;: false,</span></span>
<span class="line"><span>            &quot;showThresholdMarkers&quot;: true,</span></span>
<span class="line"><span>            &quot;text&quot;: {}</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;pluginVersion&quot;: &quot;8.0.3&quot;,</span></span>
<span class="line"><span>          &quot;targets&quot;: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;expr&quot;: &quot;sum (container_memory_working_set_bytes{id=\\&quot;/\\&quot;,instance=~\\&quot;^$instance$\\&quot;}) / sum (machine_memory_bytes{instance=~\\&quot;^$instance$\\&quot;}) * 100&quot;,</span></span>
<span class="line"><span>              &quot;interval&quot;: &quot;&quot;,</span></span>
<span class="line"><span>              &quot;intervalFactor&quot;: 2,</span></span>
<span class="line"><span>              &quot;legendFormat&quot;: &quot;&quot;,</span></span>
<span class="line"><span>              &quot;refId&quot;: &quot;A&quot;,</span></span>
<span class="line"><span>              &quot;step&quot;: 2</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>          ],</span></span>
<span class="line"><span>          &quot;timeFrom&quot;: &quot;1m&quot;,</span></span>
<span class="line"><span>          &quot;timeShift&quot;: null,</span></span>
<span class="line"><span>          &quot;title&quot;: &quot;内存使用量&quot;,</span></span>
<span class="line"><span>          &quot;type&quot;: &quot;gauge&quot;</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          &quot;cacheTimeout&quot;: null,</span></span>
<span class="line"><span>          &quot;datasource&quot;: &quot;Prometheus&quot;,</span></span>
<span class="line"><span>          &quot;fieldConfig&quot;: {</span></span>
<span class="line"><span>            &quot;defaults&quot;: {</span></span>
<span class="line"><span>              &quot;color&quot;: {</span></span>
<span class="line"><span>                &quot;mode&quot;: &quot;thresholds&quot;</span></span>
<span class="line"><span>              },</span></span>
<span class="line"><span>              &quot;decimals&quot;: 2,</span></span>
<span class="line"><span>              &quot;mappings&quot;: [</span></span>
<span class="line"><span>                {</span></span>
<span class="line"><span>                  &quot;options&quot;: {</span></span>
<span class="line"><span>                    &quot;match&quot;: &quot;null&quot;,</span></span>
<span class="line"><span>                    &quot;result&quot;: {</span></span>
<span class="line"><span>                      &quot;text&quot;: &quot;N/A&quot;</span></span>
<span class="line"><span>                    }</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  &quot;type&quot;: &quot;special&quot;</span></span>
<span class="line"><span>                }</span></span>
<span class="line"><span>              ],</span></span>
<span class="line"><span>              &quot;max&quot;: 100,</span></span>
<span class="line"><span>              &quot;min&quot;: 0,</span></span>
<span class="line"><span>              &quot;thresholds&quot;: {</span></span>
<span class="line"><span>                &quot;mode&quot;: &quot;absolute&quot;,</span></span>
<span class="line"><span>                &quot;steps&quot;: [</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    &quot;color&quot;: &quot;rgba(50, 172, 45, 0.97)&quot;,</span></span>
<span class="line"><span>                    &quot;value&quot;: null</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    &quot;color&quot;: &quot;rgba(237, 129, 40, 0.89)&quot;,</span></span>
<span class="line"><span>                    &quot;value&quot;: 65</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    &quot;color&quot;: &quot;rgba(245, 54, 54, 0.9)&quot;,</span></span>
<span class="line"><span>                    &quot;value&quot;: 90</span></span>
<span class="line"><span>                  }</span></span>
<span class="line"><span>                ]</span></span>
<span class="line"><span>              },</span></span>
<span class="line"><span>              &quot;unit&quot;: &quot;percent&quot;</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            &quot;overrides&quot;: []</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;gridPos&quot;: {</span></span>
<span class="line"><span>            &quot;h&quot;: 5,</span></span>
<span class="line"><span>            &quot;w&quot;: 8,</span></span>
<span class="line"><span>            &quot;x&quot;: 8,</span></span>
<span class="line"><span>            &quot;y&quot;: 1</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;id&quot;: 6,</span></span>
<span class="line"><span>          &quot;interval&quot;: null,</span></span>
<span class="line"><span>          &quot;links&quot;: [],</span></span>
<span class="line"><span>          &quot;maxDataPoints&quot;: 100,</span></span>
<span class="line"><span>          &quot;options&quot;: {</span></span>
<span class="line"><span>            &quot;orientation&quot;: &quot;horizontal&quot;,</span></span>
<span class="line"><span>            &quot;reduceOptions&quot;: {</span></span>
<span class="line"><span>              &quot;calcs&quot;: [</span></span>
<span class="line"><span>                &quot;lastNotNull&quot;</span></span>
<span class="line"><span>              ],</span></span>
<span class="line"><span>              &quot;fields&quot;: &quot;&quot;,</span></span>
<span class="line"><span>              &quot;values&quot;: false</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            &quot;showThresholdLabels&quot;: false,</span></span>
<span class="line"><span>            &quot;showThresholdMarkers&quot;: true,</span></span>
<span class="line"><span>            &quot;text&quot;: {}</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;pluginVersion&quot;: &quot;8.0.3&quot;,</span></span>
<span class="line"><span>          &quot;targets&quot;: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;expr&quot;: &quot;sum(rate(container_cpu_usage_seconds_total{id=\\&quot;/\\&quot;,instance=~\\&quot;^$instance$\\&quot;}[1m])) / sum (machine_cpu_cores{instance=~\\&quot;^$instance$\\&quot;}) * 100&quot;,</span></span>
<span class="line"><span>              &quot;interval&quot;: &quot;10s&quot;,</span></span>
<span class="line"><span>              &quot;intervalFactor&quot;: 1,</span></span>
<span class="line"><span>              &quot;refId&quot;: &quot;A&quot;,</span></span>
<span class="line"><span>              &quot;step&quot;: 10</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>          ],</span></span>
<span class="line"><span>          &quot;timeFrom&quot;: &quot;1m&quot;,</span></span>
<span class="line"><span>          &quot;timeShift&quot;: null,</span></span>
<span class="line"><span>          &quot;title&quot;: &quot;Cpu 使用量&quot;,</span></span>
<span class="line"><span>          &quot;type&quot;: &quot;gauge&quot;</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          &quot;cacheTimeout&quot;: null,</span></span>
<span class="line"><span>          &quot;datasource&quot;: &quot;Prometheus&quot;,</span></span>
<span class="line"><span>          &quot;fieldConfig&quot;: {</span></span>
<span class="line"><span>            &quot;defaults&quot;: {</span></span>
<span class="line"><span>              &quot;color&quot;: {</span></span>
<span class="line"><span>                &quot;mode&quot;: &quot;thresholds&quot;</span></span>
<span class="line"><span>              },</span></span>
<span class="line"><span>              &quot;decimals&quot;: 2,</span></span>
<span class="line"><span>              &quot;mappings&quot;: [</span></span>
<span class="line"><span>                {</span></span>
<span class="line"><span>                  &quot;options&quot;: {</span></span>
<span class="line"><span>                    &quot;match&quot;: &quot;null&quot;,</span></span>
<span class="line"><span>                    &quot;result&quot;: {</span></span>
<span class="line"><span>                      &quot;text&quot;: &quot;N/A&quot;</span></span>
<span class="line"><span>                    }</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  &quot;type&quot;: &quot;special&quot;</span></span>
<span class="line"><span>                }</span></span>
<span class="line"><span>              ],</span></span>
<span class="line"><span>              &quot;max&quot;: 100,</span></span>
<span class="line"><span>              &quot;min&quot;: 0,</span></span>
<span class="line"><span>              &quot;thresholds&quot;: {</span></span>
<span class="line"><span>                &quot;mode&quot;: &quot;absolute&quot;,</span></span>
<span class="line"><span>                &quot;steps&quot;: [</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    &quot;color&quot;: &quot;rgba(50, 172, 45, 0.97)&quot;,</span></span>
<span class="line"><span>                    &quot;value&quot;: null</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    &quot;color&quot;: &quot;rgba(237, 129, 40, 0.89)&quot;,</span></span>
<span class="line"><span>                    &quot;value&quot;: 65</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    &quot;color&quot;: &quot;rgba(245, 54, 54, 0.9)&quot;,</span></span>
<span class="line"><span>                    &quot;value&quot;: 90</span></span>
<span class="line"><span>                  }</span></span>
<span class="line"><span>                ]</span></span>
<span class="line"><span>              },</span></span>
<span class="line"><span>              &quot;unit&quot;: &quot;percent&quot;</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            &quot;overrides&quot;: []</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;gridPos&quot;: {</span></span>
<span class="line"><span>            &quot;h&quot;: 5,</span></span>
<span class="line"><span>            &quot;w&quot;: 8,</span></span>
<span class="line"><span>            &quot;x&quot;: 16,</span></span>
<span class="line"><span>            &quot;y&quot;: 1</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;id&quot;: 7,</span></span>
<span class="line"><span>          &quot;interval&quot;: null,</span></span>
<span class="line"><span>          &quot;links&quot;: [],</span></span>
<span class="line"><span>          &quot;maxDataPoints&quot;: 100,</span></span>
<span class="line"><span>          &quot;options&quot;: {</span></span>
<span class="line"><span>            &quot;orientation&quot;: &quot;horizontal&quot;,</span></span>
<span class="line"><span>            &quot;reduceOptions&quot;: {</span></span>
<span class="line"><span>              &quot;calcs&quot;: [</span></span>
<span class="line"><span>                &quot;lastNotNull&quot;</span></span>
<span class="line"><span>              ],</span></span>
<span class="line"><span>              &quot;fields&quot;: &quot;&quot;,</span></span>
<span class="line"><span>              &quot;values&quot;: false</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            &quot;showThresholdLabels&quot;: false,</span></span>
<span class="line"><span>            &quot;showThresholdMarkers&quot;: true,</span></span>
<span class="line"><span>            &quot;text&quot;: {}</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;pluginVersion&quot;: &quot;8.0.3&quot;,</span></span>
<span class="line"><span>          &quot;targets&quot;: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;expr&quot;: &quot;sum(container_fs_usage_bytes{id=\\&quot;/\\&quot;,instance=~\\&quot;^$instance$\\&quot;}) / sum(container_fs_limit_bytes{id=\\&quot;/\\&quot;,instance=~\\&quot;^$instance$\\&quot;}) * 100&quot;,</span></span>
<span class="line"><span>              &quot;interval&quot;: &quot;10s&quot;,</span></span>
<span class="line"><span>              &quot;intervalFactor&quot;: 1,</span></span>
<span class="line"><span>              &quot;legendFormat&quot;: &quot;&quot;,</span></span>
<span class="line"><span>              &quot;metric&quot;: &quot;&quot;,</span></span>
<span class="line"><span>              &quot;refId&quot;: &quot;A&quot;,</span></span>
<span class="line"><span>              &quot;step&quot;: 10</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>          ],</span></span>
<span class="line"><span>          &quot;timeFrom&quot;: &quot;1m&quot;,</span></span>
<span class="line"><span>          &quot;timeShift&quot;: null,</span></span>
<span class="line"><span>          &quot;title&quot;: &quot;磁盘使用量&quot;,</span></span>
<span class="line"><span>          &quot;type&quot;: &quot;gauge&quot;</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          &quot;cacheTimeout&quot;: null,</span></span>
<span class="line"><span>          &quot;datasource&quot;: &quot;Prometheus&quot;,</span></span>
<span class="line"><span>          &quot;fieldConfig&quot;: {</span></span>
<span class="line"><span>            &quot;defaults&quot;: {</span></span>
<span class="line"><span>              &quot;color&quot;: {</span></span>
<span class="line"><span>                &quot;mode&quot;: &quot;thresholds&quot;</span></span>
<span class="line"><span>              },</span></span>
<span class="line"><span>              &quot;decimals&quot;: 2,</span></span>
<span class="line"><span>              &quot;mappings&quot;: [</span></span>
<span class="line"><span>                {</span></span>
<span class="line"><span>                  &quot;options&quot;: {</span></span>
<span class="line"><span>                    &quot;match&quot;: &quot;null&quot;,</span></span>
<span class="line"><span>                    &quot;result&quot;: {</span></span>
<span class="line"><span>                      &quot;text&quot;: &quot;N/A&quot;</span></span>
<span class="line"><span>                    }</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  &quot;type&quot;: &quot;special&quot;</span></span>
<span class="line"><span>                }</span></span>
<span class="line"><span>              ],</span></span>
<span class="line"><span>              &quot;thresholds&quot;: {</span></span>
<span class="line"><span>                &quot;mode&quot;: &quot;absolute&quot;,</span></span>
<span class="line"><span>                &quot;steps&quot;: [</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    &quot;color&quot;: &quot;green&quot;,</span></span>
<span class="line"><span>                    &quot;value&quot;: null</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    &quot;color&quot;: &quot;red&quot;,</span></span>
<span class="line"><span>                    &quot;value&quot;: 80</span></span>
<span class="line"><span>                  }</span></span>
<span class="line"><span>                ]</span></span>
<span class="line"><span>              },</span></span>
<span class="line"><span>              &quot;unit&quot;: &quot;bytes&quot;</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            &quot;overrides&quot;: []</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;gridPos&quot;: {</span></span>
<span class="line"><span>            &quot;h&quot;: 3,</span></span>
<span class="line"><span>            &quot;w&quot;: 4,</span></span>
<span class="line"><span>            &quot;x&quot;: 0,</span></span>
<span class="line"><span>            &quot;y&quot;: 6</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;hideTimeOverride&quot;: true,</span></span>
<span class="line"><span>          &quot;id&quot;: 9,</span></span>
<span class="line"><span>          &quot;interval&quot;: null,</span></span>
<span class="line"><span>          &quot;links&quot;: [],</span></span>
<span class="line"><span>          &quot;maxDataPoints&quot;: 100,</span></span>
<span class="line"><span>          &quot;options&quot;: {</span></span>
<span class="line"><span>            &quot;colorMode&quot;: &quot;none&quot;,</span></span>
<span class="line"><span>            &quot;graphMode&quot;: &quot;none&quot;,</span></span>
<span class="line"><span>            &quot;justifyMode&quot;: &quot;auto&quot;,</span></span>
<span class="line"><span>            &quot;orientation&quot;: &quot;horizontal&quot;,</span></span>
<span class="line"><span>            &quot;reduceOptions&quot;: {</span></span>
<span class="line"><span>              &quot;calcs&quot;: [</span></span>
<span class="line"><span>                &quot;lastNotNull&quot;</span></span>
<span class="line"><span>              ],</span></span>
<span class="line"><span>              &quot;fields&quot;: &quot;&quot;,</span></span>
<span class="line"><span>              &quot;values&quot;: false</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            &quot;text&quot;: {},</span></span>
<span class="line"><span>            &quot;textMode&quot;: &quot;auto&quot;</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;pluginVersion&quot;: &quot;8.0.3&quot;,</span></span>
<span class="line"><span>          &quot;targets&quot;: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;expr&quot;: &quot;sum(container_memory_working_set_bytes{id=\\&quot;/\\&quot;,instance=~\\&quot;^$instance$\\&quot;})&quot;,</span></span>
<span class="line"><span>              &quot;interval&quot;: &quot;10s&quot;,</span></span>
<span class="line"><span>              &quot;intervalFactor&quot;: 1,</span></span>
<span class="line"><span>              &quot;refId&quot;: &quot;A&quot;,</span></span>
<span class="line"><span>              &quot;step&quot;: 10</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>          ],</span></span>
<span class="line"><span>          &quot;timeFrom&quot;: &quot;1m&quot;,</span></span>
<span class="line"><span>          &quot;title&quot;: &quot;Used&quot;,</span></span>
<span class="line"><span>          &quot;type&quot;: &quot;stat&quot;</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          &quot;cacheTimeout&quot;: null,</span></span>
<span class="line"><span>          &quot;datasource&quot;: &quot;Prometheus&quot;,</span></span>
<span class="line"><span>          &quot;fieldConfig&quot;: {</span></span>
<span class="line"><span>            &quot;defaults&quot;: {</span></span>
<span class="line"><span>              &quot;color&quot;: {</span></span>
<span class="line"><span>                &quot;mode&quot;: &quot;thresholds&quot;</span></span>
<span class="line"><span>              },</span></span>
<span class="line"><span>              &quot;decimals&quot;: 2,</span></span>
<span class="line"><span>              &quot;mappings&quot;: [</span></span>
<span class="line"><span>                {</span></span>
<span class="line"><span>                  &quot;options&quot;: {</span></span>
<span class="line"><span>                    &quot;match&quot;: &quot;null&quot;,</span></span>
<span class="line"><span>                    &quot;result&quot;: {</span></span>
<span class="line"><span>                      &quot;text&quot;: &quot;N/A&quot;</span></span>
<span class="line"><span>                    }</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  &quot;type&quot;: &quot;special&quot;</span></span>
<span class="line"><span>                }</span></span>
<span class="line"><span>              ],</span></span>
<span class="line"><span>              &quot;thresholds&quot;: {</span></span>
<span class="line"><span>                &quot;mode&quot;: &quot;absolute&quot;,</span></span>
<span class="line"><span>                &quot;steps&quot;: [</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    &quot;color&quot;: &quot;green&quot;,</span></span>
<span class="line"><span>                    &quot;value&quot;: null</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    &quot;color&quot;: &quot;red&quot;,</span></span>
<span class="line"><span>                    &quot;value&quot;: 80</span></span>
<span class="line"><span>                  }</span></span>
<span class="line"><span>                ]</span></span>
<span class="line"><span>              },</span></span>
<span class="line"><span>              &quot;unit&quot;: &quot;bytes&quot;</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            &quot;overrides&quot;: []</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;gridPos&quot;: {</span></span>
<span class="line"><span>            &quot;h&quot;: 3,</span></span>
<span class="line"><span>            &quot;w&quot;: 4,</span></span>
<span class="line"><span>            &quot;x&quot;: 4,</span></span>
<span class="line"><span>            &quot;y&quot;: 6</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;hideTimeOverride&quot;: true,</span></span>
<span class="line"><span>          &quot;id&quot;: 10,</span></span>
<span class="line"><span>          &quot;interval&quot;: null,</span></span>
<span class="line"><span>          &quot;links&quot;: [],</span></span>
<span class="line"><span>          &quot;maxDataPoints&quot;: 100,</span></span>
<span class="line"><span>          &quot;options&quot;: {</span></span>
<span class="line"><span>            &quot;colorMode&quot;: &quot;none&quot;,</span></span>
<span class="line"><span>            &quot;graphMode&quot;: &quot;none&quot;,</span></span>
<span class="line"><span>            &quot;justifyMode&quot;: &quot;auto&quot;,</span></span>
<span class="line"><span>            &quot;orientation&quot;: &quot;horizontal&quot;,</span></span>
<span class="line"><span>            &quot;reduceOptions&quot;: {</span></span>
<span class="line"><span>              &quot;calcs&quot;: [</span></span>
<span class="line"><span>                &quot;lastNotNull&quot;</span></span>
<span class="line"><span>              ],</span></span>
<span class="line"><span>              &quot;fields&quot;: &quot;&quot;,</span></span>
<span class="line"><span>              &quot;values&quot;: false</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            &quot;text&quot;: {},</span></span>
<span class="line"><span>            &quot;textMode&quot;: &quot;auto&quot;</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;pluginVersion&quot;: &quot;8.0.3&quot;,</span></span>
<span class="line"><span>          &quot;targets&quot;: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;expr&quot;: &quot;sum (machine_memory_bytes{instance=~\\&quot;^$instance$\\&quot;})&quot;,</span></span>
<span class="line"><span>              &quot;interval&quot;: &quot;10s&quot;,</span></span>
<span class="line"><span>              &quot;intervalFactor&quot;: 1,</span></span>
<span class="line"><span>              &quot;refId&quot;: &quot;A&quot;,</span></span>
<span class="line"><span>              &quot;step&quot;: 10</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>          ],</span></span>
<span class="line"><span>          &quot;timeFrom&quot;: &quot;1m&quot;,</span></span>
<span class="line"><span>          &quot;title&quot;: &quot;Total&quot;,</span></span>
<span class="line"><span>          &quot;type&quot;: &quot;stat&quot;</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          &quot;cacheTimeout&quot;: null,</span></span>
<span class="line"><span>          &quot;datasource&quot;: &quot;Prometheus&quot;,</span></span>
<span class="line"><span>          &quot;fieldConfig&quot;: {</span></span>
<span class="line"><span>            &quot;defaults&quot;: {</span></span>
<span class="line"><span>              &quot;color&quot;: {</span></span>
<span class="line"><span>                &quot;mode&quot;: &quot;thresholds&quot;</span></span>
<span class="line"><span>              },</span></span>
<span class="line"><span>              &quot;decimals&quot;: 2,</span></span>
<span class="line"><span>              &quot;mappings&quot;: [</span></span>
<span class="line"><span>                {</span></span>
<span class="line"><span>                  &quot;options&quot;: {</span></span>
<span class="line"><span>                    &quot;match&quot;: &quot;null&quot;,</span></span>
<span class="line"><span>                    &quot;result&quot;: {</span></span>
<span class="line"><span>                      &quot;text&quot;: &quot;N/A&quot;</span></span>
<span class="line"><span>                    }</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  &quot;type&quot;: &quot;special&quot;</span></span>
<span class="line"><span>                }</span></span>
<span class="line"><span>              ],</span></span>
<span class="line"><span>              &quot;thresholds&quot;: {</span></span>
<span class="line"><span>                &quot;mode&quot;: &quot;absolute&quot;,</span></span>
<span class="line"><span>                &quot;steps&quot;: [</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    &quot;color&quot;: &quot;green&quot;,</span></span>
<span class="line"><span>                    &quot;value&quot;: null</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    &quot;color&quot;: &quot;red&quot;,</span></span>
<span class="line"><span>                    &quot;value&quot;: 80</span></span>
<span class="line"><span>                  }</span></span>
<span class="line"><span>                ]</span></span>
<span class="line"><span>              },</span></span>
<span class="line"><span>              &quot;unit&quot;: &quot;none&quot;</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            &quot;overrides&quot;: []</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;gridPos&quot;: {</span></span>
<span class="line"><span>            &quot;h&quot;: 3,</span></span>
<span class="line"><span>            &quot;w&quot;: 4,</span></span>
<span class="line"><span>            &quot;x&quot;: 8,</span></span>
<span class="line"><span>            &quot;y&quot;: 6</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;hideTimeOverride&quot;: true,</span></span>
<span class="line"><span>          &quot;id&quot;: 11,</span></span>
<span class="line"><span>          &quot;interval&quot;: null,</span></span>
<span class="line"><span>          &quot;links&quot;: [],</span></span>
<span class="line"><span>          &quot;maxDataPoints&quot;: 100,</span></span>
<span class="line"><span>          &quot;options&quot;: {</span></span>
<span class="line"><span>            &quot;colorMode&quot;: &quot;none&quot;,</span></span>
<span class="line"><span>            &quot;graphMode&quot;: &quot;none&quot;,</span></span>
<span class="line"><span>            &quot;justifyMode&quot;: &quot;auto&quot;,</span></span>
<span class="line"><span>            &quot;orientation&quot;: &quot;horizontal&quot;,</span></span>
<span class="line"><span>            &quot;reduceOptions&quot;: {</span></span>
<span class="line"><span>              &quot;calcs&quot;: [</span></span>
<span class="line"><span>                &quot;lastNotNull&quot;</span></span>
<span class="line"><span>              ],</span></span>
<span class="line"><span>              &quot;fields&quot;: &quot;&quot;,</span></span>
<span class="line"><span>              &quot;values&quot;: false</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            &quot;text&quot;: {},</span></span>
<span class="line"><span>            &quot;textMode&quot;: &quot;auto&quot;</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;pluginVersion&quot;: &quot;8.0.3&quot;,</span></span>
<span class="line"><span>          &quot;targets&quot;: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;expr&quot;: &quot;sum (rate (container_cpu_usage_seconds_total{id=\\&quot;/\\&quot;,instance=~\\&quot;^$instance$\\&quot;}[1m]))&quot;,</span></span>
<span class="line"><span>              &quot;interval&quot;: &quot;10s&quot;,</span></span>
<span class="line"><span>              &quot;intervalFactor&quot;: 1,</span></span>
<span class="line"><span>              &quot;refId&quot;: &quot;A&quot;,</span></span>
<span class="line"><span>              &quot;step&quot;: 10</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>          ],</span></span>
<span class="line"><span>          &quot;timeFrom&quot;: &quot;1m&quot;,</span></span>
<span class="line"><span>          &quot;timeShift&quot;: null,</span></span>
<span class="line"><span>          &quot;title&quot;: &quot;Used&quot;,</span></span>
<span class="line"><span>          &quot;type&quot;: &quot;stat&quot;</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          &quot;cacheTimeout&quot;: null,</span></span>
<span class="line"><span>          &quot;datasource&quot;: &quot;Prometheus&quot;,</span></span>
<span class="line"><span>          &quot;fieldConfig&quot;: {</span></span>
<span class="line"><span>            &quot;defaults&quot;: {</span></span>
<span class="line"><span>              &quot;color&quot;: {</span></span>
<span class="line"><span>                &quot;mode&quot;: &quot;thresholds&quot;</span></span>
<span class="line"><span>              },</span></span>
<span class="line"><span>              &quot;decimals&quot;: 2,</span></span>
<span class="line"><span>              &quot;mappings&quot;: [</span></span>
<span class="line"><span>                {</span></span>
<span class="line"><span>                  &quot;options&quot;: {</span></span>
<span class="line"><span>                    &quot;match&quot;: &quot;null&quot;,</span></span>
<span class="line"><span>                    &quot;result&quot;: {</span></span>
<span class="line"><span>                      &quot;text&quot;: &quot;N/A&quot;</span></span>
<span class="line"><span>                    }</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  &quot;type&quot;: &quot;special&quot;</span></span>
<span class="line"><span>                }</span></span>
<span class="line"><span>              ],</span></span>
<span class="line"><span>              &quot;thresholds&quot;: {</span></span>
<span class="line"><span>                &quot;mode&quot;: &quot;absolute&quot;,</span></span>
<span class="line"><span>                &quot;steps&quot;: [</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    &quot;color&quot;: &quot;green&quot;,</span></span>
<span class="line"><span>                    &quot;value&quot;: null</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    &quot;color&quot;: &quot;red&quot;,</span></span>
<span class="line"><span>                    &quot;value&quot;: 80</span></span>
<span class="line"><span>                  }</span></span>
<span class="line"><span>                ]</span></span>
<span class="line"><span>              },</span></span>
<span class="line"><span>              &quot;unit&quot;: &quot;none&quot;</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            &quot;overrides&quot;: []</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;gridPos&quot;: {</span></span>
<span class="line"><span>            &quot;h&quot;: 3,</span></span>
<span class="line"><span>            &quot;w&quot;: 4,</span></span>
<span class="line"><span>            &quot;x&quot;: 12,</span></span>
<span class="line"><span>            &quot;y&quot;: 6</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;hideTimeOverride&quot;: true,</span></span>
<span class="line"><span>          &quot;id&quot;: 12,</span></span>
<span class="line"><span>          &quot;interval&quot;: null,</span></span>
<span class="line"><span>          &quot;links&quot;: [],</span></span>
<span class="line"><span>          &quot;maxDataPoints&quot;: 100,</span></span>
<span class="line"><span>          &quot;options&quot;: {</span></span>
<span class="line"><span>            &quot;colorMode&quot;: &quot;none&quot;,</span></span>
<span class="line"><span>            &quot;graphMode&quot;: &quot;none&quot;,</span></span>
<span class="line"><span>            &quot;justifyMode&quot;: &quot;auto&quot;,</span></span>
<span class="line"><span>            &quot;orientation&quot;: &quot;horizontal&quot;,</span></span>
<span class="line"><span>            &quot;reduceOptions&quot;: {</span></span>
<span class="line"><span>              &quot;calcs&quot;: [</span></span>
<span class="line"><span>                &quot;lastNotNull&quot;</span></span>
<span class="line"><span>              ],</span></span>
<span class="line"><span>              &quot;fields&quot;: &quot;&quot;,</span></span>
<span class="line"><span>              &quot;values&quot;: false</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            &quot;text&quot;: {},</span></span>
<span class="line"><span>            &quot;textMode&quot;: &quot;auto&quot;</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;pluginVersion&quot;: &quot;8.0.3&quot;,</span></span>
<span class="line"><span>          &quot;targets&quot;: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;expr&quot;: &quot;sum (machine_cpu_cores{instance=~\\&quot;^$instance$\\&quot;})&quot;,</span></span>
<span class="line"><span>              &quot;interval&quot;: &quot;10s&quot;,</span></span>
<span class="line"><span>              &quot;intervalFactor&quot;: 1,</span></span>
<span class="line"><span>              &quot;refId&quot;: &quot;A&quot;,</span></span>
<span class="line"><span>              &quot;step&quot;: 10</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>          ],</span></span>
<span class="line"><span>          &quot;timeFrom&quot;: &quot;1m&quot;,</span></span>
<span class="line"><span>          &quot;title&quot;: &quot;Total&quot;,</span></span>
<span class="line"><span>          &quot;type&quot;: &quot;stat&quot;</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          &quot;cacheTimeout&quot;: null,</span></span>
<span class="line"><span>          &quot;datasource&quot;: &quot;Prometheus&quot;,</span></span>
<span class="line"><span>          &quot;fieldConfig&quot;: {</span></span>
<span class="line"><span>            &quot;defaults&quot;: {</span></span>
<span class="line"><span>              &quot;color&quot;: {</span></span>
<span class="line"><span>                &quot;mode&quot;: &quot;thresholds&quot;</span></span>
<span class="line"><span>              },</span></span>
<span class="line"><span>              &quot;decimals&quot;: 2,</span></span>
<span class="line"><span>              &quot;mappings&quot;: [</span></span>
<span class="line"><span>                {</span></span>
<span class="line"><span>                  &quot;options&quot;: {</span></span>
<span class="line"><span>                    &quot;match&quot;: &quot;null&quot;,</span></span>
<span class="line"><span>                    &quot;result&quot;: {</span></span>
<span class="line"><span>                      &quot;text&quot;: &quot;N/A&quot;</span></span>
<span class="line"><span>                    }</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  &quot;type&quot;: &quot;special&quot;</span></span>
<span class="line"><span>                }</span></span>
<span class="line"><span>              ],</span></span>
<span class="line"><span>              &quot;thresholds&quot;: {</span></span>
<span class="line"><span>                &quot;mode&quot;: &quot;absolute&quot;,</span></span>
<span class="line"><span>                &quot;steps&quot;: [</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    &quot;color&quot;: &quot;green&quot;,</span></span>
<span class="line"><span>                    &quot;value&quot;: null</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    &quot;color&quot;: &quot;red&quot;,</span></span>
<span class="line"><span>                    &quot;value&quot;: 80</span></span>
<span class="line"><span>                  }</span></span>
<span class="line"><span>                ]</span></span>
<span class="line"><span>              },</span></span>
<span class="line"><span>              &quot;unit&quot;: &quot;bytes&quot;</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            &quot;overrides&quot;: []</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;gridPos&quot;: {</span></span>
<span class="line"><span>            &quot;h&quot;: 3,</span></span>
<span class="line"><span>            &quot;w&quot;: 4,</span></span>
<span class="line"><span>            &quot;x&quot;: 16,</span></span>
<span class="line"><span>            &quot;y&quot;: 6</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;hideTimeOverride&quot;: true,</span></span>
<span class="line"><span>          &quot;id&quot;: 13,</span></span>
<span class="line"><span>          &quot;interval&quot;: null,</span></span>
<span class="line"><span>          &quot;links&quot;: [],</span></span>
<span class="line"><span>          &quot;maxDataPoints&quot;: 100,</span></span>
<span class="line"><span>          &quot;options&quot;: {</span></span>
<span class="line"><span>            &quot;colorMode&quot;: &quot;none&quot;,</span></span>
<span class="line"><span>            &quot;graphMode&quot;: &quot;none&quot;,</span></span>
<span class="line"><span>            &quot;justifyMode&quot;: &quot;auto&quot;,</span></span>
<span class="line"><span>            &quot;orientation&quot;: &quot;horizontal&quot;,</span></span>
<span class="line"><span>            &quot;reduceOptions&quot;: {</span></span>
<span class="line"><span>              &quot;calcs&quot;: [</span></span>
<span class="line"><span>                &quot;lastNotNull&quot;</span></span>
<span class="line"><span>              ],</span></span>
<span class="line"><span>              &quot;fields&quot;: &quot;&quot;,</span></span>
<span class="line"><span>              &quot;values&quot;: false</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            &quot;text&quot;: {},</span></span>
<span class="line"><span>            &quot;textMode&quot;: &quot;auto&quot;</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;pluginVersion&quot;: &quot;8.0.3&quot;,</span></span>
<span class="line"><span>          &quot;targets&quot;: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;expr&quot;: &quot;sum(container_fs_usage_bytes{id=\\&quot;/\\&quot;,instance=~\\&quot;^$instance$\\&quot;})&quot;,</span></span>
<span class="line"><span>              &quot;interval&quot;: &quot;10s&quot;,</span></span>
<span class="line"><span>              &quot;intervalFactor&quot;: 1,</span></span>
<span class="line"><span>              &quot;refId&quot;: &quot;A&quot;,</span></span>
<span class="line"><span>              &quot;step&quot;: 10</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>          ],</span></span>
<span class="line"><span>          &quot;timeFrom&quot;: &quot;1m&quot;,</span></span>
<span class="line"><span>          &quot;title&quot;: &quot;Used&quot;,</span></span>
<span class="line"><span>          &quot;type&quot;: &quot;stat&quot;</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          &quot;cacheTimeout&quot;: null,</span></span>
<span class="line"><span>          &quot;datasource&quot;: &quot;Prometheus&quot;,</span></span>
<span class="line"><span>          &quot;fieldConfig&quot;: {</span></span>
<span class="line"><span>            &quot;defaults&quot;: {</span></span>
<span class="line"><span>              &quot;color&quot;: {</span></span>
<span class="line"><span>                &quot;mode&quot;: &quot;thresholds&quot;</span></span>
<span class="line"><span>              },</span></span>
<span class="line"><span>              &quot;decimals&quot;: 2,</span></span>
<span class="line"><span>              &quot;mappings&quot;: [</span></span>
<span class="line"><span>                {</span></span>
<span class="line"><span>                  &quot;options&quot;: {</span></span>
<span class="line"><span>                    &quot;match&quot;: &quot;null&quot;,</span></span>
<span class="line"><span>                    &quot;result&quot;: {</span></span>
<span class="line"><span>                      &quot;text&quot;: &quot;N/A&quot;</span></span>
<span class="line"><span>                    }</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  &quot;type&quot;: &quot;special&quot;</span></span>
<span class="line"><span>                }</span></span>
<span class="line"><span>              ],</span></span>
<span class="line"><span>              &quot;thresholds&quot;: {</span></span>
<span class="line"><span>                &quot;mode&quot;: &quot;absolute&quot;,</span></span>
<span class="line"><span>                &quot;steps&quot;: [</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    &quot;color&quot;: &quot;green&quot;,</span></span>
<span class="line"><span>                    &quot;value&quot;: null</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    &quot;color&quot;: &quot;red&quot;,</span></span>
<span class="line"><span>                    &quot;value&quot;: 80</span></span>
<span class="line"><span>                  }</span></span>
<span class="line"><span>                ]</span></span>
<span class="line"><span>              },</span></span>
<span class="line"><span>              &quot;unit&quot;: &quot;bytes&quot;</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            &quot;overrides&quot;: []</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;gridPos&quot;: {</span></span>
<span class="line"><span>            &quot;h&quot;: 3,</span></span>
<span class="line"><span>            &quot;w&quot;: 4,</span></span>
<span class="line"><span>            &quot;x&quot;: 20,</span></span>
<span class="line"><span>            &quot;y&quot;: 6</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;hideTimeOverride&quot;: true,</span></span>
<span class="line"><span>          &quot;id&quot;: 14,</span></span>
<span class="line"><span>          &quot;interval&quot;: null,</span></span>
<span class="line"><span>          &quot;links&quot;: [],</span></span>
<span class="line"><span>          &quot;maxDataPoints&quot;: 100,</span></span>
<span class="line"><span>          &quot;options&quot;: {</span></span>
<span class="line"><span>            &quot;colorMode&quot;: &quot;none&quot;,</span></span>
<span class="line"><span>            &quot;graphMode&quot;: &quot;none&quot;,</span></span>
<span class="line"><span>            &quot;justifyMode&quot;: &quot;auto&quot;,</span></span>
<span class="line"><span>            &quot;orientation&quot;: &quot;horizontal&quot;,</span></span>
<span class="line"><span>            &quot;reduceOptions&quot;: {</span></span>
<span class="line"><span>              &quot;calcs&quot;: [</span></span>
<span class="line"><span>                &quot;lastNotNull&quot;</span></span>
<span class="line"><span>              ],</span></span>
<span class="line"><span>              &quot;fields&quot;: &quot;&quot;,</span></span>
<span class="line"><span>              &quot;values&quot;: false</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            &quot;text&quot;: {},</span></span>
<span class="line"><span>            &quot;textMode&quot;: &quot;auto&quot;</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;pluginVersion&quot;: &quot;8.0.3&quot;,</span></span>
<span class="line"><span>          &quot;targets&quot;: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;expr&quot;: &quot;sum (container_fs_limit_bytes{id=\\&quot;/\\&quot;,instance=~\\&quot;^$instance$\\&quot;})&quot;,</span></span>
<span class="line"><span>              &quot;interval&quot;: &quot;10s&quot;,</span></span>
<span class="line"><span>              &quot;intervalFactor&quot;: 1,</span></span>
<span class="line"><span>              &quot;refId&quot;: &quot;A&quot;,</span></span>
<span class="line"><span>              &quot;step&quot;: 10</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>          ],</span></span>
<span class="line"><span>          &quot;timeFrom&quot;: &quot;1m&quot;,</span></span>
<span class="line"><span>          &quot;title&quot;: &quot;Total&quot;,</span></span>
<span class="line"><span>          &quot;type&quot;: &quot;stat&quot;</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          &quot;aliasColors&quot;: {},</span></span>
<span class="line"><span>          &quot;bars&quot;: false,</span></span>
<span class="line"><span>          &quot;dashLength&quot;: 10,</span></span>
<span class="line"><span>          &quot;dashes&quot;: false,</span></span>
<span class="line"><span>          &quot;datasource&quot;: &quot;Prometheus&quot;,</span></span>
<span class="line"><span>          &quot;decimals&quot;: 2,</span></span>
<span class="line"><span>          &quot;editable&quot;: true,</span></span>
<span class="line"><span>          &quot;error&quot;: false,</span></span>
<span class="line"><span>          &quot;fill&quot;: 1,</span></span>
<span class="line"><span>          &quot;fillGradient&quot;: 0,</span></span>
<span class="line"><span>          &quot;grid&quot;: {},</span></span>
<span class="line"><span>          &quot;gridPos&quot;: {</span></span>
<span class="line"><span>            &quot;h&quot;: 5,</span></span>
<span class="line"><span>            &quot;w&quot;: 24,</span></span>
<span class="line"><span>            &quot;x&quot;: 0,</span></span>
<span class="line"><span>            &quot;y&quot;: 9</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;height&quot;: &quot;200px&quot;,</span></span>
<span class="line"><span>          &quot;hiddenSeries&quot;: false,</span></span>
<span class="line"><span>          &quot;id&quot;: 32,</span></span>
<span class="line"><span>          &quot;isNew&quot;: true,</span></span>
<span class="line"><span>          &quot;legend&quot;: {</span></span>
<span class="line"><span>            &quot;alignAsTable&quot;: true,</span></span>
<span class="line"><span>            &quot;avg&quot;: true,</span></span>
<span class="line"><span>            &quot;current&quot;: true,</span></span>
<span class="line"><span>            &quot;max&quot;: false,</span></span>
<span class="line"><span>            &quot;min&quot;: false,</span></span>
<span class="line"><span>            &quot;rightSide&quot;: true,</span></span>
<span class="line"><span>            &quot;show&quot;: true,</span></span>
<span class="line"><span>            &quot;sideWidth&quot;: 200,</span></span>
<span class="line"><span>            &quot;sort&quot;: &quot;current&quot;,</span></span>
<span class="line"><span>            &quot;sortDesc&quot;: true,</span></span>
<span class="line"><span>            &quot;total&quot;: false,</span></span>
<span class="line"><span>            &quot;values&quot;: true</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;lines&quot;: true,</span></span>
<span class="line"><span>          &quot;linewidth&quot;: 2,</span></span>
<span class="line"><span>          &quot;links&quot;: [],</span></span>
<span class="line"><span>          &quot;nullPointMode&quot;: &quot;connected&quot;,</span></span>
<span class="line"><span>          &quot;options&quot;: {</span></span>
<span class="line"><span>            &quot;alertThreshold&quot;: true</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;percentage&quot;: false,</span></span>
<span class="line"><span>          &quot;pluginVersion&quot;: &quot;8.0.3&quot;,</span></span>
<span class="line"><span>          &quot;pointradius&quot;: 5,</span></span>
<span class="line"><span>          &quot;points&quot;: false,</span></span>
<span class="line"><span>          &quot;renderer&quot;: &quot;flot&quot;,</span></span>
<span class="line"><span>          &quot;seriesOverrides&quot;: [],</span></span>
<span class="line"><span>          &quot;spaceLength&quot;: 10,</span></span>
<span class="line"><span>          &quot;stack&quot;: false,</span></span>
<span class="line"><span>          &quot;steppedLine&quot;: false,</span></span>
<span class="line"><span>          &quot;targets&quot;: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;expr&quot;: &quot;sum(rate(container_network_receive_bytes_total{instance=~\\&quot;^$instance$\\&quot;,namespace=~\\&quot;^$namespace$\\&quot;}[1m]))&quot;,</span></span>
<span class="line"><span>              &quot;interval&quot;: &quot;&quot;,</span></span>
<span class="line"><span>              &quot;intervalFactor&quot;: 2,</span></span>
<span class="line"><span>              &quot;legendFormat&quot;: &quot;receive&quot;,</span></span>
<span class="line"><span>              &quot;metric&quot;: &quot;network&quot;,</span></span>
<span class="line"><span>              &quot;refId&quot;: &quot;A&quot;,</span></span>
<span class="line"><span>              &quot;step&quot;: 240</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;expr&quot;: &quot;- sum(rate(container_network_transmit_bytes_total{instance=~\\&quot;^$instance$\\&quot;,namespace=~\\&quot;^$namespace$\\&quot;}[1m]))&quot;,</span></span>
<span class="line"><span>              &quot;interval&quot;: &quot;&quot;,</span></span>
<span class="line"><span>              &quot;intervalFactor&quot;: 2,</span></span>
<span class="line"><span>              &quot;legendFormat&quot;: &quot;transmit&quot;,</span></span>
<span class="line"><span>              &quot;metric&quot;: &quot;network&quot;,</span></span>
<span class="line"><span>              &quot;refId&quot;: &quot;B&quot;,</span></span>
<span class="line"><span>              &quot;step&quot;: 240</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>          ],</span></span>
<span class="line"><span>          &quot;thresholds&quot;: [],</span></span>
<span class="line"><span>          &quot;timeFrom&quot;: null,</span></span>
<span class="line"><span>          &quot;timeRegions&quot;: [],</span></span>
<span class="line"><span>          &quot;timeShift&quot;: null,</span></span>
<span class="line"><span>          &quot;title&quot;: &quot;网络&quot;,</span></span>
<span class="line"><span>          &quot;tooltip&quot;: {</span></span>
<span class="line"><span>            &quot;msResolution&quot;: false,</span></span>
<span class="line"><span>            &quot;shared&quot;: true,</span></span>
<span class="line"><span>            &quot;sort&quot;: 0,</span></span>
<span class="line"><span>            &quot;value_type&quot;: &quot;cumulative&quot;</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;type&quot;: &quot;graph&quot;,</span></span>
<span class="line"><span>          &quot;xaxis&quot;: {</span></span>
<span class="line"><span>            &quot;buckets&quot;: null,</span></span>
<span class="line"><span>            &quot;mode&quot;: &quot;time&quot;,</span></span>
<span class="line"><span>            &quot;name&quot;: null,</span></span>
<span class="line"><span>            &quot;show&quot;: true,</span></span>
<span class="line"><span>            &quot;values&quot;: []</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;yaxes&quot;: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;format&quot;: &quot;Bps&quot;,</span></span>
<span class="line"><span>              &quot;label&quot;: &quot;transmit / receive&quot;,</span></span>
<span class="line"><span>              &quot;logBase&quot;: 1,</span></span>
<span class="line"><span>              &quot;max&quot;: null,</span></span>
<span class="line"><span>              &quot;min&quot;: null,</span></span>
<span class="line"><span>              &quot;show&quot;: true</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;format&quot;: &quot;Bps&quot;,</span></span>
<span class="line"><span>              &quot;label&quot;: null,</span></span>
<span class="line"><span>              &quot;logBase&quot;: 1,</span></span>
<span class="line"><span>              &quot;max&quot;: null,</span></span>
<span class="line"><span>              &quot;min&quot;: null,</span></span>
<span class="line"><span>              &quot;show&quot;: false</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>          ],</span></span>
<span class="line"><span>          &quot;yaxis&quot;: {</span></span>
<span class="line"><span>            &quot;align&quot;: false,</span></span>
<span class="line"><span>            &quot;alignLevel&quot;: null</span></span>
<span class="line"><span>          }</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          &quot;collapsed&quot;: false,</span></span>
<span class="line"><span>          &quot;datasource&quot;: null,</span></span>
<span class="line"><span>          &quot;gridPos&quot;: {</span></span>
<span class="line"><span>            &quot;h&quot;: 1,</span></span>
<span class="line"><span>            &quot;w&quot;: 24,</span></span>
<span class="line"><span>            &quot;x&quot;: 0,</span></span>
<span class="line"><span>            &quot;y&quot;: 14</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;id&quot;: 36,</span></span>
<span class="line"><span>          &quot;panels&quot;: [],</span></span>
<span class="line"><span>          &quot;title&quot;: &quot;Pod 资源统计&quot;,</span></span>
<span class="line"><span>          &quot;type&quot;: &quot;row&quot;</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          &quot;aliasColors&quot;: {},</span></span>
<span class="line"><span>          &quot;bars&quot;: false,</span></span>
<span class="line"><span>          &quot;dashLength&quot;: 10,</span></span>
<span class="line"><span>          &quot;dashes&quot;: false,</span></span>
<span class="line"><span>          &quot;datasource&quot;: &quot;Prometheus&quot;,</span></span>
<span class="line"><span>          &quot;decimals&quot;: 3,</span></span>
<span class="line"><span>          &quot;editable&quot;: true,</span></span>
<span class="line"><span>          &quot;error&quot;: false,</span></span>
<span class="line"><span>          &quot;fill&quot;: 0,</span></span>
<span class="line"><span>          &quot;fillGradient&quot;: 0,</span></span>
<span class="line"><span>          &quot;grid&quot;: {},</span></span>
<span class="line"><span>          &quot;gridPos&quot;: {</span></span>
<span class="line"><span>            &quot;h&quot;: 7,</span></span>
<span class="line"><span>            &quot;w&quot;: 24,</span></span>
<span class="line"><span>            &quot;x&quot;: 0,</span></span>
<span class="line"><span>            &quot;y&quot;: 15</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;height&quot;: &quot;&quot;,</span></span>
<span class="line"><span>          &quot;hiddenSeries&quot;: false,</span></span>
<span class="line"><span>          &quot;id&quot;: 17,</span></span>
<span class="line"><span>          &quot;isNew&quot;: true,</span></span>
<span class="line"><span>          &quot;legend&quot;: {</span></span>
<span class="line"><span>            &quot;alignAsTable&quot;: true,</span></span>
<span class="line"><span>            &quot;avg&quot;: true,</span></span>
<span class="line"><span>            &quot;current&quot;: true,</span></span>
<span class="line"><span>            &quot;hideEmpty&quot;: true,</span></span>
<span class="line"><span>            &quot;hideZero&quot;: true,</span></span>
<span class="line"><span>            &quot;max&quot;: false,</span></span>
<span class="line"><span>            &quot;min&quot;: false,</span></span>
<span class="line"><span>            &quot;rightSide&quot;: true,</span></span>
<span class="line"><span>            &quot;show&quot;: true,</span></span>
<span class="line"><span>            &quot;sideWidth&quot;: null,</span></span>
<span class="line"><span>            &quot;sort&quot;: &quot;current&quot;,</span></span>
<span class="line"><span>            &quot;sortDesc&quot;: true,</span></span>
<span class="line"><span>            &quot;total&quot;: false,</span></span>
<span class="line"><span>            &quot;values&quot;: true</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;lines&quot;: true,</span></span>
<span class="line"><span>          &quot;linewidth&quot;: 2,</span></span>
<span class="line"><span>          &quot;links&quot;: [],</span></span>
<span class="line"><span>          &quot;nullPointMode&quot;: &quot;connected&quot;,</span></span>
<span class="line"><span>          &quot;options&quot;: {</span></span>
<span class="line"><span>            &quot;alertThreshold&quot;: true</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;percentage&quot;: false,</span></span>
<span class="line"><span>          &quot;pluginVersion&quot;: &quot;8.0.3&quot;,</span></span>
<span class="line"><span>          &quot;pointradius&quot;: 5,</span></span>
<span class="line"><span>          &quot;points&quot;: false,</span></span>
<span class="line"><span>          &quot;renderer&quot;: &quot;flot&quot;,</span></span>
<span class="line"><span>          &quot;seriesOverrides&quot;: [],</span></span>
<span class="line"><span>          &quot;spaceLength&quot;: 10,</span></span>
<span class="line"><span>          &quot;stack&quot;: false,</span></span>
<span class="line"><span>          &quot;steppedLine&quot;: false,</span></span>
<span class="line"><span>          &quot;targets&quot;: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;exemplar&quot;: true,</span></span>
<span class="line"><span>              &quot;expr&quot;: &quot;sum(rate(container_cpu_usage_seconds_total{image!=\\&quot;\\&quot;,instance=~\\&quot;^$instance$\\&quot;,namespace=~\\&quot;^$namespace$\\&quot;}[1m])) by (pod)&quot;,</span></span>
<span class="line"><span>              &quot;interval&quot;: &quot;&quot;,</span></span>
<span class="line"><span>              &quot;intervalFactor&quot;: 2,</span></span>
<span class="line"><span>              &quot;legendFormat&quot;: &quot;{{ pod }}&quot;,</span></span>
<span class="line"><span>              &quot;metric&quot;: &quot;container_cpu&quot;,</span></span>
<span class="line"><span>              &quot;refId&quot;: &quot;A&quot;,</span></span>
<span class="line"><span>              &quot;step&quot;: 240</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>          ],</span></span>
<span class="line"><span>          &quot;thresholds&quot;: [],</span></span>
<span class="line"><span>          &quot;timeFrom&quot;: null,</span></span>
<span class="line"><span>          &quot;timeRegions&quot;: [],</span></span>
<span class="line"><span>          &quot;timeShift&quot;: null,</span></span>
<span class="line"><span>          &quot;title&quot;: &quot;Cpu 使用量&quot;,</span></span>
<span class="line"><span>          &quot;tooltip&quot;: {</span></span>
<span class="line"><span>            &quot;msResolution&quot;: true,</span></span>
<span class="line"><span>            &quot;shared&quot;: false,</span></span>
<span class="line"><span>            &quot;sort&quot;: 2,</span></span>
<span class="line"><span>            &quot;value_type&quot;: &quot;cumulative&quot;</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;type&quot;: &quot;graph&quot;,</span></span>
<span class="line"><span>          &quot;xaxis&quot;: {</span></span>
<span class="line"><span>            &quot;buckets&quot;: null,</span></span>
<span class="line"><span>            &quot;mode&quot;: &quot;time&quot;,</span></span>
<span class="line"><span>            &quot;name&quot;: null,</span></span>
<span class="line"><span>            &quot;show&quot;: true,</span></span>
<span class="line"><span>            &quot;values&quot;: []</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;yaxes&quot;: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;format&quot;: &quot;none&quot;,</span></span>
<span class="line"><span>              &quot;label&quot;: &quot;cores&quot;,</span></span>
<span class="line"><span>              &quot;logBase&quot;: 1,</span></span>
<span class="line"><span>              &quot;max&quot;: null,</span></span>
<span class="line"><span>              &quot;min&quot;: null,</span></span>
<span class="line"><span>              &quot;show&quot;: true</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;format&quot;: &quot;short&quot;,</span></span>
<span class="line"><span>              &quot;label&quot;: null,</span></span>
<span class="line"><span>              &quot;logBase&quot;: 1,</span></span>
<span class="line"><span>              &quot;max&quot;: null,</span></span>
<span class="line"><span>              &quot;min&quot;: null,</span></span>
<span class="line"><span>              &quot;show&quot;: false</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>          ],</span></span>
<span class="line"><span>          &quot;yaxis&quot;: {</span></span>
<span class="line"><span>            &quot;align&quot;: false,</span></span>
<span class="line"><span>            &quot;alignLevel&quot;: null</span></span>
<span class="line"><span>          }</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          &quot;aliasColors&quot;: {},</span></span>
<span class="line"><span>          &quot;bars&quot;: false,</span></span>
<span class="line"><span>          &quot;dashLength&quot;: 10,</span></span>
<span class="line"><span>          &quot;dashes&quot;: false,</span></span>
<span class="line"><span>          &quot;datasource&quot;: &quot;Prometheus&quot;,</span></span>
<span class="line"><span>          &quot;decimals&quot;: 2,</span></span>
<span class="line"><span>          &quot;editable&quot;: true,</span></span>
<span class="line"><span>          &quot;error&quot;: false,</span></span>
<span class="line"><span>          &quot;fill&quot;: 0,</span></span>
<span class="line"><span>          &quot;fillGradient&quot;: 0,</span></span>
<span class="line"><span>          &quot;grid&quot;: {},</span></span>
<span class="line"><span>          &quot;gridPos&quot;: {</span></span>
<span class="line"><span>            &quot;h&quot;: 7,</span></span>
<span class="line"><span>            &quot;w&quot;: 24,</span></span>
<span class="line"><span>            &quot;x&quot;: 0,</span></span>
<span class="line"><span>            &quot;y&quot;: 22</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;hiddenSeries&quot;: false,</span></span>
<span class="line"><span>          &quot;id&quot;: 33,</span></span>
<span class="line"><span>          &quot;isNew&quot;: true,</span></span>
<span class="line"><span>          &quot;legend&quot;: {</span></span>
<span class="line"><span>            &quot;alignAsTable&quot;: true,</span></span>
<span class="line"><span>            &quot;avg&quot;: true,</span></span>
<span class="line"><span>            &quot;current&quot;: true,</span></span>
<span class="line"><span>            &quot;hideEmpty&quot;: true,</span></span>
<span class="line"><span>            &quot;hideZero&quot;: true,</span></span>
<span class="line"><span>            &quot;max&quot;: false,</span></span>
<span class="line"><span>            &quot;min&quot;: false,</span></span>
<span class="line"><span>            &quot;rightSide&quot;: true,</span></span>
<span class="line"><span>            &quot;show&quot;: true,</span></span>
<span class="line"><span>            &quot;sideWidth&quot;: null,</span></span>
<span class="line"><span>            &quot;sort&quot;: &quot;current&quot;,</span></span>
<span class="line"><span>            &quot;sortDesc&quot;: true,</span></span>
<span class="line"><span>            &quot;total&quot;: false,</span></span>
<span class="line"><span>            &quot;values&quot;: true</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;lines&quot;: true,</span></span>
<span class="line"><span>          &quot;linewidth&quot;: 2,</span></span>
<span class="line"><span>          &quot;links&quot;: [],</span></span>
<span class="line"><span>          &quot;nullPointMode&quot;: &quot;null&quot;,</span></span>
<span class="line"><span>          &quot;options&quot;: {</span></span>
<span class="line"><span>            &quot;alertThreshold&quot;: true</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;percentage&quot;: false,</span></span>
<span class="line"><span>          &quot;pluginVersion&quot;: &quot;8.0.3&quot;,</span></span>
<span class="line"><span>          &quot;pointradius&quot;: 5,</span></span>
<span class="line"><span>          &quot;points&quot;: false,</span></span>
<span class="line"><span>          &quot;renderer&quot;: &quot;flot&quot;,</span></span>
<span class="line"><span>          &quot;seriesOverrides&quot;: [],</span></span>
<span class="line"><span>          &quot;spaceLength&quot;: 10,</span></span>
<span class="line"><span>          &quot;stack&quot;: false,</span></span>
<span class="line"><span>          &quot;steppedLine&quot;: false,</span></span>
<span class="line"><span>          &quot;targets&quot;: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;exemplar&quot;: true,</span></span>
<span class="line"><span>              &quot;expr&quot;: &quot;sum (container_memory_working_set_bytes{image!=\\&quot;\\&quot;,instance=~\\&quot;^$instance$\\&quot;,namespace=~\\&quot;^$namespace$\\&quot;}) by (pod)&quot;,</span></span>
<span class="line"><span>              &quot;interval&quot;: &quot;&quot;,</span></span>
<span class="line"><span>              &quot;intervalFactor&quot;: 2,</span></span>
<span class="line"><span>              &quot;legendFormat&quot;: &quot;{{ pod }}&quot;,</span></span>
<span class="line"><span>              &quot;metric&quot;: &quot;&quot;,</span></span>
<span class="line"><span>              &quot;refId&quot;: &quot;A&quot;,</span></span>
<span class="line"><span>              &quot;step&quot;: 240</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>          ],</span></span>
<span class="line"><span>          &quot;thresholds&quot;: [],</span></span>
<span class="line"><span>          &quot;timeFrom&quot;: null,</span></span>
<span class="line"><span>          &quot;timeRegions&quot;: [],</span></span>
<span class="line"><span>          &quot;timeShift&quot;: null,</span></span>
<span class="line"><span>          &quot;title&quot;: &quot;内存使用量&quot;,</span></span>
<span class="line"><span>          &quot;tooltip&quot;: {</span></span>
<span class="line"><span>            &quot;msResolution&quot;: false,</span></span>
<span class="line"><span>            &quot;shared&quot;: false,</span></span>
<span class="line"><span>            &quot;sort&quot;: 2,</span></span>
<span class="line"><span>            &quot;value_type&quot;: &quot;cumulative&quot;</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;type&quot;: &quot;graph&quot;,</span></span>
<span class="line"><span>          &quot;xaxis&quot;: {</span></span>
<span class="line"><span>            &quot;buckets&quot;: null,</span></span>
<span class="line"><span>            &quot;mode&quot;: &quot;time&quot;,</span></span>
<span class="line"><span>            &quot;name&quot;: null,</span></span>
<span class="line"><span>            &quot;show&quot;: true,</span></span>
<span class="line"><span>            &quot;values&quot;: []</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;yaxes&quot;: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;format&quot;: &quot;bytes&quot;,</span></span>
<span class="line"><span>              &quot;label&quot;: &quot;used&quot;,</span></span>
<span class="line"><span>              &quot;logBase&quot;: 1,</span></span>
<span class="line"><span>              &quot;max&quot;: null,</span></span>
<span class="line"><span>              &quot;min&quot;: null,</span></span>
<span class="line"><span>              &quot;show&quot;: true</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;format&quot;: &quot;short&quot;,</span></span>
<span class="line"><span>              &quot;label&quot;: null,</span></span>
<span class="line"><span>              &quot;logBase&quot;: 1,</span></span>
<span class="line"><span>              &quot;max&quot;: null,</span></span>
<span class="line"><span>              &quot;min&quot;: null,</span></span>
<span class="line"><span>              &quot;show&quot;: false</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>          ],</span></span>
<span class="line"><span>          &quot;yaxis&quot;: {</span></span>
<span class="line"><span>            &quot;align&quot;: false,</span></span>
<span class="line"><span>            &quot;alignLevel&quot;: null</span></span>
<span class="line"><span>          }</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          &quot;aliasColors&quot;: {},</span></span>
<span class="line"><span>          &quot;bars&quot;: false,</span></span>
<span class="line"><span>          &quot;dashLength&quot;: 10,</span></span>
<span class="line"><span>          &quot;dashes&quot;: false,</span></span>
<span class="line"><span>          &quot;datasource&quot;: &quot;Prometheus&quot;,</span></span>
<span class="line"><span>          &quot;decimals&quot;: 2,</span></span>
<span class="line"><span>          &quot;editable&quot;: true,</span></span>
<span class="line"><span>          &quot;error&quot;: false,</span></span>
<span class="line"><span>          &quot;fill&quot;: 1,</span></span>
<span class="line"><span>          &quot;fillGradient&quot;: 0,</span></span>
<span class="line"><span>          &quot;grid&quot;: {},</span></span>
<span class="line"><span>          &quot;gridPos&quot;: {</span></span>
<span class="line"><span>            &quot;h&quot;: 7,</span></span>
<span class="line"><span>            &quot;w&quot;: 24,</span></span>
<span class="line"><span>            &quot;x&quot;: 0,</span></span>
<span class="line"><span>            &quot;y&quot;: 29</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;hiddenSeries&quot;: false,</span></span>
<span class="line"><span>          &quot;id&quot;: 16,</span></span>
<span class="line"><span>          &quot;isNew&quot;: true,</span></span>
<span class="line"><span>          &quot;legend&quot;: {</span></span>
<span class="line"><span>            &quot;alignAsTable&quot;: true,</span></span>
<span class="line"><span>            &quot;avg&quot;: true,</span></span>
<span class="line"><span>            &quot;current&quot;: true,</span></span>
<span class="line"><span>            &quot;hideEmpty&quot;: true,</span></span>
<span class="line"><span>            &quot;hideZero&quot;: true,</span></span>
<span class="line"><span>            &quot;max&quot;: false,</span></span>
<span class="line"><span>            &quot;min&quot;: false,</span></span>
<span class="line"><span>            &quot;rightSide&quot;: true,</span></span>
<span class="line"><span>            &quot;show&quot;: true,</span></span>
<span class="line"><span>            &quot;sideWidth&quot;: 200,</span></span>
<span class="line"><span>            &quot;sort&quot;: &quot;avg&quot;,</span></span>
<span class="line"><span>            &quot;sortDesc&quot;: true,</span></span>
<span class="line"><span>            &quot;total&quot;: false,</span></span>
<span class="line"><span>            &quot;values&quot;: true</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;lines&quot;: true,</span></span>
<span class="line"><span>          &quot;linewidth&quot;: 2,</span></span>
<span class="line"><span>          &quot;links&quot;: [],</span></span>
<span class="line"><span>          &quot;nullPointMode&quot;: &quot;null&quot;,</span></span>
<span class="line"><span>          &quot;options&quot;: {</span></span>
<span class="line"><span>            &quot;alertThreshold&quot;: true</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;percentage&quot;: false,</span></span>
<span class="line"><span>          &quot;pluginVersion&quot;: &quot;8.0.3&quot;,</span></span>
<span class="line"><span>          &quot;pointradius&quot;: 5,</span></span>
<span class="line"><span>          &quot;points&quot;: false,</span></span>
<span class="line"><span>          &quot;renderer&quot;: &quot;flot&quot;,</span></span>
<span class="line"><span>          &quot;seriesOverrides&quot;: [],</span></span>
<span class="line"><span>          &quot;spaceLength&quot;: 10,</span></span>
<span class="line"><span>          &quot;stack&quot;: false,</span></span>
<span class="line"><span>          &quot;steppedLine&quot;: false,</span></span>
<span class="line"><span>          &quot;targets&quot;: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;exemplar&quot;: true,</span></span>
<span class="line"><span>              &quot;expr&quot;: &quot;sum (rate (container_network_receive_bytes_total{image!=\\&quot;\\&quot;,instance=~\\&quot;^$instance$\\&quot;,namespace=~\\&quot;^$namespace$\\&quot;}[1m])) by (pod_name)&quot;,</span></span>
<span class="line"><span>              &quot;interval&quot;: &quot;&quot;,</span></span>
<span class="line"><span>              &quot;intervalFactor&quot;: 2,</span></span>
<span class="line"><span>              &quot;legendFormat&quot;: &quot;{{ pod }} &amp;lt; in&quot;,</span></span>
<span class="line"><span>              &quot;metric&quot;: &quot;network&quot;,</span></span>
<span class="line"><span>              &quot;refId&quot;: &quot;A&quot;,</span></span>
<span class="line"><span>              &quot;step&quot;: 240</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;exemplar&quot;: true,</span></span>
<span class="line"><span>              &quot;expr&quot;: &quot;- sum (rate (container_network_transmit_bytes_total{image!=\\&quot;\\&quot;,instance=~\\&quot;^$instance$\\&quot;,namespace=~\\&quot;^$namespace$\\&quot;}[1m])) by (pod_name)&quot;,</span></span>
<span class="line"><span>              &quot;interval&quot;: &quot;&quot;,</span></span>
<span class="line"><span>              &quot;intervalFactor&quot;: 2,</span></span>
<span class="line"><span>              &quot;legendFormat&quot;: &quot;{{ pod }} &amp;gt; out&quot;,</span></span>
<span class="line"><span>              &quot;metric&quot;: &quot;network&quot;,</span></span>
<span class="line"><span>              &quot;refId&quot;: &quot;B&quot;,</span></span>
<span class="line"><span>              &quot;step&quot;: 240</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>          ],</span></span>
<span class="line"><span>          &quot;thresholds&quot;: [],</span></span>
<span class="line"><span>          &quot;timeFrom&quot;: null,</span></span>
<span class="line"><span>          &quot;timeRegions&quot;: [],</span></span>
<span class="line"><span>          &quot;timeShift&quot;: null,</span></span>
<span class="line"><span>          &quot;title&quot;: &quot;网络&quot;,</span></span>
<span class="line"><span>          &quot;tooltip&quot;: {</span></span>
<span class="line"><span>            &quot;msResolution&quot;: false,</span></span>
<span class="line"><span>            &quot;shared&quot;: false,</span></span>
<span class="line"><span>            &quot;sort&quot;: 2,</span></span>
<span class="line"><span>            &quot;value_type&quot;: &quot;cumulative&quot;</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;type&quot;: &quot;graph&quot;,</span></span>
<span class="line"><span>          &quot;xaxis&quot;: {</span></span>
<span class="line"><span>            &quot;buckets&quot;: null,</span></span>
<span class="line"><span>            &quot;mode&quot;: &quot;time&quot;,</span></span>
<span class="line"><span>            &quot;name&quot;: null,</span></span>
<span class="line"><span>            &quot;show&quot;: true,</span></span>
<span class="line"><span>            &quot;values&quot;: []</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;yaxes&quot;: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;format&quot;: &quot;Bps&quot;,</span></span>
<span class="line"><span>              &quot;label&quot;: &quot;transmit / receive&quot;,</span></span>
<span class="line"><span>              &quot;logBase&quot;: 1,</span></span>
<span class="line"><span>              &quot;max&quot;: null,</span></span>
<span class="line"><span>              &quot;min&quot;: null,</span></span>
<span class="line"><span>              &quot;show&quot;: true</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;format&quot;: &quot;short&quot;,</span></span>
<span class="line"><span>              &quot;label&quot;: null,</span></span>
<span class="line"><span>              &quot;logBase&quot;: 1,</span></span>
<span class="line"><span>              &quot;max&quot;: null,</span></span>
<span class="line"><span>              &quot;min&quot;: null,</span></span>
<span class="line"><span>              &quot;show&quot;: false</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>          ],</span></span>
<span class="line"><span>          &quot;yaxis&quot;: {</span></span>
<span class="line"><span>            &quot;align&quot;: false,</span></span>
<span class="line"><span>            &quot;alignLevel&quot;: null</span></span>
<span class="line"><span>          }</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          &quot;aliasColors&quot;: {},</span></span>
<span class="line"><span>          &quot;bars&quot;: false,</span></span>
<span class="line"><span>          &quot;dashLength&quot;: 10,</span></span>
<span class="line"><span>          &quot;dashes&quot;: false,</span></span>
<span class="line"><span>          &quot;datasource&quot;: &quot;Prometheus&quot;,</span></span>
<span class="line"><span>          &quot;decimals&quot;: 2,</span></span>
<span class="line"><span>          &quot;editable&quot;: true,</span></span>
<span class="line"><span>          &quot;error&quot;: false,</span></span>
<span class="line"><span>          &quot;fill&quot;: 1,</span></span>
<span class="line"><span>          &quot;fillGradient&quot;: 0,</span></span>
<span class="line"><span>          &quot;grid&quot;: {},</span></span>
<span class="line"><span>          &quot;gridPos&quot;: {</span></span>
<span class="line"><span>            &quot;h&quot;: 7,</span></span>
<span class="line"><span>            &quot;w&quot;: 24,</span></span>
<span class="line"><span>            &quot;x&quot;: 0,</span></span>
<span class="line"><span>            &quot;y&quot;: 36</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;hiddenSeries&quot;: false,</span></span>
<span class="line"><span>          &quot;id&quot;: 34,</span></span>
<span class="line"><span>          &quot;isNew&quot;: true,</span></span>
<span class="line"><span>          &quot;legend&quot;: {</span></span>
<span class="line"><span>            &quot;alignAsTable&quot;: true,</span></span>
<span class="line"><span>            &quot;avg&quot;: true,</span></span>
<span class="line"><span>            &quot;current&quot;: true,</span></span>
<span class="line"><span>            &quot;hideEmpty&quot;: true,</span></span>
<span class="line"><span>            &quot;hideZero&quot;: true,</span></span>
<span class="line"><span>            &quot;max&quot;: false,</span></span>
<span class="line"><span>            &quot;min&quot;: false,</span></span>
<span class="line"><span>            &quot;rightSide&quot;: true,</span></span>
<span class="line"><span>            &quot;show&quot;: true,</span></span>
<span class="line"><span>            &quot;sideWidth&quot;: 200,</span></span>
<span class="line"><span>            &quot;sort&quot;: &quot;current&quot;,</span></span>
<span class="line"><span>            &quot;sortDesc&quot;: true,</span></span>
<span class="line"><span>            &quot;total&quot;: false,</span></span>
<span class="line"><span>            &quot;values&quot;: true</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;lines&quot;: true,</span></span>
<span class="line"><span>          &quot;linewidth&quot;: 2,</span></span>
<span class="line"><span>          &quot;links&quot;: [],</span></span>
<span class="line"><span>          &quot;nullPointMode&quot;: &quot;null&quot;,</span></span>
<span class="line"><span>          &quot;options&quot;: {</span></span>
<span class="line"><span>            &quot;alertThreshold&quot;: true</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;percentage&quot;: false,</span></span>
<span class="line"><span>          &quot;pluginVersion&quot;: &quot;8.0.3&quot;,</span></span>
<span class="line"><span>          &quot;pointradius&quot;: 5,</span></span>
<span class="line"><span>          &quot;points&quot;: false,</span></span>
<span class="line"><span>          &quot;renderer&quot;: &quot;flot&quot;,</span></span>
<span class="line"><span>          &quot;seriesOverrides&quot;: [],</span></span>
<span class="line"><span>          &quot;spaceLength&quot;: 10,</span></span>
<span class="line"><span>          &quot;stack&quot;: false,</span></span>
<span class="line"><span>          &quot;steppedLine&quot;: false,</span></span>
<span class="line"><span>          &quot;targets&quot;: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;exemplar&quot;: true,</span></span>
<span class="line"><span>              &quot;expr&quot;: &quot;sum(container_fs_usage_bytes{image!=\\&quot;\\&quot;,instance=~\\&quot;^$instance$\\&quot;,namespace=~\\&quot;^$namespace$\\&quot;}) by (pod)&quot;,</span></span>
<span class="line"><span>              &quot;interval&quot;: &quot;&quot;,</span></span>
<span class="line"><span>              &quot;intervalFactor&quot;: 2,</span></span>
<span class="line"><span>              &quot;legendFormat&quot;: &quot;{{ pod }}&quot;,</span></span>
<span class="line"><span>              &quot;metric&quot;: &quot;network&quot;,</span></span>
<span class="line"><span>              &quot;refId&quot;: &quot;A&quot;,</span></span>
<span class="line"><span>              &quot;step&quot;: 240</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>          ],</span></span>
<span class="line"><span>          &quot;thresholds&quot;: [],</span></span>
<span class="line"><span>          &quot;timeFrom&quot;: null,</span></span>
<span class="line"><span>          &quot;timeRegions&quot;: [],</span></span>
<span class="line"><span>          &quot;timeShift&quot;: null,</span></span>
<span class="line"><span>          &quot;title&quot;: &quot;磁盘使用量&quot;,</span></span>
<span class="line"><span>          &quot;tooltip&quot;: {</span></span>
<span class="line"><span>            &quot;msResolution&quot;: false,</span></span>
<span class="line"><span>            &quot;shared&quot;: false,</span></span>
<span class="line"><span>            &quot;sort&quot;: 2,</span></span>
<span class="line"><span>            &quot;value_type&quot;: &quot;cumulative&quot;</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;type&quot;: &quot;graph&quot;,</span></span>
<span class="line"><span>          &quot;xaxis&quot;: {</span></span>
<span class="line"><span>            &quot;buckets&quot;: null,</span></span>
<span class="line"><span>            &quot;mode&quot;: &quot;time&quot;,</span></span>
<span class="line"><span>            &quot;name&quot;: null,</span></span>
<span class="line"><span>            &quot;show&quot;: true,</span></span>
<span class="line"><span>            &quot;values&quot;: []</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          &quot;yaxes&quot;: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;format&quot;: &quot;bytes&quot;,</span></span>
<span class="line"><span>              &quot;label&quot;: &quot;used&quot;,</span></span>
<span class="line"><span>              &quot;logBase&quot;: 1,</span></span>
<span class="line"><span>              &quot;max&quot;: null,</span></span>
<span class="line"><span>              &quot;min&quot;: null,</span></span>
<span class="line"><span>              &quot;show&quot;: true</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              &quot;format&quot;: &quot;short&quot;,</span></span>
<span class="line"><span>              &quot;label&quot;: null,</span></span>
<span class="line"><span>              &quot;logBase&quot;: 1,</span></span>
<span class="line"><span>              &quot;max&quot;: null,</span></span>
<span class="line"><span>              &quot;min&quot;: null,</span></span>
<span class="line"><span>              &quot;show&quot;: false</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>          ],</span></span>
<span class="line"><span>          &quot;yaxis&quot;: {</span></span>
<span class="line"><span>            &quot;align&quot;: false,</span></span>
<span class="line"><span>            &quot;alignLevel&quot;: null</span></span>
<span class="line"><span>          }</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>      ],</span></span>
<span class="line"><span>      &quot;refresh&quot;: false,</span></span>
<span class="line"><span>      &quot;schemaVersion&quot;: 30,</span></span>
<span class="line"><span>      &quot;style&quot;: &quot;dark&quot;,</span></span>
<span class="line"><span>      &quot;tags&quot;: [</span></span>
<span class="line"><span>        &quot;kubernetes&quot;</span></span>
<span class="line"><span>      ],</span></span>
<span class="line"><span>      &quot;templating&quot;: {</span></span>
<span class="line"><span>        &quot;list&quot;: [</span></span>
<span class="line"><span>          {</span></span>
<span class="line"><span>            &quot;allValue&quot;: &quot;.*&quot;,</span></span>
<span class="line"><span>            &quot;current&quot;: {</span></span>
<span class="line"><span>              &quot;selected&quot;: false,</span></span>
<span class="line"><span>              &quot;text&quot;: &quot;All&quot;,</span></span>
<span class="line"><span>              &quot;value&quot;: &quot;$__all&quot;</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            &quot;datasource&quot;: &quot;Prometheus&quot;,</span></span>
<span class="line"><span>            &quot;definition&quot;: &quot;&quot;,</span></span>
<span class="line"><span>            &quot;description&quot;: null,</span></span>
<span class="line"><span>            &quot;error&quot;: null,</span></span>
<span class="line"><span>            &quot;hide&quot;: 0,</span></span>
<span class="line"><span>            &quot;includeAll&quot;: true,</span></span>
<span class="line"><span>            &quot;label&quot;: &quot;Instance&quot;,</span></span>
<span class="line"><span>            &quot;multi&quot;: false,</span></span>
<span class="line"><span>            &quot;name&quot;: &quot;instance&quot;,</span></span>
<span class="line"><span>            &quot;options&quot;: [],</span></span>
<span class="line"><span>            &quot;query&quot;: {</span></span>
<span class="line"><span>              &quot;query&quot;: &quot;label_values(instance)&quot;,</span></span>
<span class="line"><span>              &quot;refId&quot;: &quot;Prometheus-instance-Variable-Query&quot;</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            &quot;refresh&quot;: 1,</span></span>
<span class="line"><span>            &quot;regex&quot;: &quot;master|node.*&quot;,</span></span>
<span class="line"><span>            &quot;skipUrlSync&quot;: false,</span></span>
<span class="line"><span>            &quot;sort&quot;: 0,</span></span>
<span class="line"><span>            &quot;tagValuesQuery&quot;: &quot;&quot;,</span></span>
<span class="line"><span>            &quot;tagsQuery&quot;: &quot;&quot;,</span></span>
<span class="line"><span>            &quot;type&quot;: &quot;query&quot;,</span></span>
<span class="line"><span>            &quot;useTags&quot;: false</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          {</span></span>
<span class="line"><span>            &quot;allValue&quot;: null,</span></span>
<span class="line"><span>            &quot;current&quot;: {</span></span>
<span class="line"><span>              &quot;selected&quot;: false,</span></span>
<span class="line"><span>              &quot;text&quot;: &quot;All&quot;,</span></span>
<span class="line"><span>              &quot;value&quot;: &quot;$__all&quot;</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            &quot;datasource&quot;: &quot;Prometheus&quot;,</span></span>
<span class="line"><span>            &quot;definition&quot;: &quot;&quot;,</span></span>
<span class="line"><span>            &quot;description&quot;: null,</span></span>
<span class="line"><span>            &quot;error&quot;: null,</span></span>
<span class="line"><span>            &quot;hide&quot;: 0,</span></span>
<span class="line"><span>            &quot;includeAll&quot;: true,</span></span>
<span class="line"><span>            &quot;label&quot;: &quot;Namespace&quot;,</span></span>
<span class="line"><span>            &quot;multi&quot;: true,</span></span>
<span class="line"><span>            &quot;name&quot;: &quot;namespace&quot;,</span></span>
<span class="line"><span>            &quot;options&quot;: [],</span></span>
<span class="line"><span>            &quot;query&quot;: {</span></span>
<span class="line"><span>              &quot;query&quot;: &quot;label_values(namespace)&quot;,</span></span>
<span class="line"><span>              &quot;refId&quot;: &quot;Prometheus-namespace-Variable-Query&quot;</span></span>
<span class="line"><span>            },</span></span>
<span class="line"><span>            &quot;refresh&quot;: 1,</span></span>
<span class="line"><span>            &quot;regex&quot;: &quot;&quot;,</span></span>
<span class="line"><span>            &quot;skipUrlSync&quot;: false,</span></span>
<span class="line"><span>            &quot;sort&quot;: 0,</span></span>
<span class="line"><span>            &quot;tagValuesQuery&quot;: &quot;&quot;,</span></span>
<span class="line"><span>            &quot;tagsQuery&quot;: &quot;&quot;,</span></span>
<span class="line"><span>            &quot;type&quot;: &quot;query&quot;,</span></span>
<span class="line"><span>            &quot;useTags&quot;: false</span></span>
<span class="line"><span>          }</span></span>
<span class="line"><span>        ]</span></span>
<span class="line"><span>      },</span></span>
<span class="line"><span>      &quot;time&quot;: {</span></span>
<span class="line"><span>        &quot;from&quot;: &quot;now-15m&quot;,</span></span>
<span class="line"><span>        &quot;to&quot;: &quot;now&quot;</span></span>
<span class="line"><span>      },</span></span>
<span class="line"><span>      &quot;timepicker&quot;: {</span></span>
<span class="line"><span>        &quot;refresh_intervals&quot;: [</span></span>
<span class="line"><span>          &quot;5s&quot;,</span></span>
<span class="line"><span>          &quot;10s&quot;,</span></span>
<span class="line"><span>          &quot;30s&quot;,</span></span>
<span class="line"><span>          &quot;1m&quot;,</span></span>
<span class="line"><span>          &quot;5m&quot;,</span></span>
<span class="line"><span>          &quot;15m&quot;,</span></span>
<span class="line"><span>          &quot;30m&quot;,</span></span>
<span class="line"><span>          &quot;1h&quot;,</span></span>
<span class="line"><span>          &quot;2h&quot;,</span></span>
<span class="line"><span>          &quot;1d&quot;</span></span>
<span class="line"><span>        ],</span></span>
<span class="line"><span>        &quot;time_options&quot;: [</span></span>
<span class="line"><span>          &quot;5m&quot;,</span></span>
<span class="line"><span>          &quot;15m&quot;,</span></span>
<span class="line"><span>          &quot;1h&quot;,</span></span>
<span class="line"><span>          &quot;6h&quot;,</span></span>
<span class="line"><span>          &quot;12h&quot;,</span></span>
<span class="line"><span>          &quot;24h&quot;,</span></span>
<span class="line"><span>          &quot;2d&quot;,</span></span>
<span class="line"><span>          &quot;7d&quot;,</span></span>
<span class="line"><span>          &quot;30d&quot;</span></span>
<span class="line"><span>        ]</span></span>
<span class="line"><span>      },</span></span>
<span class="line"><span>      &quot;timezone&quot;: &quot;browser&quot;,</span></span>
<span class="line"><span>      &quot;title&quot;: &quot;Kubernetes Pod Resources&quot;,</span></span>
<span class="line"><span>      &quot;uid&quot;: &quot;0Mu1btknk&quot;,</span></span>
<span class="line"><span>      &quot;version&quot;: 4</span></span>
<span class="line"><span>    }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="_2、grafana-pvc资源" tabindex="-1"><a class="header-anchor" href="#_2、grafana-pvc资源"><span>2、grafana-pvc资源</span></a></h5><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@master ~]# cat grafana-pvc.yaml</span></span>
<span class="line"><span>apiVersion: v1</span></span>
<span class="line"><span>kind: Namespace</span></span>
<span class="line"><span>metadata:</span></span>
<span class="line"><span>  name: kube-system</span></span>
<span class="line"><span></span></span>
<span class="line"><span>---</span></span>
<span class="line"><span></span></span>
<span class="line"><span>apiVersion: v1</span></span>
<span class="line"><span>kind: PersistentVolume</span></span>
<span class="line"><span>metadata:</span></span>
<span class="line"><span>  name: nfs-pv-grafana</span></span>
<span class="line"><span>  labels:</span></span>
<span class="line"><span>    pv: nfs-pv-grafana</span></span>
<span class="line"><span>spec:</span></span>
<span class="line"><span>  capacity:</span></span>
<span class="line"><span>    storage: 10Gi</span></span>
<span class="line"><span>  accessModes:</span></span>
<span class="line"><span>    - ReadWriteMany</span></span>
<span class="line"><span>  persistentVolumeReclaimPolicy: Retain</span></span>
<span class="line"><span>  nfs:</span></span>
<span class="line"><span>    path: /data/nfs/grafana</span></span>
<span class="line"><span>    server: 192.168.52.135</span></span>
<span class="line"><span></span></span>
<span class="line"><span>---</span></span>
<span class="line"><span></span></span>
<span class="line"><span>kind: PersistentVolumeClaim</span></span>
<span class="line"><span>apiVersion: v1</span></span>
<span class="line"><span>metadata:</span></span>
<span class="line"><span>  name: nfs-pvc-grafana</span></span>
<span class="line"><span>  namespace: kube-system</span></span>
<span class="line"><span>spec:</span></span>
<span class="line"><span>  accessModes:</span></span>
<span class="line"><span>    - ReadWriteMany</span></span>
<span class="line"><span>  resources:</span></span>
<span class="line"><span>    requests:</span></span>
<span class="line"><span>      storage: 10Gi</span></span>
<span class="line"><span>  selector:</span></span>
<span class="line"><span>    matchLabels:</span></span>
<span class="line"><span>      pv: nfs-pv-grafana</span></span>
<span class="line"><span>---</span></span>
<span class="line"><span></span></span>
<span class="line"><span>apiVersion: v1</span></span>
<span class="line"><span>kind: PersistentVolume</span></span>
<span class="line"><span>metadata:</span></span>
<span class="line"><span>  name: nfs-pv-grafana-plugin</span></span>
<span class="line"><span>  labels:</span></span>
<span class="line"><span>    pv: nfs-pv-grafana-plugin</span></span>
<span class="line"><span>spec:</span></span>
<span class="line"><span>  capacity:</span></span>
<span class="line"><span>    storage: 10Gi</span></span>
<span class="line"><span>  accessModes:</span></span>
<span class="line"><span>    - ReadWriteMany</span></span>
<span class="line"><span>  persistentVolumeReclaimPolicy: Retain</span></span>
<span class="line"><span>  nfs:</span></span>
<span class="line"><span>    path: /data/nfs/grafana-plugin</span></span>
<span class="line"><span>    server: 192.168.52.135</span></span>
<span class="line"><span></span></span>
<span class="line"><span>---</span></span>
<span class="line"><span></span></span>
<span class="line"><span>kind: PersistentVolumeClaim</span></span>
<span class="line"><span>apiVersion: v1</span></span>
<span class="line"><span>metadata:</span></span>
<span class="line"><span>  name: nfs-pvc-grafana-plugin</span></span>
<span class="line"><span>  namespace: kube-system</span></span>
<span class="line"><span>spec:</span></span>
<span class="line"><span>  accessModes:</span></span>
<span class="line"><span>    - ReadWriteMany</span></span>
<span class="line"><span>  resources:</span></span>
<span class="line"><span>    requests:</span></span>
<span class="line"><span>      storage: 10Gi</span></span>
<span class="line"><span>  selector:</span></span>
<span class="line"><span>    matchLabels:</span></span>
<span class="line"><span>      pv: nfs-pv-grafana-plugin</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="_3、grafana-deployment资源" tabindex="-1"><a class="header-anchor" href="#_3、grafana-deployment资源"><span>3、grafana-deployment资源</span></a></h5><p>configmap、pvc资源现在volume内进行声明，在由volumemount挂载到pod内。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@master ~]# cat grafana-deploy.yaml</span></span>
<span class="line"><span>apiVersion: apps/v1</span></span>
<span class="line"><span>kind: Deployment</span></span>
<span class="line"><span>metadata:</span></span>
<span class="line"><span>  name: grafana-core</span></span>
<span class="line"><span>  namespace: kube-system</span></span>
<span class="line"><span>  labels:</span></span>
<span class="line"><span>    app: grafana</span></span>
<span class="line"><span>    component: core</span></span>
<span class="line"><span>spec:</span></span>
<span class="line"><span>  selector:</span></span>
<span class="line"><span>    matchLabels:</span></span>
<span class="line"><span>      app: grafana</span></span>
<span class="line"><span>      component: core</span></span>
<span class="line"><span>  replicas: 1</span></span>
<span class="line"><span>  template:</span></span>
<span class="line"><span>    metadata:</span></span>
<span class="line"><span>      labels:</span></span>
<span class="line"><span>        app: grafana</span></span>
<span class="line"><span>        component: core</span></span>
<span class="line"><span>    spec:</span></span>
<span class="line"><span>      containers:</span></span>
<span class="line"><span>      - image: grafana/grafana:7.5.6</span></span>
<span class="line"><span>        name: grafana-core</span></span>
<span class="line"><span>        imagePullPolicy: IfNotPresent</span></span>
<span class="line"><span>        resources:</span></span>
<span class="line"><span>          limits:</span></span>
<span class="line"><span>            cpu: 100m</span></span>
<span class="line"><span>            memory: 100Mi</span></span>
<span class="line"><span>          requests:</span></span>
<span class="line"><span>            cpu: 100m</span></span>
<span class="line"><span>            memory: 100Mi</span></span>
<span class="line"><span>        env:</span></span>
<span class="line"><span>          - name: GF_AUTH_BASIC_ENABLED</span></span>
<span class="line"><span>            value: &quot;true&quot;</span></span>
<span class="line"><span>          - name: GF_AUTH_ANONYMOUS_ENABLED</span></span>
<span class="line"><span>            value: &quot;false&quot;</span></span>
<span class="line"><span>        readinessProbe:</span></span>
<span class="line"><span>          httpGet:</span></span>
<span class="line"><span>            path: /login</span></span>
<span class="line"><span>            port: 3000</span></span>
<span class="line"><span>        volumeMounts:</span></span>
<span class="line"><span>        - name: grafana-persistent-storage</span></span>
<span class="line"><span>          mountPath: /var</span></span>
<span class="line"><span>        - name: grafana-plugin-storage</span></span>
<span class="line"><span>          mountPath: /var/lib/grafana</span></span>
<span class="line"><span>        - mountPath: /etc/grafana/provisioning/datasources</span></span>
<span class="line"><span>          name: grafana-datasources</span></span>
<span class="line"><span>          readOnly: false</span></span>
<span class="line"><span>        - mountPath: /etc/grafana/provisioning/dashboards</span></span>
<span class="line"><span>          name: grafana-dashboards</span></span>
<span class="line"><span>          readOnly: false</span></span>
<span class="line"><span>        - mountPath: /grafana-dashboard-definitions/0/podresource</span></span>
<span class="line"><span>          name: grafana-k8s-pod-resource</span></span>
<span class="line"><span>          readOnly: false</span></span>
<span class="line"><span>      volumes:</span></span>
<span class="line"><span>      - name: grafana-persistent-storage</span></span>
<span class="line"><span>        persistentVolumeClaim:</span></span>
<span class="line"><span>          claimName: nfs-pvc-grafana</span></span>
<span class="line"><span>      - name: grafana-plugin-storage</span></span>
<span class="line"><span>        persistentVolumeClaim:</span></span>
<span class="line"><span>          claimName: nfs-pvc-grafana-plugin</span></span>
<span class="line"><span>      - name: grafana-datasources</span></span>
<span class="line"><span>        configMap:</span></span>
<span class="line"><span>          name: grafana-datasources</span></span>
<span class="line"><span>      - configMap:</span></span>
<span class="line"><span>          name: grafana-dashboards</span></span>
<span class="line"><span>        name: grafana-dashboards</span></span>
<span class="line"><span>      - configMap:</span></span>
<span class="line"><span>          name: grafana-k8s-pod-resource</span></span>
<span class="line"><span>        name: grafana-k8s-pod-resource</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="_4、grafana-service资源" tabindex="-1"><a class="header-anchor" href="#_4、grafana-service资源"><span>4、grafana-service资源</span></a></h5><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@master ~]# cat grafana-svc.yaml</span></span>
<span class="line"><span>apiVersion: v1</span></span>
<span class="line"><span>kind: Service</span></span>
<span class="line"><span>metadata:</span></span>
<span class="line"><span>  name: grafana</span></span>
<span class="line"><span>  namespace: kube-system</span></span>
<span class="line"><span>  labels:</span></span>
<span class="line"><span>    app: grafana</span></span>
<span class="line"><span>    component: core</span></span>
<span class="line"><span>spec:</span></span>
<span class="line"><span>  type: NodePort</span></span>
<span class="line"><span>  ports:</span></span>
<span class="line"><span>    - port: 3000</span></span>
<span class="line"><span>  selector:</span></span>
<span class="line"><span>    app: grafana</span></span>
<span class="line"><span>    component: core</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@master ~]# kubectl apply -f grafana-cm.yaml</span></span>
<span class="line"><span>[root@master ~]# kubectl apply -f grafana-pvc.yaml</span></span>
<span class="line"><span>[root@master ~]# kubectl apply -f grafana-deploy.yaml</span></span>
<span class="line"><span>[root@master ~]# kubectl apply -f grafana-svc.yaml</span></span>
<span class="line"><span>[root@master ~]# kubectl get pod,svc,pv,pvc,cm -A | grep grafana</span></span>
<span class="line"><span>kube-system    pod/grafana-core-9cf6488c6-dddqv     1/1     Running   0          114m</span></span>
<span class="line"><span>kube-system   service/grafana      NodePort    10.106.6.209   &amp;lt;none&amp;gt;        3000:30583/TCP           113m</span></span>
<span class="line"><span>            persistentvolume/nfs-pv-grafana          10Gi       RWX            Retain           Bound    kube-system/nfs-pvc-grafana                                  103m</span></span>
<span class="line"><span>            persistentvolume/nfs-pv-grafana-plugin   10Gi       RWX            Retain           Bound    kube-system/nfs-pvc-grafana-plugin                           103m</span></span>
<span class="line"><span>kube-system   persistentvolumeclaim/nfs-pvc-grafana          Bound    nfs-pv-grafana          10Gi       RWX                           103m</span></span>
<span class="line"><span>kube-system   persistentvolumeclaim/nfs-pvc-grafana-plugin   Bound    nfs-pv-grafana-plugin   10Gi       RWX                           103m</span></span>
<span class="line"><span>kube-system       configmap/grafana-dashboards                   1      114m</span></span>
<span class="line"><span>kube-system       configmap/grafana-datasources                  1      114m</span></span>
<span class="line"><span>kube-system       configmap/grafana-k8s-pod-resource             1      114m</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><img loading="lazy" src="https://www.chenjiao.cloud/upload/grafana.png" alt="grafana.png" width="100%" height="100%" style="display:inline-block;">`,53)]))}const c=p(t,[["render",o]]),q=JSON.parse('{"path":"/note-book/Kubernetes/Kubernetes%20Make%20Prometheus_Grafana.html","title":"Kubernetes Make Prometheus+Grafana","lang":"zh-CN","frontmatter":{"description":"Kubernetes Make Prometheus+Grafana Kubernetes Create Prometheus+Grafana 一、背景 Prometheus作为一个采用tidb时序数据库为数据存储的监控软件，因为嵌合当前主流容器化，所以一直处于广泛使用的状态，常用监控面板grafana，可以接收多种dataresource，结合数据源...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Kubernetes Make Prometheus+Grafana\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-08-13T15:08:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Paper-Dragon\\",\\"url\\":\\"https://github.com/Paper-Dragon\\",\\"email\\":\\"2678885646@qq.com\\"}]}"],["meta",{"property":"og:url","content":"https://www.geekery.cn/note-book/Kubernetes/Kubernetes%20Make%20Prometheus_Grafana.html"}],["meta",{"property":"og:site_name","content":"运维开发绿皮书"}],["meta",{"property":"og:title","content":"Kubernetes Make Prometheus+Grafana"}],["meta",{"property":"og:description","content":"Kubernetes Make Prometheus+Grafana Kubernetes Create Prometheus+Grafana 一、背景 Prometheus作为一个采用tidb时序数据库为数据存储的监控软件，因为嵌合当前主流容器化，所以一直处于广泛使用的状态，常用监控面板grafana，可以接收多种dataresource，结合数据源..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-08-13T15:08:38.000Z"}],["meta",{"property":"article:modified_time","content":"2023-08-13T15:08:38.000Z"}]]},"git":{"createdTime":1691939318000,"updatedTime":1691939318000,"contributors":[{"name":"Paper-Dragon","username":"Paper-Dragon","email":"2678885646@qq.com","commits":1,"url":"https://github.com/Paper-Dragon"}],"changelog":[{"hash":"392a519398b2e846f316619fbe831e100164de7c","time":1691939318000,"email":"2678885646@qq.com","author":"Paper-Dragon","message":"Create The Worid!"}]},"readingTime":{"minutes":14.92,"words":4477},"filePathRelative":"note-book/Kubernetes/Kubernetes Make Prometheus+Grafana.md","excerpt":"\\n<h3>Kubernetes Create Prometheus+Grafana</h3>\\n<h4>一、背景</h4>\\n<p>Prometheus作为一个采用tidb时序数据库为数据存储的监控软件，因为嵌合当前主流容器化，所以一直处于广泛使用的状态，常用监控面板grafana，可以接收多种dataresource，结合数据源支持的语法可以对数据进行分析，实时展示监控值。</p>\\n<h4>二、准备工作</h4>\\n<h5>1、主机分布</h5>\\n192.168.52.135(master)nfs-server\\n<p>nfs-server</p>\\n192.168.52.136(node01)nfs-client\\n","autoDesc":true}');export{c as comp,q as data};
