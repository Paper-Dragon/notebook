import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{aj as a,ao as n,am as e}from"./app-BTliMZdR.js";const t="/assets/v2-c048ffa44c69ae7aacc6992b069a88d2_720w-16919215108371-B38r0jbf.webp",l="/assets/v2-b20d32333c42bb13eaa4923fd70079db_720w-16919215123483-DDVhJBRk.webp",h="/assets/v2-becb9337febf654a1f3903326014cb03_720w-16919215140385-ChvDwxUG.webp",p="/assets/v2-177adaea929f217fbee4be52dc2afee3_720w-16919215161987-LePFlOix.webp",d="/assets/v2-8a098faffad62b50ae88d33adadd93d6_720w-16919215174009-BCd7V3qN.webp",k="/assets/v2-d14f7876073c7aa719eef08221f9d523_720w-169192152018011-DFT0V1T5.webp",r="/assets/v2-5a866c482c7663c52d5afdb028800d65_720w-169192152207613-DeuI2gLm.webp",g="/assets/v2-38f61efb8ad57080ef17a78ee4e8d218_720w-169192152426815-BNGNIHUV.webp",o="/assets/v2-02b8d13d0db945629c73640aa316da0a_720w-169192152617517-B99mgPXn.webp",c="/assets/v2-f47a9afebebd9cb11bfa886868c0524f_720w-169192152828819-DIAtK77N.webp",m={};function u(y,i){return e(),a("div",null,i[0]||(i[0]=[n('<h1 id="命令创建虚拟镜像文件" tabindex="-1"><a class="header-anchor" href="#命令创建虚拟镜像文件"><span>命令创建虚拟镜像文件</span></a></h1><blockquote><p>https://zhuanlan.zhihu.com/p/81767176</p></blockquote><h2 id="_1-使用-dd-命令创建虚拟镜像文件" tabindex="-1"><a class="header-anchor" href="#_1-使用-dd-命令创建虚拟镜像文件"><span>1.使用 dd 命令创建虚拟镜像文件</span></a></h2><figure><img src="'+t+'" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="_2-使用-mkfs-命令格式化磁盘-我们这里是自己创建的虚拟磁盘镜像" tabindex="-1"><a class="header-anchor" href="#_2-使用-mkfs-命令格式化磁盘-我们这里是自己创建的虚拟磁盘镜像"><span>2.使用 mkfs 命令格式化磁盘（我们这里是自己创建的虚拟磁盘镜像）</span></a></h2><figure><img src="'+l+'" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>查看Linux 支持哪些文件系统</p><figure><img src="'+h+`" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="使用-mount-命令挂载磁盘到目录树" tabindex="-1"><a class="header-anchor" href="#使用-mount-命令挂载磁盘到目录树"><span>使用 mount 命令挂载磁盘到目录树</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mount</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> loop</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ext4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> virtual.img</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 也可以省略挂载类型，很多时候 mount 会自动识别</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 以只读方式挂载</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mount</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> loop</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --ro</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> virtual.img</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 或者mount -o loop,ro virtual.img /mnt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+p+'" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="使用-fdisk-为磁盘分区" tabindex="-1"><a class="header-anchor" href="#使用-fdisk-为磁盘分区"><span>使用 fdisk 为磁盘分区</span></a></h2><figure><img src="'+d+'" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="'+k+'" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="'+r+`" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="使用-losetup-命令建立镜像与回环设备的关联" tabindex="-1"><a class="header-anchor" href="#使用-losetup-命令建立镜像与回环设备的关联"><span>使用 losetup 命令建立镜像与回环设备的关联</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> losetup</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/loop0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> virtual.img</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 如果提示设备忙你也可以使用其它的回环设备，&quot;ls /dev/loop*&quot;参看所有回环设备</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">*</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 解除设备关联</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> losetup</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/loop0</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kpartx</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kpartx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -av</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/loop0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">*# 取消映射</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kpartx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -dv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/loop0</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+g+`" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mkfs.ext4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/loop0p1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mkfs.ext4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/loop0p5</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mkfs.ext4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/loop0p6</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+o+`" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="格式化完成后在-media目录下新建四个空目录用于挂载虚拟磁盘" tabindex="-1"><a class="header-anchor" href="#格式化完成后在-media目录下新建四个空目录用于挂载虚拟磁盘"><span>格式化完成后在<code>/media</code>目录下新建四个空目录用于挂载虚拟磁盘：</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 挂载磁盘分区</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mount</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/loop0p1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /media/virtualdisk_1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mount</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/loop0p5</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /media/virtualdisk_2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mount</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/loop0p6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /media/virtualdisk_3</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">*</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 卸载磁盘分区</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> umount</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/loop0p1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> umount</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/loop0p5</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> umount</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/loop0p6</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+c+'" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>',23)]))}const F=s(m,[["render",u],["__file","命令创建虚拟镜像文件.html.vue"]]),b=JSON.parse('{"path":"/note-book/LinuxOperaSystem/%E5%91%BD%E4%BB%A4%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E9%95%9C%E5%83%8F%E6%96%87%E4%BB%B6.html","title":"命令创建虚拟镜像文件","lang":"zh-CN","frontmatter":{"description":"命令创建虚拟镜像文件 https://zhuanlan.zhihu.com/p/81767176 1.使用 dd 命令创建虚拟镜像文件 imgimg 2.使用 mkfs 命令格式化磁盘（我们这里是自己创建的虚拟磁盘镜像） imgimg 查看Linux 支持哪些文件系统 imgimg 使用 mount 命令挂载磁盘到目录树 imgimg 使用 fdisk...","head":[["meta",{"property":"og:url","content":"https://www.geekery.cn/note-book/LinuxOperaSystem/%E5%91%BD%E4%BB%A4%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E9%95%9C%E5%83%8F%E6%96%87%E4%BB%B6.html"}],["meta",{"property":"og:site_name","content":"运维开发绿皮书"}],["meta",{"property":"og:title","content":"命令创建虚拟镜像文件"}],["meta",{"property":"og:description","content":"命令创建虚拟镜像文件 https://zhuanlan.zhihu.com/p/81767176 1.使用 dd 命令创建虚拟镜像文件 imgimg 2.使用 mkfs 命令格式化磁盘（我们这里是自己创建的虚拟磁盘镜像） imgimg 查看Linux 支持哪些文件系统 imgimg 使用 mount 命令挂载磁盘到目录树 imgimg 使用 fdisk..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-26T05:41:05.000Z"}],["meta",{"property":"article:modified_time","content":"2024-03-26T05:41:05.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"命令创建虚拟镜像文件\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-03-26T05:41:05.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"PaperDragon\\",\\"url\\":\\"https://github.com/Paper-Dragon\\",\\"email\\":\\"2678885646@qq.com\\"}]}"]]},"headers":[{"level":2,"title":"1.使用 dd 命令创建虚拟镜像文件","slug":"_1-使用-dd-命令创建虚拟镜像文件","link":"#_1-使用-dd-命令创建虚拟镜像文件","children":[]},{"level":2,"title":"2.使用 mkfs 命令格式化磁盘（我们这里是自己创建的虚拟磁盘镜像）","slug":"_2-使用-mkfs-命令格式化磁盘-我们这里是自己创建的虚拟磁盘镜像","link":"#_2-使用-mkfs-命令格式化磁盘-我们这里是自己创建的虚拟磁盘镜像","children":[]},{"level":2,"title":"使用 mount 命令挂载磁盘到目录树","slug":"使用-mount-命令挂载磁盘到目录树","link":"#使用-mount-命令挂载磁盘到目录树","children":[]},{"level":2,"title":"使用 fdisk 为磁盘分区","slug":"使用-fdisk-为磁盘分区","link":"#使用-fdisk-为磁盘分区","children":[]},{"level":2,"title":"使用 losetup 命令建立镜像与回环设备的关联","slug":"使用-losetup-命令建立镜像与回环设备的关联","link":"#使用-losetup-命令建立镜像与回环设备的关联","children":[]},{"level":2,"title":"格式化完成后在/media目录下新建四个空目录用于挂载虚拟磁盘：","slug":"格式化完成后在-media目录下新建四个空目录用于挂载虚拟磁盘","link":"#格式化完成后在-media目录下新建四个空目录用于挂载虚拟磁盘","children":[]}],"git":{"createdTime":1691939318000,"updatedTime":1711431665000,"contributors":[{"name":"PaperDragon-SH","email":"2678885646@qq.com","commits":2}]},"readingTime":{"minutes":1.42,"words":425},"filePathRelative":"note-book/LinuxOperaSystem/命令创建虚拟镜像文件.md","localizedDate":"2023年8月13日","excerpt":"\\n<blockquote>\\n<p>https://zhuanlan.zhihu.com/p/81767176</p>\\n</blockquote>\\n<h2>1.使用 dd 命令创建虚拟镜像文件</h2>\\n<figure><figcaption>img</figcaption></figure>\\n<h2>2.使用 mkfs 命令格式化磁盘（我们这里是自己创建的虚拟磁盘镜像）</h2>\\n<figure><figcaption>img</figcaption></figure>\\n<p>查看Linux 支持哪些文件系统</p>\\n<figure><figcaption>img</figcaption></figure>","autoDesc":true}');export{F as comp,b as data};
