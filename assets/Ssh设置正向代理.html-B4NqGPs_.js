import{ah as i,ai as a,an as n,am as e}from"./app-DChKrzAY.js";const t="/assets/image-20240329174533227-CdoFJeAx.png",h={};function l(p,s){return e(),a("div",null,s[0]||(s[0]=[n(`<h1 id="ssh设置正向代理" tabindex="-1"><a class="header-anchor" href="#ssh设置正向代理"><span>Ssh设置正向代理</span></a></h1><blockquote><p>ssh把远程端口映射到本地</p></blockquote><h2 id="应用场景1-docker容器端口映射到本地" tabindex="-1"><a class="header-anchor" href="#应用场景1-docker容器端口映射到本地"><span>应用场景1： docker容器端口映射到本地</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ssh</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 80:172.18.0.3:80</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root@43.136.116.195</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="解释" tabindex="-1"><a class="header-anchor" href="#解释"><span>解释</span></a></h2><table><thead><tr><th>字段</th><th>含义</th></tr></thead><tbody><tr><td>ssh</td><td>命令</td></tr><tr><td>-L</td><td>指定到本地（客户端）主机上给定 TCP 端口或 Unix 套接字的连接将被转发到远程端的给定主机和端口或 Unix 套接字。（服务器做正向代理）</td></tr><tr><td>80:172.18.0.3:80</td><td>本地端口80 -&gt; 远程主机里的 172.18.0.3 的 80端口</td></tr><tr><td>root@43.136.116.195</td><td>远程连接用户@远程主机地址</td></tr></tbody></table><h2 id="选项解释-l" tabindex="-1"><a class="header-anchor" href="#选项解释-l"><span>选项解释： -L</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     -L</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [bind_address:]port:host:hostport</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     -L</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [bind_address:]port:remote_socket</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     -L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> local_socket:host:hostport</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     -L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> local_socket:remote_socket</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">              指定到本地（客户端）主机上给定</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> TCP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 端口或</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Unix</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 套接字的连接将被转发到远程端的给定主机和端口或</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Unix</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 套接字。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">              这是通过分配一个套接字来侦听本地端的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> TCP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 端口（可选地绑定到指定的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bind_address）或</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Unix</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 套接字来实现的。</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 每当连接是</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">              与本地端口或套接字建立连接，连接通过安全通道转发，并与主机端口</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hostport</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 或</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Unix</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 套接字</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> remote_socket</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 建立连接，</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">              从远程机器。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">              也可以在配置文件中指定端口转发。</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 只有超级用户可以转发特权端口。</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 可以通过将地址包含在</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">              方括号。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">              默认情况下，本地端口根据</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GatewayPorts</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 设置进行绑定。</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 但是，可以使用显式</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bind_address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 将连接绑定到特定地址。</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 这</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">              “localhost”的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bind_address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 表示监听端口仅供本地使用，而空地址或“</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">”表示端口应可用于所有</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">              接口。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="案例" tabindex="-1"><a class="header-anchor" href="#案例"><span>案例</span></a></h2><p>设置本地ip地址</p><p><img src="`+t+`" alt="image-20240329174533227"></p><p>批量映射本地ip到远程</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ssh</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 192.168.0.115:4014:192.168.0.115:4014</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">	-L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 192.168.0.145:4014:192.168.0.145:4014</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">	-L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 192.168.0.168:4014:192.168.0.168:4014</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">	-L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 192.168.0.118:4014:192.168.0.118:4014</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">	-L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 192.168.0.111:4014:192.168.0.111:4014</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">	-L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 192.168.0.121:4014:192.168.0.121:4014</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">	-L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 192.168.0.134:4014:192.168.0.134:4014</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">	-L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 192.168.0.146:4014:192.168.0.146:4014</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">	-L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 192.168.0.153:4014:192.168.0.153:4014</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">	-L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 192.168.0.180:4014:192.168.0.180:4014</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">	a11@124.220.42.xx3</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 52836</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,13)]))}const r=i(h,[["render",l]]),d=JSON.parse('{"path":"/note-book/Ssh/Ssh%E8%AE%BE%E7%BD%AE%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86.html","title":"Ssh设置正向代理","lang":"zh-CN","frontmatter":{"description":"Ssh设置正向代理 ssh把远程端口映射到本地 应用场景1： docker容器端口映射到本地 解释 选项解释： -L 案例 设置本地ip地址 image-20240329174533227 批量映射本地ip到远程","head":[["meta",{"property":"og:url","content":"https://www.geekery.cn/note-book/Ssh/Ssh%E8%AE%BE%E7%BD%AE%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86.html"}],["meta",{"property":"og:site_name","content":"运维开发绿皮书"}],["meta",{"property":"og:title","content":"Ssh设置正向代理"}],["meta",{"property":"og:description","content":"Ssh设置正向代理 ssh把远程端口映射到本地 应用场景1： docker容器端口映射到本地 解释 选项解释： -L 案例 设置本地ip地址 image-20240329174533227 批量映射本地ip到远程"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-29T23:59:08.000Z"}],["meta",{"property":"article:modified_time","content":"2024-03-29T23:59:08.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Ssh设置正向代理\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-03-29T23:59:08.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"PaperDragon\\",\\"url\\":\\"https://github.com/Paper-Dragon\\",\\"email\\":\\"2678885646@qq.com\\"}]}"]]},"git":{"createdTime":1691939318000,"updatedTime":1711756748000,"contributors":[{"name":"PaperDragon","username":"PaperDragon","email":"2678885646@qq.com","commits":2,"url":"https://github.com/PaperDragon"},{"name":"PaperDragon-SH","username":"PaperDragon-SH","email":"2678885646@qq.com","commits":4,"url":"https://github.com/PaperDragon-SH"}]},"readingTime":{"minutes":1.63,"words":490},"filePathRelative":"note-book/Ssh/Ssh设置正向代理.md","localizedDate":"2023年8月13日","excerpt":"\\n<blockquote>\\n<p>ssh把远程端口映射到本地</p>\\n</blockquote>\\n<h2>应用场景1： docker容器端口映射到本地</h2>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\"> ssh</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> -L</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> 80:172.18.0.3:80</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> root@43.136.116.195</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{r as comp,d as data};
