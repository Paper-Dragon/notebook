import{ah as a,ai as n,ar as r,am as s}from"./app-BPB4Z2Sr.js";const i="/assets/1034759-20191113170548235-2063928773-CT8f4ywa.png",t="/assets/1034759-20191113172600977-1718819197-DO2mRPAH.png",l={};function o(c,e){return s(),n("div",null,e[0]||(e[0]=[r('<h1 id="二进制安装kubernetes-三-kube-controller-manager组件安装" tabindex="-1"><a class="header-anchor" href="#二进制安装kubernetes-三-kube-controller-manager组件安装"><span>二进制安装kubernetes（三）kube-controller-manager组件安装</span></a></h1><h3 id="controller-manager简介" tabindex="-1"><a class="header-anchor" href="#controller-manager简介"><span>Controller Manager简介</span></a></h3><p>详细介绍请参考链接：<a href="https://blog.csdn.net/bbwangj/article/details/82557705" target="_blank" rel="noopener noreferrer">Kubernetes组件之kube-controller-manager</a></p><p>Controller Manager作为集群内部的管理控制中心，负责集群内的Node、Pod副本、服务端点（Endpoint）、命名空间（Namespace）、服务账号（ServiceAccount）、资源定额（ResourceQuota）的管理，当某个Node意外宕机时，Controller Manager会及时发现并执行自动化修复流程，确保集群始终处于预期的工作状态。</p><p><img src="'+i+`" alt="img"></p><p>每个Controller通过API Server提供的接口实时监控整个集群的每个资源对象的当前状态，当发生各种故障导致系统状态发生变化时，会尝试将系统状态修复到“期望状态”。</p><p>controller-manager安装在apiserver节点服务器上，hdss7-21，22：</p><p>编辑controller-manager启动脚本：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># vi /opt/kubernetes/server/bin/kube-controller-manager.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>#!/bin/sh</span></span>
<span class="line"><span>./kube-controller-manager \\</span></span>
<span class="line"><span>  --cluster-cidr 172.7.0.0/16 \\</span></span>
<span class="line"><span>  --leader-elect true \\</span></span>
<span class="line"><span>  --log-dir /data/logs/kubernetes/kube-controller-manager \\</span></span>
<span class="line"><span>  --master http://127.0.0.1:8080 \\</span></span>
<span class="line"><span>  --service-account-private-key-file ./cert/ca-key.pem \\</span></span>
<span class="line"><span>  --service-cluster-ip-range 192.168.0.0/16 \\</span></span>
<span class="line"><span>  --root-ca-file ./cert/ca.pem \\</span></span>
<span class="line"><span>  --v 2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行权限：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># chmod +x /opt/kubernetes/server/bin/kube-controller-manager.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>创建日志存储目录：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># mkdir -p /data/logs/kubernetes/kube-controller-manager</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>编辑supervisord启动脚本：红色字体部分根据部署主机修改</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># vi /etc/supervisord.d/kube-conntroller-manager.ini</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>添加supervisord：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># supervisorctl update</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>检查状态：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># supervisorctl status</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="`+t+'" alt="img"></p><p>至此 controller manager已经部署完成，接下来部署kube-scheduler。</p>',22)]))}const p=a(l,[["render",o]]),g=JSON.parse('{"path":"/note-book/Kubernetes/05%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85kubernetes%EF%BC%88%E4%B8%89%EF%BC%89kube-controller-manager%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85.html","title":"二进制安装kubernetes（三）kube-controller-manager组件安装","lang":"zh-CN","frontmatter":{"description":"二进制安装kubernetes（三）kube-controller-manager组件安装 Controller Manager简介 详细介绍请参考链接：Kubernetes组件之kube-controller-manager Controller Manager作为集群内部的管理控制中心，负责集群内的Node、Pod副本、服务端点（Endpoint）...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"二进制安装kubernetes（三）kube-controller-manager组件安装\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-04-11T02:13:31.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Paper-Dragon\\",\\"url\\":\\"https://github.com/Paper-Dragon\\",\\"email\\":\\"2678885646@qq.com\\"}]}"],["meta",{"property":"og:url","content":"https://www.geekery.cn/note-book/Kubernetes/05%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85kubernetes%EF%BC%88%E4%B8%89%EF%BC%89kube-controller-manager%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85.html"}],["meta",{"property":"og:site_name","content":"运维开发绿皮书"}],["meta",{"property":"og:title","content":"二进制安装kubernetes（三）kube-controller-manager组件安装"}],["meta",{"property":"og:description","content":"二进制安装kubernetes（三）kube-controller-manager组件安装 Controller Manager简介 详细介绍请参考链接：Kubernetes组件之kube-controller-manager Controller Manager作为集群内部的管理控制中心，负责集群内的Node、Pod副本、服务端点（Endpoint）..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-11T02:13:31.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-11T02:13:31.000Z"}]]},"git":{"createdTime":1691939318000,"updatedTime":1744337611000,"contributors":[{"name":"Paper-Dragon","username":"Paper-Dragon","email":"2678885646@qq.com","commits":2,"url":"https://github.com/Paper-Dragon"},{"name":"PaperDragon-SH","username":"PaperDragon-SH","email":"2678885646@qq.com","commits":2,"url":"https://github.com/PaperDragon-SH"}],"changelog":[{"hash":"acc20ecd1bcdb70acdb85ab952a0db582179691b","time":1744337611000,"email":"2678885646@qq.com","author":"Paper-Dragon","message":"Firefox密码提取"},{"hash":"d9487231a8c7ade839488b74acab413e440a9cab","time":1709799304000,"email":"2678885646@qq.com","author":"PaperDragon-SH","message":"sort"},{"hash":"9c7d3ed5ed10c4c37d350dd61183ac799eca024b","time":1709795925000,"email":"2678885646@qq.com","author":"PaperDragon-SH","message":"二进制安装kubernetes（三）kube-controller-manager组件安装"},{"hash":"392a519398b2e846f316619fbe831e100164de7c","time":1691939318000,"email":"2678885646@qq.com","author":"Paper-Dragon","message":"Create The Worid!"}]},"readingTime":{"minutes":1.22,"words":365},"filePathRelative":"note-book/Kubernetes/05二进制安装kubernetes（三）kube-controller-manager组件安装.md","excerpt":"\\n<h3>Controller Manager简介</h3>\\n<p>详细介绍请参考链接：<a href=\\"https://blog.csdn.net/bbwangj/article/details/82557705\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Kubernetes组件之kube-controller-manager</a></p>\\n<p>Controller  Manager作为集群内部的管理控制中心，负责集群内的Node、Pod副本、服务端点（Endpoint）、命名空间（Namespace）、服务账号（ServiceAccount）、资源定额（ResourceQuota）的管理，当某个Node意外宕机时，Controller Manager会及时发现并执行自动化修复流程，确保集群始终处于预期的工作状态。</p>","autoDesc":true}');export{p as comp,g as data};
