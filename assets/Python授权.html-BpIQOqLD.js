import{a as s,c as a,g as e,o as n}from"./app-C7_apVtj.js";const l={};function t(h,i){return n(),a("div",null,[...i[0]||(i[0]=[e(`<h1 id="python授权服务使用文档" tabindex="-1"><a class="header-anchor" href="#python授权服务使用文档"><span>Python授权服务使用文档</span></a></h1><h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p>基于 FastAPI 的软件授权管理系统，支持设备授权验证、AES加密传输、本地缓存、Web管理界面。</p><p><strong>项目地址</strong>：https://github.com/Paper-Dragon/py-auth</p><h2 id="功能特性" tabindex="-1"><a class="header-anchor" href="#功能特性"><span>功能特性</span></a></h2><ul><li>✅ 设备授权管理、AES加密传输</li><li>✅ 本地缓存机制（7天有效期）</li><li>✅ Web管理界面、JWT认证</li><li>✅ Docker一键部署</li></ul><h2 id="快速开始" tabindex="-1"><a class="header-anchor" href="#快速开始"><span>快速开始</span></a></h2><h3 id="docker-compose-部署" tabindex="-1"><a class="header-anchor" href="#docker-compose-部署"><span>Docker Compose 部署</span></a></h3><ol><li><strong>克隆仓库</strong></li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> clone</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://github.com/Paper-Dragon/py-auth.git</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> py-auth</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>配置环境</strong></li></ol><p>复制 <code>env.example</code> 为 <code>.env</code>，修改关键配置：</p><ul><li><code>MYSQL_ROOT_PASSWORD</code>: MySQL密码</li><li><code>ADMIN_PASSWORD</code>: 管理员密码</li><li><code>CLIENT_SECRET</code>: 客户端密钥（与服务端一致）</li><li><code>SECRET_KEY</code>: JWT密钥</li></ul><ol start="3"><li><strong>启动服务</strong></li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> compose</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> up</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="4"><li><strong>访问服务</strong></li></ol><ul><li>Web管理界面：http://localhost:8000（默认账户：<code>admin</code> / <code>admin123</code>）</li><li>API文档：http://localhost:8000/docs</li><li>phpMyAdmin：http://localhost:8080</li></ul><ol start="5"><li><strong>查看日志</strong></li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> compose</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> logs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> auth-service</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="客户端sdk使用" tabindex="-1"><a class="header-anchor" href="#客户端sdk使用"><span>客户端SDK使用</span></a></h2><h3 id="功能特性-1" tabindex="-1"><a class="header-anchor" href="#功能特性-1"><span>功能特性</span></a></h3><ul><li>✅ 设备授权状态检查</li><li>✅ 本地缓存机制（7天有效期）</li><li>✅ AES加密传输</li><li>✅ 自动设备信息收集</li><li>✅ 离线缓存支持</li></ul><h3 id="安装客户端sdk" tabindex="-1"><a class="header-anchor" href="#安装客户端sdk"><span>安装客户端SDK</span></a></h3><p>客户端SDK托管在私有PyPI仓库中，使用以下命令安装：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> py-auth-client</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --extra-index-url</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://www.geekery.cn/pip/simple/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="快速开始-1" tabindex="-1"><a class="header-anchor" href="#快速开始-1"><span>快速开始</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> py_auth_client </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> AuthClient, AuthorizationError</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 初始化客户端</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">client </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> AuthClient</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">    server_url</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://localhost:8000&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">    software_name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;我的软件&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">    client_secret</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;your-client-secret-key-change-in-production&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 检查授权</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    client.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">require_authorization</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;✅ 设备已授权&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">except</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> AuthorizationError </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">as</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> e:</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;❌ 授权失败: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    exit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 你的软件代码...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="配置参数" tabindex="-1"><a class="header-anchor" href="#配置参数"><span>配置参数</span></a></h3><p><strong>必需参数：</strong></p><ul><li><code>server_url</code>: 授权服务器地址</li><li><code>client_secret</code>: 客户端密钥（必须与服务端一致）</li></ul><p><strong>可选参数：</strong></p><ul><li><code>device_id</code>: 设备ID（不提供则自动生成）</li><li><code>software_name</code>: 软件名称</li><li><code>device_info</code>: 设备信息字典（不提供则自动收集）</li><li><code>cache_dir</code>: 缓存目录（默认使用系统隐藏目录）</li><li><code>enable_cache</code>: 是否启用缓存（默认True）</li><li><code>cache_validity_days</code>: 缓存有效期（天，默认7天）</li><li><code>check_interval_days</code>: 检查间隔（天，默认2天）</li></ul><h3 id="缓存机制" tabindex="-1"><a class="header-anchor" href="#缓存机制"><span>缓存机制</span></a></h3><ul><li>缓存有效期：7天</li><li>始终向服务端发送请求并更新本地缓存</li><li>在线验证失败时，在有效期内使用缓存作为后备</li><li>缓存文件经过混淆加密，隐藏在系统目录中</li></ul>`,34)])])}const p=s(l,[["render",t]]),d=JSON.parse('{"path":"/note-book/Project/Python%E6%8E%88%E6%9D%83.html","title":"Python授权服务使用文档","lang":"zh-CN","frontmatter":{"description":"Python授权服务使用文档 简介 基于 FastAPI 的软件授权管理系统，支持设备授权验证、AES加密传输、本地缓存、Web管理界面。 项目地址：https://github.com/Paper-Dragon/py-auth 功能特性 ✅ 设备授权管理、AES加密传输 ✅ 本地缓存机制（7天有效期） ✅ Web管理界面、JWT认证 ✅ Docker...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Python授权服务使用文档\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-12-30T10:37:51.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Paper-Dragon\\",\\"url\\":\\"https://github.com/Paper-Dragon\\",\\"email\\":\\"2678885646@qq.com\\"}]}"],["meta",{"property":"og:url","content":"https://www.geekery.cn/note-book/Project/Python%E6%8E%88%E6%9D%83.html"}],["meta",{"property":"og:site_name","content":"运维开发绿皮书"}],["meta",{"property":"og:title","content":"Python授权服务使用文档"}],["meta",{"property":"og:description","content":"Python授权服务使用文档 简介 基于 FastAPI 的软件授权管理系统，支持设备授权验证、AES加密传输、本地缓存、Web管理界面。 项目地址：https://github.com/Paper-Dragon/py-auth 功能特性 ✅ 设备授权管理、AES加密传输 ✅ 本地缓存机制（7天有效期） ✅ Web管理界面、JWT认证 ✅ Docker..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-12-30T10:37:51.000Z"}],["meta",{"property":"article:modified_time","content":"2025-12-30T10:37:51.000Z"}]]},"git":{"createdTime":1767079026000,"updatedTime":1767091071000,"contributors":[{"name":"Paper-Dragon","username":"Paper-Dragon","email":"2678885646@qq.com","commits":2,"url":"https://github.com/Paper-Dragon"}],"changelog":[{"hash":"afe8112d8023f171c9935c8fb3a8ace1153d3bbc","time":1767091071000,"email":"2678885646@qq.com","author":"Paper-Dragon","message":"update py_auth_client-0.1.1"},{"hash":"c54b62a9923a80c1fea8bc391a831d7a396ce660","time":1767079026000,"email":"2678885646@qq.com","author":"Paper-Dragon","message":"Python授权服务使用文档"}]},"readingTime":{"minutes":1.8,"words":540},"filePathRelative":"note-book/Project/Python授权.md","excerpt":"\\n<h2>简介</h2>\\n<p>基于 FastAPI 的软件授权管理系统，支持设备授权验证、AES加密传输、本地缓存、Web管理界面。</p>\\n<p><strong>项目地址</strong>：https://github.com/Paper-Dragon/py-auth</p>\\n<h2>功能特性</h2>\\n<ul>\\n<li>✅ 设备授权管理、AES加密传输</li>\\n<li>✅ 本地缓存机制（7天有效期）</li>\\n<li>✅ Web管理界面、JWT认证</li>\\n<li>✅ Docker一键部署</li>\\n</ul>\\n<h2>快速开始</h2>\\n<h3>Docker Compose 部署</h3>","autoDesc":true}');export{p as comp,d as data};
