import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{aj as a,ao as e,am as n}from"./app-C1lz6nkA.js";const h="/assets/image-20240625113733174-D0h8VQ_6.png",l={};function t(d,s){return n(),a("div",null,s[0]||(s[0]=[e('<h1 id="pam-honey实现钓鱼ssh密码" tabindex="-1"><a class="header-anchor" href="#pam-honey实现钓鱼ssh密码"><span>pam-honey实现钓鱼ssh密码</span></a></h1><blockquote><p>实现永远无法登陆设备，任何密码都是失败，并且记录输入的密码。</p></blockquote><h2 id="安装devel包" tabindex="-1"><a class="header-anchor" href="#安装devel包"><span>安装devel包</span></a></h2><p>CentOS中需要安装pam-devel包，其他操作系统自查。名字差不多</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pam-devel</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+h+`" alt="image-20240625113733174" tabindex="0" loading="lazy"><figcaption>image-20240625113733174</figcaption></figure><h2 id="下载模块源码" tabindex="-1"><a class="header-anchor" href="#下载模块源码"><span>下载模块源码</span></a></h2><p>项目源码地址：<a href="https://github.com/weddige/pam_honey.so" target="_blank" rel="noopener noreferrer">https://github.com/weddige/pam_honey.so</a></p><p>右键这个连接下载或者复制链接去下载器下载。</p><p>本站下载： <a href="./pam-honey%E5%AE%9E%E7%8E%B0%E9%92%93%E9%B1%BCssh%E5%AF%86%E7%A0%81.assets/pam_honey.c">pam_honey.c</a></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www.geekery.cn/xxxxxx.xxxxx/pam_honey.c</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="编译" tabindex="-1"><a class="header-anchor" href="#编译"><span>编译</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gcc</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -fPIC</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -DPIC</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -shared</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -rdynamic</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pam_honey.so</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pam_honey.c</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="复制和配置" tabindex="-1"><a class="header-anchor" href="#复制和配置"><span>复制和配置</span></a></h2><p>复制到so目录</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>mv -vf pam_custom_auth.so /lib64/security/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="相关文件" tabindex="-1"><a class="header-anchor" href="#相关文件"><span>相关文件</span></a></h2><p>Makefile</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">all:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> build</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">build:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	gcc</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -fPIC</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -DPIC</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -shared</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -rdynamic</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pam_honey.so</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pam_honey.c</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">install:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	mv</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -vf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pam_custom_auth.so</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /lib64/security/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">clean:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	rm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pam_honey.so</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="测试" tabindex="-1"><a class="header-anchor" href="#测试"><span>测试</span></a></h2><p>尝试登陆后会显示登陆失败。</p><p>在 /root/honey.txt 会显示你输入的密码</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sshpass</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 123456</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ssh</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root@127.0.0.1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /root/honey.txt</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root:123456</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,23)]))}const k=i(l,[["render",t],["__file","pam-honey实现钓鱼ssh密码.html.vue"]]),c=JSON.parse('{"path":"/note-book/Security/pam-honey%E5%AE%9E%E7%8E%B0%E9%92%93%E9%B1%BCssh%E5%AF%86%E7%A0%81.html","title":"pam-honey实现钓鱼ssh密码","lang":"zh-CN","frontmatter":{"feed":false,"seo":false,"head":[]},"headers":[{"level":2,"title":"安装devel包","slug":"安装devel包","link":"#安装devel包","children":[]},{"level":2,"title":"下载模块源码","slug":"下载模块源码","link":"#下载模块源码","children":[]},{"level":2,"title":"编译","slug":"编译","link":"#编译","children":[]},{"level":2,"title":"复制和配置","slug":"复制和配置","link":"#复制和配置","children":[]},{"level":2,"title":"相关文件","slug":"相关文件","link":"#相关文件","children":[]},{"level":2,"title":"测试","slug":"测试","link":"#测试","children":[]}],"git":{"createdTime":1719288915000,"updatedTime":1719288915000,"contributors":[{"name":"PaperDragon-SH","email":"2678885646@qq.com","commits":1}]},"readingTime":{"minutes":0.74,"words":222},"filePathRelative":"note-book/Security/pam-honey实现钓鱼ssh密码.md","localizedDate":"2024年6月25日"}');export{k as comp,c as data};
