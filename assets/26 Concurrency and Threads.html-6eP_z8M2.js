import{ah as n,ai as r,an as t,am as o}from"./app-4KKQjKUB.js";const a="/assets/process_thread_difference-D4IC9dk4.png",c="data:image/png;base64,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",i="/assets/sharedata_problem-wrFZjBdU.png",p={};function s(l,e){return o(),r("div",null,e[0]||(e[0]=[t('<h1 id="_26-concurrency-and-threads-并发和线程" tabindex="-1"><a class="header-anchor" href="#_26-concurrency-and-threads-并发和线程"><span>26 Concurrency and Threads 并发和线程</span></a></h1><p><strong>概述:</strong><br> 为什么需要线程?一是因为有并行运算的需求,通过多线程可以提高运算速度;二是提高cpu的使用率,特别是有I/O的情况,以前只有进程的时候, 发生I/0时,进程就只能被阻塞,不能干其它的事情,有了多线程,则可以切换到其它线程运行.</p><ol><li><p>线程与进程的不同<br> 一个进程通常包含多个线程.线程可以想象成是小型的进程.</p><ul><li>内存共享<br> 同一进程里的多线程共享内存空间,可以访问相同的数据,而进程与进程之前是不共享内存的.</li><li>环境切换 每个线程都有自己栈内存,有自己的寄存器,发生环境切换时,线程将状态保存到TCB(Thread Control Block),但不会切换地址空间(因为共享内存), 而进程将状态保存在PCB(Process Control Block),会切换地址空间(因为有各自的内存空间)</li></ul><p><img src="'+a+'" alt=""></p></li><li><p>共享数据问题 线程虽然可以提高程序运算速度和cpu的使用率,但是因为可以访问相同的数据,并发更新数据时就容易出现问题.问题的根本在于更新数据的代码执行并非原子性,而线程切换调度又是不可确定性. 比如:counter = counter + 1,编译成汇编语言可能就像下面这样<br><img src="'+c+'" alt=""><br> 每一条指令执行后都有可能被切换到其它同样执行这一代码的线程,从而引发共享数据问题.<br> 可能的结果是下面这样的:<br><img src="'+i+'" alt=""></p></li><li><p>原子性愿望 上述的共享数据问题,原因在于更新数据的代码没有一步执行到位.解决的方案就是使用一种机制让产生数据共享问题的代码,在多线程的环境下,即使发生环境切换,同时只让一个线程完整执行这段代码.这种机制成为原子性.要么全部执行完,要么不执行,没有中间状态.现代系统通过硬件提供有用的指令(同步原语),和操作系统的帮助来构建多线程系统.</p></li></ol>',3)]))}const d=n(p,[["render",s]]),m=JSON.parse('{"path":"/note-book/OperaSystems/OperatingSystemPrinciple/ostep-note/2concurrency/26%20Concurrency%20and%20Threads.html","title":"26 Concurrency and Threads 并发和线程","lang":"zh-CN","frontmatter":{"description":"26 Concurrency and Threads 并发和线程 概述: 为什么需要线程?一是因为有并行运算的需求,通过多线程可以提高运算速度;二是提高cpu的使用率,特别是有I/O的情况,以前只有进程的时候, 发生I/0时,进程就只能被阻塞,不能干其它的事情,有了多线程,则可以切换到其它线程运行. 线程与进程的不同 一个进程通常包含多个线程.线程可以...","head":[["meta",{"property":"og:url","content":"https://www.geekery.cn/note-book/OperaSystems/OperatingSystemPrinciple/ostep-note/2concurrency/26%20Concurrency%20and%20Threads.html"}],["meta",{"property":"og:site_name","content":"运维开发绿皮书"}],["meta",{"property":"og:title","content":"26 Concurrency and Threads 并发和线程"}],["meta",{"property":"og:description","content":"26 Concurrency and Threads 并发和线程 概述: 为什么需要线程?一是因为有并行运算的需求,通过多线程可以提高运算速度;二是提高cpu的使用率,特别是有I/O的情况,以前只有进程的时候, 发生I/0时,进程就只能被阻塞,不能干其它的事情,有了多线程,则可以切换到其它线程运行. 线程与进程的不同 一个进程通常包含多个线程.线程可以..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-08-13T15:08:38.000Z"}],["meta",{"property":"article:modified_time","content":"2023-08-13T15:08:38.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"26 Concurrency and Threads 并发和线程\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-08-13T15:08:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"PaperDragon\\",\\"url\\":\\"https://github.com/Paper-Dragon\\",\\"email\\":\\"2678885646@qq.com\\"}]}"]]},"git":{"createdTime":1691939318000,"updatedTime":1691939318000,"contributors":[{"name":"PaperDragon","username":"PaperDragon","email":"2678885646@qq.com","commits":1,"url":"https://github.com/PaperDragon"}]},"readingTime":{"minutes":1.99,"words":596},"filePathRelative":"note-book/OperaSystems/OperatingSystemPrinciple/ostep-note/2concurrency/26 Concurrency and Threads.md","localizedDate":"2023年8月13日","excerpt":"\\n<p><strong>概述:</strong><br>\\n为什么需要线程?一是因为有并行运算的需求,通过多线程可以提高运算速度;二是提高cpu的使用率,特别是有I/O的情况,以前只有进程的时候,\\n发生I/0时,进程就只能被阻塞,不能干其它的事情,有了多线程,则可以切换到其它线程运行.</p>\\n<ol>\\n<li>\\n<p>线程与进程的不同<br>\\n一个进程通常包含多个线程.线程可以想象成是小型的进程.</p>\\n<ul>\\n<li>内存共享<br>\\n同一进程里的多线程共享内存空间,可以访问相同的数据,而进程与进程之前是不共享内存的.</li>\\n<li>环境切换\\n每个线程都有自己栈内存,有自己的寄存器,发生环境切换时,线程将状态保存到TCB(Thread Control Block),但不会切换地址空间(因为共享内存),\\n而进程将状态保存在PCB(Process Control Block),会切换地址空间(因为有各自的内存空间)</li>\\n</ul>\\n<p></p>\\n</li>\\n<li>\\n<p>共享数据问题\\n线程虽然可以提高程序运算速度和cpu的使用率,但是因为可以访问相同的数据,并发更新数据时就容易出现问题.问题的根本在于更新数据的代码执行并非原子性,而线程切换调度又是不可确定性.\\n比如:counter = counter + 1,编译成汇编语言可能就像下面这样<br>\\n<br>\\n每一条指令执行后都有可能被切换到其它同样执行这一代码的线程,从而引发共享数据问题.<br>\\n可能的结果是下面这样的:<br>\\n</p>\\n</li>\\n<li>\\n<p>原子性愿望\\n上述的共享数据问题,原因在于更新数据的代码没有一步执行到位.解决的方案就是使用一种机制让产生数据共享问题的代码,在多线程的环境下,即使发生环境切换,同时只让一个线程完整执行这段代码.这种机制成为原子性.要么全部执行完,要么不执行,没有中间状态.现代系统通过硬件提供有用的指令(同步原语),和操作系统的帮助来构建多线程系统.</p>\\n</li>\\n</ol>","autoDesc":true}');export{d as comp,m as data};
