import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{aj as i,ao as a,am as n}from"./app-BTliMZdR.js";const t="/assets/v2-4579b576c71f7695c7bce2dd6191ef7a_720w-CKGj6sa_.webp",l="/assets/v2-bad93bc88d8dec6153253df4663da4ae_720w-CX-bI23a.webp",p="/assets/v2-7b2edfa2047ff43f2fe96d3ecbc3a9de_720w-C53JXWMP.webp",r="/assets/v2-e7c41c8f237fa04c4606870a90151094_720w-DwRoymPt.webp",d={};function c(h,e){return n(),i("div",null,e[0]||(e[0]=[a('<h1 id="snapper玩转btrfs文件系统" tabindex="-1"><a class="header-anchor" href="#snapper玩转btrfs文件系统"><span>Snapper玩转btrfs文件系统</span></a></h1><blockquote><p>https://zhuanlan.zhihu.com/p/31082518</p></blockquote><h2 id="配置-snapper" tabindex="-1"><a class="header-anchor" href="#配置-snapper"><span><strong>配置 snapper</strong></span></a></h2><p>在 Btrfs 中，snapper 是以子卷为单位管理快照的。我们要先为子卷建立配置文件才能管理快照。</p><p>这里我们不另外划分子卷，直接以 Btrfs 挂载点的根目录来进行操作（根目录也算是一个子卷）。</p><h3 id="_4-1-创建配置文件" tabindex="-1"><a class="header-anchor" href="#_4-1-创建配置文件"><span>4.1 创建配置文件</span></a></h3><p>命令基本用法</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>snapper -c &lt;配置名称&gt; create-config &lt;子卷路径&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>用法举例</p><p>创建 <code>/mnt/btrfs/</code> 的快照配置文件。</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>snapper -c snap_test create-config /mnt/btrfs/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-2-删除配置文件" tabindex="-1"><a class="header-anchor" href="#_4-2-删除配置文件"><span>4.2 删除配置文件</span></a></h3><p>命令基本用法</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>snapper -c &lt;配置名称&gt; delete-config</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-3-列出现有配置文件" tabindex="-1"><a class="header-anchor" href="#_4-3-列出现有配置文件"><span>4.3 列出现有配置文件</span></a></h3><p>命令基本用法</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>snapper list-configs</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="五、快照的管理" tabindex="-1"><a class="header-anchor" href="#五、快照的管理"><span><strong>五、快照的管理</strong></span></a></h2><h3 id="_5-1-拍摄一个快照" tabindex="-1"><a class="header-anchor" href="#_5-1-拍摄一个快照"><span>5.1 拍摄一个快照</span></a></h3><p><strong>5.1.1 拍摄一个普通快照</strong></p><p>命令基本用法</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>snapper -c &lt;配置名称&gt; create [选项]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+t+'" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>用法举例</p><p>在 <code>/mnt/btrfs/</code> 上拍摄一个快照，描述信息为 <code>kuaizhao1</code>，并打印其编号。</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>snapper -c snap_test create --description=kuaizhao1 -p</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>执行结果</strong></p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>5.1.2 拍摄一对快照</strong></p><p>快照对中包含了 <code>pre</code> 快照和 <code>post</code> 两种类型的快照。</p><p>一个 <code>pre</code> 快照需要对应一个 <code>post</code> 快照。</p><p>一般在进行文件系统操作之前拍摄一个 <code>pre</code> 快照，在操作完成后再拍摄一个 <code>post</code> 快照。</p><p>快照对其实跟普通快照并没有什么本质上的区别，只是做个标记便于识别和管理而已。</p><p>命令基本用法</p><p>拍摄 <code>pre</code> 快照</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>snapper -c &lt;配置名称&gt; create -t pre [选项]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>拍摄 <code>post</code> 快照</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>snapper -c &lt;配置名称&gt; create -t post --pre-number=&lt;pre 快照编号&gt; [选项]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+l+`" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><blockquote><p><strong>说明</strong> 快照编号可通过执行 5.2 的命令来查看，下同。</p></blockquote><h3 id="_5-2-列出所有快照" tabindex="-1"><a class="header-anchor" href="#_5-2-列出所有快照"><span>5.2 列出所有快照</span></a></h3><p>命令基本用法</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>snapper -c &lt;配置名称&gt; list</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>用法举例</p><p>列出 <code>/mnt/btrfs/</code> 中的所有快照。</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>snapper -c snap_test list</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>执行结果</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># 前期：指快照对中 post 快照所对应的 pre 快照名</span></span>
<span class="line"><span># 清空：指清理算法</span></span>
<span class="line"><span></span></span>
<span class="line"><span>类型   | # | 前期 # | 日期                               | 用户 | 清空     | 描述      | 用户数据</span></span>
<span class="line"><span>-------+---+--------+------------------------------------+------+----------+-----------+---------</span></span>
<span class="line"><span>single | 0 |        |                                    | root |          | current   |             </span></span>
<span class="line"><span>single | 1 |        | 2017年10月29日 星期日 13时23分48秒 | root |          | kuaizhao1 |</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>说明</strong> 0 号快照并不是真正的快照，它表示当前文件系统的状态。</p></blockquote><h3 id="_5-3-删除快照" tabindex="-1"><a class="header-anchor" href="#_5-3-删除快照"><span>5.3 删除快照</span></a></h3><p>命令基本用法</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>snapper -c &lt;配置名称&gt; delete &lt;快照 1 编号&gt; [&lt;快照 2 编号&gt;...]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>用法举例</p><p>删除刚才创建的快照。</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>snapper -c snap_test delete 1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_5-4-比较两个快照的差异" tabindex="-1"><a class="header-anchor" href="#_5-4-比较两个快照的差异"><span>5.4 比较两个快照的差异</span></a></h3><p>命令基本用法</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>snapper -c &lt;配置名称&gt; status &lt;快照 1 编号&gt;..&lt;快照 2 编号&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>执行完该命令之后，snapper 会分析快照 2 相比快照 1 有哪些差异，并将比较结果保存到文件中以便下次快速查询。</p><p>具体有哪些差异要看文件名以及对应的旗标。</p><figure><img src="`+p+`" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>用法举例</p><p>在 <code>/mnt/btrfs/</code> 上创建文件 <code>1.txt</code>，然后拍摄一个快照，再往 <code>1.txt</code> 添加一点内容，然后创建文件 <code>2.txt</code>，再拍摄一个快照。比较这两个快照的差异。</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>touch /mnt/btrfs/1.txt  # 创建 1.txt</span></span>
<span class="line"><span>snapper -c snap_test create # 拍摄快照</span></span>
<span class="line"><span>echo &quot;Hello&quot; &gt; /mnt/btrfs/1.txt # 添加内容</span></span>
<span class="line"><span>touch /mnt/btrfs/2.txt  # 创建 2.txt</span></span>
<span class="line"><span>snapper -c snap_test create # 拍摄快照</span></span>
<span class="line"><span>snapper -c snap_test status 1..2    # 比较快照 1 到快照 2 的差异</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行结果</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>c..... /mnt/btrfs/1.txt # 1.txt 被修改了</span></span>
<span class="line"><span>+..... /mnt/btrfs/2.txt # 增加了 2.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-5-回滚快照" tabindex="-1"><a class="header-anchor" href="#_5-5-回滚快照"><span>5.5 回滚快照</span></a></h3><p>命令基本用法</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>snapper -c &lt;配置名称&gt; undochange &lt;快照编号&gt;..&lt;0&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p><strong>注意</strong> 建议在回滚快照之前先为当前状态创建一个快照。</p></blockquote><p>用法举例</p><p>回滚到上面创建的快照 1，并对比前后结果。</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>tree /mnt/btrfs/    # 查看回滚前文件</span></span>
<span class="line"><span>snapper -c snap_test undochange 1..0    # 回滚快照</span></span>
<span class="line"><span>tree /mnt/btrfs/    # 查看回滚后文件</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行结果</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># 回滚前状态</span></span>
<span class="line"><span>/mnt/btrfs/</span></span>
<span class="line"><span>├── 1.txt</span></span>
<span class="line"><span>└── 2.txt</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 执行回滚命令后</span></span>
<span class="line"><span>创建：0 修订：1 删除：1</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 回滚后状态</span></span>
<span class="line"><span>/mnt/btrfs/</span></span>
<span class="line"><span>└── 1.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-6-快照文件的管理" tabindex="-1"><a class="header-anchor" href="#_5-6-快照文件的管理"><span>5.6 快照文件的管理</span></a></h3><p>由 snapper 所产生的快照默认存储在子卷下面的 <code>.snapshots</code> 目录中。我们来看一下它的结构：</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>/mnt/btrfs/.snapshots/</span></span>
<span class="line"><span>├── 1   # 快照 1 目录</span></span>
<span class="line"><span>│   ├── info.xml    # 快照基本信息</span></span>
<span class="line"><span>│   └── snapshot    # 快照内容</span></span>
<span class="line"><span>│       └── 1.txt</span></span>
<span class="line"><span>└── 2   # 快照 2 目录</span></span>
<span class="line"><span>    ├── filelist-1.txt  # 快照差异比较结果</span></span>
<span class="line"><span>    ├── info.xml    # 快照基本信息</span></span>
<span class="line"><span>    └── snapshot    # 快照内容</span></span>
<span class="line"><span>        ├── 1.txt</span></span>
<span class="line"><span>        └── 2.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到，每个快照的基本信息和内容都在其对应编号的目录中，子目录 <code>snapshot</code> 的内容就是拍摄快照时子卷的所有内容。</p><p>快照文件默认是只读的，而且只有 root 可以访问。如果需要恢复单一文件，可以把快照里面的内容用 <code>cp</code>命令拷贝回来。</p><p>由于 Btrfs 文件系统具有写时复制的特性，所以如果文件系统中的文件没有经常被替换，快照占用的空间是非常小的。</p><h2 id="六、快照的自动拍摄与清理" tabindex="-1"><a class="header-anchor" href="#六、快照的自动拍摄与清理"><span><strong>六、快照的自动拍摄与清理</strong></span></a></h2><p>自动拍摄及清理快照是 snapper 的特色功能之一。</p><h3 id="_6-1-开启快照自动拍摄" tabindex="-1"><a class="header-anchor" href="#_6-1-开启快照自动拍摄"><span>6.1 开启快照自动拍摄</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>systemctl start snapper-timeline.timer ; systemctl enable snapper-timeline.timer</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>默认情况下，每小时自动拍摄一次快照。</p><p>如需修改时间间隔，请修改相关的定时器配置文件。修改方法这里就不说了。</p><p>快照的清理算法将被自动设定为 <code>timeline</code>。</p><h3 id="_6-2-开启快照自动清理" tabindex="-1"><a class="header-anchor" href="#_6-2-开启快照自动清理"><span>6.2 开启快照自动清理</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>systemctl start snapper-cleanup.timer ; systemctl enable snapper-cleanup.timer</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>默认情况下，每天自动清理一次快照。</p><p>如需修改时间间隔，请修改相关的定时器配置文件。修改方法这里就不说了。</p><p>不指定清理算法的快照不会被自动清理。</p><h3 id="_6-3-修改快照自动清理的参数" tabindex="-1"><a class="header-anchor" href="#_6-3-修改快照自动清理的参数"><span>6.3 修改快照自动清理的参数</span></a></h3><p>配置文件位置：<code>/etc/snapper/configs/&lt;配置名称&gt;</code>。</p><p>常用字段及对应的功能如下：</p><figure><img src="`+r+'" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>',97)]))}const b=s(d,[["render",c],["__file","Snapper玩转btrfs文件系统.html.vue"]]),k=JSON.parse('{"path":"/note-book/Btrfs/Snapper%E7%8E%A9%E8%BD%ACbtrfs%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F.html","title":"Snapper玩转btrfs文件系统","lang":"zh-CN","frontmatter":{"description":"Snapper玩转btrfs文件系统 https://zhuanlan.zhihu.com/p/31082518 配置 snapper 在 Btrfs 中，snapper 是以子卷为单位管理快照的。我们要先为子卷建立配置文件才能管理快照。 这里我们不另外划分子卷，直接以 Btrfs 挂载点的根目录来进行操作（根目录也算是一个子卷）。 4.1 创建配置文...","head":[["meta",{"property":"og:url","content":"https://www.geekery.cn/note-book/Btrfs/Snapper%E7%8E%A9%E8%BD%ACbtrfs%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F.html"}],["meta",{"property":"og:site_name","content":"运维开发绿皮书"}],["meta",{"property":"og:title","content":"Snapper玩转btrfs文件系统"}],["meta",{"property":"og:description","content":"Snapper玩转btrfs文件系统 https://zhuanlan.zhihu.com/p/31082518 配置 snapper 在 Btrfs 中，snapper 是以子卷为单位管理快照的。我们要先为子卷建立配置文件才能管理快照。 这里我们不另外划分子卷，直接以 Btrfs 挂载点的根目录来进行操作（根目录也算是一个子卷）。 4.1 创建配置文..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-08-13T15:08:38.000Z"}],["meta",{"property":"article:modified_time","content":"2023-08-13T15:08:38.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Snapper玩转btrfs文件系统\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-08-13T15:08:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"PaperDragon\\",\\"url\\":\\"https://github.com/Paper-Dragon\\",\\"email\\":\\"2678885646@qq.com\\"}]}"]]},"headers":[{"level":2,"title":"配置 snapper","slug":"配置-snapper","link":"#配置-snapper","children":[{"level":3,"title":"4.1 创建配置文件","slug":"_4-1-创建配置文件","link":"#_4-1-创建配置文件","children":[]},{"level":3,"title":"4.2 删除配置文件","slug":"_4-2-删除配置文件","link":"#_4-2-删除配置文件","children":[]},{"level":3,"title":"4.3 列出现有配置文件","slug":"_4-3-列出现有配置文件","link":"#_4-3-列出现有配置文件","children":[]}]},{"level":2,"title":"五、快照的管理","slug":"五、快照的管理","link":"#五、快照的管理","children":[{"level":3,"title":"5.1 拍摄一个快照","slug":"_5-1-拍摄一个快照","link":"#_5-1-拍摄一个快照","children":[]},{"level":3,"title":"5.2 列出所有快照","slug":"_5-2-列出所有快照","link":"#_5-2-列出所有快照","children":[]},{"level":3,"title":"5.3 删除快照","slug":"_5-3-删除快照","link":"#_5-3-删除快照","children":[]},{"level":3,"title":"5.4 比较两个快照的差异","slug":"_5-4-比较两个快照的差异","link":"#_5-4-比较两个快照的差异","children":[]},{"level":3,"title":"5.5 回滚快照","slug":"_5-5-回滚快照","link":"#_5-5-回滚快照","children":[]},{"level":3,"title":"5.6 快照文件的管理","slug":"_5-6-快照文件的管理","link":"#_5-6-快照文件的管理","children":[]}]},{"level":2,"title":"六、快照的自动拍摄与清理","slug":"六、快照的自动拍摄与清理","link":"#六、快照的自动拍摄与清理","children":[{"level":3,"title":"6.1 开启快照自动拍摄","slug":"_6-1-开启快照自动拍摄","link":"#_6-1-开启快照自动拍摄","children":[]},{"level":3,"title":"6.2 开启快照自动清理","slug":"_6-2-开启快照自动清理","link":"#_6-2-开启快照自动清理","children":[]},{"level":3,"title":"6.3 修改快照自动清理的参数","slug":"_6-3-修改快照自动清理的参数","link":"#_6-3-修改快照自动清理的参数","children":[]}]}],"git":{"createdTime":1691939318000,"updatedTime":1691939318000,"contributors":[{"name":"PaperDragon","email":"2678885646@qq.com","commits":1}]},"readingTime":{"minutes":4.89,"words":1467},"filePathRelative":"note-book/Btrfs/Snapper玩转btrfs文件系统.md","localizedDate":"2023年8月13日","excerpt":"\\n<blockquote>\\n<p>https://zhuanlan.zhihu.com/p/31082518</p>\\n</blockquote>\\n<h2><strong>配置 snapper</strong></h2>\\n<p>在 Btrfs 中，snapper 是以子卷为单位管理快照的。我们要先为子卷建立配置文件才能管理快照。</p>\\n<p>这里我们不另外划分子卷，直接以 Btrfs 挂载点的根目录来进行操作（根目录也算是一个子卷）。</p>\\n<h3>4.1 创建配置文件</h3>\\n<p>命令基本用法</p>\\n<div class=\\"language-text line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"text\\" data-title=\\"text\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span>snapper -c &lt;配置名称&gt; create-config &lt;子卷路径&gt;</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{b as comp,k as data};
