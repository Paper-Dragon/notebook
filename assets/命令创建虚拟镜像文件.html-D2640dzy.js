import{a as i,c as a,g as n,o as e}from"./app-dILyFK0Y.js";const t="/assets/v2-c048ffa44c69ae7aacc6992b069a88d2_720w-16919215108371-B38r0jbf.webp",l="/assets/v2-b20d32333c42bb13eaa4923fd70079db_720w-16919215123483-DDVhJBRk.webp",h="/assets/v2-becb9337febf654a1f3903326014cb03_720w-16919215140385-ChvDwxUG.webp",p="/assets/v2-177adaea929f217fbee4be52dc2afee3_720w-16919215161987-LePFlOix.webp",k="/assets/v2-8a098faffad62b50ae88d33adadd93d6_720w-16919215174009-BCd7V3qN.webp",d="/assets/v2-d14f7876073c7aa719eef08221f9d523_720w-169192152018011-DFT0V1T5.webp",r="/assets/v2-5a866c482c7663c52d5afdb028800d65_720w-169192152207613-DeuI2gLm.webp",o="/assets/v2-38f61efb8ad57080ef17a78ee4e8d218_720w-169192152426815-BNGNIHUV.webp",c="/assets/v2-02b8d13d0db945629c73640aa316da0a_720w-169192152617517-B99mgPXn.webp",g="/assets/v2-f47a9afebebd9cb11bfa886868c0524f_720w-169192152828819-DIAtK77N.webp",m={};function u(A,s){return e(),a("div",null,[...s[0]||(s[0]=[n('<h1 id="命令创建虚拟镜像文件" tabindex="-1"><a class="header-anchor" href="#命令创建虚拟镜像文件"><span>命令创建虚拟镜像文件</span></a></h1><blockquote><p>https://zhuanlan.zhihu.com/p/81767176</p></blockquote><h2 id="_1-使用-dd-命令创建虚拟镜像文件" tabindex="-1"><a class="header-anchor" href="#_1-使用-dd-命令创建虚拟镜像文件"><span>1.使用 dd 命令创建虚拟镜像文件</span></a></h2><p><img src="'+t+'" alt="img"></p><h2 id="_2-使用-mkfs-命令格式化磁盘-我们这里是自己创建的虚拟磁盘镜像" tabindex="-1"><a class="header-anchor" href="#_2-使用-mkfs-命令格式化磁盘-我们这里是自己创建的虚拟磁盘镜像"><span>2.使用 mkfs 命令格式化磁盘（我们这里是自己创建的虚拟磁盘镜像）</span></a></h2><p><img src="'+l+'" alt="img"></p><p>查看Linux 支持哪些文件系统</p><p><img src="'+h+`" alt="img"></p><h2 id="使用-mount-命令挂载磁盘到目录树" tabindex="-1"><a class="header-anchor" href="#使用-mount-命令挂载磁盘到目录树"><span>使用 mount 命令挂载磁盘到目录树</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mount</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> loop</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ext4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> virtual.img</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 也可以省略挂载类型，很多时候 mount 会自动识别</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 以只读方式挂载</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mount</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> loop</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --ro</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> virtual.img</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 或者mount -o loop,ro virtual.img /mnt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+p+'" alt="img"></p><h2 id="使用-fdisk-为磁盘分区" tabindex="-1"><a class="header-anchor" href="#使用-fdisk-为磁盘分区"><span>使用 fdisk 为磁盘分区</span></a></h2><p><img src="'+k+'" alt="img"></p><p><img src="'+d+'" alt="img"></p><p><img src="'+r+`" alt="img"></p><h2 id="使用-losetup-命令建立镜像与回环设备的关联" tabindex="-1"><a class="header-anchor" href="#使用-losetup-命令建立镜像与回环设备的关联"><span>使用 losetup 命令建立镜像与回环设备的关联</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> losetup</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/loop0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> virtual.img</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 如果提示设备忙你也可以使用其它的回环设备，&quot;ls /dev/loop*&quot;参看所有回环设备</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">*</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 解除设备关联</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> losetup</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/loop0</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kpartx</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kpartx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -av</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/loop0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">*# 取消映射</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kpartx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -dv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/loop0</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+o+`" alt="img"></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mkfs.ext4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/loop0p1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mkfs.ext4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/loop0p5</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mkfs.ext4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/loop0p6</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+c+`" alt="img"></p><h2 id="格式化完成后在-media目录下新建四个空目录用于挂载虚拟磁盘" tabindex="-1"><a class="header-anchor" href="#格式化完成后在-media目录下新建四个空目录用于挂载虚拟磁盘"><span>格式化完成后在<code>/media</code>目录下新建四个空目录用于挂载虚拟磁盘：</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 挂载磁盘分区</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mount</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/loop0p1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /media/virtualdisk_1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mount</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/loop0p5</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /media/virtualdisk_2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mount</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/loop0p6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /media/virtualdisk_3</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">*</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 卸载磁盘分区</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> umount</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/loop0p1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> umount</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/loop0p5</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> umount</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/loop0p6</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+g+'" alt="img"></p>',23)])])}const F=i(m,[["render",u]]),b=JSON.parse('{"path":"/note-book/LinuxOperaSystem/%E5%91%BD%E4%BB%A4%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E9%95%9C%E5%83%8F%E6%96%87%E4%BB%B6.html","title":"命令创建虚拟镜像文件","lang":"zh-CN","frontmatter":{"description":"命令创建虚拟镜像文件 https://zhuanlan.zhihu.com/p/81767176 1.使用 dd 命令创建虚拟镜像文件 img 2.使用 mkfs 命令格式化磁盘（我们这里是自己创建的虚拟磁盘镜像） img 查看Linux 支持哪些文件系统 img 使用 mount 命令挂载磁盘到目录树 img 使用 fdisk 为磁盘分区 img i...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"命令创建虚拟镜像文件\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-03-26T05:41:05.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Paper-Dragon\\",\\"url\\":\\"https://github.com/Paper-Dragon\\",\\"email\\":\\"2678885646@qq.com\\"}]}"],["meta",{"property":"og:url","content":"https://www.geekery.cn/note-book/LinuxOperaSystem/%E5%91%BD%E4%BB%A4%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E9%95%9C%E5%83%8F%E6%96%87%E4%BB%B6.html"}],["meta",{"property":"og:site_name","content":"运维开发绿皮书"}],["meta",{"property":"og:title","content":"命令创建虚拟镜像文件"}],["meta",{"property":"og:description","content":"命令创建虚拟镜像文件 https://zhuanlan.zhihu.com/p/81767176 1.使用 dd 命令创建虚拟镜像文件 img 2.使用 mkfs 命令格式化磁盘（我们这里是自己创建的虚拟磁盘镜像） img 查看Linux 支持哪些文件系统 img 使用 mount 命令挂载磁盘到目录树 img 使用 fdisk 为磁盘分区 img i..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-26T05:41:05.000Z"}],["meta",{"property":"article:modified_time","content":"2024-03-26T05:41:05.000Z"}]]},"git":{"createdTime":1691939318000,"updatedTime":1711431665000,"contributors":[{"name":"Paper-Dragon","username":"Paper-Dragon","email":"2678885646@qq.com","commits":1,"url":"https://github.com/Paper-Dragon"},{"name":"PaperDragon-SH","username":"PaperDragon-SH","email":"2678885646@qq.com","commits":2,"url":"https://github.com/PaperDragon-SH"}],"changelog":[{"hash":"e18707b4abacb009f69df6c80823f3294650cc74","time":1711431665000,"email":"2678885646@qq.com","author":"PaperDragon-SH","message":"Markdown 格式规范化"},{"hash":"b93dc3fce09b07da1973c2c3e27e352936cc292c","time":1698989873000,"email":"2678885646@qq.com","author":"PaperDragon-SH","message":"删除不必要的分隔符，清理部分todo"},{"hash":"392a519398b2e846f316619fbe831e100164de7c","time":1691939318000,"email":"2678885646@qq.com","author":"Paper-Dragon","message":"Create The Worid!"}]},"readingTime":{"minutes":1.42,"words":425},"filePathRelative":"note-book/LinuxOperaSystem/命令创建虚拟镜像文件.md","excerpt":"\\n<blockquote>\\n<p>https://zhuanlan.zhihu.com/p/81767176</p>\\n</blockquote>\\n<h2>1.使用 dd 命令创建虚拟镜像文件</h2>\\n<p></p>\\n<h2>2.使用 mkfs 命令格式化磁盘（我们这里是自己创建的虚拟磁盘镜像）</h2>\\n<p></p>\\n<p>查看Linux 支持哪些文件系统</p>\\n<p></p>\\n<h2>使用 mount 命令挂载磁盘到目录树</h2>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code class=\\"language-bash\\"><span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">$</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> mount</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> -o</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> loop</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> -t</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> ext4</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> virtual.img</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> /mnt</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\"># 也可以省略挂载类型，很多时候 mount 会自动识别</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\"># 以只读方式挂载</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">$</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> mount</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> -o</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> loop</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> --ro</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> virtual.img</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> /mnt</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\"># 或者mount -o loop,ro virtual.img /mnt</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{F as comp,b as data};
