# Midjourney-proxyä»£ç†Midjourneyçš„Discordé¢‘é“

> ä»£ç† Midjourney çš„ Discord é¢‘é“ï¼Œå®ç° API å½¢å¼è°ƒç”¨ AI ã€‚
>
> è¿™ä¸ªä½œè€…ä¸€ä¸ªå°æ—¶æ›´æ–°ä¸€æ¬¡Releaseï¼Œå¸¦ç€bugå°±æ›´äº†ï¼Œå¤ªç€æ€¥å“ˆå“ˆå“ˆå“ˆã€‚
>
> æ‰¾åˆ°ä¸€ä¸ªæ–‡æ¡£ç‰ˆæœ¬åœ¨éƒ¨ç½²å…å¾—æ—¶é—´ä¸Šçš„æµªè´¹ã€‚
>
> å·²æµ‹è¯• v2.3.0 ä¸ºä¸ç¨³å®šç‰ˆæœ¬ï¼Œå­˜åœ¨è¿›åº¦å¡ä½çš„é—®é¢˜ã€‚

## ä¸»è¦åŠŸèƒ½

æ”¯æŒ Imagine æŒ‡ä»¤å’Œç›¸å…³åŠ¨ä½œ [V1/V2.../U1/U2.../R]

 Imagine æ—¶æ”¯æŒæ·»åŠ å›¾ç‰‡ base64ï¼Œä½œä¸ºå«å›¾

 æ”¯æŒ Blend (å›¾ç‰‡æ··åˆ)ã€Describe (å›¾ç”Ÿæ–‡) æŒ‡ä»¤

 æ”¯æŒä»»åŠ¡å®æ—¶è¿›åº¦

 æ”¯æŒä¸­æ–‡ prompt ç¿»è¯‘ï¼Œéœ€é…ç½®ç™¾åº¦ç¿»è¯‘

 prompt æ•æ„Ÿè¯é¢„æ£€æµ‹ï¼Œæ”¯æŒè¦†ç›–è°ƒæ•´

 user-token è¿æ¥ wssï¼Œå¯ä»¥è·å–é”™è¯¯ä¿¡æ¯å’Œå®Œæ•´åŠŸèƒ½

 æ”¯æŒ Shorten(promptåˆ†æ) æŒ‡ä»¤

 æ”¯æŒç„¦ç‚¹ç§»åŠ¨ï¼šPan â¬…ï¸â¡â¬†ï¸â¬‡ï¸

 æ”¯æŒå±€éƒ¨é‡ç»˜ï¼šVary (Region) ğŸ–Œ

 æ”¯æŒå‡ ä¹æ‰€æœ‰çš„å…³è”æŒ‰é’®åŠ¨ä½œå’Œ ğŸ›ï¸ Remix æ¨¡å¼

 æ”¯æŒå›¾ç‰‡å˜ç„¦ï¼Œè‡ªå®šä¹‰å˜ç„¦ Zoom ğŸ”

 æ”¯æŒè·å–å›¾ç‰‡çš„ seed å€¼

 æ”¯æŒè´¦å·æŒ‡å®šç”Ÿæˆé€Ÿåº¦æ¨¡å¼ RELAX | FAST | TURBO

 æ”¯æŒå¤šè´¦å·é…ç½®ï¼Œæ¯ä¸ªè´¦å·å¯è®¾ç½®å¯¹åº”çš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ”¯æŒè´¦å·é€‰æ‹©æ¨¡å¼ BestWaitIdle | Random | Weight | Polling

 è´¦å·æ± æŒä¹…åŒ–ï¼ŒåŠ¨æ€ç»´æŠ¤

 æ”¯æŒè·å–è´¦å· /infoã€/settings ä¿¡æ¯

 è´¦å· settings è®¾ç½®

 æ”¯æŒ nijiãƒ»journey Bot å’Œ Midjourney Bot

 zlib-stream å®‰å…¨å‹ç¼©ä¼ è¾“ https://discord.com/developers/docs/topics/gateway

 å†…åµŒMJç®¡ç†åå°é¡µé¢ï¼Œæ”¯æŒå¤šè¯­è¨€ https://github.com/trueai-org/midjourney-proxy-webui

 æ”¯æŒMJè´¦å·çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½

 æ”¯æŒMJè´¦å·çš„è¯¦ç»†ä¿¡æ¯æŸ¥è¯¢å’Œè´¦å·åŒæ­¥æ“ä½œ

 æ”¯æŒMJè´¦å·çš„å¹¶å‘é˜Ÿåˆ—è®¾ç½®

 æ”¯æŒMJçš„è´¦å·settingsè®¾ç½®

 æ”¯æŒMJçš„ä»»åŠ¡æŸ¥è¯¢

 æä¾›åŠŸèƒ½é½å…¨çš„ç»˜å›¾æµ‹è¯•é¡µé¢

 å…¼å®¹æ”¯æŒå¸‚é¢ä¸Šä¸»æµç»˜å›¾å®¢æˆ·ç«¯å’Œ API è°ƒç”¨ã€‚

## åœ¨çº¿é¢„è§ˆ

å…¬ç›Šæ¥å£ä¸ºæ…¢é€Ÿæ¨¡å¼ï¼Œæ¥å£å…è´¹è°ƒç”¨ï¼Œè´¦å·æ± ç”±èµåŠ©è€…æä¾›ï¼Œè¯·å¤§å®¶åˆç†ä½¿ç”¨ã€‚

- ç®¡ç†åå°ï¼šhttps://ai.trueai.org
- è´¦å·å¯†ç ï¼š`æ— `
- å…¬ç›Šæ¥å£ï¼šhttps://ai.trueai.org/mj
- æ¥å£æ–‡æ¡£ï¼šhttps://ai.trueai.org/swagger
- æ¥å£å¯†é’¥ï¼š`æ— `

## éƒ¨ç½²é¡¹ç›®

```bash
# é˜¿é‡Œäº‘é•œåƒï¼ˆæ¨èå›½å†…ä½¿ç”¨ï¼‰
docker pull registry.cn-guangzhou.aliyuncs.com/trueai-org/midjourney-proxy

# å…¬ç›Šæ¼”ç¤ºç«™ç‚¹å¯åŠ¨é…ç½®ç¤ºä¾‹

# 1.ä¸‹è½½å¹¶é‡å‘½åé…ç½®æ–‡ä»¶ï¼ˆç¤ºä¾‹é…ç½®ï¼‰
wget -O /root/mjopen/appsettings.Production.json https://raw.githubusercontent.com/trueai-org/midjourney-proxy/main/src/Midjourney.API/appsettings.json

# æˆ–ä½¿ç”¨ curl ä¸‹è½½å¹¶é‡å‘½åé…ç½®æ–‡ä»¶ï¼ˆç¤ºä¾‹é…ç½®ï¼‰
curl -o /root/mjopen/appsettings.Production.json https://raw.githubusercontent.com/trueai-org/midjourney-proxy/main/src/Midjourney.API/appsettings.json

# 2.åœæ­¢å¹¶ç§»é™¤æ—§çš„ Docker å®¹å™¨
docker stop mjopen && docker rm mjopen

# 3.å¯åŠ¨æ–°çš„ Docker å®¹å™¨
docker run --name mjopen -d --restart=always \
 -e DEMO=true \
 -p 8086:8080 --user root \
 -v /root/mjopen/logs:/app/logs:rw \
 -v /root/mjopen/data:/app/data:rw \
 -v /root/mjopen/appsettings.Production.json:/app/appsettings.Production.json:ro \
 -e TZ=Asia/Shanghai \
 -v /etc/localtime:/etc/localtime:ro \
 -v /etc/timezone:/etc/timezone:ro \
 registry.cn-guangzhou.aliyuncs.com/trueai-org/midjourney-proxy

# ç”Ÿäº§ç¯å¢ƒå¯åŠ¨é…ç½®ç¤ºä¾‹
docker run --name mjproxy -d --restart=always \
 -p 8088:8080 --user root \
 -v /root/mjproxy/logs:/app/logs:rw \
 -v /root/mjproxy/data:/app/data:rw \
 -v /root/mjproxy/appsettings.Production.json:/app/appsettings.Production.json:ro \
 -e TZ=Asia/Shanghai \
 -v /etc/localtime:/etc/localtime:ro \
 -v /etc/timezone:/etc/timezone:ro \
 registry.cn-guangzhou.aliyuncs.com/trueai-org/midjourney-proxy
```

### å‚æ•°é…ç½®

appsettings.Production.json

```json
{
  "Demo": null, // ç½‘ç«™é…ç½®ä¸ºæ¼”ç¤ºæ¨¡å¼
  "UserToken": "", // ç”¨æˆ·ç»˜ç”»ä»¤ç‰Œ tokenï¼Œå¯ä»¥ç”¨æ¥è®¿é—®ç»˜ç”»æ¥å£ï¼Œå¯ä»¥ä¸ç”¨è®¾å®š
  "AdminToken": "", // ç®¡ç†åå°ä»¤ç‰Œ tokenï¼Œå¯ä»¥ç”¨æ¥è®¿é—®ç»˜ç”»æ¥å£å’Œç®¡ç†å‘˜è´¦å·ç­‰åŠŸèƒ½
  "mj": {
    "AccountChooseRule": "BestWaitIdle", // BestWaitIdle | Random | Weight | Polling = æœ€ä½³ç©ºé—²è§„åˆ™ | éšæœº | æƒé‡ | è½®è¯¢
    "Discord": { // Discord é…ç½®ï¼Œé»˜è®¤å¯ä»¥ä¸º null
      "GuildId": "125652671***", // æœåŠ¡å™¨ ID
      "ChannelId": "12565267***", // é¢‘é“ ID
      "PrivateChannelId": "1256495659***", // MJ ç§ä¿¡é¢‘é“ IDï¼Œç”¨æ¥æ¥å— seed å€¼
      "NijiBotChannelId": "1261608644***", // NIJI ç§ä¿¡é¢‘é“ IDï¼Œç”¨æ¥æ¥å— seed å€¼
      "UserToken": "MTI1NjQ5N***", // ç”¨æˆ· token
      "BotToken": "MTI1NjUyODEy***", // æœºå™¨äºº token
      "UserAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/112.0.0.0 Safari/537.36",
      "Enable": true, // æ˜¯å¦é»˜è®¤å¯åŠ¨
      "CoreSize": 3, // å¹¶å‘æ•°
      "QueueSize": 10, // é˜Ÿåˆ—æ•°
      "MaxQueueSize": 100, // æœ€å¤§é˜Ÿåˆ—æ•°
      "TimeoutMinutes": 5, // ä»»åŠ¡è¶…æ—¶åˆ†é’Ÿæ•°
      "Mode": null, // RELAX | FAST | TURBO æŒ‡å®šç”Ÿæˆé€Ÿåº¦æ¨¡å¼ --fast, --relax, or --turbo parameter at the end.
      "Weight": 1 // æƒé‡
    },
    "NgDiscord": { // NG Discord é…ç½®ï¼Œé»˜è®¤å¯ä»¥ä¸º null
      "Server": "",
      "Cdn": "",
      "Wss": "",
      "ResumeWss": "",
      "UploadServer": ""
    },
    "Proxy": { // ä»£ç†é…ç½®ï¼Œé»˜è®¤å¯ä»¥ä¸º null
      "Host": "",
      "Port": 10809
    },
    "Accounts": [], // è´¦å·æ± é…ç½®
    "BaiduTranslate": { // ç™¾åº¦ç¿»è¯‘é…ç½®ï¼Œé»˜è®¤å¯ä»¥ä¸º null
      "Appid": "", // your_appid
      "AppSecret": "" // your_app_secret
    },
    "TranslateWay": "NULL", // NULL | GTP | BAIDU, ç¿»è¯‘é…ç½®, é»˜è®¤: NULL
    "ApiSecret": "", // your_api_secret
    "NotifyHook": "", // your_notify_hook, å›è°ƒé…ç½®
    "NotifyPoolSize": 10
  },
  "Serilog": {
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Default": "Warning",
        "System": "Warning",
        "Microsoft": "Warning"
      }
    },
    "WriteTo": [
      {
        "Name": "File",
        "Args": {
          "path": "logs/log.txt",
          "rollingInterval": "Day",
          "fileSizeLimitBytes": null,
          "rollOnFileSizeLimit": false,
          "retainedFileCountLimit": 31
        }
      },
      {
        "Name": "Console"
      }
    ]
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  "urls": "http://*:8080" // é»˜è®¤ç«¯å£
}
```

### å®é™…ä¾‹å­

[http://midjounery.v-chat.cc](http://midjounery.v-chat.cc)