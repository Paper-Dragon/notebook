


# Ssh设置反向代理

# 使用SSH -R将私有服务器上网

> SSH -R是一种SSH远程端口转发技术，它可以将本地端口转发到远程服务器上，从而实现远程访问本地服务的功能。具体来说，SSH  -R会在远程服务器上启动一个监听指定端口的进程，并将所有传入的连接转发到本地主机的指定端口。这样，您就可以在远程服务器上访问本地主机上运行的服务，而无需将服务直接暴露在公共网络中。

## 什么是ssh -R

SSH -R是一种远程端口转发技术，它可以将本地端口转发到远程服务器上，从而实现远程访问本地服务的功能。

## 目标

在本文中，我们将使用SSH -R来更新私有服务器的hosts文件，并让mirrors.aliyun.com可用。

## 步骤

### 登录到私有服务器

首先，我们需要登录到私有服务器。假设私有服务器的IP地址为192.168.0.10，我们可以使用以下命令登录：
```bash
ssh username@192.168.0.10
```

其中，username是您在私有服务器上的用户名。

### 更新hosts文件

一旦我们登录到了私有服务器，我们就可以更新hosts文件了。在本例中，我们要将mirrors.aliyun.com映射到127.0.0.1。为此，请打开/etc/hosts文件，并添加以下行：

```bash
127.0.0.1 mirrors.aliyun.com
```

### 启动SSH -R

现在，我们需要启动SSH -R来将本地端口转发到远程服务器上。假设您要将本地端口8080转发到私有服务器上，请使用以下命令：
```bash
ssh -R 80:localhost:80 username@192.168.0.10
# ssh -R [mirrors.aliyun.com的i]80:localhost:80 username@192.168.0.10
```

这将在私有服务器上启动一个监听8080端口的进程，并将所有传入的连接转发到本地主机的8080端口。

### 测试连接

现在，我们可以测试连接是否正常工作。为此，请在本地主机上打开浏览器，并访问http://mirrors.aliyun.com:80。

如果一切正常，您应该能够看到阿里云镜像站的网页。

## 结论

SSH -R是一种非常有用的远程端口转发技术，它可以让您在远程服务器上访问本地服务。在本文中，我们使用SSH -R来更新私有服务器的hosts文件，并让mirrors.aliyun.com可用。如果您需要使用类似的技术来访问其他本地服务，请参考SSH -R文档以获取更多信息。