<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <!-- 添加百度搜索验证代码 -->
    <meta name="baidu-site-verification" content="codeva-udZGoBkoXj" />
    <!-- end 添加百度搜索验证代码 -->
    
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://www.geekery.cn/note-book/Tomcat/Tomcat%E6%9E%84%E5%BB%BA%E4%BC%81%E4%B8%9A%E7%BA%A7%E9%AB%98%E8%B4%9F%E8%BD%BD%E6%9C%8D%E5%8A%A1%E5%99%A8.html"><meta property="og:site_name" content="运维开发绿皮书"><meta property="og:title" content="Tomcat构建企业级高负载服务器"><meta property="og:description" content="Tomcat构建企业级高负载服务器 前言 什么是JAVA虚拟机 JAVA 如何做到跨平台 img Tomcat部署 官网地址 部署 一、Tomcat Http Server 环境 部署JAVA环境 提示 建议卸载默认安装openjdk软件 ①解压安装包 tar xf jdk-8u151-linux-x64.tar.gz -C /usr/local ②多..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-03-19T08:51:09.000Z"><meta property="article:modified_time" content="2024-03-19T08:51:09.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Tomcat构建企业级高负载服务器","image":[""],"dateModified":"2024-03-19T08:51:09.000Z","author":[{"@type":"Person","name":"PaperDragon","url":"https://github.com/Paper-Dragon","email":"2678885646@qq.com"}]}</script><script>
      /*禁用F12*/
      document.onkeydown = function(){
          if(window.event.keyCode==123) {
              var x;
              var r=confirm('大佬，别扒了！不妨加个友链？\n点击确认键跳转到友链！\n\n执意要做？亦或是双击F12可调出控制台\n');
              if (r==true){
                //x="你按下的是\"确定\"按钮。";
                window.location.replace("/about/friend.html");
              }
              else{
                x="你按下的是\"取消\"按钮。";
              }
              // document.write(x)
              event.preventDefault(); // 阻止默认事件行为
              event.keyCode=0;
              event.returnValue=false;
          }
      }
      </script><link rel="alternate" type="application/rss+xml" href="https://www.geekery.cn/rss.xml" title="运维开发绿皮书 RSS Feed"><title>Tomcat构建企业级高负载服务器 | 运维开发绿皮书</title><meta name="description" content="Tomcat构建企业级高负载服务器 前言 什么是JAVA虚拟机 JAVA 如何做到跨平台 img Tomcat部署 官网地址 部署 一、Tomcat Http Server 环境 部署JAVA环境 提示 建议卸载默认安装openjdk软件 ①解压安装包 tar xf jdk-8u151-linux-x64.tar.gz -C /usr/local ②多...">
    <link rel="preload" href="/assets/style-D-9z2Qoc.css" as="style"><link rel="stylesheet" href="/assets/style-D-9z2Qoc.css">
    <link rel="modulepreload" href="/assets/app-sjg7Zuk6.js"><link rel="modulepreload" href="/assets/Tomcat构建企业级高负载服务器.html-CQfM7nS6.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="带我回家"><img class="vp-nav-logo" src="/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">运维开发绿皮书</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="主页" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="line-md:home-twotone" height="1em" sizing="height"></iconify-icon><!--]-->主页<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link route-link-active auto-link" href="/note-book/" aria-label="使用指南" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="openmoji:light-bulb" height="1em" sizing="height"></iconify-icon><!--]-->使用指南<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="小项目"><!--[--><iconify-icon class="vp-icon" icon="solar:box-line-duotone" height="1em" sizing="height"></iconify-icon>小项目<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/cloudflare-warp.html" aria-label="Cloudflare Warp 团队服务" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="simple-icons:cloudflare" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->Cloudflare Warp 团队服务<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/code-diff.html" aria-label="代码差异对比" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="icon-park-twotone:difference-set" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->代码差异对比<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/cron.html" aria-label="Cron在线表达式生成器" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="eos-icons:cronjob" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->Cron在线表达式生成器<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/docker-hub-mirror.html" aria-label="DockerHub镜像加速" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="grommet-icons:docker" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->DockerHub镜像加速<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/github-direct.html" aria-label="GitHub加速下载" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="mdi:github" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->GitHub加速下载<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/mobaxterm-crack.html" aria-label="Mobaxterm破解" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="gg:terminal" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->Mobaxterm破解<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/nvidia-mirror.html" aria-label="Nvidia镜像站" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="bi:nvidia" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->Nvidia镜像站<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/radeon-mirror.html" aria-label="Radeon镜像站" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="bi:amd" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->Radeon镜像站<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/random-password.html" aria-label="密码生成器" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="ph:password" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->密码生成器<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/SSLGenerate.html" aria-label="SSL 证书生成" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="ph:certificate-duotone" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->SSL 证书生成<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/text-reverse.html" aria-label="文本字符串倒序" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="system-uicons:reverse-alt" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->文本字符串倒序<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/tools.html" aria-label="小工具" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="material-symbols-light:tools-ladder" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->小工具<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/timeline/" aria-label="时间线" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="ic:twotone-view-timeline" height="1em" sizing="height"></iconify-icon><!--]-->时间线<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/about/friend.html" aria-label="友链" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="fa-solid:user-friends" height="1em" sizing="height"></iconify-icon><!--]-->友链<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="博客联盟"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:comment-nodes" height="1em" sizing="height"></iconify-icon>博客联盟<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://www.travellings.cn/go.html" aria-label="开往" rel="noopener noreferrer" target="_blank" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="fa:subway" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->开往<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="auto-link external-link" href="https://cloudflare-cloudnative-pages.geekery.cn/" aria-label="内容分发网络部署状态" rel="noopener noreferrer" target="_blank" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:hexagon-nodes-bolt" height="1em" sizing="height"></iconify-icon><!--]-->内容分发<!----></a></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/Paper-Dragon/notebook" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索文档"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/" aria-label="主页" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="line-md:home-twotone" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->主页<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><iconify-icon class="vp-icon" icon="ic:twotone-book" width="1em" height="1em" sizing="both"></iconify-icon><a class="route-link route-link-active auto-link vp-sidebar-title no-external-link-icon" href="/note-book/" aria-label="note-book" iconsizing="both"><!---->note-book<!----></a><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">AI Training</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Anaconda</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Android</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Baidu Net Disk</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Btrfs</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Core DNS</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">CVE</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Database System</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Distributed System</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">DNS</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Docker</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Ebook</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ELK</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Esxi</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Fossology</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Frp</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Git</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Gitlab</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Goaccess</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">GRUB</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">HA LVS Keepalived</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Harbor</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Iptables</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Jenkins</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Kafka</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Kubernetes</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Linux From Scratch</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Linux Opera System</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Linux三剑客</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Memcache Redis</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Midjourney</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Min IO</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Misc</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Nginx Open Resty</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Nodejs</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Opera Systems</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Photo Shop</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Physical Server</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Portainer</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Prometheus</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Rabbit MQ</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Rancher</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Research Develop</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Router OS</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Security</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Ssh</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">SSL</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Tomcat</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/note-book/Tomcat/Tomcat%E6%9E%84%E5%BB%BA%E4%BC%81%E4%B8%9A%E7%BA%A7%E9%AB%98%E8%B4%9F%E8%BD%BD%E6%9C%8D%E5%8A%A1%E5%99%A8.html" aria-label="Tomcat构建企业级高负载服务器" iconsizing="both"><!---->Tomcat构建企业级高负载服务器<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Traefik</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Vim</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Virtual Private Network</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">VMware</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Windows</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">WSL</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Zabbix</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">交换机</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">币圈的那些事</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">洋垃圾主机</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">生活</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="ic:twotone-book" width="1em" height="1em" sizing="both"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/PyQt5%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B-%E7%8E%8B%E9%93%AD%E4%B8%9C/" aria-label="PyQt5快速上手-王铭东" iconsizing="both"><!---->PyQt5快速上手-王铭东<!----></a><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Tomcat构建企业级高负载服务器</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/Paper-Dragon" target="_blank" rel="noopener noreferrer">PaperDragon</a></span><span property="author" content="PaperDragon"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2023年8月13日</span><meta property="datePublished" content="2023-08-13T15:08:38.000Z"></span><span class="page-pageview-info" aria-label="访问量🔢" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon" name="eye"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="vp-pageview waline-pageview-count" data-path="/note-book/Tomcat/Tomcat%E6%9E%84%E5%BB%BA%E4%BC%81%E4%B8%9A%E7%BA%A7%E9%AB%98%E8%B4%9F%E8%BD%BD%E6%9C%8D%E5%8A%A1%E5%99%A8.html" data-page-key="/note-book/Tomcat/Tomcat%E6%9E%84%E5%BB%BA%E4%BC%81%E4%B8%9A%E7%BA%A7%E9%AB%98%E8%B4%9F%E8%BD%BD%E6%9C%8D%E5%8A%A1%E5%99%A8.html">...</span></span><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 12 分钟</span><meta property="timeRequired" content="PT12M"></span><!----><!----></div><hr></div><!----><!----><div class="theme-hope-content" vp-content><h1 id="tomcat构建企业级高负载服务器" tabindex="-1"><a class="header-anchor" href="#tomcat构建企业级高负载服务器"><span>Tomcat构建企业级高负载服务器</span></a></h1><h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言"><span>前言</span></a></h2><h3 id="什么是java虚拟机" tabindex="-1"><a class="header-anchor" href="#什么是java虚拟机"><span>什么是JAVA虚拟机</span></a></h3><pre><code>所谓虚拟机，就是一台虚拟的计算机。他是一款软件，用来执行一系列虚拟计算机指令。大体上，虚拟机可以分为系统虚拟机和程序虚拟机。大名鼎鼎的VisualBox、VMware就属于系统虚拟机。他们完全是对物理计算机的仿真。提供了一个可以运行完整操作系统的软件平台。
程序虚拟机的典型代表就是Java虚拟机，它专门为执行单个计算机程序而设计，在Java虚拟机中执行的指令我们称为Java字节码指令。无论是系统虚拟机还是程序虚拟机，在上面运行的软件都呗限制于虚拟机提供的资源中。
</code></pre><h3 id="java-如何做到跨平台" tabindex="-1"><a class="header-anchor" href="#java-如何做到跨平台"><span>JAVA 如何做到跨平台</span></a></h3><pre><code>同一个JAVA程序(JAVA字节码的集合)，通过JAVA虚拟机(JVM)运行于各大主流操作系统平台比如Windows、CentOS、Ubuntu等。程序以虚拟机为中介，来实现跨平台。
</code></pre><p><img src="/assets/1-n95HUpAx.png" alt="img"></p><h2 id="tomcat部署" tabindex="-1"><a class="header-anchor" href="#tomcat部署"><span>Tomcat部署</span></a></h2><p>官网地址</p><pre><code>tomcat下载地址
http://tomcat.apache.org/

JDK下载地址
http://www.oracle.com/technetwork/java/javase/downloads/index.html
</code></pre><h3 id="部署" tabindex="-1"><a class="header-anchor" href="#部署"><span>部署</span></a></h3><h4 id="一、tomcat-http-server" tabindex="-1"><a class="header-anchor" href="#一、tomcat-http-server"><span>一、Tomcat Http Server</span></a></h4><p>环境</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>5到8G内存</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol><li>部署JAVA环境</li></ol><p>提示 建议卸载默认安装openjdk软件 ①解压安装包</p><p>tar xf jdk-8u151-linux-x64.tar.gz -C /usr/local ②多版本部署java</p><p>ln -s /usr/local/jdk1.8.0_151/ /usr/local/java</p><p>3配置环境变量</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/profile</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">		JAVA_HOME</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/usr/local/java</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">		PATH</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$JAVA_HOME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/bin:</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$PATH</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">		export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> JAVA_HOME</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> PATH</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/profile</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">env</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> JAVA</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">		JAVA_HOME</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/usr/local/java</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这里插入图片描述 4测试java</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -version</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> version</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;1.8.0_151&quot;Java</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">TM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">SE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Runtime</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Environment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (build </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">1.8.0_151-b12</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)Java HotSpot(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">TM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) 64-Bit Server VM (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">build</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 25.151-b12,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mixed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>安装Tomcat:</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> xf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apache-tomcat-7.0.42.tar.gz</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -C</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/local/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ln</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/local/apache-tomcat-7.0.42/</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/local/tomcat</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>定义Tomcat所需环境变量: vim /etc/profile</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CATALINA_HOME</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/usr/local/tomcat</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //Tomcat安装目录</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> CATALINA_HOME</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/profile</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这里插入图片描述 3.启动Tomcat</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">启动tomcat</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#bash /usr/local/tomcat/bin/startup.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">检查端口</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># netstat -tnlp |grep java</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@tomcat ~]# netstat -tlunp | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp6</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> :::8080</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                 :::</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                    LISTEN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      10180/java</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp6</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8005</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">          :::</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                    LISTEN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      10180/java</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">关于tomcat端口：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">8005</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">是tomcat本身的端口</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">8080</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tomcat负责建立HTTP连接。在通过浏览器访问Tomcat服务器的Web应用时，使用的就是这个连接器。　</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">8009</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tomcat负责和其他的HTTP服务器建立连接。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">如nginx和apache互通时使用</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>访问 http://192.168.0.104:8080/ 注意服务器地址，注意端口 浏览器访问tomcat主页。注意关闭防火墙 关闭tomcat（切记，否则你会遇见500）</p><pre><code>#bash  /usr/local/tomcat/bin/shutdown.sh
</code></pre><p>在这里插入图片描述在这里插入图片描述 4.关于tomcat</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@web ~]# cd /usr/local/tomcat/</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@web tomcat]# tree -L 1</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bin</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">              #存放tomcat管理脚本</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> conf</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">             # tomcat 配置文件存放目录</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lib</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">              # web应用调用的jar包存放路径</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LICENSE</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> logs</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # tomcat 日志存放目录，catalina.out 为主要输出日志</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> NOTICE</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> RELEASE-NOTES</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> RUNNING.txt</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> temp</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">             # 存放临时文件</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> webapps</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">         # web程序存放目录</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">└──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> work</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">             # 存放编译产生的.java 与 .class文件</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@web03 tomcat]# cd webapps/</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@web03 webapps]# tree -L 1</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docs</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            # tomcat 帮助文档</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> examples</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">       # web应用示例</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> host-manager</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 主机管理</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> manager</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">         # 管理</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">└──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ROOT</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">             # 默认站点根目录</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">默认网站的主目录（主页）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ls</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/local/tomcat/webapps/ROOT</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@web03 conf]# tree -L 1</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Catalina</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> catalina.policy</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> catalina.properties</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> context.xml</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> logging.properties</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> logs</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> server.xml</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">           # tomcat 主配置文件</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> server.xml.bak</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> server.xml.bak2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tomcat-users.xml</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # tomcat 管理用户配置文件</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tomcat-users.xsd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">└──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> web.xml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="二、安装mysql" tabindex="-1"><a class="header-anchor" href="#二、安装mysql"><span>二、安装MySQL</span></a></h4><p>1.创建数据库：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">创建jspgou数据库，字符集为utf-8</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mariadb-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mariadb</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">该步骤出错。请您检查YUM源配置</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> start</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mariadb</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost ~]# mysqladmin -u root password 123</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	注意如果有密码</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	mysqladmin</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p老密码</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> password</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 新密码</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost ~]# mysql -u root -p123</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">MariaDB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [(none)]&gt; create database jspgou character set = utf8;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="三、部署jspgou-电子商城" tabindex="-1"><a class="header-anchor" href="#三、部署jspgou-电子商城"><span>三、部署jspgou（电子商城）</span></a></h4><p>1.解压源码包 unzip jspgouV6-ROOT.zip在这里插入图片描述 2.更改数据库链接：</p><p>提示：在解压缩后的文件中，修改连接数据库的信息</p><pre><code>[root@localhost ~]# vim ROOT/WEB-INF/config/jdbc.properties
jdbc.url=jdbc:mysql://127.0.0.1:3306/jspgou?characterEncoding=UTF-8
jdbc.username=root
jdbc.password=123
</code></pre><p>3.导入数据：</p><p>[root@localhost ~]# mysql -u root -p123 -D jspgou &lt; DB/jspgou.sql</p><pre><code>使用MYSQL数据库时，会发生的错误
使用mysql作为数据库时，如果导入数据失败
1.修改mysql配置文件
my.cnf中max_allowed_packet参数为64m，默认为1m
2.DB/jspgou.sql里面的默认值改一下
把所有datetime类型的字段默认值改成CURRENT_TIMESTAMP
将程序解压后的ROOT文件夹,拷贝到tomcat安装目录下的webapps文件夹下
[root@localhost ~]# \cp -r ROOT /usr/local/tomcat/webapps/
不使用cp 的别名。 alias cp=‘cp -i’
</code></pre><p>4.部署网站：</p><pre><code>启动tomcat
#bash /usr/local/tomcat/bin/startup.sh
输入以下地址
http://192.168.75.226:8080/jeeadmin/jspgou/index.do
注意服务器地址
用户名：admin
密 码：123456
点击上图右上角浏览器图标访问网站首页
</code></pre><h2 id="tomcat多实例" tabindex="-1"><a class="header-anchor" href="#tomcat多实例"><span>Tomcat多实例</span></a></h2><p>关闭主站</p><pre><code>bash /usr/local/tomcat/bin/shutdown.sh
</code></pre><p>准备多实例主目录</p><pre><code>mkdir /usr/local/tomcat/instance{1…3} 
</code></pre><p>制作实例工作目录</p><pre><code>cp -r /usr/local/tomcat/{conf,logs,temp,work} /usr/local/tomcat/instance1/
# cp -r /usr/local/tomcat/{conf,logs,temp,work} /usr/local/tomcat/instance2/
# cp -r /usr/local/tomcat/{conf,logs,temp,work} /usr/local/tomcat/instance3/
查看目录结构
[root@www ~]# tree -d -L 2 /usr/local/tomcat/
[root@tomcat tomcat]#  tree -d -L 2 /usr/local/tomcat/
/usr/local/tomcat/
├── bin
├── conf
│   └── Catalina
├── instance1
│   ├── conf
│   ├── logs
│   ├── temp
│   └── work
├── instance2
│   ├── conf
│   ├── logs
│   ├── temp
│   └── work
├── instance3
│   ├── conf
│   ├── logs
│   ├── temp
│   └── work
├── lib
├── logs
├── temp
├── webapps
│   ├── docs
│   ├── examples
│   ├── host-manager
│   ├── manager
│   └── ROOT
└── work
    └── Catalina

29 directories
</code></pre><p>修改端口 将web配置文件拷贝三份。分别修改为不同端口</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/local/tomcat/instance1/conf/server.xml</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">服务端口</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8080</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 替换成</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8081</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">修改前</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Connector</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> port=&quot;8080&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> protocol=&quot;HTTP/1.1&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">               connectionTimeout</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;20000&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">               redirectPort</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;8443&quot;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> /</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">修改后</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Connector</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> port=&quot;8081&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> protocol=&quot;HTTP/1.1&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">               connectionTimeout</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;20000&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">               redirectPort</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;8443&quot;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> /</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">程序工作端口：8005替换成</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8091</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">修改前</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;Server </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">port</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;8005&quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> shutdown</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;SHUTDOWN&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">修改后</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;Server </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">port</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;8091&quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> shutdown</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;SHUTDOWN&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">网站目录：webapps</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 替换成</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 另一个目录</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Host</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> name=&quot;localhost&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  appBase=&quot;webapps&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">修改后</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Host</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> name=&quot;localhost&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  appBase=&quot;/webapps&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">其他两个也相应不同修改在这里插入图片描述</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@tomcat tomcat]# vim /usr/local/tomcat/instance1/conf/server.xml</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@tomcat tomcat]# cp instance1/conf/server.xml instance2/conf/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cp:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> overwrite</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ‘instance2/conf/server.xml’?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> y</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@tomcat tomcat]# cp instance1/conf/server.xml instance3/conf/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cp:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> overwrite</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ‘instance3/conf/server.xml’?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> y</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@tomcat tomcat]#</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>启动脚本 vim /usr/local/tomcat/instance1/ins1.sh</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#!/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#instance1</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/init.d/functions</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> CATALINA_BASE</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/usr/local/tomcat/instance1&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">case</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">$1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> in</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#E06C75;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        $CATALINA_HOME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/bin/startup.sh</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        ;;</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#E06C75;">stop</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        $CATALINA_HOME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/bin/shutdown.sh</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        ;;</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#E06C75;">restart</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        $CATALINA_HOME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/bin/shutdown.sh</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        sleep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        $CATALINA_HOME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/bin/startup.sh</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        ;;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">esac</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> JAVA_OPTS</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;-Xms64m -Xmx128m&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>vim /usr/local/tomcat/instance2/ins2.sh</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#!/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#instance2              #####</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/init.d/functions</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> CATALINA_BASE</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/usr/local/tomcat/instance2&quot;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    #####</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">case</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">$1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> in</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#E06C75;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        $CATALINA_HOME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/bin/startup.sh</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        ;;</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#E06C75;">stop</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        $CATALINA_HOME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/bin/shutdown.sh</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        ;;</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#E06C75;">restart</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        $CATALINA_HOME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/bin/shutdown.sh</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        sleep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        $CATALINA_HOME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/bin/startup.sh</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        ;;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">esac</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>vim /usr/local/tomcat/instance3/ins3.sh</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#!/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#instance3</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/init.d/functions</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> CATALINA_BASE</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/usr/local/tomcat/instance3&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">case</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">$1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> in</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#E06C75;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        $CATALINA_HOME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/bin/startup.sh</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        ;;</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#E06C75;">stop</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        $CATALINA_HOME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/bin/shutdown.sh</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        ;;</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#E06C75;">restart</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        $CATALINA_HOME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/bin/shutdown.sh</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        sleep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        $CATALINA_HOME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/bin/startup.sh</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        ;;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">esac</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> JAVA_OPTS</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;-Xms64m -Xmx128m&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>赋权</p><pre><code>chmod +x /usr/local/tomcat/instance1/ins1.sh
 chmod +x /usr/local/tomcat/instance2/ins2.sh
chmod +x /usr/local/tomcat/instance3/ins3.sh
</code></pre><p>网站源码</p><pre><code>mkdir /webapps
cp -r /usr/local/tomcat/webapps/ROOT/ /webapps/
</code></pre><p>启动</p><pre><code>/usr/local/tomcat/instance1/ins1.sh start
 /usr/local/tomcat/instance2/ins2.sh start
 /usr/local/tomcat/instance3/ins3.sh start
等5秒
</code></pre><p>测试</p><pre><code>netstat -antp | grep 8081
在这里插入图片描述
</code></pre><p>浏览</p><pre><code>http://192.168.75.226:8081
http://192.168.75.226:8082
http://192.168.75.226:8083
</code></pre><h2 id="jvm常用分析工具" tabindex="-1"><a class="header-anchor" href="#jvm常用分析工具"><span>JVM常用分析工具</span></a></h2><p><img src="/assets/image-20211110215222063-Dti_Neoa.png" alt="image-20211110215222063"></p><p>命令行工具</p><h3 id="jps" tabindex="-1"><a class="header-anchor" href="#jps"><span>jps</span></a></h3><p>Java虚拟机进程状态工具</p><pre><code>jps [options] [hostid]
  -q 显示进程ID
  -m 显示进程ID、主类名、传入主方法的参数
  -l 显示进程ID、全类名
  -v 显示进程ID、主类名、虚拟机参数
  -V 显示进程ID、主类名【默认】
</code></pre><h3 id="jstat" tabindex="-1"><a class="header-anchor" href="#jstat"><span>jstat</span></a></h3><p>Java虚拟机统计监控工具</p><pre><code>jstat [ generalOption | outputOptions vmid [ interval [ s|ms ] [ count ] ] ]
  -generalOption通用信息，可传入-help(显示帮助信息) -version(显示版本信息[测试过，无效]) -options(显示可用的统计选项)
      -outputOptions一个或者多个输出选项，常用的如
      -class 类加载的统计信息
      -complier 即时编译器统计信息
  -gc 垃圾收集器统计
  -vmid 本地虚拟机进程的话，则为对应进程ID(可通过jps查进程ID)。另外，也可以查看远程虚拟机进程
  -interval 统计的时间间隔，默认为微秒
  -count 总共统计次数
</code></pre><p>案例</p><p>~ jstat -class 1251</p><pre><code>➜  ~ jstat -class 1251
加载的类 加载类的总大小   卸载的类     卸载类的总大小		 类加载和卸载总花费时间
Loaded  Bytes  				Unloaded  	Bytes     			Time   
  4426  8085.9      	182   			214.5       		5.79
</code></pre><p>~ jstat -gc 1251</p><pre><code>➜  ~ jstat -gc 1251
 S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   
 0.0    0.0    0.0    0.0   11264.0   2048.0   16384.0     7254.0   27440.0 26286.1 3200.0 2789.7      7    0.072  13      0.360    0.433

 各列含义：
|SOC    | 幸存区0大小(KB)|
|S1C    | 幸存区1大小(KB)|
|S0U    | 幸存区0使用大小(KB)|
|S1U    | 幸存区1使用大小(KB)|
|EC     | eden区空间大小(KB)|
|EU     | eden区空间使用大小(KB)|
|OC     | 老年代大小(KB)|
|OU     | 老年代使用大小(KB)|
|MC     | 元空间大小(KB)-1.8版本之后，用于存放方法区数据|
|MU     | 元空间使用大小(KB)|
|CCSC   | 压缩类空间大小(KB)|
|CCSU   | 压缩类空间使用大小(KB)|
|PC     | 永久区大小(KB)|
|PU     | 永久区使用大小(KB)|
|YGC    | 发生young GC次数|
|YGCT   | young GC所使用时间|
|FGC    | 发生full GC次数|
|FGCT   | full GC所使用时间|
|GCT    | 总共垃圾回收时间|
</code></pre><p>~ jstat -gcutil 1251</p><pre><code>➜  ~ jstat -gcutil 1251
  S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT     GCT   
  0.00   0.00  27.27  44.27  95.79  87.18      7    0.072    13    0.360    0.433

 各列含义：
|S0     | 幸存区0使用百分比|
|S1     | 幸存区1使用百分比|
|E      | eden区使用百分比|
|O      | 老年代使用百分比|
|M      | 元空间使用百分比|
|CCS    | 压缩类空间使用百分比|
|YGC    | 发生young GC次数|
|YGCT   | young GC所使用时间|
|FGC    | 发生full GC次数|
|FGCT   | full GC所使用时间|
|GCT    | 总共垃圾回收时间|
</code></pre><h3 id="jinfo" tabindex="-1"><a class="header-anchor" href="#jinfo"><span>jinfo</span></a></h3><p>打印配置信息【重点其实是可以动态设置虚拟机参数】</p><pre><code>jinfo [ option ] pid
  -flags 可以动态的设置或者取消或者变更JVM参数
  默认输出系统属性、JVM信息(官方目前推荐用jcmd替代jinfo，以减少影响当前进程性能)
</code></pre><p>案例</p><p>jinfo 6564(这个命令jdk1.8报各种错，暂未解决)</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">➜</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ~</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> jinfo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6564</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Java</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> System</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Properties:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#Mon Mar 23 23:47:56 CST 2020</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">gopherProxySet</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">false</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">socksProxyHost</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">127.0.0.1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">awt.toolkit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=sun.lwawt.macosx.LWCToolkit</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">http.proxyHost</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=127.0.0.1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.specification.version</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=11</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sun.cpu.isalist</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sun.jnu.encoding</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=UTF-8</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.class.path</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=/Users/laicreasy/github/peach/classical/target/test-classes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:/Users/laicreasy/github/peach/classical/target/classes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:/Users/laicreasy/.m2/repository/junit/junit/4.13/junit-4.13.jar</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:/Users/laicreasy/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:/Users/laicreasy/.m2/repository/org/apache/logging/log4j/log4j-api/2.13.1/log4j-api-2.13.1.jar</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:/Users/laicreasy/.m2/repository/org/apache/logging/log4j/log4j-core/2.13.1/log4j-core-2.13.1.jar</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">https.proxyPort</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=8001</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.vm.vendor</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=Oracle</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Corporation</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sun.arch.data.model</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=64</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.vendor.url</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=http</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">://java.oracle.com/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">user.timezone</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.vm.specification.version</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=11</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">os.name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=Mac</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> OS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> X</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sun.java.launcher</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=SUN_STANDARD</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">user.country</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=CN</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sun.boot.library.path</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=/Library/Java/JavaVirtualMachines/jdk-11.0.5.jdk/Contents/Home/lib</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sun.java.command</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=com.creasy.Concurrency</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">jdk.debug</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=release</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sun.cpu.endian</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=little</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">user.home</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=/Users/laicreasy</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">user.language</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=en</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.specification.vendor</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=Oracle</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Corporation</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.version.date</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=2019-10-15</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.home</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=/Library/Java/JavaVirtualMachines/jdk-11.0.5.jdk/Contents/Home</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">file.separator</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">https.proxyHost</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=127.0.0.1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.vm.compressedOopsMode</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=Zero</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> based</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">line.separator</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">n</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.specification.name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=Java</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Platform</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> API</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Specification</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.vm.specification.vendor</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=Oracle</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Corporation</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.awt.graphicsenv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=sun.awt.CGraphicsEnvironment</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sun.management.compiler</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=HotSpot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 64-Bit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Tiered</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Compilers</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.runtime.version</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=11.0.5+10-LTS</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">user.name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=laicreasy</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">path.separator</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">os.version</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=10.15.2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.runtime.name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=Java</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">TM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) SE Runtime Environment</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">file.encoding</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=UTF-8</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.vm.name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=Java</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> HotSpot</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">TM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">64-Bit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> VM</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.vendor.version</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=18.9</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.vendor.url.bug</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=http</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">://bugreport.java.com/bugreport/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.io.tmpdir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=/var/folders/w9/1vphl83x0rz54l_x9p118n5w0000gn/T/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.version</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=11.0.5</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">user.dir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=/Users/laicreasy/github/peach/classical</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">os.arch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=x86_64</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">socksProxyPort</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">1081</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.vm.specification.name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=Java</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Virtual</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Machine</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Specification</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.awt.printerjob</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=sun.lwawt.macosx.CPrinterJob</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sun.os.patch.level</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=unknown</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.library.path</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=/Users/laicreasy/Library/Java/Extensions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:/Library/Java/Extensions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:/Network/Library/Java/Extensions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:/System/Library/Java/Extensions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:/usr/lib/java</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">:.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.vendor</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=Oracle</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Corporation</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.vm.info</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=mixed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mode</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.vm.version</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=11.0.5+10-LTS</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sun.io.unicode.encoding</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=UnicodeBig</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.class.version</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=55.0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">http.proxyPort</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=8001</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">VM</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Flags:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-XX:CICompilerCount</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=3</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:ConcGCThreads=1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:G1ConcRefinementThreads=4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:G1HeapRegionSize=1048576</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:GCDrainStackTargetSize=64</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:InitialHeapSize=134217728</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:MarkStackSize=4194304</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:MaxHeapSize=2147483648</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:MaxNewSize=1287651328</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:MinHeapDeltaBytes=1048576</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:NonNMethodCodeHeapSize=5830732</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:NonProfiledCodeHeapSize=122913754</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:ProfiledCodeHeapSize=122913754</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:ReservedCodeCacheSize=251658240</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:+SegmentedCodeCache</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:+UseCompressedClassPointers</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:+UseCompressedOops</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:+UseFastUnorderedTimeStamps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:+UseG1GC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">VM</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Arguments:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">jvm_args:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -javaagent:/Applications/IntelliJ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IDEA.app/Contents/lib/idea_rt.jar=49825:/Applications/IntelliJ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IDEA.app/Contents/bin</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -Dfile.encoding=UTF-8</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java_command:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> com.creasy.Concurrency</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java_class_path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (initial): /Users/laicreasy/github/peach/classical/target/test-classes:/Users/laicreasy/github/peach/classical/target/classes:/Users/laicreasy/.m2/repository/junit/junit/4.13/junit-4.13.jar:/Users/laicreasy/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/Users/laicreasy/.m2/repository/org/apache/logging/log4j/log4j-api/2.13.1/log4j-api-2.13.1.jar:/Users/laicreasy/.m2/repository/org/apache/logging/log4j/log4j-core/2.13.1/log4j-core-2.13.1.jar</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Launcher</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Type:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SUN_STANDARD</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="jmap" tabindex="-1"><a class="header-anchor" href="#jmap"><span>jmap</span></a></h3><p>查看堆内存信息，可以生成dump文件</p><pre><code>jmap [ option ] pid
常用如
	jmap -heap pid显示堆配置和使用情况
	jmap -clstats &lt;pid&gt;显示类加载器信息
    jmap -finalizerinfo &lt;pid&gt;打印等会finalization的对象信息
    jmap -histo[:live] &lt;pid&gt;堆中对象的统计，如果加上了[:live]，那么只统计当前存活的对象
    jmap -dump:&lt;dump-options&gt; &lt;pid&gt;生成堆转储快照
	    dump-options:
  	    -live        只包括当前存活的对象
    	-format=b     二进制格式
      	-file=&lt;file&gt;  保存的文件名
</code></pre><p>案例</p><p>~ jhsdb jmap --heap --pid 7157(jdk11下，jmap -heap pid无效)</p><pre><code>➜  ~ jhsdb jmap --heap --pid 7157
Attaching to process ID 7157, please wait...
Debugger attached successfully.
Server compiler detected.
JVM version is 11.0.5+10-LTS

using thread-local object allocation.
Garbage-First (G1) GC with 4 thread(s)

Heap Configuration:
   MinHeapFreeRatio         = 40
   MaxHeapFreeRatio         = 70
   MaxHeapSize              = 2147483648 (2048.0MB)
   NewSize                  = 1363144 (1.2999954223632812MB)
   MaxNewSize               = 1287651328 (1228.0MB)
   OldSize                  = 5452592 (5.1999969482421875MB)
   NewRatio                 = 2
   SurvivorRatio            = 8
   MetaspaceSize            = 21807104 (20.796875MB)
   CompressedClassSpaceSize = 1073741824 (1024.0MB)
   MaxMetaspaceSize         = 17592186044415 MB
   G1HeapRegionSize         = 1048576 (1.0MB)

Heap Usage:
G1 Heap:
   regions  = 2048
   capacity = 2147483648 (2048.0MB)
   used     = 3145728 (3.0MB)
   free     = 2144337920 (2045.0MB)
   0.146484375% used
G1 Young Generation:
Eden Space:
   regions  = 4
   capacity = 15728640 (15.0MB)
   used     = 4194304 (4.0MB)
   free     = 11534336 (11.0MB)
   26.666666666666668% used
Survivor Space:
   regions  = 0
   capacity = 0 (0.0MB)
   used     = 0 (0.0MB)
   free     = 0 (0.0MB)
   0.0% used
G1 Old Generation:
   regions  = 0
   capacity = 118489088 (113.0MB)
   used     = 0 (0.0MB)
   free     = 118489088 (113.0MB)
   0.0% used
</code></pre><p>~ jmap -histo:live 7588</p><pre><code>➜  ~ jmap -histo:live 7588

 num     #instances         #bytes  class name (module)
-------------------------------------------------------

   1:          7610         607736  [B (java.base@11.0.5)
   2:          7069         169656  java.lang.String (java.base@11.0.5)
   3:          1201         146592  java.lang.Class (java.base@11.0.5)
   4:          3640         116480  java.util.HashMap$Node (java.base@11.0.5)
   5:          1166          98920  [Ljava.lang.Object; (java.base@11.0.5)
   6:           379          53792  [Ljava.util.HashMap$Node; (java.base@11.0.5)
   7:            12          50104  [C (java.base@11.0.5)
   8:           332          41120  [I (java.base@11.0.5)
   9:          1232          39424  java.util.concurrent.ConcurrentHashMap$Node (java.base@11.0.5)
  10:           645          25800  java.util.LinkedHashMap$Entry (java.base@11.0.5)
  11:           392          18816  java.util.HashMap (java.base@11.0.5)
  12:            46          17440  [Ljava.util.concurrent.ConcurrentHashMap$Node; (java.base@11.0.5)
  13:           289          13792  [Ljava.lang.String; (java.base@11.0.5)
...
 511:             1             16  sun.nio.fs.NativeBuffers$1 (java.base@11.0.5)
 512:             1             16  sun.util.calendar.Gregorian (java.base@11.0.5)
 513:             1             16  sun.util.cldr.CLDRBaseLocaleDataMetaInfo (java.base@11.0.5)
 514:             1             16  sun.util.locale.InternalLocaleBuilder$CaseInsensitiveChar (java.base@11.0.5)
 515:             1             16  sun.util.locale.provider.TimeZoneNameUtility$TimeZoneNameGetter (java.base@11.0.5)
 516:             1             16  sun.util.resources.LocaleData$LocaleDataStrategy (java.base@11.0.5)
 517:             1             16  sun.util.resources.cldr.provider.CLDRLocaleDataMetaInfo (jdk.localedata@11.0.5)
Total         30567        1623664
</code></pre><p>~ jmap -dump:live,format=b,file=heap.bin 7588</p><pre><code>➜  ~ jmap -dump:live,format=b,file=heap.bin 7588 
Heap dump file created
</code></pre><h3 id="jhat" tabindex="-1"><a class="header-anchor" href="#jhat"><span>jhat</span></a></h3><p>java堆分析工具，上述dump文件可以通过这个工具进行分析。这个工具会启动一个小型http服务器，可以通过浏览器查看分析结果。JDK11已经去掉了这个工具，直接用visual vm可视化工具分析</p><p>案例</p><p>jhat heap.bin</p><pre><code>➜  ~ jhat heap.bin
Reading from heap.bin...
Dump file created Tue Mar 24 02:06:41 CST 2020
Snapshot read, resolving...
Resolving 30513 objects...
Chasing references, expect 6 dots......
Eliminating duplicate references......
Snapshot resolved.
Started HTTP server on port 7000
Server is ready.
</code></pre><p>打开浏览器，http://localhost:7000/ 即可看到分析信息</p><h3 id="jstack" tabindex="-1"><a class="header-anchor" href="#jstack"><span>jstack</span></a></h3><p>打印线程栈信息，如可用来分析死循环、死锁等</p><pre><code>jstack [ option ] pid
	-m 打印Java和C++栈信息
	-l 额外打印关于锁的信息
</code></pre><p>案例</p><p>jstack -l 7588</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">➜</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ~</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> jstack</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -l</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 7588</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2020-03-24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 02:38:42</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Full</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> thread</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dump</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Java</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> HotSpot</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">TM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">64-Bit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> VM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (11.0.5+10-LTS </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">mixed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Threads</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> class</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SMR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> info:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">_java_thread_list</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">0x00007fb213e2d690,</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> length</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">11,</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> elements</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0x00007fb215805800,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 0x00007fb21404a800,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 0x00007fb21483a000,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 0x00007fb21404f000,</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0x00007fb21501d800,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 0x00007fb214064000,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 0x00007fb215018000,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 0x00007fb2140d3000,</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0x00007fb214943000,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 0x00007fb214810000,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x00007fb214150800</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;main&quot;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #1 prio=5 os_prio=31 cpu=314.71ms elapsed=2576.00s tid=0x00007fb215805800 nid=0x2703 runnable  [0x000070000439c000]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   java.lang.Thread.State:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> RUNNABLE</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java.io.FileInputStream.readBytes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.base@11.0.5/Native</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java.io.FileInputStream.read</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.base@11.0.5/FileInputStream.java:279</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java.io.BufferedInputStream.fill</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.base@11.0.5/BufferedInputStream.java:252</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java.io.BufferedInputStream.read</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.base@11.0.5/BufferedInputStream.java:271</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> locked</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">0x00000007801261e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">8&gt; (a </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">java.io.BufferedInputStream</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> com.creasy.Concurrency.main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Concurrency.java:24</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   Locked</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ownable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> synchronizers:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> None</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;Reference Handler&quot;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #2 daemon prio=10 os_prio=31 cpu=0.36ms elapsed=2575.95s tid=0x00007fb21404a800 nid=0x3403 waiting on condition  [0x0000700004ab1000]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   java.lang.Thread.State:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> RUNNABLE</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java.lang.ref.Reference.waitForReferencePendingList</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.base@11.0.5/Native</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java.lang.ref.Reference.processPendingReferences</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.base@11.0.5/Reference.java:241</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java.lang.ref.Reference</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$ReferenceHandler</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.base@11.0.5/Reference.java:213</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   Locked</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ownable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> synchronizers:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> None</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;Finalizer&quot;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #3 daemon prio=8 os_prio=31 cpu=0.46ms elapsed=2575.95s tid=0x00007fb21483a000 nid=0x4903 in Object.wait()  [0x0000700004bb4000]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   java.lang.Thread.State:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> WAITING</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (on </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">object</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> monitor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java.lang.Object.wait</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.base@11.0.5/Native</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> waiting</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">0x00000007801218f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">8&gt; (a </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">java.lang.ref.ReferenceQueue</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$Lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java.lang.ref.ReferenceQueue.remove</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.base@11.0.5/ReferenceQueue.java:155</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> waiting</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> re-lock</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> wait</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">0x00000007801218f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">8&gt; (a </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">java.lang.ref.ReferenceQueue</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$Lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java.lang.ref.ReferenceQueue.remove</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.base@11.0.5/ReferenceQueue.java:176</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java.lang.ref.Finalizer</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$FinalizerThread</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.base@11.0.5/Finalizer.java:170</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   Locked</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ownable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> synchronizers:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> None</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;VM Thread&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> os_prio=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">31</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cpu=150.43ms</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> elapsed=2575.96s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tid=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0x00007fb214002800</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nid=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0x4d03</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> runnable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;GC Thread#0&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> os_prio=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">31</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cpu=12.00ms</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> elapsed=2575.99s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tid=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0x00007fb215005000</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nid=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0x2d03</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> runnable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;GC Thread#1&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> os_prio=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">31</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cpu=6.44ms</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> elapsed=2425.77s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tid=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0x00007fb215896000</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nid=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0x4207</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> runnable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;GC Thread#2&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> os_prio=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">31</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cpu=8.37ms</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> elapsed=2425.77s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tid=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0x00007fb214075000</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nid=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0x5f03</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> runnable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;G1 Main Marker&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> os_prio=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">31</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cpu=0.91ms</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> elapsed=2575.99s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tid=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0x00007fb214022800</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nid=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0x5203</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> runnable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;G1 Conc#0&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> os_prio=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">31</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cpu=0.04ms</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> elapsed=2575.99s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tid=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0x00007fb215005800</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nid=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0x5003</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> runnable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;G1 Refine#0&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> os_prio=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">31</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cpu=0.71ms</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> elapsed=2575.99s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tid=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0x00007fb215836800</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nid=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0x3103</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> runnable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;G1 Young RemSet Sampling&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> os_prio=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">31</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cpu=386.00ms</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> elapsed=2575.99s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tid=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0x00007fb214041800</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nid=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0x3203</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> runnable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;VM Periodic Task Thread&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> os_prio=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">31</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cpu=2000.79ms</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> elapsed=2575.55s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tid=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0x00007fb214149800</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nid=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0x5b03</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> waiting</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> on</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> condition</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">JNI</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> global</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> refs:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 18,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> weak</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> refs:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="可视化工具" tabindex="-1"><a class="header-anchor" href="#可视化工具"><span>可视化工具</span></a></h3><p>jconsole</p><p>可以监控CPU、内存、线程等情况</p><p>~jconsole</p><p><img src="/assets/2-CLd_h0Cs.png" alt="在这里插入图片描述"></p><p>reference：</p><pre><code>https://docs.oracle.com/javase/8/docs/technotes/tools/unix/jps.html
https://docs.oracle.com/javase/8/docs/technotes/tools/unix/jstat.html
https://docs.oracle.com/en/java/javase/11/troubleshoot/diagnostic-tools.html#GUID-CBC97A20-7379-4762-BA17-FB1A560D02E4
</code></pre><h2 id="jvm运维使用监控工具" tabindex="-1"><a class="header-anchor" href="#jvm运维使用监控工具"><span>JVM运维使用监控工具</span></a></h2><h3 id="visual-vm" tabindex="-1"><a class="header-anchor" href="#visual-vm"><span>Visual VM</span></a></h3><p>Visual VM是一款All-in-One的Java分析工具，堆栈信息、线程信息等都可以分析，而且还支持装插件。但jdk1.9之后默认JDK不再支持，可以通过https://visualvm.github.io/download.html这里下载</p><p>在1.8环境下执行</p><p>~ jvisualvm</p><p><img src="/assets/3-DRRQvpyx.png" alt="在这里插入图片描述"></p></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><span class="vp-meta-info" data-allow-mismatch="text">2024/3/19 08:51:09</span></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 2678885646@qq.com">PaperDragon</span>,<!--]--><!--[--><span class="vp-meta-info" title="email: 2678885646@qq.com">PaperDragon-SH</span><!--]--><!--]--></div></div></footer><!----><div id="comment" class="waline-wrapper vp-comment" vp-comment darkmode="false" style="display:block;"><!----></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">运维开发绿皮书</div><div class="vp-copyright">copyleft 2023-至今 PaperDragon</div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-sjg7Zuk6.js" defer></script>


  </body>
</html>