<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <!-- æ·»åŠ ç™¾åº¦æœç´¢éªŒè¯ä»£ç  -->
    <meta name="baidu-site-verification" content="codeva-udZGoBkoXj" />
    <!-- end æ·»åŠ ç™¾åº¦æœç´¢éªŒè¯ä»£ç  -->
    
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"LFSç¼–è¯‘ç¬”è®°ä»¥æ·±å…¥äº†è§£Linux","image":[""],"dateModified":"2025-04-19T06:16:02.000Z","author":[{"@type":"Person","name":"Paper-Dragon","url":"https://github.com/Paper-Dragon","email":"2678885646@qq.com"}]}</script><meta property="og:url" content="https://www.geekery.cn/note-book/LinuxFromScratch/LFS-NoteBook.html"><meta property="og:site_name" content="è¿ç»´å¼€å‘ç»¿çš®ä¹¦"><meta property="og:title" content="LFSç¼–è¯‘ç¬”è®°ä»¥æ·±å…¥äº†è§£Linux"><meta property="og:description" content="LFSç¼–è¯‘ç¬”è®°ä»¥æ·±å…¥äº†è§£Linux LFè§„å®šçš„åŒ… LFSå®¿ä¸»æœºä½“è´¨è¦æ±‚ å®¿ä¸»æœºä½“æ£€ Linux å¸¸ç”¨åˆ†åŒº(ç§‘æ™®) è¿˜æœ‰å…¶ä»–å‡ ä¸ªå¹¶éå¿…é¡»ï¼Œä½†åœ¨è®¾è®¡ç£ç›˜å¸ƒå±€æ—¶åº”å½“è€ƒè™‘çš„åˆ†åŒºã€‚ä¸‹é¢çš„åˆ—è¡¨å¹¶ä¸å®Œæ•´ï¼Œä½†å¯ä»¥ä½œä¸ºä¸€ä¸ªå‚è€ƒã€‚ /boot â€“ é«˜åº¦æ¨èã€‚è¿™ä¸ªåˆ†åŒºå¯ä»¥å­˜å‚¨å†…æ ¸å’Œå…¶ä»–å¼•å¯¼ä¿¡æ¯ã€‚ä¸ºäº†å‡å°‘å¤§ç£ç›˜å¯èƒ½å¼•èµ·çš„é—®é¢˜ï¼Œå»ºè®®å°† /boot åˆ†åŒºè®¾ä¸ºç¬¬ä¸€å—ç£ç›˜çš„ç¬¬ä¸€ä¸ªåˆ†åŒº..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-04-19T06:16:02.000Z"><meta property="article:modified_time" content="2025-04-19T06:16:02.000Z"><script>
      /*ç¦ç”¨F12*/
      document.onkeydown = function(){
          if(window.event.keyCode==123) {
              var x;
              var r=confirm('å¤§ä½¬ï¼Œåˆ«æ‰’äº†ï¼ä¸å¦¨åŠ ä¸ªå‹é“¾ï¼Ÿ\nç‚¹å‡»ç¡®è®¤é”®è·³è½¬åˆ°å‹é“¾ï¼\n\næ‰§æ„è¦åšï¼Ÿäº¦æˆ–æ˜¯åŒå‡»F12å¯è°ƒå‡ºæ§åˆ¶å°\n');
              if (r==true){
                //x="ä½ æŒ‰ä¸‹çš„æ˜¯\"ç¡®å®š\"æŒ‰é’®ã€‚";
                window.location.replace("/about/friend.html");
              }
              else{
                x="ä½ æŒ‰ä¸‹çš„æ˜¯\"å–æ¶ˆ\"æŒ‰é’®ã€‚";
              }
              // document.write(x)
              event.preventDefault(); // é˜»æ­¢é»˜è®¤äº‹ä»¶è¡Œä¸º
              event.keyCode=0;
              event.returnValue=false;
          }
      }
      </script><link rel="alternate" type="application/rss+xml" href="https://www.geekery.cn/rss.xml" title="è¿ç»´å¼€å‘ç»¿çš®ä¹¦ RSS Feed"><title>LFSç¼–è¯‘ç¬”è®°ä»¥æ·±å…¥äº†è§£Linux | è¿ç»´å¼€å‘ç»¿çš®ä¹¦</title><meta name="description" content="LFSç¼–è¯‘ç¬”è®°ä»¥æ·±å…¥äº†è§£Linux LFè§„å®šçš„åŒ… LFSå®¿ä¸»æœºä½“è´¨è¦æ±‚ å®¿ä¸»æœºä½“æ£€ Linux å¸¸ç”¨åˆ†åŒº(ç§‘æ™®) è¿˜æœ‰å…¶ä»–å‡ ä¸ªå¹¶éå¿…é¡»ï¼Œä½†åœ¨è®¾è®¡ç£ç›˜å¸ƒå±€æ—¶åº”å½“è€ƒè™‘çš„åˆ†åŒºã€‚ä¸‹é¢çš„åˆ—è¡¨å¹¶ä¸å®Œæ•´ï¼Œä½†å¯ä»¥ä½œä¸ºä¸€ä¸ªå‚è€ƒã€‚ /boot â€“ é«˜åº¦æ¨èã€‚è¿™ä¸ªåˆ†åŒºå¯ä»¥å­˜å‚¨å†…æ ¸å’Œå…¶ä»–å¼•å¯¼ä¿¡æ¯ã€‚ä¸ºäº†å‡å°‘å¤§ç£ç›˜å¯èƒ½å¼•èµ·çš„é—®é¢˜ï¼Œå»ºè®®å°† /boot åˆ†åŒºè®¾ä¸ºç¬¬ä¸€å—ç£ç›˜çš„ç¬¬ä¸€ä¸ªåˆ†åŒº...">
    <link rel="preload" href="/assets/style-B0yhR6Eh.css" as="style"><link rel="stylesheet" href="/assets/style-B0yhR6Eh.css">
    <link rel="modulepreload" href="/assets/app-B0eBDdBu.js"><link rel="modulepreload" href="/assets/LFS-NoteBook.html-C7qhOZgY.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="å¸¦æˆ‘å›å®¶"><img class="vp-nav-logo" src="/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">è¿ç»´å¼€å‘ç»¿çš®ä¹¦</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="ä¸»é¡µ"><!--[--><iconify-icon class="vp-icon" icon="line-md:home-twotone" sizing="height" height="1em"></iconify-icon><!--]-->ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link route-link-active auto-link" href="/note-book/" aria-label="ä½¿ç”¨æŒ‡å—"><!--[--><iconify-icon class="vp-icon" icon="openmoji:light-bulb" sizing="height" height="1em"></iconify-icon><!--]-->ä½¿ç”¨æŒ‡å—<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="å…è´¹æœåŠ¡"><!--[--><iconify-icon class="vp-icon" icon="solar:box-line-duotone" sizing="height" height="1em"></iconify-icon>å…è´¹æœåŠ¡<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/base64.html" aria-label="Base64åœ¨çº¿ç¼–ç è§£ç "><!--[--><iconify-icon class="vp-icon" icon="streamline:device-database-encryption-1-solid" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Base64åœ¨çº¿ç¼–ç è§£ç <!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/cloudflare-warp.html" aria-label="Cloudflare Warp å›¢é˜ŸæœåŠ¡"><!--[--><iconify-icon class="vp-icon" icon="simple-icons:cloudflare" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Cloudflare Warp å›¢é˜ŸæœåŠ¡<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/code-diff.html" aria-label="ä»£ç å·®å¼‚å¯¹æ¯”"><!--[--><iconify-icon class="vp-icon" icon="icon-park-twotone:difference-set" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->ä»£ç å·®å¼‚å¯¹æ¯”<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/cron.html" aria-label="Cronåœ¨çº¿è¡¨è¾¾å¼ç”Ÿæˆå™¨"><!--[--><iconify-icon class="vp-icon" icon="eos-icons:cronjob" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Cronåœ¨çº¿è¡¨è¾¾å¼ç”Ÿæˆå™¨<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/docker-hub-mirror.html" aria-label="DockerHubé•œåƒåŠ é€Ÿ"><!--[--><iconify-icon class="vp-icon" icon="grommet-icons:docker" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->DockerHubé•œåƒåŠ é€Ÿ<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/github-direct.html" aria-label="GitHubåŠ é€Ÿä¸‹è½½"><!--[--><iconify-icon class="vp-icon" icon="mdi:github" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->GitHubåŠ é€Ÿä¸‹è½½<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/nvidia-mirror.html" aria-label="Nvidiaé•œåƒç«™"><!--[--><iconify-icon class="vp-icon" icon="bi:nvidia" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Nvidiaé•œåƒç«™<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/radeon-mirror.html" aria-label="Radeoné•œåƒç«™"><!--[--><iconify-icon class="vp-icon" icon="bi:amd" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Radeoné•œåƒç«™<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/random-password.html" aria-label="å¯†ç ç”Ÿæˆå™¨"><!--[--><iconify-icon class="vp-icon" icon="ph:password" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->å¯†ç ç”Ÿæˆå™¨<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/SSLGenerate.html" aria-label="SSL è¯ä¹¦ç”Ÿæˆ"><!--[--><iconify-icon class="vp-icon" icon="ph:certificate-duotone" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->SSL è¯ä¹¦ç”Ÿæˆ<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/text-reverse.html" aria-label="æ–‡æœ¬å­—ç¬¦ä¸²å€’åº"><!--[--><iconify-icon class="vp-icon" icon="system-uicons:reverse-alt" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->æ–‡æœ¬å­—ç¬¦ä¸²å€’åº<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/tools.html" aria-label="å°å·¥å…·"><!--[--><iconify-icon class="vp-icon" icon="material-symbols-light:tools-ladder" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->å°å·¥å…·<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="æˆ‘çš„é¡¹ç›®"><!--[--><iconify-icon class="vp-icon" icon="openmoji:man-technologist" sizing="height" height="1em"></iconify-icon>æˆ‘çš„é¡¹ç›®<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Chiptune/" aria-label="Chiptune"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:music" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Chiptune<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/MobaXterm-Cracker/" aria-label="Mobaxterm Crack"><!--[--><img class="vp-icon" src="/MobaXterm-Cracker/README.assets/xterm_logo.png" alt aria-hidden no-view sizing="both" width="1em" height="1em"><!--]-->Mobaxterm Crack<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/projects.html" aria-label="å…¶ä»–é¡¹ç›®"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:folder" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->å…¶ä»–é¡¹ç›®<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/timeline/" aria-label="æ—¶é—´çº¿"><!--[--><iconify-icon class="vp-icon" icon="ic:twotone-view-timeline" sizing="height" height="1em"></iconify-icon><!--]-->æ—¶é—´çº¿<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/about/friend.html" aria-label="å‹é“¾"><!--[--><iconify-icon class="vp-icon" icon="fa-solid:user-friends" sizing="height" height="1em"></iconify-icon><!--]-->å‹é“¾<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="åšå®¢è”ç›Ÿ"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:comment-nodes" sizing="height" height="1em"></iconify-icon>åšå®¢è”ç›Ÿ<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://www.travellings.cn/go.html" aria-label="å¼€å¾€" rel="noopener noreferrer" target="_blank"><!--[--><iconify-icon class="vp-icon" icon="fa:subway" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->å¼€å¾€<!----></a></li><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://webteleporter.top" aria-label="WebTeleporter" rel="noopener noreferrer" target="_blank"><!--[--><img class="vp-icon" src="https://webteleporter.top/favicon.ico" alt aria-hidden no-view sizing="both" width="1em" height="1em"><!--]-->WebTeleporter<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="auto-link external-link" href="https://cloudflare-cloudnative-pages.geekery.cn/" aria-label="å†…å®¹åˆ†å‘ç½‘ç»œéƒ¨ç½²çŠ¶æ€" rel="noopener noreferrer" target="_blank"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:hexagon-nodes-bolt" sizing="height" height="1em"></iconify-icon><!--]-->å†…å®¹åˆ†å‘<!----></a></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/Paper-Dragon/notebook" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><!----></div><!--[--><div id="docsearch-container" style="display:none;"></div><div class="docsearch-placeholder"><button type="button" aria-label="æœç´¢æ–‡æ¡£" aria-keyshortcuts="Control+k" class="DocSearch DocSearch-Button"><span class="DocSearch-Button-Container"><svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" class="DocSearch-Search-Icon"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢æ–‡æ¡£</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key DocSearch-Button-Key--ctrl">Ctrl</kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/" aria-label="ä¸»é¡µ"><!--[--><iconify-icon class="vp-icon" icon="line-md:home-twotone" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->ä¸»é¡µ<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><iconify-icon class="vp-icon" icon="ic:twotone-book" sizing="both" width="1em" height="1em"></iconify-icon><a class="route-link route-link-active auto-link vp-sidebar-title no-external-link-icon" href="/note-book/" aria-label="note-book"><!---->note-book<!----></a><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">AI Training</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Anaconda</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Android</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Ansible</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Baidu Net Disk</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Btrfs</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Core DNS</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">CVE</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">DNS</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Docker</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Ebook</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ELK</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Esxi</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Etcd</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Fossology</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Frp</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Git</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Gitlab</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Goaccess</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">GRUB</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">HA LVS Keepalived</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Harbor</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Iptables</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Jenkins</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Jumper Server</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Kafka</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Kubernetes</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Linux From Scratch</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/note-book/LinuxFromScratch/LFS-NoteBook.html" aria-label="LFSç¼–è¯‘ç¬”è®°ä»¥æ·±å…¥äº†è§£Linux"><!---->LFSç¼–è¯‘ç¬”è®°ä»¥æ·±å…¥äº†è§£Linux<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Linux Opera System</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Linuxä¸‰å‰‘å®¢</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Midjourney</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Min IO</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Misc</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">My SQL</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Nginx Open Resty</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Nodejs</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Ollama</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Open Stack</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Opera Systems</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Photo Shop</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Physical Server</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Portainer</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Prometheus</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Rabbit MQ</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Rancher</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Research Develop</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Router OS</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Security</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Ssh</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">SSL</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Tomcat</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Traefik</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Vim</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Virtual Private Network</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">VMware</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Vue</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Windows</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">WSL</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Zabbix</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">äº¤æ¢æœº</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">å¸åœˆçš„é‚£äº›äº‹</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">æœåŠ¡å™¨</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">æ´‹åƒåœ¾ä¸»æœº</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ç”Ÿæ´»</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="ic:twotone-book" sizing="both" width="1em" height="1em"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/PyQt5%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B-%E7%8E%8B%E9%93%AD%E4%B8%9C/" aria-label="PyQt5å¿«é€Ÿä¸Šæ‰‹-ç‹é“­ä¸œ"><!---->PyQt5å¿«é€Ÿä¸Šæ‰‹-ç‹é“­ä¸œ<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="ic:twotone-book" sizing="both" width="1em" height="1em"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/ostep-note/" aria-label="Operating Systems: Three Easy Pieces å­¦ä¹ ç¬”è®°"><!---->Operating Systems: Three Easy Pieces å­¦ä¹ ç¬”è®°<!----></a><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->LFSç¼–è¯‘ç¬”è®°ä»¥æ·±å…¥äº†è§£Linux</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/Paper-Dragon" target="_blank" rel="noopener noreferrer">Paper-Dragon</a></span><span property="author" content="Paper-Dragon"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2023/8/13</span><meta property="datePublished" content="2023-08-13T15:08:38.000Z"></span><span class="page-pageview-info" aria-label="è®¿é—®é‡ğŸ”¢" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon" name="eye"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="vp-pageview waline-pageview-count" data-path="/note-book/LinuxFromScratch/LFS-NoteBook.html" data-page-key="/note-book/LinuxFromScratch/LFS-NoteBook.html">...</span></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 63 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT63M"></span><!----><!----></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="lfsç¼–è¯‘ç¬”è®°ä»¥æ·±å…¥äº†è§£linux" tabindex="-1"><a class="header-anchor" href="#lfsç¼–è¯‘ç¬”è®°ä»¥æ·±å…¥äº†è§£linux"><span>LFSç¼–è¯‘ç¬”è®°ä»¥æ·±å…¥äº†è§£Linux</span></a></h1><h2 id="lfè§„å®šçš„åŒ…" tabindex="-1"><a class="header-anchor" href="#lfè§„å®šçš„åŒ…"><span>LFè§„å®šçš„åŒ…</span></a></h2><table><thead><tr><th>ç±»å‹</th><th>åŒ…</th></tr></thead><tbody><tr><td><em>LSB Core:</em></td><td>Bash, Bc, Binutils, Coreutils, Diffutils, File, Findutils,Gawk, Grep, Gzip, M4, Man-DB, Ncurses, Procps, Psmisc, Sed,Shadow, Tar, Util-linux, Zlib</td></tr><tr><td><em>LSB Desktop:</em></td><td>æ— </td></tr><tr><td><em>LSB Runtime Languages:</em></td><td>Perl, Python</td></tr><tr><td><em>LSB Imaging:</em></td><td>æ— </td></tr><tr><td><em>LSB Gtk3å’ŒLSB Graphics (è¯•ç”¨):</em></td><td>æ— </td></tr></tbody></table><h2 id="lfså®¿ä¸»æœºä½“è´¨è¦æ±‚" tabindex="-1"><a class="header-anchor" href="#lfså®¿ä¸»æœºä½“è´¨è¦æ±‚"><span>LFSå®¿ä¸»æœºä½“è´¨è¦æ±‚</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Bash-3.2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (/bin/sh </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">å¿…é¡»æ˜¯åˆ°</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> çš„ç¬¦å·é“¾æ¥æˆ–ç¡¬è¿æ¥</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Binutils-2.13.1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (æ¯” </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2.39</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æ›´æ–°çš„ç‰ˆæœ¬æœªç»æµ‹è¯•ï¼Œä¸æ¨èä½¿ç”¨</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Bison-2.7</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (/usr/bin/yacc </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">å¿…é¡»æ˜¯åˆ°</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bison</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> çš„é“¾æ¥ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªæ‰§è¡Œ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bison</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> çš„å°è„šæœ¬</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Coreutils-6.9</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Diffutils-2.8.1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Findutils-4.2.31</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Gawk-4.0.1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (/usr/bin/awk </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">å¿…é¡»æ˜¯åˆ°</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gawk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> çš„é“¾æ¥</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GCC-4.8ï¼ŒåŒ…æ‹¬</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> C++</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ç¼–è¯‘å™¨</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> g++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (æ¯” </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">12.2.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æ›´æ–°çš„ç‰ˆæœ¬æœªç»æµ‹è¯•ï¼Œä¸æ¨èä½¿ç”¨</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)ã€‚C å’Œ C++ æ ‡å‡†åº“ (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">åŒ…æ‹¬å¤´æ–‡ä»¶</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) ä¹Ÿå¿…é¡»å¯ç”¨ï¼Œè¿™æ · C++ ç¼–è¯‘å™¨æ‰èƒ½æ„å»ºå®¿ä¸»ç¯å¢ƒçš„ç¨‹åº</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Grep-2.5.1a</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Gzip-1.3.12</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Linux</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Kernel-3.2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">å†…æ ¸ç‰ˆæœ¬çš„è¦æ±‚æ˜¯ä¸ºäº†ç¬¦åˆç¬¬</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ç« å’Œç¬¬</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ç« ä¸­ç¼–è¯‘</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> glibc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æ—¶å¼€å‘è€…æ¨èçš„é…ç½®é€‰é¡¹ã€‚udevä¹Ÿè¦æ±‚ä¸€å®šçš„å†…æ ¸ç‰ˆæœ¬ã€‚</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">å¦‚æœå®¿ä¸»å†…æ ¸æ¯”</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3.2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æ›´æ—©ï¼Œæ‚¨éœ€è¦å°†å†…æ ¸å‡çº§åˆ°è¾ƒæ–°çš„ç‰ˆæœ¬ã€‚å‡çº§å†…æ ¸æœ‰ä¸¤ç§æ–¹æ³•ï¼Œå¦‚æœæ‚¨çš„å‘è¡Œç‰ˆä¾›åº”å•†æä¾›äº†</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3.2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æˆ–æ›´æ–°çš„å†…æ ¸è½¯ä»¶åŒ…ï¼Œæ‚¨å¯ä»¥ç›´æ¥å®‰è£…å®ƒã€‚å¦‚æœä¾›åº”å•†æ²¡æœ‰æä¾›ä¸€ä¸ªè¶³å¤Ÿæ–°çš„å†…æ ¸åŒ…ï¼Œæˆ–è€…æ‚¨ä¸æƒ³å®‰è£…å®ƒï¼Œæ‚¨å¯ä»¥è‡ªå·±ç¼–è¯‘å†…æ ¸ã€‚ç¼–è¯‘å†…æ ¸å’Œé…ç½®å¯åŠ¨å¼•å¯¼å™¨</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (å‡è®¾å®¿ä¸»ä½¿ç”¨ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">GRUB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) çš„æ­¥éª¤åœ¨ç¬¬ 10 ç« ä¸­ã€‚</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">M4-1.4.10</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Make-4.0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Patch-2.5.4</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Perl-5.8.8</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Python-3.4</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Sed-4.1.5</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Tar-1.22</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Texinfo-4.7</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Xz-5.0.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å®¿ä¸»æœºä½“æ£€" tabindex="-1"><a class="header-anchor" href="#å®¿ä¸»æœºä½“æ£€"><span>å®¿ä¸»æœºä½“æ£€</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">version-check.sh</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;&lt; </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&quot;EOF&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">#!/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"># Simple script to list version numbers of critical development tools</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">export LC_ALL=C</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">bash --version | head -n1 | cut -d&quot; &quot; -f2-4</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">MYSH=$(readlink -f /bin/sh)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">echo &quot;/bin/sh -&gt; $MYSH&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">echo $MYSH | grep -q bash || echo &quot;ERROR: /bin/sh does not point to bash&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">unset MYSH</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">echo -n &quot;Binutils: &quot;; ld --version | head -n1 | cut -d&quot; &quot; -f3-</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">bison --version | head -n1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">if [ -h /usr/bin/yacc ]; then</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> echo &quot;/usr/bin/yacc -&gt; `readlink -f /usr/bin/yacc`&quot;;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">elif [ -x /usr/bin/yacc ]; then</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> echo yacc is `/usr/bin/yacc --version | head -n1`</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">else</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> echo &quot;yacc not found&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">echo -n &quot;Coreutils: &quot;; chown --version | head -n1 | cut -d&quot;)&quot; -f2</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">diff --version | head -n1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">find --version | head -n1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">gawk --version | head -n1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">if [ -h /usr/bin/awk ]; then</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> echo &quot;/usr/bin/awk -&gt; `readlink -f /usr/bin/awk`&quot;;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">elif [ -x /usr/bin/awk ]; then</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> echo awk is `/usr/bin/awk --version | head -n1`</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">else</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> echo &quot;awk not found&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">gcc --version | head -n1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">g++ --version | head -n1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">grep --version | head -n1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">gzip --version | head -n1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">cat /proc/version</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">m4 --version | head -n1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">make --version | head -n1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">patch --version | head -n1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">echo Perl `perl -V:version`</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">python3 --version</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">sed --version | head -n1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">tar --version | head -n1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">makeinfo --version | head -n1 # texinfo version</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">xz --version | head -n1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">echo &#39;int main(){}&#39; &gt; dummy.c &amp;&amp; g++ -o dummy dummy.c</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">if [ -x dummy ]</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> then echo &quot;g++ compilation OK&quot;;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> else echo &quot;g++ compilation failed&quot;; fi</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">rm -f dummy.c dummy</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">bash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> version-check.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="linux-å¸¸ç”¨åˆ†åŒº-ç§‘æ™®" tabindex="-1"><a class="header-anchor" href="#linux-å¸¸ç”¨åˆ†åŒº-ç§‘æ™®"><span>Linux å¸¸ç”¨åˆ†åŒº(ç§‘æ™®)</span></a></h2><p>è¿˜æœ‰å…¶ä»–å‡ ä¸ªå¹¶éå¿…é¡»ï¼Œä½†åœ¨è®¾è®¡ç£ç›˜å¸ƒå±€æ—¶åº”å½“è€ƒè™‘çš„åˆ†åŒºã€‚ä¸‹é¢çš„åˆ—è¡¨å¹¶ä¸å®Œæ•´ï¼Œä½†å¯ä»¥ä½œä¸ºä¸€ä¸ªå‚è€ƒã€‚</p><ul><li><p>/boot â€“ é«˜åº¦æ¨èã€‚è¿™ä¸ªåˆ†åŒºå¯ä»¥å­˜å‚¨å†…æ ¸å’Œå…¶ä»–å¼•å¯¼ä¿¡æ¯ã€‚ä¸ºäº†å‡å°‘å¤§ç£ç›˜å¯èƒ½å¼•èµ·çš„é—®é¢˜ï¼Œå»ºè®®å°† /boot åˆ†åŒºè®¾ä¸ºç¬¬ä¸€å—ç£ç›˜çš„ç¬¬ä¸€ä¸ªåˆ†åŒºã€‚ä¸ºå®ƒåˆ†é… 200 MB å°±ç»°ç»°æœ‰ä½™ã€‚</p></li><li><p>/boot/efi â€“ EFI ç³»ç»Ÿåˆ†åŒºï¼Œåœ¨ä½¿ç”¨ UEFI å¼•å¯¼ç³»ç»Ÿæ—¶æ˜¯å¿…è¦çš„ã€‚é˜…è¯» BLFS é¡µé¢ ä»¥è·å¾—è¯¦ç»†ä¿¡æ¯ã€‚</p></li><li><p>/home â€“ é«˜åº¦æ¨èã€‚ç‹¬ç«‹çš„ /home åˆ†åŒºå¯ä»¥åœ¨å¤šä¸ªå‘è¡Œç‰ˆæˆ– LFS ç³»ç»Ÿä¹‹é—´å…±äº« home ç›®å½•å’Œç”¨æˆ·è®¾ç½®ã€‚å®ƒçš„å°ºå¯¸ä¸€èˆ¬å¾ˆå¤§ï¼Œå–å†³äºç¡¬ç›˜çš„å¯ç”¨ç©ºé—´ã€‚</p></li><li><p>/usr â€“ åœ¨ LFS ä¸­ï¼Œ/binï¼Œ/libï¼Œä»¥åŠ /sbin æ˜¯æŒ‡å‘ /usr ä¸­å¯¹åº”ç›®å½•çš„ç¬¦å·é“¾æ¥ã€‚å› æ­¤ï¼Œ/usr åŒ…å«ç³»ç»Ÿè¿è¡Œéœ€è¦çš„æ‰€æœ‰äºŒè¿›åˆ¶ç¨‹åºå’Œåº“ã€‚å¯¹äº LFSï¼Œé€šå¸¸ä¸éœ€è¦ä¸º /usr åˆ›å»ºå•ç‹¬çš„åˆ†åŒºã€‚å¦‚æœä»ç„¶éœ€è¦è¿™ç§é…ç½®ï¼Œéœ€è¦ä¸ºå…¶å»ºç«‹ä¸€ä¸ªèƒ½å¤Ÿå®¹çº³ç³»ç»Ÿä¸­æ‰€æœ‰ç¨‹åºå’Œåº“çš„åˆ†åŒºã€‚åŒæ—¶ï¼Œåœ¨è¿™ç§é…ç½®ä¸‹ï¼Œæ ¹åˆ†åŒºå¯ä»¥éå¸¸å° (å¯èƒ½åªéœ€è¦ä¸€å‰å­—èŠ‚)ï¼Œå› æ­¤å®ƒé€‚ç”¨äºç˜¦å®¢æˆ·ç«¯æˆ–è€…æ— ç›˜å·¥ä½œç«™ (æ­¤æ—¶ /usr ä»è¿œç¨‹æœåŠ¡å™¨æŒ‚è½½)ã€‚ç„¶è€Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¿…é¡»ä½¿ç”¨ initramfs (LFS æ²¡æœ‰åŒ…å«)ï¼Œæ‰èƒ½å¼•å¯¼å…·æœ‰å•ç‹¬çš„ /usr åˆ†åŒºçš„ç³»ç»Ÿã€‚</p></li><li><p>/opt â€“ è¿™ä¸ªç›®å½•å¾€å¾€è¢«ç”¨äºåœ¨ BLFS ä¸­å®‰è£… Gnome æˆ– KDE ç­‰å¤§å‹è½¯ä»¶ï¼Œä»¥å…æŠŠå¤§é‡æ–‡ä»¶å¡è¿› /usr ç›®å½•æ ‘ã€‚å¦‚æœå°†å®ƒåˆ’åˆ†ä¸ºç‹¬ç«‹åˆ†åŒºï¼Œ5 åˆ° 10 GB ä¸€èˆ¬å°±è¶³å¤Ÿäº†ã€‚</p></li><li><p>/tmp â€“ ä¸€ä¸ªç‹¬ç«‹çš„ /tmp åˆ†åŒºæ˜¯å¾ˆå°‘è§çš„ï¼Œä½†åœ¨é…ç½®ç˜¦å®¢æˆ·ç«¯æ—¶å¾ˆæœ‰ç”¨ã€‚å¦‚æœåˆ†é…äº†è¿™ä¸ªåˆ†åŒºï¼Œå¤§å°ä¸€èˆ¬ä¸ä¼šè¶…è¿‡å‡ ä¸ª GBã€‚</p></li><li><p>/usr/src â€“ å°†å®ƒåˆ’åˆ†ä¸ºç‹¬ç«‹åˆ†åŒºï¼Œå¯ä»¥ç”¨äºå­˜å‚¨ BLFS æºä»£ç ï¼Œå¹¶åœ¨å¤šä¸ª LFS ç³»ç»Ÿä¹‹é—´å…±äº«å®ƒä»¬ã€‚å®ƒä¹Ÿå¯ä»¥ç”¨äºç¼–è¯‘ BLFS è½¯ä»¶åŒ…ã€‚30-50 GB çš„åˆ†åŒºå¯ä»¥æä¾›è¶³å¤Ÿçš„ç©ºé—´ã€‚</p></li></ul><p>å¦‚æœæ‚¨å¸Œæœ›åœ¨å¯åŠ¨æ—¶è‡ªåŠ¨æŒ‚è½½ä»»ä½•ä¸€ä¸ªç‹¬ç«‹çš„åˆ†åŒºï¼Œå°±è¦åœ¨ /etc/fstab æ–‡ä»¶ä¸­è¯´æ˜ã€‚æœ‰å…³æŒ‡å®šåˆ†åŒºçš„ç»†èŠ‚å°†åœ¨ç¬¬ 10.2 èŠ‚ â€œåˆ›å»º /etc/fstab æ–‡ä»¶â€ ä¸­è®¨è®ºã€‚</p><h2 id="ç¬¬ä¸€æ­¥åˆ›å»ºçš„åˆ†åŒºå’Œç”¨é€”" tabindex="-1"><a class="header-anchor" href="#ç¬¬ä¸€æ­¥åˆ›å»ºçš„åˆ†åŒºå’Œç”¨é€”"><span>ç¬¬ä¸€æ­¥åˆ›å»ºçš„åˆ†åŒºå’Œç”¨é€”</span></a></h2><h3 id="åˆ›å»ºä¸€ä¸ªæœ‰é™çš„ç›®å½•æ ‘" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºä¸€ä¸ªæœ‰é™çš„ç›®å½•æ ‘"><span>åˆ›å»ºä¸€ä¸ªæœ‰é™çš„ç›®å½•æ ‘</span></a></h3><p>ä»¥ <code>root</code> èº«ä»½ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºæ‰€éœ€çš„ç›®å½•å¸ƒå±€ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -pv</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $LFS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/{etc,var}</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $LFS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/usr/{bin,lib,sbin}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lib</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sbin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">do</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ln</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -sv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> usr/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$i</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $LFS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$i</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">done</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">case</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> $(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">uname</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#E06C75;"> x86_64</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -pv</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $LFS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/lib64</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ;;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">esac</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åˆ›å»ºäº¤å‰ç¼–è¯‘å™¨ç›®å½•" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºäº¤å‰ç¼–è¯‘å™¨ç›®å½•"><span>åˆ›å»ºäº¤å‰ç¼–è¯‘å™¨ç›®å½•</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -pv</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $LFS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/tools</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="ç¬¬ä¸€æ­¥åˆ›å»ºéç‰¹æƒç”¨æˆ·" tabindex="-1"><a class="header-anchor" href="#ç¬¬ä¸€æ­¥åˆ›å»ºéç‰¹æƒç”¨æˆ·"><span>ç¬¬ä¸€æ­¥åˆ›å»ºéç‰¹æƒç”¨æˆ·</span></a></h2><h4 id="æ·»åŠ éç‰¹æƒç”¨æˆ·" tabindex="-1"><a class="header-anchor" href="#æ·»åŠ éç‰¹æƒç”¨æˆ·"><span>æ·»åŠ éç‰¹æƒç”¨æˆ·</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">groupadd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lfs</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">useradd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /bin/bash</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -g</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lfs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -k</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/null</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lfs</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /bin/bash</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> è®¾ç½®</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ä¸ºç”¨æˆ·</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> çš„é»˜è®¤</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shellã€‚</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-g</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lfs</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> æ·»åŠ ç”¨æˆ·</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> åˆ°ç»„</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lfsã€‚</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-m</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ä¸ºç”¨æˆ·</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> åˆ›å»ºä¸€ä¸ªä¸»ç›®å½•ã€‚</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-k</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/null</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> å°†æ¨¡æ¿ç›®å½•è®¾ç½®ä¸ºç©ºè®¾å¤‡æ–‡ä»¶ï¼Œä»è€Œä¸ä»é»˜è®¤æ¨¡æ¿ç›®å½•</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (/etc/skel) å¤åˆ¶æ–‡ä»¶åˆ°æ–°çš„ä¸»ç›®å½•ã€‚</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lfs</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> è¦åˆ›å»ºçš„ç”¨æˆ·çš„åç§°ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç»™éç‰¹æƒç”¨æˆ·æˆæƒæ§åˆ¶lfs" tabindex="-1"><a class="header-anchor" href="#ç»™éç‰¹æƒç”¨æˆ·æˆæƒæ§åˆ¶lfs"><span>ç»™éç‰¹æƒç”¨æˆ·æˆæƒæ§åˆ¶lfs</span></a></h4><p>å°† <code>lfs</code> è®¾ä¸º <code>$LFS</code> ä¸­æ‰€æœ‰ç›®å½•çš„æ‰€æœ‰è€…ï¼Œä½¿ <code>lfs</code> å¯¹å®ƒä»¬æ‹¥æœ‰å®Œå…¨è®¿é—®æƒï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>chown -v lfs $LFS/{usr{,/*},lib,var,etc,bin,sbin,tools}</span></span>
<span class="line"><span>case $(uname -m) in</span></span>
<span class="line"><span> x86_64) chown -v lfs $LFS/lib64 ;;</span></span>
<span class="line"><span>esac</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="éç‰¹æƒç”¨æˆ·ç¯å¢ƒå˜é‡" tabindex="-1"><a class="header-anchor" href="#éç‰¹æƒç”¨æˆ·ç¯å¢ƒå˜é‡"><span>éç‰¹æƒç”¨æˆ·ç¯å¢ƒå˜é‡</span></a></h4><blockquote><p><strong>bash</strong> åˆ›å»ºä¸¤ä¸ªæ–°çš„å¯åŠ¨è„šæœ¬</p><p>åˆå§‹çš„ shellä¸€èˆ¬æ˜¯ä¸€ä¸ª<em>ç™»å½•</em> shellã€‚å®ƒè¯»å–å®¿ä¸»ç³»ç»Ÿçš„ <code>/etc/profile</code> æ–‡ä»¶ (å¯èƒ½åŒ…å«ä¸€äº›è®¾ç½®å’Œç¯å¢ƒå˜é‡)ï¼Œç„¶åè¯»å– <code>.bash_profile</code>ã€‚</p></blockquote><p>åˆ›å»º.bash_profile</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">~/.bash_profile</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;&lt; </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&quot;EOF&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">exec env -i HOME=$HOME TERM=$TERM PS1=&#39;\u:\w\$ &#39; /bin/bash</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">exec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> env</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i.../bin/bash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å‘½ä»¤ï¼Œæ–°å»ºä¸€ä¸ªé™¤äº†</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> HOME,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> TERM</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ä»¥åŠ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PS1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å¤–æ²¡æœ‰ä»»ä½•ç¯å¢ƒå˜é‡çš„</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ›å»º.bashrc ( <em>éç™»å½•</em> shell)</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">~/.bashrc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;&lt; </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&quot;EOF&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">set +h</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">umask 022</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">LFS=/mnt/lfs</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">LC_ALL=POSIX</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">LFS_TGT=$(uname -m)-lfs-linux-gnu</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">PATH=/usr/bin</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">if [ ! -L /bin ]; then PATH=/bin:$PATH; fi</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">PATH=$LFS/tools/bin:$PATH</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">CONFIG_SITE=$LFS/usr/share/config.site</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">export LFS LC_ALL LFS_TGT PATH CONFIG_SITE</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +h</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +h</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å‘½ä»¤å…³é—­</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> çš„æ•£åˆ—åŠŸèƒ½ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ•£åˆ—æ˜¯å¾ˆæœ‰ç”¨çš„</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> â€”â€”</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ä½¿ç”¨ä¸€ä¸ªæ•£åˆ—è¡¨ç»´æŠ¤å„ä¸ªå¯æ‰§è¡Œæ–‡ä»¶çš„å®Œæ•´è·¯å¾„ï¼Œè¿™æ ·å°±ä¸ç”¨æ¯æ¬¡éƒ½åœ¨</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PATH</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æŒ‡å®šçš„ç›®å½•ä¸­æœç´¢å¯æ‰§è¡Œæ–‡ä»¶ã€‚ç„¶è€Œï¼Œåœ¨æ„å»º</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LFS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›æ€»æ˜¯ä½¿ç”¨æœ€æ–°å®‰è£…çš„å·¥å…·ã€‚å› æ­¤ï¼Œéœ€è¦å…³é—­æ•£åˆ—åŠŸèƒ½ï¼Œä½¿å¾—</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> åœ¨è¿è¡Œç¨‹åºæ—¶æ€»æ˜¯æœç´¢</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PATHã€‚è¿™æ ·ï¼Œä¸€æ—¦</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$LFS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/tools/bin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ä¸­æœ‰æ–°çš„å·¥å…·å¯ç”¨ï¼Œshell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å°±èƒ½å¤Ÿæ‰¾åˆ°å®ƒä»¬ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ä¹‹å‰è®°å¿†åœ¨æ•£åˆ—è¡¨ä¸­ï¼Œç”±å®¿ä¸»å‘è¡Œç‰ˆæä¾›çš„</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/bin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æˆ–</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /bin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ä¸­çš„å·¥å…·ã€‚</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">umask</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 022</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> å°†ç”¨æˆ·çš„æ–‡ä»¶åˆ›å»ºæ©ç </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (umask) è®¾å®šä¸º 022ï¼Œä¿è¯åªæœ‰æ–‡ä»¶æ‰€æœ‰è€…å¯ä»¥å†™æ–°åˆ›å»ºçš„æ–‡ä»¶å’Œç›®å½•ï¼Œä½†ä»»ä½•äººéƒ½å¯è¯»å–ã€æ‰§è¡Œå®ƒä»¬ã€‚(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">å¦‚æœ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> open</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ç³»ç»Ÿè°ƒç”¨ä½¿ç”¨é»˜è®¤æ¨¡å¼ï¼Œåˆ™æ–°æ–‡ä»¶å°†å…·æœ‰æƒé™æ¨¡å¼</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 644ï¼Œè€Œæ–°ç›®å½•å…·æœ‰æƒé™æ¨¡å¼</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 755</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)ã€‚</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">LFS</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/mnt/lfs</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> LFS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ç¯å¢ƒå˜é‡å¿…é¡»è¢«è®¾å®šä¸ºä¹‹å‰é€‰æ‹©çš„æŒ‚è½½ç‚¹ã€‚</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">LC_ALL</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">POSIX</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> LC_ALL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ç¯å¢ƒå˜é‡æ§åˆ¶æŸäº›ç¨‹åºçš„æœ¬åœ°åŒ–è¡Œä¸ºï¼Œä½¿å¾—å®ƒä»¬ä»¥ç‰¹å®šå›½å®¶çš„è¯­è¨€å’Œæƒ¯ä¾‹è¾“å‡ºæ¶ˆæ¯ã€‚å°†</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LC_ALL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> è®¾ç½®ä¸º</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> â€œPOSIXâ€</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æˆ–è€…</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> â€œCâ€</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">è¿™ä¸¤ç§è®¾ç½®æ˜¯ç­‰ä»·çš„</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">å¯ä»¥ä¿è¯åœ¨</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> chroot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ç¯å¢ƒä¸­æ‰€æœ‰å‘½ä»¤çš„è¡Œä¸ºå®Œå…¨ç¬¦åˆé¢„æœŸï¼Œè€Œä¸å®¿ä¸»çš„æœ¬åœ°åŒ–è®¾ç½®æ— å…³ã€‚</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">LFS_TGT</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">uname</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -m</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)-lfs-linux-gnu</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> LFS_TGTå˜é‡è®¾å®šäº†ä¸€ä¸ªéé»˜è®¤ï¼Œä½†ä¸å®¿ä¸»ç³»ç»Ÿå…¼å®¹çš„æœºå™¨æè¿°ç¬¦ã€‚è¯¥æè¿°ç¬¦è¢«ç”¨äºæ„å»ºäº¤å‰ç¼–è¯‘å™¨å’Œäº¤å‰ç¼–è¯‘ä¸´æ—¶å·¥å…·é“¾ã€‚å·¥å…·é“¾æŠ€æœ¯è¯´æ˜åŒ…å«äº†å…³äºè¿™ä¸ªæè¿°ç¬¦çš„æ›´å¤šä¿¡æ¯ã€‚</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">PATH</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/usr/bin</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> è®¸å¤šç°ä»£</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Linux</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å‘è¡Œç‰ˆåˆå¹¶äº†</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /bin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å’Œ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/binã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ ‡å‡†</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PATH</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å˜é‡åªéœ€è¦è¢«è®¾å®šä¸º</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/binï¼Œå³å¯æ»¡è¶³ç¬¬</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ç« çš„ç¯å¢ƒã€‚å¦åˆ™ï¼Œåç»­å‘½ä»¤å°†ä¼šå¢åŠ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /bin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> åˆ°æœç´¢è·¯å¾„ä¸­ã€‚</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> -L</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /bin ]; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">then</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> PATH</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/bin:</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$PATH</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fi</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> å¦‚æœ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /bin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ä¸æ˜¯ç¬¦å·é“¾æ¥ï¼Œåˆ™å®ƒéœ€è¦è¢«æ·»åŠ åˆ°</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PATH</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å˜é‡ä¸­ã€‚</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">PATH</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$LFS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/tools/bin:</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$PATH</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> æˆ‘ä»¬å°†</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $LFS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/tools/bin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> é™„åŠ åœ¨é»˜è®¤çš„</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PATH</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ç¯å¢ƒå˜é‡ä¹‹å‰ï¼Œè¿™æ ·åœ¨ç¬¬</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ç« ä¸­ï¼Œæˆ‘ä»¬ä¸€æ—¦å®‰è£…äº†æ–°çš„ç¨‹åºï¼Œshell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å°±èƒ½ç«‹åˆ»ä½¿ç”¨å®ƒä»¬ã€‚è¿™ä¸å…³é—­æ•£åˆ—åŠŸèƒ½ç›¸ç»“åˆï¼Œé™ä½äº†åœ¨ç¬¬</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ç« ç¯å¢ƒä¸­æ–°ç¨‹åºå¯ç”¨æ—¶é”™è¯¯åœ°ä½¿ç”¨å®¿ä¸»ç³»ç»Ÿä¸­æ—§ç¨‹åºçš„é£é™©ã€‚</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CONFIG_SITE</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$LFS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/usr/share/config.site</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> åœ¨ç¬¬</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ç« å’Œç¬¬</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ç« ä¸­ï¼Œå¦‚æœæ²¡æœ‰è®¾å®šè¿™ä¸ªå˜é‡ï¼Œconfigure</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> è„šæœ¬å¯èƒ½ä¼šä»å®¿ä¸»ç³»ç»Ÿçš„</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/share/config.site</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> åŠ è½½ä¸€äº›å‘è¡Œç‰ˆç‰¹æœ‰çš„é…ç½®ä¿¡æ¯ã€‚è¦†ç›–è¿™ä¸€é»˜è®¤è·¯å¾„ï¼Œé¿å…å®¿ä¸»ç³»ç»Ÿå¯èƒ½é€ æˆçš„æ±¡æŸ“ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="è°ƒæ•´æŸäº›linuxè‡ªå·±é€ äº†ä¸ªç¯å¢ƒå˜é‡å¯¹è¿‡ç¨‹äº§ç”Ÿå½±å“" tabindex="-1"><a class="header-anchor" href="#è°ƒæ•´æŸäº›linuxè‡ªå·±é€ äº†ä¸ªç¯å¢ƒå˜é‡å¯¹è¿‡ç¨‹äº§ç”Ÿå½±å“"><span>è°ƒæ•´æŸäº›Linuxè‡ªå·±é€ äº†ä¸ªç¯å¢ƒå˜é‡å¯¹è¿‡ç¨‹äº§ç”Ÿå½±å“</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[ </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> -e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /etc/bash.bashrc ] || </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mv</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/bash.bashrc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/bash.bashrc.NOUSE</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="ç™»å½•shellå’Œéç™»é™†shellè¯»å–é…ç½®æ–‡ä»¶çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#ç™»å½•shellå’Œéç™»é™†shellè¯»å–é…ç½®æ–‡ä»¶çš„åŒºåˆ«"><span>ç™»å½•shellå’Œéç™»é™†shellè¯»å–é…ç½®æ–‡ä»¶çš„åŒºåˆ«</span></a></h4><ul><li><a href="https://www.cnblogs.com/pigwan7/p/9593540.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/pigwan7/p/9593540.html</a></li></ul><h2 id="äº¤å‰å·¥å…·é“¾ç›¸å…³çš„å†…å®¹" tabindex="-1"><a class="header-anchor" href="#äº¤å‰å·¥å…·é“¾ç›¸å…³çš„å†…å®¹"><span>äº¤å‰å·¥å…·é“¾ç›¸å…³çš„å†…å®¹</span></a></h2><h3 id="äº¤å‰å·¥å…·é“¾" tabindex="-1"><a class="header-anchor" href="#äº¤å‰å·¥å…·é“¾"><span>äº¤å‰å·¥å…·é“¾</span></a></h3><ul><li>binutils åŒ…å«æ±‡ç¼–å™¨ã€é“¾æ¥å™¨ä»¥åŠå…¶ä»–ç”¨äºå¤„ç†ç›®æ ‡æ–‡ä»¶çš„å·¥å…·ã€‚</li><li>GCC è½¯ä»¶åŒ…åŒ…å« GNU ç¼–è¯‘å™¨é›†åˆï¼Œå…¶ä¸­æœ‰ C å’Œ C++ ç¼–è¯‘å™¨ã€‚</li><li>Linux API å¤´æ–‡ä»¶ (åœ¨ linux-5.19.2.tar.xz ä¸­) å¯¼å‡ºå†…æ ¸ API ä¾› Glibc ä½¿ç”¨ã€‚</li><li>Glibc è½¯ä»¶åŒ…åŒ…å«ä¸»è¦çš„ C è¯­è¨€åº“ã€‚å®ƒæä¾›ç”¨äºåˆ†é…å†…å­˜ã€æ£€ç´¢ç›®å½•ã€æ‰“å¼€å’Œå…³é—­æ–‡ä»¶ã€è¯»å†™æ–‡ä»¶ã€å­—ç¬¦ä¸²å¤„ç†ã€æ¨¡å¼åŒ¹é…ã€ç®—æœ¯ç­‰ç”¨é€”çš„åŸºæœ¬å­ç¨‹åºã€‚</li><li>Libstdc++ æ˜¯ C++ æ ‡å‡†åº“ã€‚æˆ‘ä»¬éœ€è¦å®ƒæ‰èƒ½ç¼–è¯‘ C++ ä»£ç  (GCC çš„ä¸€éƒ¨åˆ†ç”¨ C++ç¼–å†™)ã€‚ä½†åœ¨æ„å»º<a href="https://lfs.xry111.site/zh_CN/11.2-systemd/chapter05/gcc-pass1.html" target="_blank" rel="noopener noreferrer">ç¬¬ä¸€éçš„GCC</a>æ—¶æˆ‘ä»¬ä¸å¾—ä¸æš‚ç¼“å®‰è£…å®ƒï¼Œå› ä¸ºå®ƒä¾èµ–äºå½“æ—¶è¿˜æ²¡æœ‰å®‰è£…åˆ°ç›®æ ‡ç›®å½•çš„ Glibcã€‚</li></ul><h3 id="äº¤å‰å·¥å…·é“¾ç›¸å…³å·¥å…·" tabindex="-1"><a class="header-anchor" href="#äº¤å‰å·¥å…·é“¾ç›¸å…³å·¥å…·"><span>äº¤å‰å·¥å…·é“¾ç›¸å…³å·¥å…·</span></a></h3><ul><li>M4 è½¯ä»¶åŒ…åŒ…å«ä¸€ä¸ªå®å¤„ç†å™¨ã€‚</li><li>Ncurses è½¯ä»¶åŒ…åŒ…å«ä½¿ç”¨æ—¶ä¸éœ€è€ƒè™‘ç»ˆç«¯ç‰¹æ€§çš„å­—ç¬¦å±å¹•å¤„ç†å‡½æ•°åº“</li><li>Bash è½¯ä»¶åŒ…åŒ…å« Bourne-Again SHell</li><li>Coreutils è½¯ä»¶åŒ…åŒ…å«ç”¨äºæ˜¾ç¤ºå’Œè®¾å®šç³»ç»ŸåŸºæœ¬å±æ€§çš„å·¥å…·ã€‚</li><li>Diffutils è½¯ä»¶åŒ…åŒ…å«æ˜¾ç¤ºæ–‡ä»¶æˆ–ç›®å½•ä¹‹é—´å·®å¼‚çš„ç¨‹åºã€‚</li><li>File è½¯ä»¶åŒ…åŒ…å«ç”¨äºç¡®å®šç»™å®šæ–‡ä»¶ç±»å‹çš„å·¥å…·ã€‚</li><li>Findutils è½¯ä»¶åŒ…åŒ…å«ç”¨äºæŸ¥æ‰¾æ–‡ä»¶çš„ç¨‹åºã€‚è¿™äº›ç¨‹åºèƒ½å¤Ÿé€’å½’åœ°æœç´¢ç›®å½•æ ‘ï¼Œä»¥åŠåˆ›å»ºã€ç»´æŠ¤å’Œæœç´¢æ–‡ä»¶æ•°æ®åº“ (ä¸€èˆ¬æ¯”é€’å½’æœç´¢å¿«ï¼Œä½†åœ¨æ•°æ®åº“æœ€è¿‘æ²¡æœ‰æ›´æ–°æ—¶ä¸å¯é )ã€‚</li><li>Gawk è½¯ä»¶åŒ…åŒ…å«æ“ä½œæ–‡æœ¬æ–‡ä»¶çš„ç¨‹åºã€‚</li><li>Grep è½¯ä»¶åŒ…åŒ…å«åœ¨æ–‡ä»¶å†…å®¹ä¸­è¿›è¡Œæœç´¢çš„ç¨‹åºã€‚</li><li>Gzip è½¯ä»¶åŒ…åŒ…å«å‹ç¼©å’Œè§£å‹ç¼©æ–‡ä»¶çš„ç¨‹åºã€‚</li><li>Make è½¯ä»¶åŒ…åŒ…å«ä¸€ä¸ªç¨‹åºï¼Œç”¨äºæ§åˆ¶ä»è½¯ä»¶åŒ…æºä»£ç ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶å’Œå…¶ä»–éæºä»£ç æ–‡ä»¶çš„è¿‡ç¨‹ã€‚</li><li>Patch è½¯ä»¶åŒ…åŒ…å«é€šè¿‡åº”ç”¨ â€œè¡¥ä¸â€ æ–‡ä»¶ï¼Œä¿®æ”¹æˆ–åˆ›å»ºæ–‡ä»¶çš„ç¨‹åºï¼Œè¡¥ä¸æ–‡ä»¶é€šå¸¸æ˜¯ <strong>diff</strong> ç¨‹åºåˆ›å»ºçš„ã€‚</li><li>Sed è½¯ä»¶åŒ…åŒ…å«ä¸€ä¸ªæµç¼–è¾‘å™¨ã€‚</li><li>Tar è½¯ä»¶åŒ…æä¾›åˆ›å»º tar å½’æ¡£æ–‡ä»¶ï¼Œä»¥åŠå¯¹å½’æ¡£æ–‡ä»¶è¿›è¡Œå…¶ä»–æ“ä½œçš„åŠŸèƒ½ã€‚Tar å¯ä»¥å¯¹å·²ç»åˆ›å»ºçš„å½’æ¡£æ–‡ä»¶è¿›è¡Œæå–æ–‡ä»¶ï¼Œå­˜å‚¨æ–°æ–‡ä»¶ï¼Œæ›´æ–°æ–‡ä»¶ï¼Œæˆ–è€…åˆ—å‡ºæ–‡ä»¶ç­‰æ“ä½œã€‚</li><li>Xz è½¯ä»¶åŒ…åŒ…å«æ–‡ä»¶å‹ç¼©å’Œè§£å‹ç¼©å·¥å…·ï¼Œå®ƒèƒ½å¤Ÿå¤„ç† lzma å’Œæ–°çš„ xz å‹ç¼©æ–‡ä»¶æ ¼å¼ã€‚ä½¿ç”¨ <strong>xz</strong> å‹ç¼©æ–‡æœ¬æ–‡ä»¶ï¼Œå¯ä»¥å¾—åˆ°æ¯”ä¼ ç»Ÿçš„ <strong>gzip</strong> æˆ– <strong>bzip2</strong> æ›´å¥½çš„å‹ç¼©æ¯”ã€‚</li><li>2 - Binutils åŒ…å«æ±‡ç¼–å™¨ã€é“¾æ¥å™¨ä»¥åŠå…¶ä»–ç”¨äºå¤„ç†ç›®æ ‡æ–‡ä»¶çš„å·¥å…·ã€‚ <ul><li>Binutils çš„æºç åŒ…ä¸­å†…ç½®äº†ä¸€ä»½é™ˆæ—§çš„ libtool æ‹·è´ã€‚è¿™ä¸ªç‰ˆæœ¬çš„ libtool æ²¡æœ‰ sysroot æ”¯æŒï¼Œå› æ­¤äº§ç”Ÿçš„äºŒè¿›åˆ¶ä»£ç ä¼šé”™è¯¯åœ°é“¾æ¥åˆ°å®¿ä¸»ç³»ç»Ÿæä¾›çš„åº“ã€‚ç»•è¿‡è¿™ä¸ªé—®é¢˜ï¼š</li></ul></li><li>2 - GCC è½¯ä»¶åŒ…åŒ…å« GNU ç¼–è¯‘å™¨é›†åˆï¼Œå…¶ä¸­æœ‰ C å’Œ C++ ç¼–è¯‘å™¨ã€‚ <ul><li>ç”±äºæˆ‘ä»¬æ­£åœ¨äº¤å‰ç¼–è¯‘ GCCï¼Œæ­¤æ—¶ä¸å¯èƒ½ç”¨ç¼–è¯‘å¾—åˆ°çš„ GCC äºŒè¿›åˆ¶ç¨‹åºæ„å»ºç”¨äºç›®æ ‡ç³»ç»Ÿçš„è¿è¡Œåº“(<code>libgcc</code> å’Œ <code>libstdc++</code>)ï¼Œè¿™æ˜¯å› ä¸ºäº¤å‰ç¼–è¯‘å¾—åˆ°çš„äºŒè¿›åˆ¶ç¨‹åºæ— æ³•åœ¨å®¿ä¸»ç³»ç»Ÿè¿è¡Œã€‚GCCæ„å»ºç³»ç»Ÿåœ¨é»˜è®¤æƒ…å†µä¸‹ä¼šè¯•å›¾ä½¿ç”¨å®¿ä¸»ç³»ç»Ÿæä¾›çš„ C å’Œ C++ ç¼–è¯‘å™¨æ¥ç»•è¿‡è¿™ä¸ªé—®é¢˜ã€‚ä½†æ˜¯ï¼Œç”±äº GCCçš„è¿è¡Œåº“æœªå¿…èƒ½ç”¨ä¸åŒç‰ˆæœ¬çš„ GCC æ„å»ºï¼Œä½¿ç”¨å®¿ä¸»ç³»ç»Ÿçš„ç¼–è¯‘å™¨å¯èƒ½å¯¼è‡´æ„å»ºå¤±è´¥ã€‚è¯¥é€‰é¡¹ä¿è¯ä½¿ç”¨ç¬¬ä¸€éæ„å»ºçš„ GCCç¼–è¯‘è¿è¡Œåº“ï¼Œä»¥é˜²æ­¢å‡ºç°æ­¤é—®é¢˜ã€‚</li></ul></li></ul><h2 id="åœ¨chrootä¸­æ„å»º" tabindex="-1"><a class="header-anchor" href="#åœ¨chrootä¸­æ„å»º"><span>åœ¨Chrootä¸­æ„å»º</span></a></h2><h3 id="æ”¹å˜æƒé™" tabindex="-1"><a class="header-anchor" href="#æ”¹å˜æƒé™"><span>æ”¹å˜æƒé™</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">chown</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -R</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root:root</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $LFS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/{usr,lib,var,etc,bin,sbin,tools}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">case</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> $(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">uname</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#E06C75;"> x86_64</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">chown</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -R</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root:root</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $LFS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/lib64</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ;;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">esac</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä¸æ­£åœ¨è¿è¡Œçš„å†…æ ¸ä¹‹é—´å»ºç«‹ä¸€äº›é€šä¿¡æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#ä¸æ­£åœ¨è¿è¡Œçš„å†…æ ¸ä¹‹é—´å»ºç«‹ä¸€äº›é€šä¿¡æœºåˆ¶"><span>ä¸æ­£åœ¨è¿è¡Œçš„å†…æ ¸ä¹‹é—´å»ºç«‹ä¸€äº›é€šä¿¡æœºåˆ¶</span></a></h3><p>å†…æ ¸å¯¹å¤–æä¾›äº†ä¸€äº›æ–‡ä»¶ç³»ç»Ÿï¼Œä»¥ä¾¿è‡ªå·±å’Œç”¨æˆ·ç©ºé—´è¿›è¡Œé€šä¿¡ã€‚å®ƒä»¬æ˜¯è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶ä¸å ç”¨ç£ç›˜ç©ºé—´ï¼Œå…¶å†…å®¹ä¿ç•™åœ¨å†…å­˜ä¸­ã€‚</p><h4 id="é¦–å…ˆåˆ›å»ºè¿™äº›æ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ç‚¹" tabindex="-1"><a class="header-anchor" href="#é¦–å…ˆåˆ›å»ºè¿™äº›æ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ç‚¹"><span>é¦–å…ˆåˆ›å»ºè¿™äº›æ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ç‚¹</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>mkdir -pv $LFS/{dev,proc,sys,run}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ­£å¸¸çš„å¼•å¯¼è¿‡ç¨‹ä¸­ï¼Œå†…æ ¸è‡ªåŠ¨æŒ‚è½½ <code>devtmpfs</code> åˆ° <code>/dev</code>ï¼Œå¹¶å…è®¸åœ¨è®¾å¤‡è¢«å‘ç°æˆ–è®¿é—®æ—¶åŠ¨æ€åœ°åˆ›å»ºè®¾å¤‡èŠ‚ç‚¹ã€‚è®¾å¤‡èŠ‚ç‚¹é€šå¸¸ç”±å†…æ ¸å’Œ Udev åœ¨ç³»ç»Ÿå¼•å¯¼æ—¶åˆ›å»ºã€‚ç„¶è€Œï¼Œæˆ‘ä»¬çš„æ–°ç³»ç»Ÿè¿˜æ²¡æœ‰ Udevï¼Œä¹Ÿæ²¡æœ‰ç»è¿‡å¼•å¯¼è¿‡ç¨‹ï¼Œå› æ­¤å¿…é¡»æ‰‹å·¥æŒ‚è½½å’Œå¡«å…… <code>/dev</code>ã€‚è¿™å¯ä»¥é€šè¿‡ç»‘å®šæŒ‚è½½å®¿ä¸»ç³»ç»Ÿçš„ <code>/dev</code> ç›®å½•æ¥å®ç°ã€‚ç»‘å®šæŒ‚è½½æ˜¯ä¸€ç§ç‰¹æ®ŠæŒ‚è½½ç±»å‹ï¼Œå®ƒå…è®¸åœ¨å¦å¤–çš„ä½ç½®åˆ›å»ºæŸä¸ªç›®å½•æˆ–æŒ‚è½½ç‚¹çš„æ˜ åƒã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œç»‘å®šæŒ‚è½½ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>mount -v --bind /dev $LFS/dev</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="æŒ‚è½½å…¶ä½™çš„è™šæ‹Ÿå†…æ ¸æ–‡ä»¶ç³»ç»Ÿ" tabindex="-1"><a class="header-anchor" href="#æŒ‚è½½å…¶ä½™çš„è™šæ‹Ÿå†…æ ¸æ–‡ä»¶ç³»ç»Ÿ"><span>æŒ‚è½½å…¶ä½™çš„è™šæ‹Ÿå†…æ ¸æ–‡ä»¶ç³»ç»Ÿ</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>mount -v --bind /dev/pts $LFS/dev/pts</span></span>
<span class="line"><span>mount -vt proc proc $LFS/proc</span></span>
<span class="line"><span>mount -vt sysfs sysfs $LFS/sys</span></span>
<span class="line"><span>mount -vt tmpfs tmpfs $LFS/run</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨æŸäº›å®¿ä¸»ç³»ç»Ÿä¸Šï¼Œ<code>/dev/shm</code> æ˜¯ä¸€ä¸ªæŒ‡å‘ <code>/run/shm</code> çš„ç¬¦å·é“¾æ¥ã€‚æˆ‘ä»¬å·²ç»åœ¨ /run ä¸‹æŒ‚è½½äº† tmpfs æ–‡ä»¶ç³»ç»Ÿï¼Œå› æ­¤åœ¨è¿™é‡Œåªéœ€è¦åˆ›å»ºä¸€ä¸ªç›®å½•ã€‚</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>if [ -h $LFS/dev/shm ]; then</span></span>
<span class="line"><span> mkdir -pv $LFS/$(readlink $LFS/dev/shm)</span></span>
<span class="line"><span>fi</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è¿›å…¥chroot" tabindex="-1"><a class="header-anchor" href="#è¿›å…¥chroot"><span>è¿›å…¥chroot</span></a></h3><h4 id="è¿è¡Œå‘½ä»¤è¿›å…¥root" tabindex="-1"><a class="header-anchor" href="#è¿è¡Œå‘½ä»¤è¿›å…¥root"><span>è¿è¡Œå‘½ä»¤è¿›å…¥root</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">chroot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$LFS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/bin/env</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> HOME=/root</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> TERM=&quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$TERM</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PS1=&#39;(lfs chroot) \u:\w\$ &#39;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PATH=/usr/bin:/usr/sbin</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /bin/bash</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --login</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ä¼ é€’</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> é€‰é¡¹ç»™</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> env</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å‘½ä»¤ï¼Œå¯ä»¥æ¸…é™¤</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> chroot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ç¯å¢ƒä¸­çš„æ‰€æœ‰ç¯å¢ƒå˜é‡</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åˆ›å»ºä¸€äº›ä½äºæ ¹ç›®å½•ä¸­çš„ç›®å½•" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºä¸€äº›ä½äºæ ¹ç›®å½•ä¸­çš„ç›®å½•"><span>åˆ›å»ºä¸€äº›ä½äºæ ¹ç›®å½•ä¸­çš„ç›®å½•</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -pv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /{boot,home,mnt,opt,srv}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -pv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/{opt,sysconfig}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -pv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /lib/firmware</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -pv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /media/{floppy,cdrom}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -pv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/{,local/}{include,src}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -pv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/local/{bin,lib,sbin}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -pv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/{,local/}share/{color,dict,doc,info,locale,man}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -pv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/{,local/}share/{misc,terminfo,zoneinfo}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -pv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/{,local/}share/man/man{1..8}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -pv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /var/{cache,local,log,mail,opt,spool}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -pv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /var/lib/{color,misc,locate}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ln</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -sfv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /run</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /var/run</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ln</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -sfv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /run/lock</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /var/lock</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -dv</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0750</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /root</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -dv</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1777</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /tmp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /var/tmp</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>LFè§„å®šçš„ç›®å½•ç»“æ„ <a href="https://refspecs.linuxfoundation.org/fhs.shtml" target="_blank" rel="noopener noreferrer">https://refspecs.linuxfoundation.org/fhs.shtml</a></p><h4 id="åˆ›å»ºå¿…è¦çš„æ–‡ä»¶å’Œç¬¦å·é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºå¿…è¦çš„æ–‡ä»¶å’Œç¬¦å·é“¾æ¥"><span>åˆ›å»ºå¿…è¦çš„æ–‡ä»¶å’Œç¬¦å·é“¾æ¥</span></a></h4><h5 id="etc-mtab" tabindex="-1"><a class="header-anchor" href="#etc-mtab"><span>/etc/mtab</span></a></h5><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ln</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -sv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /proc/self/mounts</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/mtab</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="etc-hosts" tabindex="-1"><a class="header-anchor" href="#etc-hosts"><span>/etc/hosts</span></a></h5><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/etc/hosts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;&lt; </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">127.0.0.1 localhost $(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hostname</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">::1 localhost</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="etc-passwd" tabindex="-1"><a class="header-anchor" href="#etc-passwd"><span>/etc/passwd</span></a></h5><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/etc/passwd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;&lt; </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&quot;EOF&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">root:x:0:0:root:/root:/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">bin:x:1:1:bin:/dev/null:/usr/bin/false</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">daemon:x:6:6:Daemon User:/dev/null:/usr/bin/false</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">messagebus:x:18:18:D-Bus Message Daemon User:/run/dbus:/usr/bin/false</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">systemd-journal-gateway:x:73:73:systemd Journal Gateway:/:/usr/bin/false</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">systemd-journal-remote:x:74:74:systemd Journal Remote:/:/usr/bin/false</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">systemd-journal-upload:x:75:75:systemd Journal Upload:/:/usr/bin/false</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">systemd-network:x:76:76:systemd Network Management:/:/usr/bin/false</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">systemd-resolve:x:77:77:systemd Resolver:/:/usr/bin/false</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">systemd-timesync:x:78:78:systemd Time Synchronization:/:/usr/bin/false</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">systemd-coredump:x:79:79:systemd Core Dumper:/:/usr/bin/false</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">uuidd:x:80:80:UUID Generation Daemon User:/dev/null:/usr/bin/false</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">systemd-oom:x:81:81:systemd Out Of Memory Daemon:/:/usr/bin/false</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nobody:x:65534:65534:Unprivileged User:/dev/null:/usr/bin/false</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="etc-group" tabindex="-1"><a class="header-anchor" href="#etc-group"><span>/etc/group</span></a></h5><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/etc/group</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;&lt; </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&quot;EOF&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">root:x:0:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">bin:x:1:daemon</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">sys:x:2:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">kmem:x:3:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">tape:x:4:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">tty:x:5:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">daemon:x:6:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">floppy:x:7:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">disk:x:8:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">lp:x:9:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">dialout:x:10:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">audio:x:11:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">video:x:12:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">utmp:x:13:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">usb:x:14:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">cdrom:x:15:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">adm:x:16:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">messagebus:x:18:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">systemd-journal:x:23:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">input:x:24:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">mail:x:34:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">kvm:x:61:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">systemd-journal-gateway:x:73:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">systemd-journal-remote:x:74:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">systemd-journal-upload:x:75:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">systemd-network:x:76:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">systemd-resolve:x:77:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">systemd-timesync:x:78:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">systemd-coredump:x:79:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">uuidd:x:80:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">systemd-oom:x:81:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">wheel:x:97:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">users:x:999:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nogroup:x:65534:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åˆ·æ–°ç¯å¢ƒå˜é‡" tabindex="-1"><a class="header-anchor" href="#åˆ·æ–°ç¯å¢ƒå˜é‡"><span>åˆ·æ–°ç¯å¢ƒå˜é‡</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">exec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/bin/bash</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --login</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="åˆå§‹åŒ–æ—¥å¿—æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#åˆå§‹åŒ–æ—¥å¿—æ–‡ä»¶"><span>åˆå§‹åŒ–æ—¥å¿—æ–‡ä»¶</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">touch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /var/log/{btmp,lastlog,faillog,wtmp}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">chgrp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> utmp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /var/log/lastlog</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">chmod</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -v</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 664</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /var/log/lastlog</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">chmod</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -v</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 600</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /var/log/btmp</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ„å»ºä¸´æ—¶å·¥å…·" tabindex="-1"><a class="header-anchor" href="#æ„å»ºä¸´æ—¶å·¥å…·"><span>æ„å»ºä¸´æ—¶å·¥å…·</span></a></h3><ul><li>Gettext è½¯ä»¶åŒ…åŒ…å«å›½é™…åŒ–å’Œæœ¬åœ°åŒ–å·¥å…·ï¼Œå®ƒä»¬å…è®¸ç¨‹åºåœ¨ç¼–è¯‘æ—¶åŠ å…¥ NLS (æœ¬åœ°è¯­è¨€æ”¯æŒ) åŠŸèƒ½ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿä»¥ç”¨æˆ·çš„æœ¬åœ°è¯­è¨€è¾“å‡ºæ¶ˆæ¯</li><li>Bison è½¯ä»¶åŒ…åŒ…å«è¯­æ³•åˆ†æå™¨ç”Ÿæˆå™¨ã€‚</li><li>Perl è½¯ä»¶åŒ…åŒ…å«å®ç”¨æŠ¥è¡¨æå–è¯­è¨€ã€‚</li><li>Python 3 è½¯ä»¶åŒ…åŒ…å« Python å¼€å‘ç¯å¢ƒã€‚å®ƒè¢«ç”¨äºé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œç¼–å†™è„šæœ¬ï¼Œä¸ºå¤§å‹ç¨‹åºå»ºç«‹åŸå‹ï¼Œæˆ–è€…å¼€å‘å®Œæ•´çš„åº”ç”¨ã€‚</li><li>Texinfo è½¯ä»¶åŒ…åŒ…å«é˜…è¯»ã€ç¼–å†™å’Œè½¬æ¢ info é¡µé¢çš„ç¨‹åºã€‚</li><li>Util-linux è½¯ä»¶åŒ…åŒ…å«ä¸€äº›å·¥å…·ç¨‹åºã€‚</li></ul><h3 id="å®‰è£…åŸºæœ¬ç³»ç»Ÿè½¯ä»¶" tabindex="-1"><a class="header-anchor" href="#å®‰è£…åŸºæœ¬ç³»ç»Ÿè½¯ä»¶"><span>å®‰è£…åŸºæœ¬ç³»ç»Ÿè½¯ä»¶</span></a></h3><p><a href="https://lfs.xry111.site/zh_CN/11.2-systemd/chapter08/chapter08.html" target="_blank" rel="noopener noreferrer">https://lfs.xry111.site/zh_CN/11.2-systemd/chapter08/chapter08.html</a></p><ul><li>Man-pages è½¯ä»¶åŒ…åŒ…å« 2,200 å¤šä¸ª man é¡µé¢ã€‚</li><li>Iana-Etc è½¯ä»¶åŒ…åŒ…å«ç½‘ç»œæœåŠ¡å’Œåè®®çš„æ•°æ®ã€‚</li><li>Glibc è½¯ä»¶åŒ…åŒ…å«ä¸»è¦çš„ Cè¯­è¨€åº“ã€‚å®ƒæä¾›ç”¨äºåˆ†é…å†…å­˜ã€æ£€ç´¢ç›®å½•ã€æ‰“å¼€å’Œå…³é—­æ–‡ä»¶ã€è¯»å†™æ–‡ä»¶ã€å­—ç¬¦ä¸²å¤„ç†ã€æ¨¡å¼åŒ¹é…ã€ç®—æœ¯ç­‰ç”¨é€”çš„åŸºæœ¬å­ç¨‹åºã€‚</li><li>Zlib è½¯ä»¶åŒ…åŒ…å«ä¸€äº›ç¨‹åºä½¿ç”¨çš„å‹ç¼©å’Œè§£å‹ç¼©å­ç¨‹åºã€‚</li><li>Bzip2 è½¯ä»¶åŒ…åŒ…å«ç”¨äºå‹ç¼©å’Œè§£å‹ç¼©æ–‡ä»¶çš„ç¨‹åºã€‚ä½¿ç”¨ <strong>bzip2</strong> å‹ç¼©æ–‡æœ¬æ–‡ä»¶å¯ä»¥è·å¾—æ¯”ä¼ ç»Ÿçš„ <strong>gzip</strong> ä¼˜ç§€è®¸å¤šçš„å‹ç¼©æ¯”ã€‚</li><li>Xz è½¯ä»¶åŒ…åŒ…å«æ–‡ä»¶å‹ç¼©å’Œè§£å‹ç¼©å·¥å…·ï¼Œå®ƒèƒ½å¤Ÿå¤„ç† lzma å’Œæ–°çš„ xz å‹ç¼©æ–‡ä»¶æ ¼å¼ã€‚ä½¿ç”¨ <strong>xz</strong> å‹ç¼©æ–‡æœ¬æ–‡ä»¶ï¼Œå¯ä»¥å¾—åˆ°æ¯”ä¼ ç»Ÿçš„ <strong>gzip</strong> æˆ– <strong>bzip2</strong> æ›´å¥½çš„å‹ç¼©æ¯”ã€‚</li><li>Zstandard æ˜¯ä¸€ç§å®æ—¶å‹ç¼©ç®—æ³•ï¼Œæä¾›äº†è¾ƒé«˜çš„å‹ç¼©æ¯”ã€‚å®ƒå…·æœ‰å¾ˆå®½çš„å‹ç¼©æ¯”/é€Ÿåº¦æƒè¡¡èŒƒå›´ï¼ŒåŒæ—¶æ”¯æŒå…·æœ‰éå¸¸å¿«é€Ÿçš„è§£å‹ç¼©ã€‚</li><li>File è½¯ä»¶åŒ…åŒ…å«ç”¨äºç¡®å®šç»™å®šæ–‡ä»¶ç±»å‹çš„å·¥å…·ã€‚</li><li>Readline è½¯ä»¶åŒ…åŒ…å«ä¸€äº›æä¾›å‘½ä»¤è¡Œç¼–è¾‘å’Œå†å²è®°å½•åŠŸèƒ½çš„åº“ã€‚</li><li>M4 è½¯ä»¶åŒ…åŒ…å«ä¸€ä¸ªå®å¤„ç†å™¨ã€‚</li><li>Bc è½¯ä»¶åŒ…åŒ…å«ä¸€ä¸ªä»»æ„ç²¾åº¦æ•°å€¼å¤„ç†è¯­è¨€ã€‚</li><li>Flex è½¯ä»¶åŒ…åŒ…å«ä¸€ä¸ªå·¥å…·ï¼Œç”¨äºç”Ÿæˆåœ¨æ–‡æœ¬ä¸­è¯†åˆ«æ¨¡å¼çš„ç¨‹åºã€‚</li><li>Tcl è½¯ä»¶åŒ…åŒ…å«å·¥å…·å‘½ä»¤è¯­è¨€ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯é çš„é€šç”¨è„šæœ¬è¯­è¨€ã€‚Except è½¯ä»¶åŒ…æ˜¯ç”¨ Tcl è¯­è¨€ç¼–å†™çš„.</li><li>Expect è½¯ä»¶åŒ…åŒ…å«é€šè¿‡è„šæœ¬æ§åˆ¶çš„å¯¹è¯ï¼Œè‡ªåŠ¨åŒ– <strong>telnet</strong>ï¼Œ<strong>ftp</strong>ï¼Œ<strong>passwd</strong>ï¼Œ<strong>fsck</strong>ï¼Œ<strong>rlogin</strong>ï¼Œä»¥åŠ <strong>tip</strong> ç­‰äº¤äº’åº”ç”¨çš„å·¥å…·ã€‚Expect å¯¹äºæµ‹è¯•è¿™ç±»ç¨‹åºä¹Ÿå¾ˆæœ‰ç”¨ï¼Œå®ƒç®€åŒ–äº†è¿™ç±»é€šè¿‡å…¶ä»–æ–¹å¼å¾ˆéš¾å®Œæˆçš„å·¥ä½œã€‚DejaGnu æ¡†æ¶æ˜¯ä½¿ç”¨ Expect ç¼–å†™çš„ã€‚</li><li>DejaGnu åŒ…å«ä½¿ç”¨ GNU å·¥å…·è¿è¡Œæµ‹è¯•å¥—ä»¶çš„æ¡†æ¶ã€‚å®ƒæ˜¯ç”¨expect ç¼–å†™çš„ï¼Œåè€…åˆä½¿ç”¨Tcl (å·¥å…·å‘½ä»¤è¯­è¨€)ã€‚</li><li>Binutils åŒ…å«æ±‡ç¼–å™¨ã€é“¾æ¥å™¨ä»¥åŠå…¶ä»–ç”¨äºå¤„ç†ç›®æ ‡æ–‡ä»¶çš„å·¥å…·ã€‚</li><li>GMP è½¯ä»¶åŒ…åŒ…å«æä¾›ä»»æ„ç²¾åº¦ç®—æœ¯å‡½æ•°çš„æ•°å­¦åº“ã€‚</li><li>MPFR è½¯ä»¶åŒ…åŒ…å«å¤šç²¾åº¦æ•°å­¦å‡½æ•°ã€‚</li><li>MPC è½¯ä»¶åŒ…åŒ…å«ä¸€ä¸ªä»»æ„é«˜ç²¾åº¦ï¼Œä¸”èˆå…¥æ­£ç¡®çš„å¤æ•°ç®—æœ¯åº“ã€‚</li><li>Attr è½¯ä»¶åŒ…åŒ…å«ç®¡ç†æ–‡ä»¶ç³»ç»Ÿå¯¹è±¡æ‰©å±•å±æ€§çš„å·¥å…·ã€‚</li><li>Acl è½¯ä»¶åŒ…åŒ…å«ç®¡ç†è®¿é—®æ§åˆ¶åˆ—è¡¨çš„å·¥å…·ï¼Œè®¿é—®æ§åˆ¶åˆ—è¡¨èƒ½å¤Ÿæ›´ç»†è‡´åœ°è‡ªç”±å®šä¹‰æ–‡ä»¶å’Œç›®å½•çš„è®¿é—®æƒé™ã€‚</li><li>ibcap è½¯ä»¶åŒ…ä¸º Linux å†…æ ¸æä¾›çš„ POSIX 1003.1e æƒèƒ½å­—å®ç°ç”¨æˆ·æ¥å£ã€‚è¿™äº›æƒèƒ½å­—æ˜¯ root ç”¨æˆ·çš„æœ€é«˜ç‰¹æƒåˆ†å‰²æˆçš„ä¸€ç»„ä¸åŒæƒé™ã€‚</li><li>Shadow è½¯ä»¶åŒ…åŒ…å«å®‰å…¨åœ°å¤„ç†å¯†ç çš„ç¨‹åºã€‚</li><li>GCC è½¯ä»¶åŒ…åŒ…å« GNU ç¼–è¯‘å™¨é›†åˆï¼Œå…¶ä¸­æœ‰ C å’Œ C++ ç¼–è¯‘å™¨ã€‚</li><li>pkg-config è½¯ä»¶åŒ…æä¾›ä¸€ä¸ªåœ¨è½¯ä»¶åŒ…å®‰è£…çš„é…ç½®å’Œç¼–è¯‘é˜¶æ®µï¼Œå‘æ„å»ºå·¥å…·ä¼ é€’å¤´æ–‡ä»¶å’Œ/æˆ–åº“æ–‡ä»¶è·¯å¾„çš„å·¥å…·ã€‚</li><li>Ncurses è½¯ä»¶åŒ…åŒ…å«ä½¿ç”¨æ—¶ä¸éœ€è€ƒè™‘ç»ˆç«¯ç‰¹æ€§çš„å­—ç¬¦å±å¹•å¤„ç†å‡½æ•°åº“ã€‚</li><li>Sed è½¯ä»¶åŒ…åŒ…å«ä¸€ä¸ªæµç¼–è¾‘å™¨ã€‚</li><li>Psmisc è½¯ä»¶åŒ…åŒ…å«æ˜¾ç¤ºæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯çš„ç¨‹åºã€‚</li><li>Gettext è½¯ä»¶åŒ…åŒ…å«å›½é™…åŒ–å’Œæœ¬åœ°åŒ–å·¥å…·ï¼Œå®ƒä»¬å…è®¸ç¨‹åºåœ¨ç¼–è¯‘æ—¶åŠ å…¥ NLS (æœ¬åœ°è¯­è¨€æ”¯æŒ) åŠŸèƒ½ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿä»¥ç”¨æˆ·çš„æœ¬åœ°è¯­è¨€è¾“å‡ºæ¶ˆæ¯ã€‚</li><li>Bison è½¯ä»¶åŒ…åŒ…å«è¯­æ³•åˆ†æå™¨ç”Ÿæˆå™¨ã€‚</li><li>Grep è½¯ä»¶åŒ…åŒ…å«åœ¨æ–‡ä»¶å†…å®¹ä¸­è¿›è¡Œæœç´¢çš„ç¨‹åºã€‚</li><li>Bash è½¯ä»¶åŒ…åŒ…å« Bourne-Again SHellã€‚</li><li>Libtool è½¯ä»¶åŒ…åŒ…å« GNU é€šç”¨åº“æ”¯æŒè„šæœ¬ã€‚å®ƒåœ¨ä¸€ä¸ªä¸€è‡´ã€å¯ç§»æ¤çš„æ¥å£ä¸‹éšè—äº†ä½¿ç”¨å…±äº«åº“çš„å¤æ‚æ€§ã€‚</li><li>GDBM è½¯ä»¶åŒ…åŒ…å« GNU æ•°æ®åº“ç®¡ç†å™¨ã€‚å®ƒæ˜¯ä¸€ä¸ªä½¿ç”¨å¯æ‰©å±•æ•£åˆ—çš„æ•°æ®åº“å‡½æ•°åº“ï¼Œå·¥ä½œæ–¹æ³•å’Œæ ‡å‡† UNIX dbm ç±»ä¼¼ã€‚è¯¥åº“æä¾›ç”¨äºå­˜å‚¨é”®å€¼å¯¹ã€é€šè¿‡é”®æœç´¢å’Œè·å–æ•°æ®ï¼Œä»¥åŠåˆ é™¤é”®å’Œå¯¹åº”æ•°æ®çš„åŸè¯­ã€‚</li><li>Gperf æ ¹æ®ä¸€ç»„é”®å€¼ï¼Œç”Ÿæˆå®Œç¾æ•£åˆ—å‡½æ•°ã€‚</li><li>Expat è½¯ä»¶åŒ…åŒ…å«ç”¨äºè§£æ XML æ–‡ä»¶çš„é¢å‘æµçš„ C è¯­è¨€åº“ã€‚</li><li>Inetutils è½¯ä»¶åŒ…åŒ…å«åŸºæœ¬ç½‘ç»œç¨‹åºã€‚</li><li>Less è½¯ä»¶åŒ…åŒ…å«ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶æŸ¥çœ‹å™¨ã€‚</li><li>Perl è½¯ä»¶åŒ…åŒ…å«å®ç”¨æŠ¥è¡¨æå–è¯­è¨€ã€‚</li><li>XML::Parser æ¨¡å—æ˜¯ James Clark çš„ XML è§£æå™¨ Expat çš„ Perl æ¥å£ã€‚</li><li>Intltool æ˜¯ä¸€ä¸ªä»æºä»£ç æ–‡ä»¶ä¸­æå–å¯ç¿»è¯‘å­—ç¬¦ä¸²çš„å›½é™…åŒ–å·¥å…·</li><li>Autoconf è½¯ä»¶åŒ…åŒ…å«ç”Ÿæˆèƒ½è‡ªåŠ¨é…ç½®è½¯ä»¶åŒ…çš„ shell è„šæœ¬çš„ç¨‹åºã€‚</li><li>Automake è½¯ä»¶åŒ…åŒ…å«è‡ªåŠ¨ç”Ÿæˆ Makefileï¼Œä»¥ä¾¿å’Œ Autoconf ä¸€åŒä½¿ç”¨çš„ç¨‹åºã€‚</li><li>OpenSSL è½¯ä»¶åŒ…åŒ…å«å¯†ç å­¦ç›¸å…³çš„ç®¡ç†å·¥å…·å’Œåº“ã€‚å®ƒä»¬è¢«ç”¨äºå‘å…¶ä»–è½¯ä»¶åŒ…æä¾›å¯†ç å­¦åŠŸèƒ½ï¼Œä¾‹å¦‚ OpenSSHï¼Œç”µå­é‚®ä»¶ç¨‹åºå’Œ Web æµè§ˆå™¨ (ä»¥è®¿é—® HTTPS ç«™ç‚¹)ã€‚</li><li>Kmod è½¯ä»¶åŒ…åŒ…å«ç”¨äºåŠ è½½å†…æ ¸æ¨¡å—çš„åº“å’Œå·¥å…·ã€‚</li><li>Libelf æ˜¯ä¸€ä¸ªå¤„ç† ELF (å¯æ‰§è¡Œå’Œå¯é“¾æ¥æ ¼å¼) æ–‡ä»¶çš„åº“ã€‚</li><li>Libffi åº“æä¾›ä¸€ä¸ªå¯ç§»æ¤çš„é«˜çº§ç¼–ç¨‹æ¥å£ï¼Œç”¨äºå¤„ç†ä¸åŒè°ƒç”¨æƒ¯ä¾‹ã€‚è¿™å…è®¸ç¨‹åºåœ¨è¿è¡Œæ—¶è°ƒç”¨ä»»ä½•ç»™å®šäº†è°ƒç”¨æ¥å£çš„å‡½æ•°ã€‚</li><li>Python 3 è½¯ä»¶åŒ…åŒ…å« Python å¼€å‘ç¯å¢ƒã€‚å®ƒè¢«ç”¨äºé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œç¼–å†™è„šæœ¬ï¼Œä¸ºå¤§å‹ç¨‹åºå»ºç«‹åŸå‹ï¼Œæˆ–è€…å¼€å‘å®Œæ•´çš„åº”ç”¨ã€‚</li><li>Wheel æ˜¯ Python wheel è½¯ä»¶åŒ…æ ‡å‡†æ ¼å¼çš„å‚è€ƒå®ç°ã€‚</li><li>Ninja æ˜¯ä¸€ä¸ªæ³¨é‡é€Ÿåº¦çš„å°å‹æ„å»ºç³»ç»Ÿã€‚</li><li>Meson æ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç æ„å»ºç³»ç»Ÿï¼Œå®ƒçš„è®¾è®¡ä¿è¯äº†éå¸¸å¿«çš„æ‰§è¡Œé€Ÿåº¦ï¼Œå’Œå°½å¯èƒ½é«˜çš„ç”¨æˆ·å‹å¥½æ€§ã€‚</li><li>Coreutils è½¯ä»¶åŒ…åŒ…å«ç”¨äºæ˜¾ç¤ºå’Œè®¾å®šç³»ç»ŸåŸºæœ¬å±æ€§çš„å·¥å…·ã€‚</li><li>Check æ˜¯ä¸€ä¸ª C è¯­è¨€å•å…ƒæµ‹è¯•æ¡†æ¶ã€‚</li><li>Diffutils è½¯ä»¶åŒ…åŒ…å«æ˜¾ç¤ºæ–‡ä»¶æˆ–ç›®å½•ä¹‹é—´å·®å¼‚çš„ç¨‹åºã€‚</li><li>Gawk è½¯ä»¶åŒ…åŒ…å«æ“ä½œæ–‡æœ¬æ–‡ä»¶çš„ç¨‹åºã€‚</li><li>Findutils è½¯ä»¶åŒ…åŒ…å«ç”¨äºæŸ¥æ‰¾æ–‡ä»¶çš„ç¨‹åºã€‚è¿™äº›ç¨‹åºèƒ½å¤Ÿé€’å½’åœ°æœç´¢ç›®å½•æ ‘ï¼Œä»¥åŠåˆ›å»ºã€ç»´æŠ¤å’Œæœç´¢æ–‡ä»¶æ•°æ®åº“ (ä¸€èˆ¬æ¯”é€’å½’æœç´¢å¿«ï¼Œä½†åœ¨æ•°æ®åº“æœ€è¿‘æ²¡æœ‰æ›´æ–°æ—¶ä¸å¯é )ã€‚</li><li>Groff è½¯ä»¶åŒ…åŒ…å«å¤„ç†å’Œæ ¼å¼åŒ–æ–‡æœ¬çš„ç¨‹åºã€‚</li><li>GRUB è½¯ä»¶åŒ…åŒ…å« â€œå¤§ç»Ÿä¸€â€ (GRand Unified) å¯åŠ¨å¼•å¯¼å™¨ã€‚</li><li>Gzip è½¯ä»¶åŒ…åŒ…å«å‹ç¼©å’Œè§£å‹ç¼©æ–‡ä»¶çš„ç¨‹åºã€‚</li><li>IPRoute2 è½¯ä»¶åŒ…åŒ…å«åŸºäº IPv4 çš„åŸºæœ¬å’Œé«˜çº§ç½‘ç»œç¨‹åºã€‚</li><li>Kbd è½¯ä»¶åŒ…åŒ…å«æŒ‰é”®è¡¨æ–‡ä»¶ã€æ§åˆ¶å°å­—ä½“å’Œé”®ç›˜å·¥å…·ã€‚</li><li>Libpipeline è½¯ä»¶åŒ…åŒ…å«ç”¨äºçµæ´»ã€æ–¹ä¾¿åœ°å¤„ç†å­è¿›ç¨‹æµæ°´çº¿çš„åº“ã€‚</li><li>Make è½¯ä»¶åŒ…åŒ…å«ä¸€ä¸ªç¨‹åºï¼Œç”¨äºæ§åˆ¶ä»è½¯ä»¶åŒ…æºä»£ç ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶å’Œå…¶ä»–éæºä»£ç æ–‡ä»¶çš„è¿‡ç¨‹ã€‚</li><li>Patch è½¯ä»¶åŒ…åŒ…å«é€šè¿‡åº”ç”¨ â€œè¡¥ä¸â€ æ–‡ä»¶ï¼Œä¿®æ”¹æˆ–åˆ›å»ºæ–‡ä»¶çš„ç¨‹åºï¼Œè¡¥ä¸æ–‡ä»¶é€šå¸¸æ˜¯ <strong>diff</strong> ç¨‹åºåˆ›å»ºçš„ã€‚</li><li>Tar è½¯ä»¶åŒ…æä¾›åˆ›å»º tar å½’æ¡£æ–‡ä»¶ï¼Œä»¥åŠå¯¹å½’æ¡£æ–‡ä»¶è¿›è¡Œå…¶ä»–æ“ä½œçš„åŠŸèƒ½ã€‚Tar å¯ä»¥å¯¹å·²ç»åˆ›å»ºçš„å½’æ¡£æ–‡ä»¶è¿›è¡Œæå–æ–‡ä»¶ï¼Œå­˜å‚¨æ–°æ–‡ä»¶ï¼Œæ›´æ–°æ–‡ä»¶ï¼Œæˆ–è€…åˆ—å‡ºæ–‡ä»¶ç­‰æ“ä½œã€‚</li><li>Texinfo è½¯ä»¶åŒ…åŒ…å«é˜…è¯»ã€ç¼–å†™å’Œè½¬æ¢ info é¡µé¢çš„ç¨‹åºã€‚</li><li>Vim è½¯ä»¶åŒ…åŒ…å«å¼ºå¤§çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚</li><li>MarkupSafe æ˜¯ä¸€ä¸ªä¸º XML/HTML/XHTML æ ‡è®°è¯­è¨€å®ç°å­—ç¬¦ä¸²å®‰å…¨å¤„ç†çš„ Python æ¨¡å—ã€‚</li><li>Jinja2 æ˜¯ä¸€ä¸ªå®ç°äº†ç®€å•çš„ï¼ŒPython é£æ ¼çš„æ¨¡æ¿è¯­è¨€çš„ Python æ¨¡å—ã€‚</li><li>Systemd è½¯ä»¶åŒ…åŒ…å«æ§åˆ¶ç³»ç»Ÿå¼•å¯¼ã€è¿è¡Œå’Œå…³é—­çš„ç¨‹åºã€‚</li><li>D-bus æ˜¯ä¸€ä¸ªæ¶ˆæ¯æ€»çº¿ç³»ç»Ÿï¼Œå³åº”ç”¨ç¨‹åºä¹‹é—´äº’ç›¸é€šä¿¡çš„ä¸€ç§ç®€å•æ–¹å¼ã€‚D-Bus æä¾›ä¸€ä¸ªç³»ç»Ÿå®ˆæŠ¤è¿›ç¨‹ (è´Ÿè´£ â€œæ·»åŠ äº†æ–°ç¡¬ä»¶â€ æˆ– â€œæ‰“å°é˜Ÿåˆ—å‘ç”Ÿæ”¹å˜â€ ç­‰äº‹ä»¶)ï¼Œå¹¶å¯¹æ¯ä¸ªç”¨æˆ·ç™»å½•ä¼šè¯æä¾›ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ (è´Ÿè´£ä¸€èˆ¬ç”¨æˆ·ç¨‹åºçš„è¿›ç¨‹é—´é€šä¿¡)ã€‚å¦å¤–ï¼Œæ¶ˆæ¯æ€»çº¿è¢«æ„å»ºåœ¨ä¸€ä¸ªé€šç”¨çš„ä¸€å¯¹ä¸€æ¶ˆæ¯ä¼ é€’ç½‘ç»œä¸Šï¼Œå®ƒå¯ä»¥è¢«ä»»æ„ä¸¤ä¸ªç¨‹åºç”¨äºç›´æ¥é€šä¿¡ (ä¸éœ€é€šè¿‡æ¶ˆæ¯æ€»çº¿å®ˆæŠ¤è¿›ç¨‹)ã€‚</li><li>Man-DB è½¯ä»¶åŒ…åŒ…å«æŸ¥æ‰¾å’Œé˜…è¯» man é¡µé¢çš„ç¨‹åºã€‚</li><li>Procps-ng è½¯ä»¶åŒ…åŒ…å«ç›‘è§†è¿›ç¨‹çš„ç¨‹åºã€‚</li><li>Util-linux è½¯ä»¶åŒ…åŒ…å«è‹¥å¹²å·¥å…·ç¨‹åºã€‚è¿™äº›ç¨‹åºä¸­æœ‰å¤„ç†æ–‡ä»¶ç³»ç»Ÿã€ç»ˆç«¯ã€åˆ†åŒºå’Œæ¶ˆæ¯çš„å·¥å…·ã€‚</li><li>E2fsprogs è½¯ä»¶åŒ…åŒ…å«å¤„ç† <code>ext2</code>æ–‡ä»¶ç³»ç»Ÿçš„å·¥å…·ã€‚æ­¤å¤–å®ƒä¹Ÿæ”¯æŒ <code>ext3</code> å’Œ <code>ext4</code> æ—¥å¿—æ–‡ä»¶ç³»ç»Ÿã€‚</li><li></li></ul><h3 id="è½¯ä»¶åŒ…ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#è½¯ä»¶åŒ…ç®¡ç†"><span>è½¯ä»¶åŒ…ç®¡ç†</span></a></h3><p><a href="https://lfs.xry111.site/zh_CN/11.2-systemd/chapter08/pkgmgt.html" target="_blank" rel="noopener noreferrer">https://lfs.xry111.site/zh_CN/11.2-systemd/chapter08/pkgmgt.html</a></p><h2 id="ç³»ç»Ÿé…ç½®" tabindex="-1"><a class="header-anchor" href="#ç³»ç»Ÿé…ç½®"><span>ç³»ç»Ÿé…ç½®</span></a></h2><h3 id="ä¸€èˆ¬ç½‘ç»œé…ç½®" tabindex="-1"><a class="header-anchor" href="#ä¸€èˆ¬ç½‘ç»œé…ç½®"><span>ä¸€èˆ¬ç½‘ç»œé…ç½®</span></a></h3><p>ç½‘ç»œæ¥å£é…ç½®æ–‡ä»¶</p><ul><li>209 ç‰ˆæœ¬å¼€å§‹ï¼Œsystemd æä¾›ä¸€ä¸ªåä¸º <strong>systemd-networkd</strong> çš„ç½‘ç»œé…ç½®å®ˆæŠ¤è¿›ç¨‹ï¼Œå®ƒèƒ½å¤Ÿç”¨äºåŸºç¡€ç½‘ç»œé…ç½®ã€‚</li><li>213 ç‰ˆæœ¬èµ·ï¼Œå¯ä»¥ç”¨ <strong>systemd-resolved</strong> ä»£æ›¿é™æ€ <code>/etc/resolv.conf</code> æ–‡ä»¶å¤„ç†åŸŸåè§£æã€‚</li></ul><p><strong>systemd-networkd</strong> (ä»¥åŠ <strong>systemd-resolved</strong>) çš„é…ç½®æ–‡ä»¶å¯ä»¥æ”¾ç½®åœ¨ <code>/usr/lib/systemd/network</code> æˆ– <code>/etc/systemd/network</code> ä¸­ã€‚</p><p><code>/etc/systemd/network</code> ä¸­çš„é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§é«˜äº <code>/usr/lib/systemd/network</code> ä¸­çš„é…ç½®æ–‡ä»¶ã€‚æœ‰ä¸‰ç§ç±»å‹çš„é…ç½®æ–‡ä»¶ï¼š<code>.link</code>ã€<code>.netdev</code> å’Œ <code>.network</code> æ–‡ä»¶ã€‚</p><p>è¦è·å¾—å®ƒä»¬çš„è¯¦ç»†æè¿°å’Œå†…å®¹ç¤ºä¾‹ï¼Œå‚é˜… <code>systemd-link(5)</code>ã€<code>systemd-netdev(5)</code> å’Œ <code>systemd-network(5)</code> man æ‰‹å†Œé¡µé¢ã€‚</p><h4 id="ç½‘ç»œè®¾å¤‡å‘½å" tabindex="-1"><a class="header-anchor" href="#ç½‘ç»œè®¾å¤‡å‘½å"><span>ç½‘ç»œè®¾å¤‡å‘½å</span></a></h4><h5 id="è‡ªå®šä¹‰ç½‘ç»œæ¥å£å" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰ç½‘ç»œæ¥å£å"><span>è‡ªå®šä¹‰ç½‘ç»œæ¥å£å</span></a></h5><p>å¯ä»¥ä½¿ç”¨ä¸‰ç§ä¸åŒæ–¹å¼ï¼š</p><ul><li><p>è¦†ç›– udev æä¾›é»˜è®¤ç­–ç•¥çš„ .link æ–‡ä»¶ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>ln -s /dev/null /etc/systemd/network/99-default.link</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>æ‰‹åŠ¨åˆ›å»ºå‘½åæ¶æ„ï¼Œä¾‹å¦‚å°†ç½‘ç»œæ¥å£å‘½åä¸ºâ€œinternet0â€ã€â€œdmz0â€ æˆ– â€œlan0â€ã€‚ä¸ºæ­¤ï¼Œåœ¨ /etc/systemd/network ä¸­åˆ›å»º .link æ–‡ä»¶ï¼Œä¸ºæ‚¨çš„ä¸€ä¸ªã€ä¸€äº›æˆ–å…¨éƒ¨ç½‘ç»œæ¥å£ç›´æ¥é€‰æ‹©åç§°ï¼Œæˆ–é€‰æ‹©æ›´å¥½çš„å‘½åæ¶æ„ã€‚ä¾‹å¦‚ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cat &gt; /etc/systemd/network/10-ether0.link &lt;&lt; &quot;EOF&quot;</span></span>
<span class="line"><span>[Match]</span></span>
<span class="line"><span># å°† MAC åœ°å€æ›¿æ¢ä¸ºé€‚ç”¨äºæ‚¨çš„ç½‘ç»œè®¾å¤‡çš„å€¼</span></span>
<span class="line"><span>MACAddress=12:34:45:78:90:AB</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Link]</span></span>
<span class="line"><span>Name=ether0</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‚é˜… man é¡µé¢ systemd.link(5) è·å¾—æ›´å¤šä¿¡æ¯ã€‚</p></li><li><p>åœ¨ /boot/grub/grub.cfg çš„å†…æ ¸å‘½ä»¤è¡Œä¸­ä¼ é€’é€‰é¡¹ net.ifnames=0ã€‚</p></li></ul><h5 id="é™æ€-ip-é…ç½®" tabindex="-1"><a class="header-anchor" href="#é™æ€-ip-é…ç½®"><span>é™æ€ IP é…ç½®</span></a></h5><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/etc/systemd/network/10-eth-static.network</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;&lt; </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&quot;EOF&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[Match]</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Name=&lt;ç½‘ç»œè®¾å¤‡å&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[Network]</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Address=192.168.0.2/24</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Gateway=192.168.0.1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">DNS=192.168.0.1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Domains=&lt;æ‚¨çš„åŸŸå&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="dhcp-é…ç½®" tabindex="-1"><a class="header-anchor" href="#dhcp-é…ç½®"><span>DHCP é…ç½®</span></a></h5><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/etc/systemd/network/10-eth-dhcp.network</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;&lt; </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&quot;EOF&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[Match]</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Name=&lt;ç½‘ç»œè®¾å¤‡å&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[Network]</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">DHCP=ipv4</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[DHCP]</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">UseDomains=true</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åˆ›å»º-etc-resolv-conf" tabindex="-1"><a class="header-anchor" href="#åˆ›å»º-etc-resolv-conf"><span>åˆ›å»º/etc/resolv.conf</span></a></h4><h5 id="systemd-reslovedé…ç½®" tabindex="-1"><a class="header-anchor" href="#systemd-reslovedé…ç½®"><span>systemd-reslovedé…ç½®</span></a></h5><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@fedora ~]# ll /run/systemd/resolve/stub-resolv.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-rw-r--r--</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemd-resolve</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemd-resolve</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 920</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Feb</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 17:44</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /run/systemd/resolve/stub-resolv.conf</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@fedora ~]# ll /etc/resolv.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lrwxrwxrwx.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 39</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Feb</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 10:06</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/resolv.conf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> -&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">../run/systemd/resolve/stub-resolv.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é™æ€é…ç½®</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/etc/resolv.conf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;&lt; </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&quot;EOF&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"># Begin /etc/resolv.conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">domain &lt;æ‚¨çš„åŸŸå&gt;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nameserver &lt;æ‚¨çš„ä¸»è¦åŸŸåæœåŠ¡å™¨ IP åœ°å€&gt;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nameserver &lt;æ‚¨çš„æ¬¡è¦åŸŸåæœåŠ¡å™¨ IP åœ°å€&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"># End /etc/resolv.conf</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">å¯ä»¥çœç•¥</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> domain</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> è¯­å¥ï¼Œæˆ–ä½¿ç”¨ä¸€æ¡</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> search</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> è¯­å¥ä»£æ›¿å®ƒã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é…ç½®ç³»ç»Ÿä¸»æœºå" tabindex="-1"><a class="header-anchor" href="#é…ç½®ç³»ç»Ÿä¸»æœºå"><span>é…ç½®ç³»ç»Ÿä¸»æœºå</span></a></h4><p>åœ¨å¼•å¯¼è¿‡ç¨‹ä¸­ï¼Œ<code>/etc/hostname</code> è¢«ç”¨äºè®¾å®šç³»ç»Ÿä¸»æœºåã€‚</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;&lt;lfs&gt;&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/etc/hostname</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="è‡ªå®šä¹‰-etc-hosts-æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰-etc-hosts-æ–‡ä»¶"><span>è‡ªå®šä¹‰/etc/hosts æ–‡ä»¶</span></a></h4><p>é€‰æ‹©ä¸€ä¸ªå…¨é™å®šåŸŸå (FQDN)ï¼Œå’Œå¯èƒ½çš„åˆ«åï¼Œä»¥ä¾› <code>/etc/hosts</code>æ–‡ä»¶ä½¿ç”¨ã€‚å¦‚æœä½¿ç”¨é™æ€ IP åœ°å€ï¼Œæ‚¨è¿˜éœ€è¦ç¡®å®šè¦ä½¿ç”¨çš„ IP åœ°å€ã€‚hosts æ–‡ä»¶æ¡ç›®çš„è¯­æ³•æ˜¯ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>IP_åœ°å€ ä¸»æœºå.åŸŸå åˆ«å</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>é™¤éè¯¥è®¡ç®—æœºå¯ä»¥ä» Internet è®¿é—® (å³æ‹¥æœ‰ä¸€ä¸ªæ³¨å†ŒåŸŸåï¼Œå¹¶åˆ†é…äº†ä¸€ä¸ªæœ‰æ•ˆçš„ IP åœ°å€æ®µ â€”â€” å¤šæ•°ç”¨æˆ·æ²¡æœ‰åˆ†é…æœ‰æ•ˆIP)ï¼Œç¡®è®¤ä½¿ç”¨çš„ IP åœ°å€å±äºç§ç½‘ IP èŒƒå›´ã€‚æœ‰æ•ˆçš„èŒƒå›´æ˜¯ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>ç§ç½‘åœ°å€èŒƒå›´ å…¬å…±å‰ç¼€é•¿åº¦</span></span>
<span class="line"><span>10.0.0.1 - 10.255.255.254 8</span></span>
<span class="line"><span>172.x.0.1 - 172.x.255.254 16</span></span>
<span class="line"><span>192.168.y.1 - 192.168.y.254 24</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>x å¯ä»¥æ˜¯ 16-31 ä¹‹é—´çš„ä»»ä½•æ•°å­—ã€‚y å¯ä»¥æ˜¯ 0-255 ä¹‹é—´çš„ä»»ä½•æ•°å­—ã€‚</p><p>æœ‰æ•ˆçš„ç§ç½‘ IP åœ°å€çš„ä¸€ä¸ªä¾‹å­æ˜¯ 192.168.1.1ã€‚ä¸ä¹‹å¯¹åº”çš„ FQDN å¯ä»¥æ˜¯ lfs.example.orgã€‚</p><p>å³ä½¿æ²¡æœ‰ç½‘å¡ï¼Œä¹Ÿè¦æä¾›ä¸€ä¸ªæœ‰æ•ˆçš„ FQDNã€‚æŸäº›ç¨‹åºï¼Œå¦‚ MTAï¼ˆ<strong>Mail Transfer Agent</strong>ï¼‰ï¼Œéœ€è¦å®ƒæ‰èƒ½æ­£å¸¸å·¥ä½œã€‚</p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåˆ›å»º <code>/etc/hosts</code> æ–‡ä»¶ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cat &gt; /etc/hosts &lt;&lt; &quot;EOF&quot;</span></span>
<span class="line"><span># Begin /etc/hosts</span></span>
<span class="line"><span></span></span>
<span class="line"><span>127.0.0.1 localhost.localdomain localhost</span></span>
<span class="line"><span>127.0.1.1 &lt;FQDN&gt; &lt;HOSTNAME&gt;</span></span>
<span class="line"><span>&lt;192.168.0.2&gt; &lt;FQDN&gt; &lt;HOSTNAME&gt; [alias1] [alias2] ...</span></span>
<span class="line"><span>::1 localhost ip6-localhost ip6-loopback</span></span>
<span class="line"><span>ff02::1 ip6-allnodes</span></span>
<span class="line"><span>ff02::2 ip6-allrouters</span></span>
<span class="line"><span></span></span>
<span class="line"><span># End /etc/hosts</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä¸­ <em><code>&lt;192.168.0.2&gt;</code></em>ï¼Œ<em><code>&lt;FQDN&gt;</code></em>ï¼Œä»¥åŠ*<code>&lt;ä¸»æœºå&gt;</code>* çš„å€¼éœ€è¦ä¸ºç‰¹å®šä½¿ç”¨ç¯å¢ƒå’Œéœ€æ±‚è¿›è¡Œä¿®æ”¹ (å¦‚æœç³»ç»Ÿæˆ–ç½‘ç»œç®¡ç†å‘˜åˆ†é…äº† IP åœ°å€ï¼Œä¸”æœ¬æœºå°†è¢«è¿æ¥åˆ°ç°æœ‰çš„ç½‘ç»œä¸­)ã€‚å¯ä»¥ç•¥å»å¯é€‰çš„åˆ«å (alias)ï¼Œå¦‚æœä½¿ç”¨æ”¯æŒ DHCPæˆ–è€… IPv6 è‡ªåŠ¨é…ç½®çš„è¿æ¥ï¼Œåˆ™åŒ…å« <em><code>&lt;192.168.0.2&gt;</code></em> çš„ä¸€è¡Œä¹Ÿå¯ä»¥çœç•¥ã€‚</p><p>::1 æ˜¯ 127.0.0.1 åœ¨ IPv6 ä¸­çš„å¯¹åº”ï¼Œå³ IPv6 å›ç¯æ¥å£ã€‚</p><h3 id="è®¾å¤‡å’Œæ¨¡å—ç®¡ç†æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#è®¾å¤‡å’Œæ¨¡å—ç®¡ç†æ¦‚è¿°"><span>è®¾å¤‡å’Œæ¨¡å—ç®¡ç†æ¦‚è¿°</span></a></h3><h4 id="udevçš„å®ç°" tabindex="-1"><a class="header-anchor" href="#udevçš„å®ç°"><span>Udevçš„å®ç°</span></a></h4><h5 id="sysfs" tabindex="-1"><a class="header-anchor" href="#sysfs"><span>Sysfs</span></a></h5><p>æœ‰äº›è¯»è€…å¯èƒ½å¥½å¥‡ï¼Œ<code>sysfs</code> æ˜¯å¦‚ä½•çŸ¥é“ç³»ç»Ÿä¸­å­˜åœ¨å“ªäº›è®¾å¤‡ï¼Œä»¥åŠåº”è¯¥ä¸ºå®ƒä»¬ä½¿ç”¨ä»€ä¹ˆè®¾å¤‡å·çš„ã€‚ç­”æ¡ˆæ˜¯ï¼Œé‚£äº›ç¼–è¯‘åˆ°å†…æ ¸ä¸­çš„é©±åŠ¨ç¨‹åºåœ¨å®ƒä»¬çš„å¯¹è±¡è¢«å†…æ ¸æ£€æµ‹åˆ°æ—¶ï¼Œç›´æ¥å°†å®ƒä»¬æ³¨å†Œåˆ° <code>sysfs</code> (å†…éƒ¨çš„ devtmpfs)ã€‚å¯¹äºé‚£äº›è¢«ç¼–è¯‘ä¸ºæ¨¡å—çš„é©±åŠ¨ç¨‹åºï¼Œæ³¨å†Œè¿‡ç¨‹åœ¨æ¨¡å—åŠ è½½æ—¶è¿›è¡Œã€‚åªè¦ <code>sysfs</code> æ–‡ä»¶ç³»ç»Ÿè¢«æŒ‚è½½å¥½ (ä½äº /sys)ï¼Œç”¨æˆ·ç©ºé—´ç¨‹åºå³å¯ä½¿ç”¨é©±åŠ¨ç¨‹åºæ³¨å†Œåœ¨ <code>sysfs</code> ä¸­çš„æ•°æ®ï¼ŒUdev å°±èƒ½å¤Ÿä½¿ç”¨è¿™äº›æ•°æ®å¯¹è®¾å¤‡è¿›è¡Œå¤„ç†(åŒ…æ‹¬ä¿®æ”¹è®¾å¤‡èŠ‚ç‚¹)ã€‚</p><h5 id="è®¾å¤‡èŠ‚ç‚¹çš„åˆ›å»º" tabindex="-1"><a class="header-anchor" href="#è®¾å¤‡èŠ‚ç‚¹çš„åˆ›å»º"><span>è®¾å¤‡èŠ‚ç‚¹çš„åˆ›å»º</span></a></h5><p>å†…æ ¸é€šè¿‡ <code>devtmpfs</code> ç›´æ¥åˆ›å»ºè®¾å¤‡æ–‡ä»¶ï¼Œä»»ä½•å¸Œæœ›æ³¨å†Œè®¾å¤‡èŠ‚ç‚¹çš„é©±åŠ¨ç¨‹åºéƒ½è¦é€šè¿‡ <code>devtmpfs</code> (ç»è¿‡é©±åŠ¨ç¨‹åºæ ¸å¿ƒ) å®ç°ã€‚å½“ä¸€ä¸ª <code>devtmpfs</code> å®ä¾‹è¢«æŒ‚è½½åˆ° <code>/dev</code> æ—¶ï¼Œè®¾å¤‡èŠ‚ç‚¹å°†è¢«ä»¥å›ºå®šçš„åç§°ã€è®¿é—®æƒé™å’Œæ‰€æœ‰è€…é¦–æ¬¡åˆ›å»ºã€‚</p><p>å¾ˆå¿«ï¼Œå†…æ ¸ä¼šå‘ <strong>udevd</strong> å‘é€ä¸€ä¸ª ueventã€‚æ ¹æ® <code>/etc/udev/rules.d</code>ï¼Œ<code>/usr/lib/udev/rules.d</code>ï¼Œä»¥åŠ <code>/run/udev/rules.d</code> ç›®å½•ä¸­æ–‡ä»¶æŒ‡å®šçš„è§„åˆ™ï¼Œ<strong>udevd</strong> å°†ä¸ºè®¾å¤‡èŠ‚ç‚¹åˆ›å»ºé¢å¤–çš„ç¬¦å·é“¾æ¥ï¼Œä¿®æ”¹å…¶è®¿é—®æƒé™ï¼Œæ‰€æœ‰è€…ï¼Œæˆ–å±ç»„ï¼Œæˆ–è€…ä¿®æ”¹è¯¥å¯¹è±¡çš„ <strong>udevd</strong> æ•°æ®åº“æ¡ç›® (åç§°)ã€‚</p><p>ä»¥ä¸Šä¸‰ä¸ªç›®å½•ä¸­çš„è§„åˆ™éƒ½è¢«ç¼–å·ï¼Œä¸”è¿™ä¸‰ä¸ªç›®å½•çš„å†…å®¹å°†åˆå¹¶å¤„ç†ã€‚å¦‚æœ <strong>udevd</strong> æ‰¾ä¸åˆ°å®ƒæ­£åœ¨åˆ›å»ºçš„è®¾å¤‡å¯¹åº”çš„è§„åˆ™ï¼Œå®ƒå°†ä¼šæ²¿ç”¨ <code>devtmpfs</code> æœ€æ—©ä½¿ç”¨çš„é…ç½®ã€‚</p><h5 id="æ¨¡å—åŠ è½½" tabindex="-1"><a class="header-anchor" href="#æ¨¡å—åŠ è½½"><span>æ¨¡å—åŠ è½½</span></a></h5><p>ç¼–è¯‘ä¸ºå†…æ ¸æ¨¡å—çš„è®¾å¤‡é©±åŠ¨ç¨‹åºå¯èƒ½æœ‰å†…å»ºçš„åˆ«åã€‚åˆ«åå¯ä»¥é€šè¿‡ <strong>modinfo</strong> ç¨‹åºæŸ¥è¯¢ï¼Œå®ƒé€šå¸¸å’Œè¯¥æ¨¡å—æ”¯æŒçš„è®¾å¤‡çš„æ€»çº¿ç›¸å…³æ ‡è¯†ç¬¦æœ‰å…³ã€‚ä¾‹å¦‚ï¼Œ<em>snd-fm801</em> é©±åŠ¨ç¨‹åºæ”¯æŒå‚å•† ID ä¸º 0x1319ï¼Œè®¾å¤‡ ID ä¸º 0x0801 çš„ PCI è®¾å¤‡ï¼Œå…¶åˆ«åä¸ºâ€œpci:v00001319d00000801sv<em>sd</em>bc04sc01l*â€ã€‚å¯¹äºå¤šæ•°è®¾å¤‡ï¼Œæ€»çº¿é©±åŠ¨ç¨‹åºä¼šé€šè¿‡ <code>sysfs</code> å¯¼å‡ºåº”è¯¥å¤„ç†è¯¥è®¾å¤‡çš„é©±åŠ¨ç¨‹åºåˆ«åï¼Œä¾‹å¦‚ <code>/sys/bus/pci/devices/0000:00:0d.0/modalias</code> æ–‡ä»¶åº”è¯¥åŒ…å«å­—ç¬¦ä¸²â€œpci:v00001319d00000801sv00001319sd00001319bc04sc01i00â€ã€‚Udev é™„å¸¦çš„é»˜è®¤è§„åˆ™ä¼šå¯¼è‡´ <strong>udevd</strong> è°ƒç”¨ <strong>/sbin/modprobe</strong> æ—¶ä¼ é€’ <code>MODALIAS</code> uevent ç¯å¢ƒå˜é‡ (å®ƒçš„å€¼åº”è¯¥å’Œ sysfs ä¸­ <code>modalias</code> æ–‡ä»¶çš„å†…å®¹ç›¸åŒ)ï¼Œä»è€ŒåŠ è½½é‚£äº›åœ¨é€šé…ç¬¦æ‰©å±•ååˆ«åä¸è¿™ä¸ªå­—ç¬¦ä¸²åŒ¹é…çš„æ¨¡å—ã€‚</p><p>åœ¨æœ¬ä¾‹ä¸­ï¼Œè¿™æ„å‘³ç€é™¤äº† <em>snd-fm801</em> å¤–ï¼Œè¿‡æ—¶ (ä¸”ä¸å¸Œæœ›) çš„ <em>forte</em> å¦‚æœå¯ç”¨ï¼Œä¹Ÿä¼šè¢«åŠ è½½ã€‚ä¹‹åå°†ä»‹ç»é˜²æ­¢åŠ è½½ä¸å¸Œæœ›çš„é©±åŠ¨ç¨‹åºçš„æ–¹æ³•ã€‚</p><p>å†…æ ¸æœ¬èº«ä¹Ÿèƒ½å¤Ÿåœ¨éœ€è¦æ—¶ä¸ºç½‘ç»œåè®®ï¼Œæ–‡ä»¶ç³»ç»Ÿï¼Œä»¥åŠ NLS æ”¯æŒåŠ è½½æ¨¡å—ã€‚</p><h5 id="å¤„ç†çƒ­æ’æ‹”-åŠ¨æ€è®¾å¤‡" tabindex="-1"><a class="header-anchor" href="#å¤„ç†çƒ­æ’æ‹”-åŠ¨æ€è®¾å¤‡"><span>å¤„ç†çƒ­æ’æ‹”/åŠ¨æ€è®¾å¤‡</span></a></h5><p>å½“æ‚¨æ’å…¥ä¸€ä¸ªè®¾å¤‡ï¼Œä¾‹å¦‚é€šç”¨ä¸²è¡Œæ€»çº¿ (USB) MP3 æ’­æ”¾å™¨æ—¶ï¼Œå†…æ ¸èƒ½å¤Ÿå‘ç°è¯¥è®¾å¤‡ç°åœ¨å·²ç»è¢«è¿æ¥åˆ°ç³»ç»Ÿï¼Œå¹¶ç”Ÿæˆä¸€ä¸ª uevent äº‹ä»¶ã€‚ä¹‹å <strong>udevd</strong> åƒå‰é¢æè¿°çš„ä¸€æ ·ï¼Œå¤„ç†è¯¥ uevent äº‹ä»¶ã€‚</p><h4 id="åŠ è½½æ¨¡å—å’Œåˆ›å»ºè®¾å¤‡æ—¶çš„é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#åŠ è½½æ¨¡å—å’Œåˆ›å»ºè®¾å¤‡æ—¶çš„é—®é¢˜"><span>åŠ è½½æ¨¡å—å’Œåˆ›å»ºè®¾å¤‡æ—¶çš„é—®é¢˜</span></a></h4><h5 id="å†…æ ¸æ¨¡å—æ²¡æœ‰è‡ªåŠ¨åŠ è½½" tabindex="-1"><a class="header-anchor" href="#å†…æ ¸æ¨¡å—æ²¡æœ‰è‡ªåŠ¨åŠ è½½"><span>å†…æ ¸æ¨¡å—æ²¡æœ‰è‡ªåŠ¨åŠ è½½</span></a></h5><p>Udev åªåŠ è½½æ‹¥æœ‰æ€»çº¿ç‰¹å®šåˆ«åï¼Œä¸”æ€»çº¿é©±åŠ¨ç¨‹åºæ­£ç¡®åœ°å‘ <code>sysfs</code> å¯¼å‡ºäº†å¿…è¦åˆ«åçš„æ¨¡å—ã€‚å¦‚æœæƒ…å†µä¸æ˜¯è¿™æ ·ï¼Œæ‚¨åº”è¯¥è€ƒè™‘ç”¨å…¶ä»–æ–¹æ³•åŠ è½½æ¨¡å—ã€‚åœ¨ Linux-5.19.2 ä¸­ï¼Œå·²çŸ¥ Udev å¯ä»¥åŠ è½½ç¼–å†™æ­£ç¡®çš„ INPUTï¼ŒIDEï¼ŒPCIï¼ŒUSBï¼ŒSCSIï¼ŒSERIOï¼Œä»¥åŠ FireWire é©±åŠ¨ç¨‹åºã€‚</p><p>ä¸ºäº†ç¡®å®šæ‚¨éœ€è¦çš„è®¾å¤‡é©±åŠ¨ç¨‹åºæ˜¯å¦åŒ…å« Udev æ”¯æŒï¼Œä»¥æ¨¡å—åä¸ºå‚æ•°è¿è¡Œ <strong>modinfo</strong> å‘½ä»¤ã€‚ç„¶åè¯•ç€åœ¨ <code>/sys/bus</code> ä¸­æ‰¾åˆ°è®¾å¤‡å¯¹åº”çš„ç›®å½•ï¼Œå¹¶æ£€æŸ¥å…¶ä¸­æ˜¯å¦æœ‰ <code>modalias</code> æ–‡ä»¶ã€‚</p><p>å¦‚æœ <code>modalias</code> æ–‡ä»¶å­˜åœ¨äº <code>sysfs</code> ä¸­ï¼Œè¯´æ˜é©±åŠ¨ç¨‹åºæ”¯æŒè¯¥è®¾å¤‡ï¼Œå¹¶èƒ½å¤Ÿç›´æ¥å’Œè®¾å¤‡äº¤äº’ï¼Œä½†å´æ²¡æœ‰æ­£ç¡®çš„åˆ«åã€‚è¿™æ˜¯é©±åŠ¨ç¨‹åºçš„ bugï¼Œæ‚¨éœ€è¦ä¸é€šè¿‡ Udev ç›´æ¥åŠ è½½é©±åŠ¨ï¼Œå¹¶ç­‰å¾…è¿™ä¸ªé—®é¢˜æ—¥åè¢«è§£å†³ã€‚</p><p>å¦‚æœ <code>modalias</code> æ–‡ä»¶ä¸å­˜åœ¨äº <code>/sys/bus</code> ä¸‹çš„å¯¹åº”ç›®å½•ä¸­ï¼Œè¯´æ˜å†…æ ¸å¼€å‘è€…å°šæœªå¯¹è¯¥æ€»çº¿ç±»å‹å¢åŠ  modalias æ”¯æŒã€‚åœ¨ Linux-5.19.2 ä¸­ï¼ŒISA æ€»çº¿ä¸å—æ”¯æŒã€‚åªèƒ½ç­‰å¾…è¿™ä¸ªé—®é¢˜åœ¨æ—¥åè¢«è§£å†³ã€‚</p><p>Udev æ ¹æœ¬ä¸ä¼šå°è¯•åŠ è½½â€œåŒ…è£…å™¨â€ é©±åŠ¨ç¨‹åºï¼Œæ¯”å¦‚ <em>snd-pcm-oss</em> ç­‰ï¼Œæˆ– <em>loop</em> ç­‰éç¡¬ä»¶é©±åŠ¨ç¨‹åºã€‚</p><h5 id="å†…æ ¸æ¨¡å—æ²¡æœ‰è‡ªåŠ¨åŠ è½½-ä¸”-udev-ä¸å°è¯•åŠ è½½å®ƒ" tabindex="-1"><a class="header-anchor" href="#å†…æ ¸æ¨¡å—æ²¡æœ‰è‡ªåŠ¨åŠ è½½-ä¸”-udev-ä¸å°è¯•åŠ è½½å®ƒ"><span>å†…æ ¸æ¨¡å—æ²¡æœ‰è‡ªåŠ¨åŠ è½½ï¼Œä¸” Udev ä¸å°è¯•åŠ è½½å®ƒ</span></a></h5><p>å¦‚æœâ€œåŒ…è£…å™¨â€ä»…ä»…ç”¨äºå¢å¼ºå…¶ä»–æ¨¡å—çš„åŠŸèƒ½ (ä¾‹å¦‚ï¼Œ<em>snd-pcm-oss</em> å¢å¼º <em>snd-pcm</em> çš„åŠŸèƒ½ï¼Œä½¿ OSS åº”ç”¨ç¨‹åºèƒ½å¤Ÿä½¿ç”¨å£°å¡)ï¼Œéœ€è¦é…ç½® <strong>modprobe</strong>ï¼Œä½¿å…¶åœ¨ Udev åŠ è½½è¢«åŒ…è£…çš„æ¨¡å—æ—¶ï¼Œè‡ªåŠ¨åŠ è½½åŒ…è£…å™¨ã€‚ä¸ºæ­¤ï¼Œéœ€è¦å°†â€œsoftdepâ€è¡Œæ·»åŠ åˆ°å¯¹åº”çš„ <code>/etc/modprobe.d/*</code>&lt;filename&gt;<code>*.conf</code> ä¸­ã€‚ä¾‹å¦‚ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>softdep snd-pcm post: snd-pcm-oss</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ³¨æ„â€œsoftdepâ€å‘½ä»¤ä¹Ÿå…è®¸ <code>pre:</code> ä¾èµ–é¡¹ï¼Œæˆ–æ··åˆä½¿ç”¨ <code>pre:</code> å’Œ <code>post:</code> ä¾èµ–é¡¹ã€‚å‚é˜… <code>modprobe.d(5)</code> man æ‰‹å†Œé¡µé¢ï¼Œäº†è§£æ›´å¤šå…³äºâ€œsoftdepâ€è¯­æ³•å’ŒåŠŸèƒ½çš„ä¿¡æ¯ã€‚</p><h5 id="udev-åŠ è½½äº†ä¸å¸Œæœ›çš„æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#udev-åŠ è½½äº†ä¸å¸Œæœ›çš„æ¨¡å—"><span>Udev åŠ è½½äº†ä¸å¸Œæœ›çš„æ¨¡å—</span></a></h5><p>ä¸è¦æ„å»ºè¯¥æ¨¡å—ï¼Œæˆ–è€…åœ¨ <code>/etc/modprobe.d/blacklist.conf</code> æ–‡ä»¶ä¸­ç¦ç”¨å®ƒã€‚ä»¥ <em>forte</em> ä¸ºä¾‹ï¼Œä¸‹é¢ä¸€è¡Œç¦ç”¨äº†è¯¥æ¨¡å—ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>blacklist forte</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¢«ç¦ç”¨çš„æ¨¡å—ä»ç„¶å¯ä»¥é€šè¿‡ç›´æ¥æ‰§è¡Œ <strong>modprobe</strong> æ‰‹åŠ¨åŠ è½½ã€‚</p><h5 id="udev-åˆ›å»ºäº†é”™è¯¯çš„è®¾å¤‡æˆ–é”™è¯¯çš„ç¬¦å·é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#udev-åˆ›å»ºäº†é”™è¯¯çš„è®¾å¤‡æˆ–é”™è¯¯çš„ç¬¦å·é“¾æ¥"><span>Udev åˆ›å»ºäº†é”™è¯¯çš„è®¾å¤‡æˆ–é”™è¯¯çš„ç¬¦å·é“¾æ¥</span></a></h5><p>è¿™ä¸€èˆ¬æ˜¯ç”±äºä¸€æ¡è§„åˆ™æ„å¤–åœ°åŒ¹é…äº†æŸä¸ªè®¾å¤‡ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå†™å¾—ä¸å¥½çš„è§„åˆ™å¯èƒ½åŒæ—¶åŒ¹é…åˆ° SCSI ç£ç›˜ (æ­£ç¡®çš„) å’Œå¯¹åº”å‚å•†çš„ SCSI é€šç”¨è®¾å¤‡ (ä¸æ­£ç¡®çš„)ã€‚æ‰¾åˆ°å¼•èµ·é—®é¢˜çš„è§„åˆ™ï¼Œå¹¶é€šè¿‡ <strong>udevadm info</strong> çš„å¸®åŠ©ï¼Œå°†å®ƒè¿›ä¸€æ­¥ç»†åŒ–ã€‚</p><h5 id="udev-è§„åˆ™å·¥ä½œä¸å¯é " tabindex="-1"><a class="header-anchor" href="#udev-è§„åˆ™å·¥ä½œä¸å¯é "><span>Udev è§„åˆ™å·¥ä½œä¸å¯é </span></a></h5><p>è¿™å¯èƒ½æ˜¯å‰ä¸€ä¸ªé—®é¢˜çš„å¦ä¸€ä¸ªè¡¨ç°å½¢å¼ã€‚å¦‚æœä¸æ˜¯ï¼Œè€Œä¸”æ‚¨çš„è§„åˆ™ä½¿ç”¨äº† <code>sysfs</code> å±æ€§ï¼Œè¿™ä¸ªé—®é¢˜å¯èƒ½ç”±å†…æ ¸è®¡æ—¶é—®é¢˜å¼•å‘ï¼Œè¿™ç±»é—®é¢˜éœ€è¦åœ¨æ–°çš„å†…æ ¸ç‰ˆæœ¬ä¸­ä¿®å¤ã€‚ç›®å‰ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€æ¡è§„åˆ™ä»¥ç­‰å¾…è¢«ä½¿ç”¨çš„ <code>sysfs</code> å±æ€§ï¼Œå¹¶å°†å®ƒé™„åŠ åˆ° <code>/etc/udev/rules.d/10-wait-for-sysfs.rules</code> æ–‡ä»¶ä¸­ (å¦‚æœä¸å­˜åœ¨å°±åˆ›å»ºä¸€ä¸ªæ–‡ä»¶)ï¼Œç»•è¿‡è¿™ä¸ªé—®é¢˜ã€‚å¦‚æœæ‚¨é€šè¿‡è¿™ç§æ–¹æ³•è§£å†³äº†é—®é¢˜ï¼Œè¯·é€šçŸ¥ LFS å¼€å‘é‚®ä»¶åˆ—è¡¨ã€‚</p><h5 id="udev-æ²¡æœ‰åˆ›å»ºè®¾å¤‡" tabindex="-1"><a class="header-anchor" href="#udev-æ²¡æœ‰åˆ›å»ºè®¾å¤‡"><span>Udev æ²¡æœ‰åˆ›å»ºè®¾å¤‡</span></a></h5><p>ä»¥ä¸‹å†…å®¹å‡è®¾é©±åŠ¨ç¨‹åºå·²ç»è¢«ç¼–è¯‘åˆ°å†…æ ¸ä¸­ï¼Œæˆ–ä½œä¸ºæ¨¡å—è¢«åŠ è½½ï¼Œè€Œä¸”æ‚¨å·²ç»æ£€æŸ¥è¿‡å¹¶ç¡®è®¤ Udev æ²¡æœ‰åˆ›å»ºå‘½åé”™è¯¯çš„è®¾å¤‡ã€‚</p><p>å¦‚æœé©±åŠ¨ç¨‹åºæ²¡æœ‰å°†å®ƒçš„ä¿¡æ¯å¯¼å‡ºåˆ° <code>sysfs</code>ï¼ŒUdev å°±æ— æ³•è·å¾—åˆ›å»ºè®¾å¤‡èŠ‚ç‚¹å¿…éœ€çš„ä¿¡æ¯ã€‚è¿™ç§é—®é¢˜å¾€å¾€å‡ºç°åœ¨å†…æ ¸æºä»£ç æ ‘ä»¥å¤–çš„ç¬¬ä¸‰æ–¹é©±åŠ¨ç¨‹åºä¸­ã€‚è¿™æ—¶ï¼Œéœ€è¦åœ¨ <code>/usr/lib/udev/devices</code> ä¸­ä½¿ç”¨æ­£ç¡®çš„ä¸»è®¾å¤‡å·å’Œæ¬¡è®¾å¤‡å·ï¼Œåˆ›å»ºä¸€ä¸ªé™æ€è®¾å¤‡èŠ‚ç‚¹ (å‚è€ƒå†…æ ¸æ–‡æ¡£ä¸­çš„ <code>devices.txt</code> æˆ–ç¬¬ä¸‰æ–¹é©±åŠ¨å‚å•†æä¾›çš„æ–‡æ¡£)ï¼Œè¯¥é™æ€è®¾å¤‡èŠ‚ç‚¹å°†è¢«å¤åˆ¶åˆ° <code>/dev</code>ï¼Œ<strong>udev</strong> ä¼šè‡ªåŠ¨å®Œæˆå¤åˆ¶ã€‚</p><h5 id="é‡å¯åè®¾å¤‡å‘½åé¡ºåºéšæœºå˜åŒ–" tabindex="-1"><a class="header-anchor" href="#é‡å¯åè®¾å¤‡å‘½åé¡ºåºéšæœºå˜åŒ–"><span>é‡å¯åè®¾å¤‡å‘½åé¡ºåºéšæœºå˜åŒ–</span></a></h5><p>è¿™æ˜¯ç”±äº Udev ä»è®¾è®¡ä¸Šå°±æ˜¯å¹¶è¡ŒåŠ è½½æ¨¡å—çš„ï¼Œå› æ­¤æ— æ³•é¢„æµ‹åŠ è½½é¡ºåºã€‚è¿™ä¸ªé—®é¢˜æ°¸è¿œä¹Ÿä¸ä¼šè¢« â€œä¿®å¤â€ã€‚æ‚¨ä¸åº”è¯¥æŒ‡æœ›å†…æ ¸æä¾›ç¨³å®šçš„è®¾å¤‡å‘½åï¼Œè€Œæ˜¯åº”è¯¥åˆ›å»ºæ‚¨è‡ªå·±çš„è§„åˆ™ï¼Œä»¥æ ¹æ®è®¾å¤‡çš„ä¸€äº›ç¨³å®šå±æ€§ï¼Œä¾‹å¦‚è®¾å¤‡åºåˆ—å·æˆ– Udev å®‰è£…çš„ä¸€äº› *_id å·¥å…·çš„è¾“å‡ºï¼Œæ¥åˆ›å»ºå…·æœ‰ç¨³å®šåç§°çš„ç¬¦å·é“¾æ¥ã€‚</p><h3 id="ç®¡ç†è®¾å¤‡" tabindex="-1"><a class="header-anchor" href="#ç®¡ç†è®¾å¤‡"><span>ç®¡ç†è®¾å¤‡</span></a></h3><h4 id="å¤„ç†é‡å¤è®¾å¤‡" tabindex="-1"><a class="header-anchor" href="#å¤„ç†é‡å¤è®¾å¤‡"><span>å¤„ç†é‡å¤è®¾å¤‡</span></a></h4><p>é‚£äº›åŠŸèƒ½ç›¸åŒçš„è®¾å¤‡åœ¨ <code>/dev</code> ä¸­çš„é¡ºåºæ˜¯éšæœºçš„ã€‚</p><p>å¯¹äºæ‚¨çš„æ¯ä¸ªå¯èƒ½æœ‰è¿™ç±»é—®é¢˜çš„è®¾å¤‡ (å³ä½¿åœ¨æ‚¨å½“å‰ä½¿ç”¨çš„ Linux å‘è¡Œç‰ˆä¸Šå¹¶æ²¡æœ‰é—®é¢˜)ï¼Œæ‰¾åˆ° <code>/sys/class</code> æˆ– <code>/sys/block</code> ä¸­çš„å¯¹åº”ç›®å½•ã€‚å¯¹äºè§†é¢‘è®¾å¤‡ï¼Œç›®å½•å¯èƒ½æ˜¯ <code>/sys/class/video4linux/video*</code>X<code>*</code>ã€‚æ‰¾å‡ºèƒ½å¤Ÿå”¯ä¸€ç¡®è®¤è¯¥è®¾å¤‡çš„å±æ€§ (é€šå¸¸æ˜¯å‚å•†å’Œäº§å“ IDï¼Œæˆ–è€…åºåˆ—å·)ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>udevadm info -a -p /sys/class/video4linux/video0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç„¶åç¼–å†™åˆ›å»ºç¬¦å·é“¾æ¥çš„è§„åˆ™ï¼Œä¾‹å¦‚ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cat &gt; /etc/udev/rules.d/83-duplicate_devs.rules &lt;&lt; &quot;EOF&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># æ‘„åƒå¤´å’Œç”µè§†æ£’çš„æŒä¹…åŒ–ç¬¦å·é“¾æ¥</span></span>
<span class="line"><span>KERNEL==&quot;video*&quot;, ATTRS{idProduct}==&quot;1910&quot;, ATTRS{idVendor}==&quot;0d81&quot;, SYMLINK+=&quot;webcam&quot;</span></span>
<span class="line"><span>KERNEL==&quot;video*&quot;, ATTRS{device}==&quot;0x036f&quot;, ATTRS{vendor}==&quot;0x109e&quot;, SYMLINK+=&quot;tvtuner&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç»“æœæ˜¯ï¼Œ<code>/dev/video0</code> å’Œ <code>/dev/video1</code> ä»ç„¶ä¼šéšæœºæŒ‡å‘ç”µè§†æ£’å’Œæ‘„åƒå¤´ (å› æ­¤ä¸åº”ç›´æ¥ä½¿ç”¨å®ƒä»¬)ï¼Œä½†ç¬¦å·é“¾æ¥ <code>/dev/tvtuner</code> å’Œ <code>/dev/webcam</code> æ€»ä¼šæŒ‡å‘æ­£ç¡®è®¾å¤‡ã€‚</p><h3 id="é…ç½®ç³»ç»Ÿæ—¶é’Ÿ" tabindex="-1"><a class="header-anchor" href="#é…ç½®ç³»ç»Ÿæ—¶é’Ÿ"><span>é…ç½®ç³»ç»Ÿæ—¶é’Ÿ</span></a></h3><p>é…ç½® <strong>systemd-timedated</strong> ç³»ç»ŸæœåŠ¡ï¼Œå®ƒçš„ä½œç”¨æ˜¯é…ç½®ç³»ç»Ÿæ—¶é’Ÿå’Œæ—¶åŒºã€‚</p><p>å¦‚æœæ‚¨ä¸ç¡®å®šæ‚¨çš„ç¡¬ä»¶æ—¶é’Ÿæ˜¯å¦è®¾ç½®ä¸º UTCï¼Œè¿è¡Œ <strong><code>hwclock --localtime --show</code></strong> å‘½ä»¤ï¼Œå®ƒä¼šæ˜¾ç¤ºç¡¬ä»¶æ—¶é’Ÿç»™å‡ºçš„å½“å‰æ—¶é—´ã€‚å¦‚æœè¿™ä¸ªæ—¶é—´å’Œæ‚¨çš„æ‰‹è¡¨æ˜¾ç¤ºçš„ä¸€è‡´ï¼Œåˆ™è¯´æ˜ç¡¬ä»¶æ—¶é’Ÿè¢«è®¾å®šä¸ºæœ¬åœ°æ—¶é—´ã€‚ç›¸åï¼Œå¦‚æœ <strong>hwclock</strong> è¾“å‡ºçš„æ—¶é—´ä¸æ˜¯æœ¬åœ°æ—¶é—´ï¼Œåˆ™ç¡¬ä»¶æ—¶é’Ÿå¾ˆå¯èƒ½è¢«è®¾å®šä¸º UTC æ—¶é—´ã€‚æ ¹æ®æ‚¨çš„æ—¶åŒºï¼Œåœ¨ <strong>hwclock</strong> æ˜¾ç¤ºçš„æ—¶é—´ä¸ŠåŠ å‡å¯¹åº”çš„å°æ—¶æ•°ï¼Œè¿›è¡Œè¿›ä¸€æ­¥çš„éªŒè¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ç°åœ¨å¤„äºè«æ–¯ç§‘æ—¶åŒºï¼Œå³ GMT -0700ï¼Œåœ¨æœ¬åœ°æ—¶é—´ä¸ŠåŠ  7 å°æ—¶ï¼Œå†è¿›è¡Œæ¯”è¾ƒã€‚</p><p><strong>systemd-timedated</strong> è¯»å– <code>/etc/adjtime</code>ï¼Œå¹¶æ ¹æ®å…¶å†…å®¹å°†ç¡¬ä»¶æ—¶é’Ÿè®¾å®šä¸º UTC æˆ–æœ¬åœ°æ—¶é—´ã€‚</p><p>å¦‚æœæ‚¨çš„ç¡¬ä»¶æ—¶é’Ÿè®¾ç½®ä¸ºæœ¬åœ°æ—¶é—´ï¼Œä»¥ä¸‹åˆ—å†…å®¹åˆ›å»º <code>/etc/adjtime</code> æ–‡ä»¶ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cat &gt; /etc/adjtime &lt;&lt; &quot;EOF&quot;</span></span>
<span class="line"><span>0.0 0 0.0</span></span>
<span class="line"><span>0</span></span>
<span class="line"><span>LOCAL</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœ <code>/etc/adjtime</code> åœ¨åˆæ¬¡å¼•å¯¼æ—¶ä¸å­˜åœ¨ï¼Œ<strong>systemd-timedated</strong> ä¼šå‡è®¾ç¡¬ä»¶æ—¶é’Ÿä½¿ç”¨ UTCï¼Œå¹¶æ®æ­¤è°ƒæ•´è¯¥æ–‡ä»¶ã€‚</p><p>æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ <strong>timedatectl</strong> å·¥å…·å‘Šè¯‰ <strong>systemd-timedated</strong> æ‚¨çš„ç¡¬ä»¶æ—¶é’Ÿæ˜¯ UTC è¿˜æ˜¯æœ¬åœ°æ—¶é—´ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>timedatectl set-local-rtc 1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>timedatectl</strong> ä¹Ÿèƒ½ä¿®æ”¹ç³»ç»Ÿæ—¶é—´å’Œæ—¶åŒºã€‚</p><p>å¦‚æœè¦ä¿®æ”¹ç³»ç»Ÿæ—¶é—´ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>timedatectl set-time YYYY-MM-DD HH:MM:SS</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç¡¬ä»¶æ—¶é’Ÿä¹Ÿä¼šåŒæ—¶è¢«æ›´æ–°ã€‚</p><p>è¦ä¿®æ”¹å½“å‰æ—¶åŒºï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>timedatectl set-timezone TIMEZONE</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å¯ç”¨çš„æ—¶åŒºåˆ—è¡¨ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>timedatectl list-timezones</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="ç½‘ç»œæ—¶é’ŸåŒæ­¥" tabindex="-1"><a class="header-anchor" href="#ç½‘ç»œæ—¶é’ŸåŒæ­¥"><span>ç½‘ç»œæ—¶é’ŸåŒæ­¥</span></a></h4><p>ä»ç‰ˆæœ¬ 213 å¼€å§‹ï¼Œsystemd é™„å¸¦äº†ä¸€ä¸ªåä¸º <strong>systemd-timesyncd</strong> çš„å®ˆæŠ¤ç¨‹åºï¼Œå¯ä»¥ç”¨äºå°†ç³»ç»Ÿæ—¶é—´ä¸è¿œç¨‹ NTP æœåŠ¡å™¨åŒæ­¥ã€‚</p><p>è¯¥å®ˆæŠ¤ç¨‹åºæ²¡æœ‰è¢«è®¾è®¡ä¸ºæ›¿ä»£ç°æœ‰æˆç†Ÿçš„ NTP å®ˆæŠ¤ç¨‹åºï¼Œè€Œæ˜¯ä¸€ä¸ªä»…ä»…å®ç°äº† SNTP åè®®çš„å®¢æˆ·ç«¯ï¼Œå¯ä»¥ç”¨äºä¸€äº›ä¸å¤ªå¤æ‚çš„ä»»åŠ¡ï¼Œæˆ–æ˜¯èµ„æºç´§å¼ çš„ç³»ç»Ÿã€‚</p><p>ä» systemd ç‰ˆæœ¬ 216 å¼€å§‹ï¼Œ<strong>systemd-timesyncd</strong> å®ˆæŠ¤è¿›ç¨‹è¢«é»˜è®¤å¯ç”¨ã€‚å¦‚æœå¸Œæœ›ç¦ç”¨å®ƒï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>systemctl disable systemd-timesyncd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¯ä»¥åœ¨ <code>/etc/systemd/timesyncd.conf</code> ä¸­ä¿®æ”¹ <strong>systemd-timesyncd</strong> ä½¿ç”¨çš„æœåŠ¡å™¨ã€‚</p><p>æ³¨æ„ï¼Œå½“ç³»ç»Ÿæ—¶é’Ÿè®¾å®šä¸ºæœ¬åœ°æ—¶é—´æ—¶ï¼Œ<strong>systemd-timesyncd</strong> ä¸ä¼šæ›´æ–°ç¡¬ä»¶æ—¶é’Ÿã€‚</p><h3 id="é…ç½®-linux-æ§åˆ¶å°" tabindex="-1"><a class="header-anchor" href="#é…ç½®-linux-æ§åˆ¶å°"><span>é…ç½® Linux æ§åˆ¶å°</span></a></h3><p><strong>systemd-vconsole-setup</strong> æœåŠ¡ä» <code>/etc/vconsole.conf</code> æ–‡ä»¶ä¸­è¯»å–é…ç½®ä¿¡æ¯ã€‚å®ƒæ ¹æ®é…ç½®ç¡®å®šä½¿ç”¨çš„é”®æ˜ å°„å’Œæ§åˆ¶å°å­—ä½“ã€‚ä¸€äº›ä¸ç‰¹å®šè¯­è¨€ç›¸å…³çš„ HOWTO æ–‡æ¡£å¯ä»¥å¸®åŠ©æ‚¨è¿›è¡Œé…ç½®ï¼Œå‚é˜… <a href="http://www.tldp.org/HOWTO/HOWTO-INDEX/other-lang.html" target="_blank" rel="noopener noreferrer">http://www.tldp.org/HOWTO/HOWTO-INDEX/other-lang.html</a> ã€‚æµè§ˆ <strong>localectl list-keymaps</strong> è¾“å‡ºçš„å¯ç”¨æ§åˆ¶å°é”®æ˜ å°„åˆ—è¡¨ã€‚åœ¨ <code>/usr/share/consolefonts</code> ç›®å½•ä¸­å¯»æ‰¾å¯ç”¨çš„æ§åˆ¶å°å­—ä½“ã€‚</p><p><code>/etc/vconsole.conf</code> æ–‡ä»¶çš„æ¯ä¸€è¡Œéƒ½åº”è¯¥ç¬¦åˆæ ¼å¼ï¼šå˜é‡å=&quot;å€¼&quot;ï¼Œ</p><ul><li><p>KEYMAP</p><p>è¯¥å˜é‡æŒ‡å®šé”®ç›˜çš„é”®æ˜ å°„è¡¨ã€‚å¦‚æœæ²¡æœ‰è®¾å®šï¼Œé»˜è®¤ä¸º <code>us</code>ã€‚</p></li><li><p>KEYMAP_TOGGLE</p><p>è¯¥å˜é‡å¯ä»¥ç”¨äºé…ç½®ç¬¬äºŒåˆ‡æ¢é”®ç›˜æ˜ å°„ï¼Œæ²¡æœ‰é»˜è®¤è®¾å®šå€¼ã€‚</p></li><li><p>FONT</p><p>è¯¥å˜é‡æŒ‡å®šè™šæ‹Ÿæ§åˆ¶å°ä½¿ç”¨çš„å­—ä½“ã€‚</p></li><li><p>FONT_MAP</p><p>è¯¥å˜é‡æŒ‡å®šæ§åˆ¶å°å­—ä½“æ˜ å°„ã€‚</p></li><li><p>FONT_UNIMAP</p><p>è¯¥å˜é‡æŒ‡å®š Unicode å­—ä½“æ˜ å°„ã€‚</p></li></ul><p>ä¸‹é¢çš„ä¾‹å­å¯ä»¥ç”¨äºå¾·æ–‡é”®ç›˜å’Œæ§åˆ¶å°ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cat &gt; /etc/vconsole.conf &lt;&lt; &quot;EOF&quot;</span></span>
<span class="line"><span>KEYMAP=de-latin1</span></span>
<span class="line"><span>FONT=Lat2-Terminus16</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ç³»ç»Ÿè¿è¡Œæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <strong>localectl</strong> å·¥å…·ä¿®æ”¹ KEYMAP å˜é‡å€¼ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>localectl set-keymap MAP</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="æ³¨æ„" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„"><span>æ³¨æ„</span></a></h4><p>è¯·æ³¨æ„ <strong>localectl</strong> å‘½ä»¤åœ¨ chroot ç¯å¢ƒæ— æ³•å·¥ä½œã€‚åªæœ‰åœ¨ä½¿ç”¨ systemd å¼•å¯¼ LFS ç³»ç»Ÿåæ‰èƒ½ä½¿ç”¨å®ƒã€‚</p><p>ä¹Ÿå¯ä»¥é€šè¿‡æŒ‡å®š <strong>localectl</strong> å·¥å…·çš„å‚æ•°ï¼Œä¿®æ”¹ X11 é”®ç›˜å¸ƒå±€ï¼Œæ¨¡å‹ï¼Œå˜ä½“å’Œé€‰é¡¹è®¾ç½®ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>localectl set-x11-keymap å¸ƒå±€ [æ¨¡å‹] [å˜ä½“] [é€‰é¡¹]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¦‚æœéœ€è¦åˆ—å‡ºå¯ç”¨çš„ <strong>localectl set-x11-keymap</strong> å‚æ•°å€¼ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹åˆ—å‚æ•°è¿è¡Œ <strong>localectl</strong> å‘½ä»¤ï¼š</p><ul><li><p>list-x11-keymap-models</p><p>åˆ—å‡ºå·²çŸ¥çš„ X11 é”®ç›˜æ˜ å°„æ¨¡å‹ã€‚</p></li><li><p>list-x11-keymap-layouts</p><p>åˆ—å‡ºå·²çŸ¥çš„ X11 é”®ç›˜æ˜ å°„å¸ƒå±€ã€‚</p></li><li><p>list-x11-keymap-variants</p><p>åˆ—å‡ºå·²çŸ¥çš„ X11 é”®ç›˜æ˜ å°„å˜ä½“ã€‚</p></li><li><p>list-x11-keymap-options</p><p>åˆ—å‡ºå·²çŸ¥çš„ X11 é”®ç›˜æ˜ å°„é€‰é¡¹ã€‚</p></li></ul><h4 id="æ³¨æ„-1" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-1"><span>æ³¨æ„</span></a></h4><p>ä¸Šé¢ç»™å‡ºçš„å‚æ•°éƒ½éœ€è¦ BLFS ä¸­çš„ XKeyboard-Config è½¯ä»¶åŒ…ã€‚</p><h3 id="é…ç½®ç³»ç»Ÿ-locale" tabindex="-1"><a class="header-anchor" href="#é…ç½®ç³»ç»Ÿ-locale"><span>é…ç½®ç³»ç»Ÿ Locale</span></a></h3><p>ä¸‹é¢å°†åˆ›å»ºçš„ <code>/etc/locale.conf</code> è®¾å®šæœ¬åœ°è¯­è¨€æ”¯æŒéœ€è¦çš„è‹¥å¹²ç¯å¢ƒå˜é‡ï¼Œæ­£ç¡®è®¾å®šå®ƒä»¬å¯ä»¥å¸¦æ¥ä»¥ä¸‹å¥½å¤„ï¼š</p><ul><li>ç¨‹åºè¾“å‡ºè¢«ç¿»è¯‘æˆæœ¬åœ°è¯­è¨€</li><li>å­—ç¬¦è¢«æ­£ç¡®åˆ†ç±»ä¸ºå­—æ¯ã€æ•°å­—å’Œå…¶ä»–ç±»åˆ«ï¼Œè¿™å¯¹äºä½¿ <strong>bash</strong> æ­£ç¡®æ¥å—å‘½ä»¤è¡Œä¸­çš„é ASCII æœ¬åœ°éè‹±æ–‡å­—ç¬¦æ¥è¯´æ˜¯å¿…è¦çš„</li><li>æ ¹æ®æ‰€åœ¨åœ°åŒºæƒ¯ä¾‹æ’åºå­—æ¯</li><li>é€‚ç”¨äºæ‰€åœ¨åœ°åŒºçš„é»˜è®¤çº¸å¼ å°ºå¯¸</li><li>æ­£ç¡®æ ¼å¼åŒ–è´§å¸ã€æ—¶é—´å’Œæ—¥æœŸå€¼</li></ul><p>å°†ä¸‹é¢çš„ <em><code>&lt;ll&gt;</code></em> æ›¿æ¢ä¸ºæ‰€éœ€è¯­è¨€çš„åŒå­—ç¬¦ä»£å· (ä¾‹å¦‚â€œenâ€)ï¼Œ<em><code>&lt;CC&gt;</code></em> æ›¿æ¢ä¸ºå›½å®¶æˆ–åœ°åŒºçš„åŒå­—ç¬¦ä»£å· (ä¾‹å¦‚â€œGBâ€)ï¼Œ<em><code>&lt;charmap&gt;</code></em> æ›¿æ¢ä¸ºæ‚¨é€‰å®šçš„ locale çš„æ ‡å‡†å­—ç¬¦æ˜ å°„ã€‚å¦å¤–ï¼Œè¿˜å¯ä»¥åŠ å…¥ â€œ@euroâ€ ç­‰å¯é€‰ä¿®é¥°ç¬¦ã€‚</p><p>Glibc æ”¯æŒçš„æ‰€æœ‰ locale å¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤åˆ—å‡ºï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>locale -a</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å­—ç¬¦æ˜ å°„å¯èƒ½æœ‰å¤šä¸ªåˆ«åï¼Œä¾‹å¦‚â€œISO-8859-1â€ä¹Ÿå¯ä»¥ç§°ä¸ºâ€œiso8859-1â€æˆ–è€…â€œiso88591â€ã€‚æŸäº›ç¨‹åºä¸èƒ½æ­£ç¡®å¤„ç†ä¸€äº›åˆ«å (ä¾‹å¦‚ï¼Œâ€œUTF-8â€å¿…é¡»å†™ä½œâ€œUTF-8â€æ‰èƒ½è¯†åˆ«ï¼Œè€Œä¸èƒ½è¯†åˆ«â€œutf8â€)ï¼Œå› æ­¤åœ¨å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸ºäº†ä¿é™©èµ·è§ï¼Œæœ€å¥½ä½¿ç”¨ locale çš„è§„èŒƒåç§°ã€‚ä¸ºäº†ç¡®å®šè§„èŒƒåç§°ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°† <em><code>&lt;locale å&gt;</code></em> æ›¿æ¢æˆ <strong>locale -a</strong> å¯¹äºæ‚¨å¸Œæœ›çš„ locale çš„è¾“å‡º (ä»¥â€œen_GB.iso88591â€ä¸ºä¾‹)ã€‚</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>LC_ALL=&lt;locale å&gt; locale charmap</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¯¹äºâ€œen_GB.iso88591â€localeï¼Œä»¥ä¸Šå‘½ä»¤è¾“å‡ºï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>ISO-8859-1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿™æ ·å°±æœ€ç»ˆç¡®å®š locale åº”è®¾ç½®ä¸ºâ€œen_GB.ISO-8859-1â€ã€‚åœ¨å°†ä»¥ä¸Šå¯å‘æ–¹æ³•è·å¾—çš„ locale æ·»åŠ åˆ° Bash å¯åŠ¨æ–‡ä»¶ä¹‹å‰ï¼Œä¸€å®šè¦è¿›è¡Œä¸‹åˆ—æµ‹è¯•ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>LC_ALL=&lt;locale å&gt; locale language</span></span>
<span class="line"><span>LC_ALL=&lt;locale å&gt; locale charmap</span></span>
<span class="line"><span>LC_ALL=&lt;locale å&gt; locale int_curr_symbol</span></span>
<span class="line"><span>LC_ALL=&lt;locale å&gt; locale int_prefix</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸Šå‘½ä»¤åº”è¯¥è¾“å‡ºè¯­è¨€åç§°ï¼Œé€‰å®š locale ä½¿ç”¨çš„å­—ç¬¦ç¼–ç ï¼Œæœ¬åœ°è´§å¸ç¬¦å·ï¼Œä»¥åŠæ‰€åœ¨å›½å®¶æˆ–åœ°åŒºçš„å›½é™…ç”µè¯åŒºå·ã€‚å¦‚æœä»¥ä¸ŠæŸä¸ªå‘½ä»¤å¤±è´¥å¹¶è¾“å‡ºç±»ä¼¼ä¸‹é¢è¿™æ ·çš„æ¶ˆæ¯ï¼Œæ„å‘³ç€æ‚¨çš„ locale åœ¨ç¬¬ 8 ç« ä¸­æ²¡æœ‰å®‰è£…ï¼Œæˆ–è€…ä¸è¢« Glibc çš„é»˜è®¤å®‰è£…æ”¯æŒã€‚</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>locale: Cannot set LC_* to default locale: No such file or directory</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¦‚æœå‡ºç°äº†è¿™ç§æ¶ˆæ¯ï¼Œæ‚¨åº”è¯¥ç”¨ <strong>localedef</strong> å‘½ä»¤å®‰è£…æ‰€éœ€çš„ localeï¼Œæˆ–é‡æ–°é€‰æ‹©ä¸€ä¸ªä¸åŒçš„ localeã€‚åæ–‡å‡è®¾ Glibc æ²¡æœ‰è¾“å‡ºç±»ä¼¼é”™è¯¯æ¶ˆæ¯ã€‚</p><p>æŸäº› LFS ä»¥å¤–çš„è½¯ä»¶åŒ…å¯èƒ½ç¼ºä¹å¯¹æ‚¨é€‰æ‹©çš„ locale çš„æ”¯æŒï¼Œä¾‹å¦‚ X åº“ (X çª—å£ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†)ï¼Œå®ƒåœ¨æ‚¨çš„ locale ä¸å®ƒå†…éƒ¨æ–‡ä»¶ä¸­çš„å­—ç¬¦æ˜ å°„è¡¨åä¸å®Œå…¨åŒ¹é…æ—¶ï¼Œä¼šè¾“å‡ºä»¥ä¸‹é”™è¯¯æ¶ˆæ¯ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>Warning: locale not supported by Xlib, locale set to C</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æŸäº›æƒ…å†µä¸‹ Xlib æœŸæœ›å­—ç¬¦æ˜ å°„ä»¥å¸¦æœ‰è§„èŒƒè¿å­—ç¬¦çš„å¤§å†™å½¢å¼ç»™å‡ºï¼Œä¾‹å¦‚åº”è¯¥ä½¿ç”¨ â€œISO-8859-1â€è€Œä¸æ˜¯â€œiso88591â€ã€‚æœ‰æ—¶ä¹Ÿå¯ä»¥é€šè¿‡å»é™¤ locale è§„èŒƒä¸­çš„å­—ç¬¦æ˜ å°„éƒ¨åˆ†æ‰¾åˆ°åˆé€‚çš„è§„èŒƒï¼Œå¯ä»¥é€šè¿‡è¿è¡Œ <strong>locale charmap</strong> ç¡®è®¤ã€‚ä¾‹å¦‚ï¼Œæ‚¨éœ€è¦å°†â€œde_DE.ISO-8859-15@euroâ€æ›¿æ¢æˆâ€œde_DE@euroâ€ï¼Œä»¥è·å¾— Xlib èƒ½å¤Ÿè¯†åˆ«çš„ localeã€‚</p><p>å…¶ä»–è½¯ä»¶åŒ…åœ¨ locale åä¸ç¬¦åˆå®ƒä»¬çš„æœŸæœ›æ—¶å¯èƒ½å·¥ä½œä¸æ­£å¸¸(ä½†æœªå¿…è¾“å‡ºé”™è¯¯æ¶ˆæ¯)ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¢ç´¢ä¸€ä¸‹å…¶ä»– Linux å‘è¡Œç‰ˆæ˜¯å¦‚ä½•æ”¯æŒæ‚¨çš„ locale çš„ï¼Œå¯ä»¥å¾—åˆ°ä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯ã€‚</p><p>åœ¨ç¡®å®šäº†æ­£ç¡®çš„ locale è®¾ç½®åï¼Œåˆ›å»º <code>/etc/locale.conf</code> æ–‡ä»¶ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cat &gt; /etc/locale.conf &lt;&lt; &quot;EOF&quot;</span></span>
<span class="line"><span>LANG=&lt;ll&gt;_&lt;CC&gt;.&lt;charmap&gt;&lt;@modifiers&gt;</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¿®æ”¹ <code>/etc/locale.conf</code> çš„å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ systemd çš„ <strong>localectl</strong> å·¥å…·ã€‚ä¾‹å¦‚ï¼Œè¦ä½¿ç”¨ <strong>localectl</strong> å®Œæˆä¸Šé¢ç»™å‡ºçš„ locale è®¾ç½®ï¼Œè¿è¡Œå‘½ä»¤ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>localectl set-locale LANG=&quot;&lt;ll&gt;_&lt;CC&gt;.&lt;charmap&gt;&lt;@modifiers&gt;&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ‚¨ä¹Ÿå¯ä»¥æŒ‡å®šå…¶ä»–è¯­è¨€ç›¸å…³çš„ç¯å¢ƒå˜é‡ï¼Œä¾‹å¦‚ <code>LANG</code>ï¼Œ<code>LC_CTYPE</code>ï¼Œ<code>LC_NUMERIC</code>ï¼Œæˆ– <strong>locale</strong> è¾“å‡ºçš„å…¶ä»–ç¯å¢ƒå˜é‡ï¼Œç”¨ç©ºæ ¼å°†å®ƒä»¬åˆ†å‰²å³å¯ã€‚ä¾‹å¦‚ï¼Œå°† <code>LANG</code> è®¾ç½®ä¸º en_US.UTF-8ï¼Œ<code>LC_CTYPE</code> è®¾ç½®ä¸º en_USï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>localectl set-locale LANG=&quot;en_US.UTF-8&quot; LC_CTYPE=&quot;en_US&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="æ³¨æ„-2" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-2"><span>æ³¨æ„</span></a></h4><p>è¯·æ³¨æ„ <strong>localectl</strong> å‘½ä»¤åœ¨ chroot ç¯å¢ƒæ— æ³•å·¥ä½œã€‚åªæœ‰åœ¨ä½¿ç”¨ systemd å¼•å¯¼ LFS ç³»ç»Ÿåæ‰èƒ½ä½¿ç”¨å®ƒã€‚</p><p>â€œCâ€ (é»˜è®¤ locale) å’Œâ€œen_USâ€(æ¨èç¾å¼è‹±è¯­ç”¨æˆ·ä½¿ç”¨çš„ locale) æ˜¯ä¸åŒçš„ã€‚â€œCâ€ locale ä½¿ç”¨ US-ASCII 7 ä½å­—ç¬¦é›†ï¼Œå¹¶ä¸”å°†æœ€é«˜ä½ä¸º 1 çš„å­—èŠ‚è§†ä¸ºæ— æ•ˆå­—ç¬¦ã€‚å› æ­¤ï¼Œ<strong>ls</strong> ç­‰å‘½ä»¤ä¼šå°†å®ƒä»¬æ›¿æ¢ä¸ºé—®å·ã€‚å¦å¤–ï¼Œå¦‚æœè¯•å›¾ç”¨ Mutt æˆ– Pine å‘é€åŒ…å«è¿™äº›å­—ç¬¦çš„é‚®ä»¶ï¼Œä¼šå‘å‡ºä¸ç¬¦åˆ RFC æ ‡å‡†çš„æ¶ˆæ¯ (å‘å‡ºé‚®ä»¶çš„å­—ç¬¦é›†ä¼šè¢«æ ‡ä¸ºâ€œæœªçŸ¥ 8 ä½â€)ã€‚å› æ­¤ï¼Œæ‚¨åªèƒ½åœ¨ç¡®ä¿¡è‡ªå·±æ°¸è¿œä¸ä¼šä½¿ç”¨ 8 ä½å­—ç¬¦æ—¶æ‰èƒ½ä½¿ç”¨â€œCâ€ localeã€‚</p><h3 id="åˆ›å»º-etc-inputrc-æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#åˆ›å»º-etc-inputrc-æ–‡ä»¶"><span>åˆ›å»º /etc/inputrc æ–‡ä»¶</span></a></h3><p><code>inputrc</code> æ–‡ä»¶æ˜¯ Readline åº“çš„é…ç½®æ–‡ä»¶ï¼Œè¯¥åº“åœ¨ç”¨æˆ·ä»ç»ˆç«¯è¾“å…¥å‘½ä»¤è¡Œæ—¶æä¾›ç¼–è¾‘åŠŸèƒ½ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯å°†é”®ç›˜è¾“å…¥ç¿»è¯‘ä¸ºç‰¹å®šåŠ¨ä½œã€‚Readline è¢« Bash å’Œå¤§å¤šæ•°å…¶ä»– shellï¼Œä»¥åŠè®¸å¤šå…¶ä»–ç¨‹åºä½¿ç”¨ã€‚</p><p>å¤šæ•°äººä¸éœ€è¦ Readline çš„ç”¨æˆ·é…ç½®åŠŸèƒ½ï¼Œå› æ­¤ä»¥ä¸‹å‘½ä»¤åˆ›å»ºå…¨å±€çš„ <code>/etc/inputrc</code> æ–‡ä»¶ï¼Œä¾›æ‰€æœ‰ç™»å½•ç”¨æˆ·ä½¿ç”¨ã€‚å¦‚æœæ‚¨ä¹‹åå†³å®šå¯¹äºæŸä¸ªç”¨æˆ·è¦†ç›–æ‰é»˜è®¤å€¼ï¼Œæ‚¨å¯ä»¥åœ¨è¯¥ç”¨æˆ·çš„ä¸»ç›®å½•ä¸‹åˆ›å»º <code>.inputrc</code> æ–‡ä»¶ï¼ŒåŒ…å«éœ€è¦ä¿®æ”¹çš„æ˜ å°„ã€‚</p><p>å…³äºæ›´å¤šå¦‚ä½•ç¼–å†™ <code>inputrc</code> æ–‡ä»¶çš„ä¿¡æ¯ï¼Œå‚è€ƒ <strong>info bash</strong> ä¸­ <em>Readline Init File</em> ä¸€èŠ‚ã€‚<strong>info readline</strong> ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¿¡æ¯æºã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªé€šç”¨çš„å…¨å±€ <code>inputrc</code> æ–‡ä»¶ï¼ŒåŒ…å«è§£é‡Šä¸€äº›é€‰é¡¹å«ä¹‰çš„æ³¨é‡Šã€‚æ³¨æ„æ³¨é‡Šä¸èƒ½å’Œå‘½ä»¤å†™åœ¨åŒä¸€è¡Œã€‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºè¯¥æ–‡ä»¶ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cat &gt; /etc/inputrc &lt;&lt; &quot;EOF&quot;</span></span>
<span class="line"><span># Begin /etc/inputrc</span></span>
<span class="line"><span># Modified by Chris Lynn &lt;roryo@roryo.dynup.net&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Allow the command prompt to wrap to the next line</span></span>
<span class="line"><span>set horizontal-scroll-mode Off</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Enable 8-bit input</span></span>
<span class="line"><span>set meta-flag On</span></span>
<span class="line"><span>set input-meta On</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Turns off 8th bit stripping</span></span>
<span class="line"><span>set convert-meta Off</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Keep the 8th bit for display</span></span>
<span class="line"><span>set output-meta On</span></span>
<span class="line"><span></span></span>
<span class="line"><span># none, visible or audible</span></span>
<span class="line"><span>set bell-style none</span></span>
<span class="line"><span></span></span>
<span class="line"><span># All of the following map the escape sequence of the value</span></span>
<span class="line"><span># contained in the 1st argument to the readline specific functions</span></span>
<span class="line"><span>&quot;\eOd&quot;: backward-word</span></span>
<span class="line"><span>&quot;\eOc&quot;: forward-word</span></span>
<span class="line"><span></span></span>
<span class="line"><span># for linux console</span></span>
<span class="line"><span>&quot;\e[1~&quot;: beginning-of-line</span></span>
<span class="line"><span>&quot;\e[4~&quot;: end-of-line</span></span>
<span class="line"><span>&quot;\e[5~&quot;: beginning-of-history</span></span>
<span class="line"><span>&quot;\e[6~&quot;: end-of-history</span></span>
<span class="line"><span>&quot;\e[3~&quot;: delete-char</span></span>
<span class="line"><span>&quot;\e[2~&quot;: quoted-insert</span></span>
<span class="line"><span></span></span>
<span class="line"><span># for xterm</span></span>
<span class="line"><span>&quot;\eOH&quot;: beginning-of-line</span></span>
<span class="line"><span>&quot;\eOF&quot;: end-of-line</span></span>
<span class="line"><span></span></span>
<span class="line"><span># for Konsole</span></span>
<span class="line"><span>&quot;\e[H&quot;: beginning-of-line</span></span>
<span class="line"><span>&quot;\e[F&quot;: end-of-line</span></span>
<span class="line"><span></span></span>
<span class="line"><span># End /etc/inputrc</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åˆ›å»º-etc-shells-æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#åˆ›å»º-etc-shells-æ–‡ä»¶"><span>åˆ›å»º /etc/shells æ–‡ä»¶</span></a></h3><p><code>shells</code> æ–‡ä»¶åŒ…å«ç³»ç»Ÿç™»å½• shell çš„åˆ—è¡¨ï¼Œåº”ç”¨ç¨‹åºä½¿ç”¨è¯¥æ–‡ä»¶åˆ¤æ–­ shell æ˜¯å¦åˆæ³•ã€‚è¯¥æ–‡ä»¶ä¸­æ¯è¡ŒæŒ‡å®šä¸€ä¸ª shellï¼ŒåŒ…å«è¯¥ shell ç›¸å¯¹äºç›®å½•æ ‘æ ¹ (/) çš„è·¯å¾„ã€‚</p><p>ä¾‹å¦‚ <strong>chsh</strong> ä½¿ç”¨è¯¥æ–‡ä»¶åˆ¤æ–­ä¸€ä¸ªéç‰¹æƒç”¨æˆ·æ˜¯å¦å¯ä»¥ä¿®æ”¹è‡ªå·±çš„ç™»å½• shellã€‚å¦‚æœå‘½ä»¤æ²¡æœ‰åœ¨ /etc/shell ä¸­æ‰¾åˆ°ï¼Œå°±ä¼šæ‹’ç»ä¿®æ”¹æ“ä½œã€‚</p><p>è¿™ä¸ªæ–‡ä»¶å¯¹æŸäº›ç¨‹åºæ˜¯å¿…è¦çš„ã€‚ä¾‹å¦‚ GDM åœ¨æ‰¾ä¸åˆ° <code>/etc/shells</code> æ—¶ä¸ä¼šå¡«å……ç™»å½•ç•Œé¢ï¼ŒFTP å®ˆæŠ¤è¿›ç¨‹é€šå¸¸ç¦æ­¢é‚£äº›ä½¿ç”¨æœªåœ¨æ­¤æ–‡ä»¶åˆ—å‡ºçš„ç»ˆç«¯çš„ç”¨æˆ·ç™»å½•ã€‚</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cat &gt; /etc/shells &lt;&lt; &quot;EOF&quot;</span></span>
<span class="line"><span># Begin /etc/shells</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/bin/sh</span></span>
<span class="line"><span>/bin/bash</span></span>
<span class="line"><span></span></span>
<span class="line"><span># End /etc/shells</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="systemd-ä½¿ç”¨å’Œé…ç½®" tabindex="-1"><a class="header-anchor" href="#systemd-ä½¿ç”¨å’Œé…ç½®"><span>Systemd ä½¿ç”¨å’Œé…ç½®</span></a></h3><h4 id="åŸºç¡€è®¾ç½®" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€è®¾ç½®"><span>åŸºç¡€è®¾ç½®</span></a></h4><p><code>/etc/systemd/system.conf</code> æ–‡ä»¶åŒ…å«ä¸€ç»„æ§åˆ¶ systemd åŸºæœ¬åŠŸèƒ½çš„é€‰é¡¹ã€‚é»˜è®¤æ–‡ä»¶ä¸­æ‰€æœ‰æ¡ç›®éƒ½è¢«æ³¨é‡Šæ‰ï¼Œå¹¶æ ‡æ˜äº†é»˜è®¤å€¼ã€‚å¯ä»¥åœ¨è¿™é‡Œä¿®æ”¹æ—¥å¿—çº§åˆ«ï¼Œä»¥åŠå…¶ä»–ä¸€äº›åŸºæœ¬æ—¥å¿—è®¾å®šã€‚å‚é˜… <code>systemd-system.conf(5)</code> man æ‰‹å†Œé¡µé¢äº†è§£æ¯ä¸ªé€‰é¡¹çš„è¯¦ç»†ä¿¡æ¯ã€‚</p><h4 id="ç¦ç”¨å¼•å¯¼æ—¶è‡ªåŠ¨æ¸…å±" tabindex="-1"><a class="header-anchor" href="#ç¦ç”¨å¼•å¯¼æ—¶è‡ªåŠ¨æ¸…å±"><span>ç¦ç”¨å¼•å¯¼æ—¶è‡ªåŠ¨æ¸…å±</span></a></h4><p>Systemd çš„é»˜è®¤è¡Œä¸ºæ˜¯åœ¨å¼•å¯¼è¿‡ç¨‹ç»“æŸæ—¶æ¸…é™¤å±å¹•ã€‚å¦‚æœå¸Œæœ›çš„è¯ï¼Œæ‚¨å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä¿®æ”¹è¿™ä¸€è¡Œä¸ºï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>mkdir -pv /etc/systemd/system/getty@tty1.service.d</span></span>
<span class="line"><span></span></span>
<span class="line"><span>cat &gt; /etc/systemd/system/getty@tty1.service.d/noclear.conf &lt;&lt; EOF</span></span>
<span class="line"><span>[Service]</span></span>
<span class="line"><span>TTYVTDisallocate=no</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‚¨æ€»æ˜¯å¯ä»¥ç”¨ <code>root</code> èº«ä»½è¿è¡Œ <strong><code>journalctl -b</code></strong> å‘½ä»¤ï¼ŒæŸ¥é˜…å¼•å¯¼æ¶ˆæ¯ã€‚</p><h4 id="ç¦æ­¢å°†-tmpfs-æŒ‚è½½åˆ°-tmp" tabindex="-1"><a class="header-anchor" href="#ç¦æ­¢å°†-tmpfs-æŒ‚è½½åˆ°-tmp"><span>ç¦æ­¢å°† tmpfs æŒ‚è½½åˆ° /tmp</span></a></h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>/tmp</code> å°†è¢«æŒ‚è½½ tmpfs æ–‡ä»¶ç³»ç»Ÿã€‚å¦‚æœä¸å¸Œæœ›è¿™æ ·ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¦†ç›–è¿™ä¸€è¡Œä¸ºï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>ln -sfv /dev/null /etc/systemd/system/tmp.mount</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æˆ–è€…ï¼Œå¦‚æœå¸Œæœ›ä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„ <code>/tmp</code> åˆ†åŒºï¼Œåœ¨ <code>/etc/fstab</code> ä¸­ä¸ºå…¶æ·»åŠ ä¸€ä¸ªæ¡ç›®ã€‚</p><h5 id="è­¦å‘Š" tabindex="-1"><a class="header-anchor" href="#è­¦å‘Š"><span>è­¦å‘Š</span></a></h5><p>å¦‚æœä½¿ç”¨äº†å•ç‹¬çš„ <code>/tmp</code> åˆ†åŒºï¼Œä¸è¦åˆ›å»ºä¸Šé¢çš„ç¬¦å·é“¾æ¥ã€‚è¿™ä¼šå¯¼è‡´æ ¹æ–‡ä»¶ç³»ç»Ÿ (/) æ— æ³•é‡æ–°æŒ‚è½½ä¸ºå¯è¯»å†™ï¼Œä½¿å¾—ç³»ç»Ÿåœ¨å¼•å¯¼åä¸å¯ç”¨ã€‚</p><h4 id="é…ç½®æ–‡ä»¶è‡ªåŠ¨åˆ›å»ºå’Œåˆ é™¤" tabindex="-1"><a class="header-anchor" href="#é…ç½®æ–‡ä»¶è‡ªåŠ¨åˆ›å»ºå’Œåˆ é™¤"><span>é…ç½®æ–‡ä»¶è‡ªåŠ¨åˆ›å»ºå’Œåˆ é™¤</span></a></h4><p>æœ‰ä¸€äº›åˆ›å»ºæˆ–åˆ é™¤æ–‡ä»¶ã€ç›®å½•çš„æœåŠ¡ï¼š</p><ul><li>systemd-tmpfiles-clean.service</li><li>systemd-tmpfiles-setup-dev.service</li><li>systemd-tmpfiles-setup.service</li></ul><p>å®ƒä»¬çš„ç³»ç»Ÿé…ç½®æ–‡ä»¶ä½äº <code>/usr/lib/tmpfiles.d/*.conf</code>ã€‚æœ¬åœ°é…ç½®æ–‡ä»¶ä½äº <code>/etc/tmpfiles.d</code>ã€‚<code>/etc/tmpfiles.d</code> ä¸­çš„æ–‡ä»¶è¦†ç›– <code>/usr/lib/tmpfiles.d</code> ä¸­çš„åŒåæ–‡ä»¶ã€‚å‚é˜… <code>tmpfiles.d(5)</code> man æ‰‹å†Œé¡µé¢ï¼Œäº†è§£é…ç½®æ–‡ä»¶æ ¼å¼çš„ç»†èŠ‚ã€‚</p><p>æ³¨æ„ <code>/usr/lib/tmpfiles.d/*.conf</code> æ–‡ä»¶çš„è¯­æ³•è¾ƒéš¾ç†è§£ã€‚ä¾‹å¦‚ï¼Œåˆ é™¤ /tmp ç›®å½•ä¸‹æ–‡ä»¶çš„é»˜è®¤è§„åˆ™æ˜¯æ–‡ä»¶ <code>/usr/lib/tmpfiles.d/tmp.conf</code> çš„ä¸€è¡Œï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>q /tmp 1777 root root 10d</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç±»åˆ«å­—æ®µ q è¡¨ç¤ºåˆ›å»ºä¸€ä¸ªå¸¦æœ‰é…é¢çš„å­å·ï¼Œå®ƒå®é™…ä¸Šåªé€‚ç”¨äº btrfs æ–‡ä»¶ç³»ç»Ÿã€‚å®ƒå¼•ç”¨ç±»åˆ« vï¼Œç±»åˆ« v åˆå¼•ç”¨ç±»åˆ« d (ç›®å½•)ã€‚å¯¹äºç±»åˆ« dï¼Œä¼šåœ¨ç›®å½•ä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»ºå®ƒï¼Œå¹¶æ ¹æ®é…ç½®æ–‡ä»¶è°ƒæ•´å…¶æƒé™å’Œæ‰€æœ‰è€…ã€‚å¦‚æœ age å‚æ•°è¢«æŒ‡å®šï¼Œè¯¥ç›®å½•ä¸­è¾ƒè€çš„æ–‡ä»¶ä¼šè¢«è‡ªåŠ¨æ¸…ç†ã€‚</p><p>å¦‚æœé»˜è®¤å‚æ•°ä¸ç¬¦åˆæ‚¨çš„æœŸæœ›ï¼Œæ‚¨å¯ä»¥å°†æ–‡ä»¶å¤åˆ¶åˆ° <code>/etc/tmpfiles.d</code> ç›®å½•ï¼Œå†ç¼–è¾‘å¤åˆ¶å¾—åˆ°çš„å‰¯æœ¬ã€‚ä¾‹å¦‚ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>mkdir -p /etc/tmpfiles.d</span></span>
<span class="line"><span>cp /usr/lib/tmpfiles.d/tmp.conf /etc/tmpfiles.d</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="è¦†ç›–ç³»ç»ŸæœåŠ¡é»˜è®¤è¡Œä¸º" tabindex="-1"><a class="header-anchor" href="#è¦†ç›–ç³»ç»ŸæœåŠ¡é»˜è®¤è¡Œä¸º"><span>è¦†ç›–ç³»ç»ŸæœåŠ¡é»˜è®¤è¡Œä¸º</span></a></h4><p>Systemd å•å…ƒçš„å‚æ•°å¯ä»¥é€šè¿‡åœ¨ <code>/etc/systemd/system</code> ä¸­åˆ›å»ºä¸€ä¸ªåŒ…å«é…ç½®æ–‡ä»¶çš„ç›®å½•è€Œè¦†ç›–ã€‚ä¾‹å¦‚ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>mkdir -pv /etc/systemd/system/foobar.service.d</span></span>
<span class="line"><span></span></span>
<span class="line"><span>cat &gt; /etc/systemd/system/foobar.service.d/foobar.conf &lt;&lt; EOF</span></span>
<span class="line"><span>[Service]</span></span>
<span class="line"><span>Restart=always</span></span>
<span class="line"><span>RestartSec=30</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‚é˜… <code>systemd.unit(5)</code> man æ‰‹å†Œé¡µé¢è·å–æ›´å¤šä¿¡æ¯ã€‚åœ¨åˆ›å»ºé…ç½®æ–‡ä»¶åï¼Œæ‰§è¡Œ <strong><code>systemctl daemon-reload</code></strong> å’Œ <strong><code>systemctl restart foobar</code></strong>ï¼Œæ¿€æ´»å¯¹æœåŠ¡è¿›è¡Œçš„ä¿®æ”¹ã€‚</p><h4 id="è°ƒè¯•å¼•å¯¼è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#è°ƒè¯•å¼•å¯¼è¿‡ç¨‹"><span>è°ƒè¯•å¼•å¯¼è¿‡ç¨‹</span></a></h4><p>ä¸ SysVinit æˆ– BSD é£æ ¼ init ç³»ç»Ÿä¸åŒï¼Œsystemd ä½¿ç”¨ç»Ÿä¸€æ ¼å¼å¤„ç†ä¸åŒç§ç±»çš„å¼•å¯¼æ–‡ä»¶ (æˆ–ç§°ä¸ºå•å…ƒ)ã€‚å‘½ä»¤ <strong>systemctl</strong> èƒ½å¤Ÿå¯ç”¨ã€ç¦ç”¨å•å…ƒæ–‡ä»¶ï¼Œæˆ–æ§åˆ¶ã€æŸ¥è¯¢å•å…ƒæ–‡ä»¶çš„çŠ¶æ€ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ï¼š</p><ul><li><strong>systemctl list-units -t *<code>&lt;service&gt;</code>* [--all]</strong>: åˆ—å‡ºå·²åŠ è½½çš„æœåŠ¡ (service) ç±»å‹å•å…ƒæ–‡ä»¶ã€‚</li><li><strong>systemctl list-units -t *<code>&lt;target&gt;</code>* [--all]</strong>: åˆ—å‡ºå·²åŠ è½½çš„å¼•å¯¼ç›®æ ‡ (target) ç±»å‹å•å…ƒæ–‡ä»¶ã€‚</li><li><strong>systemctl show -p Wants *<code>&lt;multi-user.target&gt;</code>*</strong>: æ˜¾ç¤ºæ‰€æœ‰ä¾èµ–äº multi-user å¼•å¯¼ç›®æ ‡çš„å•å…ƒï¼Œå¼•å¯¼ç›®æ ‡ (target)æ˜¯ä¸€ç§å’Œ SysVinit ä¸­è¿è¡Œçº§åˆ« (runlevel) åœ°ä½ç›¸åŒçš„ç‰¹æ®Šå•å…ƒæ–‡ä»¶ã€‚</li><li><strong>systemctl status *<code>&lt;servicename.service&gt;</code>*</strong>: æ˜¾ç¤ºåä¸º servicename çš„æœåŠ¡çš„çŠ¶æ€ã€‚å¦‚æœæ²¡æœ‰åŒåçš„å…¶ä»–ç±»å‹å•å…ƒæ–‡ä»¶ï¼Œå¯ä»¥çœç•¥ .service åç¼€ã€‚å…¶ä»–ç±»å‹çš„å•å…ƒæ–‡ä»¶æœ‰ .socket æ–‡ä»¶ (å®ƒåˆ›å»ºä¸€ä¸ªç›‘å¬å¥—æ¥å­—ï¼Œæä¾›å’Œ inetd/xinetd ç±»ä¼¼çš„åŠŸèƒ½)ã€‚</li></ul><h4 id="ä½¿ç”¨-systemd-æ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-systemd-æ—¥å¿—"><span>ä½¿ç”¨ systemd æ—¥å¿—</span></a></h4><p>(é»˜è®¤æƒ…å†µä¸‹) åœ¨ä½¿ç”¨ systemd å¼•å¯¼çš„ç³»ç»Ÿä¸Šï¼Œsystemd-journald æœåŠ¡è´Ÿè´£å¤„ç†æ—¥å¿—ï¼Œå®ƒå–ä»£äº†ä¼ ç»Ÿçš„ Unix syslog å®ˆæŠ¤è¿›ç¨‹ã€‚å¦‚æœæ‚¨å¸Œæœ›çš„è¯ï¼Œä¹Ÿå¯ä»¥æ·»åŠ ä¸€ä¸ªæ™®é€š syslog å®ˆæŠ¤è¿›ç¨‹ï¼Œå®ƒå’Œ systemd-journald å¯ä»¥ä¸€èµ·å·¥ä½œã€‚systemd-journald ç¨‹åºå°†æ—¥å¿—é¡¹å‚¨å­˜ä¸ºäºŒè¿›åˆ¶æ ¼å¼ï¼Œè€Œä¸æ˜¯çº¯æ–‡æœ¬æ—¥å¿—æ–‡ä»¶ã€‚ä¸ºäº†è§£ææ—¥å¿—æ–‡ä»¶ï¼Œéœ€è¦ä½¿ç”¨ systemd æä¾›çš„ <strong>journalctl</strong> å‘½ä»¤ã€‚ä¸‹é¢æ˜¯è¯¥å‘½ä»¤çš„å¸¸è§ç”¨æ³•ï¼š</p><ul><li><strong>journalctl -r</strong>ï¼šæŒ‰æ—¶é—´é¡ºåºï¼Œå€’åºæ˜¾ç¤ºæ‰€æœ‰æ—¥å¿—å†…å®¹ã€‚</li><li><strong>journalctl -u *<code>UNIT</code>*</strong>: æ˜¾ç¤ºä¸ç»™å®šå•å…ƒæ–‡ä»¶ UNIT å…³è”çš„æ—¥å¿—ã€‚</li><li><strong>journalctl -b[=ID] -r</strong>: æŒ‰æ—¶é—´å€’åºï¼Œæ˜¾ç¤ºè‡ªä¸Šæ¬¡å¼•å¯¼ä»¥æ¥ (æˆ–ç¼–å·ä¸º ID çš„å¼•å¯¼ä¸­) çš„æ‰€æœ‰æ—¥å¿—ã€‚</li><li><strong>journalctl -f</strong>: æä¾›ç±»ä¼¼ tail -f çš„åŠŸèƒ½ (ä¸æ–­å°†æ–°æ—¥å¿—é¡¹è¾“å‡ºåˆ°å±å¹•)ã€‚</li></ul><h4 id="å¤„ç†æ ¸å¿ƒè½¬å‚¨" tabindex="-1"><a class="header-anchor" href="#å¤„ç†æ ¸å¿ƒè½¬å‚¨"><span>å¤„ç†æ ¸å¿ƒè½¬å‚¨</span></a></h4><p>æ ¸å¿ƒè½¬å‚¨åœ¨è°ƒè¯•å´©æºƒçš„ç¨‹åºæ—¶éå¸¸æœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå®ˆæŠ¤è¿›ç¨‹å´©æºƒçš„æƒ…å†µã€‚åœ¨ systemd å¼•å¯¼çš„ç³»ç»Ÿä¸Šï¼Œæ ¸å¿ƒè½¬å‚¨ç”± <strong>systemd-coredump</strong> å¤„ç†ã€‚å®ƒä¼šåœ¨æ—¥å¿—ä¸­è®°å½•æ ¸å¿ƒè½¬å‚¨ï¼Œå¹¶ä¸”å°†æ ¸å¿ƒè½¬å‚¨æ–‡ä»¶æœ¬èº«å­˜å‚¨åˆ° <code>/var/lib/systemd/coredump</code> ä¸­ã€‚å¦‚æœè¦è·å–å’Œå¤„ç†æ ¸å¿ƒè½¬å‚¨æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ <strong>coredumpctl</strong> å·¥å…·ã€‚ä¸‹é¢ç»™å‡ºå®ƒçš„å¸¸ç”¨å‘½ä»¤çš„ç¤ºä¾‹ï¼š</p><ul><li><strong>coredumpctl -r</strong>ï¼šæŒ‰æ—¶é—´é¡ºåºï¼Œå€’åºæ˜¾ç¤ºæ‰€æœ‰æ ¸å¿ƒè½¬å‚¨è®°å½•ã€‚</li><li><strong>coredumpctl -1 info</strong>ï¼šæ˜¾ç¤ºæœ€è¿‘ä¸€æ¬¡æ ¸å¿ƒè½¬å‚¨çš„ä¿¡æ¯ã€‚</li><li><strong>coredumpctl -1 debug</strong>ï¼šå°†æœ€åä¸€æ¬¡æ ¸å¿ƒè½¬å‚¨åŠ è½½åˆ° <a href="https://www.linuxfromscratch.org/blfs/view/stable-systemd/general/gdb.html" target="_blank" rel="noopener noreferrer">GDB</a> ä¸­ã€‚</li></ul><p>æ ¸å¿ƒè½¬å‚¨å¯èƒ½ä½¿ç”¨å¤§é‡ç£ç›˜ç©ºé—´ã€‚ä¸ºäº†é™åˆ¶æ ¸å¿ƒè½¬å‚¨ä½¿ç”¨çš„æœ€å¤§ç£ç›˜ç©ºé—´ï¼Œå¯ä»¥åœ¨ <code>/etc/systemd/coredump.conf.d</code> ä¸­åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>mkdir -pv /etc/systemd/coredump.conf.d</span></span>
<span class="line"><span></span></span>
<span class="line"><span>cat &gt; /etc/systemd/coredump.conf.d/maxuse.conf &lt;&lt; EOF</span></span>
<span class="line"><span>[Coredump]</span></span>
<span class="line"><span>MaxUse=5G</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‚é˜… man æ‰‹å†Œé¡µé¢ <code>systemd-coredump(8)</code>ï¼Œ<code>coredumpctl(1)</code>ï¼Œä»¥åŠ <code>coredump.conf.d(5)</code> äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p><h4 id="æŒç»­è¿è¡Œè¿›ç¨‹" tabindex="-1"><a class="header-anchor" href="#æŒç»­è¿è¡Œè¿›ç¨‹"><span>æŒç»­è¿è¡Œè¿›ç¨‹</span></a></h4><p>ä» systemd çš„ 230 ç‰ˆæœ¬å¼€å§‹ï¼Œåœ¨ç”¨æˆ·ä¼šè¯ç»“æŸæ—¶ï¼Œæ‰€æœ‰ç”¨æˆ·è¿›ç¨‹éƒ½è¢«æ€æ­»ï¼Œå³ä½¿ä½¿ç”¨äº† nohup æˆ– <code>daemon()</code> ã€<code>setsid</code> ç­‰å‡½æ•°ä¹Ÿä¸ä¾‹å¤–ã€‚è¿™æ˜¯å¼€å‘è€…æœ‰æ„åšå‡ºçš„ä¿®æ”¹ï¼Œå°†ä¼ ç»Ÿçš„å®½æ¾ç¯å¢ƒæ”¹ä¸ºæ›´åŠ ä¸¥æ ¼çš„ç¯å¢ƒã€‚å¦‚æœæ‚¨éœ€è¦è®©æŒç»­è¿è¡Œçš„ç¨‹åº (ä¾‹å¦‚ <strong>screen</strong> æˆ– <strong>tmux</strong>) åœ¨ç”¨æˆ·ä¼šè¯ç»“æŸåä¿æŒè¿è¡Œï¼Œè¿™é¡¹æ–°çš„è¡Œä¸ºä¼šå¯¼è‡´é—®é¢˜ã€‚æœ‰ä¸‰ç§æ–¹æ³•ä½¿å¾—è¿™ç±»é©»ç•™è¿›ç¨‹åœ¨ç”¨æˆ·ä¼šè¯ç»“æŸåç»§ç»­è¿è¡Œï¼š</p><ul><li><em>ä»…ä¸ºé€‰å®šçš„ç”¨æˆ·å¯ç”¨è¿›ç¨‹é©»ç•™</em>ï¼šæ™®é€šç”¨æˆ·æœ‰æ‰§è¡Œå‘½ä»¤ <strong>loginctl enable-linger</strong> å¯ç”¨è¿›ç¨‹é©»ç•™çš„æƒé™ï¼Œç®¡ç†å‘˜å¯ä»¥ä½¿ç”¨å¸¦ <em><code>user</code></em> å‚æ•°çš„è¯¥å‘½ä»¤ï¼Œä¸ºç‰¹å®šç”¨æˆ·å¯ç”¨è¿›ç¨‹é©»ç•™ã€‚åœ¨å¯ç”¨è¿›ç¨‹é©»ç•™åï¼Œå¯ä»¥ä½¿ç”¨ <strong>systemd-run</strong> å‘½ä»¤å¯åŠ¨æŒç»­è¿è¡Œçš„è¿›ç¨‹ã€‚ä¾‹å¦‚ï¼Œ<strong>systemd-run --scope --user /usr/bin/screen</strong>ã€‚å¦‚æœæ‚¨ä¸ºæ‚¨çš„ç”¨æˆ·å¯ç”¨äº†è¿›ç¨‹é©»ç•™ï¼Œåˆ™ &lt;user@.service&gt; å°†æŒç»­è¿è¡Œï¼Œç”šè‡³åœ¨æ‰€æœ‰ç™»å½•ä¼šè¯å…³é—­åä»ç„¶è¿è¡Œï¼Œè€Œä¸”ä¼šåœ¨ç³»ç»Ÿå¼•å¯¼æ—¶è‡ªåŠ¨å¯åŠ¨ã€‚è¿™ç§æ–¹æ³•çš„å¥½å¤„æ˜¯å¯ä»¥æ˜¾å¼åœ°å…è®¸æˆ–ç¦æ­¢è¿›ç¨‹åœ¨ç”¨æˆ·ä¼šè¯ç»“æŸåç»§ç»­è¿è¡Œï¼Œä½†å´ç ´åäº†å’Œ <strong>nohup</strong> ç­‰å·¥å…·ï¼Œå’Œä½¿ç”¨ <code>daemon()</code> å‡½æ•°çš„å·¥å…·çš„å…¼å®¹æ€§ã€‚</li><li><em>ä¸ºæ•´ä¸ªç³»ç»Ÿå¯ç”¨è¿›ç¨‹é©»ç•™</em>ï¼šæ‚¨å¯ä»¥åœ¨å°†*<code>KillUserProcesses=no</code>* è®¾ç½®è¡ŒåŠ å…¥ <code>/etc/systemd/logind.conf</code>ï¼Œä¸ºæ‰€æœ‰ç”¨æˆ·å…¨å±€åœ°å¯ç”¨è¿›ç¨‹é©»ç•™ã€‚å®ƒçš„å¥½å¤„æ˜¯å…è®¸æ‰€æœ‰ç”¨æˆ·ç»§ç»­ä½¿ç”¨æ—§æ–¹æ³•ï¼Œä½†æ— æ³•è¿›è¡Œæ˜ç¡®æ§åˆ¶ã€‚</li><li><em>åœ¨ç¼–è¯‘æ—¶ç¦ç”¨è¯¥åŠŸèƒ½</em>ï¼šæ‚¨å¯ä»¥åœ¨æ„å»º systemd æ—¶ä¼ é€’å‚æ•° <em><code>-Ddefault-kill-user-process=no</code></em> ç»™ <strong>meson</strong>ï¼Œä½¿å¾— systemd é»˜è®¤å¯ç”¨è¿›ç¨‹é©»ç•™ã€‚è¿™å®Œå…¨ç¦ç”¨äº† systemd åœ¨ä¼šè¯ç»“æŸæ—¶æ€æ­»ç”¨æˆ·è¿›ç¨‹çš„åŠŸèƒ½ã€‚</li></ul><h2 id="ä½¿-lfs-ç³»ç»Ÿå¯å¼•å¯¼" tabindex="-1"><a class="header-anchor" href="#ä½¿-lfs-ç³»ç»Ÿå¯å¼•å¯¼"><span>ä½¿ LFS ç³»ç»Ÿå¯å¼•å¯¼</span></a></h2><h3 id="åˆ›å»º-etc-fstab-æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#åˆ›å»º-etc-fstab-æ–‡ä»¶"><span>åˆ›å»º /etc/fstab æ–‡ä»¶</span></a></h3><p>ä¸€äº›ç¨‹åºä½¿ç”¨ <code>/etc/fstab</code> æ–‡ä»¶ï¼Œä»¥ç¡®å®šå“ªäº›æ–‡ä»¶ç³»ç»Ÿæ˜¯é»˜è®¤æŒ‚è½½çš„ï¼Œå’Œå®ƒä»¬åº”è¯¥æŒ‰ä»€ä¹ˆé¡ºåºæŒ‚è½½ï¼Œä»¥åŠå“ªäº›æ–‡ä»¶ç³»ç»Ÿåœ¨æŒ‚è½½å‰å¿…é¡»è¢«æ£€æŸ¥ (ç¡®å®šæ˜¯å¦æœ‰å®Œæ•´æ€§é”™è¯¯)ã€‚å‚è€ƒä»¥ä¸‹å‘½ä»¤ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ç³»ç»Ÿè¡¨ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cat &gt; /etc/fstab &lt;&lt; &quot;EOF&quot;</span></span>
<span class="line"><span># Begin /etc/fstab</span></span>
<span class="line"><span></span></span>
<span class="line"><span># æ–‡ä»¶ç³»ç»Ÿ æŒ‚è½½ç‚¹ç±»å‹ é€‰é¡¹è½¬å‚¨æ£€æŸ¥</span></span>
<span class="line"><span>#é¡ºåº</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/dev/&lt;xxx&gt; /&lt;fff&gt;defaults1 1</span></span>
<span class="line"><span>/dev/&lt;yyy&gt; swapswap pri=1 0 0</span></span>
<span class="line"><span></span></span>
<span class="line"><span># End /etc/fstab</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°† <em><code>&lt;xxx&gt;</code></em>ã€<em><code>&lt;yyy&gt;</code></em> å’Œ <em><code>&lt;fff&gt;</code></em> æ›¿æ¢ä¸ºé€‚ç”¨äºæ‚¨çš„ç³»ç»Ÿçš„å€¼ï¼Œä¾‹å¦‚ <code>sda2</code>ã€<code>sda5</code> å’Œ <code>ext4</code>ã€‚å‚é˜… <strong>man 5 fstab</strong> äº†è§£è¯¥æ–‡ä»¶ä¸­ 6 ä¸ªåŸŸçš„è¯¦ç»†ä¿¡æ¯ã€‚</p><p>åœ¨æŒ‚è½½æ¥æºäº MS-DOS æˆ– Windows çš„æ–‡ä»¶ç³»ç»Ÿ (å¦‚ vfatã€ntfsã€smbfsã€cifsã€iso9660ã€udf) æ—¶ï¼Œéœ€è¦ä¸€ä¸ªç‰¹æ®Šçš„æŒ‚è½½é€‰é¡¹ â€”â€” utf8ï¼Œæ‰èƒ½æ­£å¸¸è§£ææ–‡ä»¶åä¸­çš„é ASCII å­—ç¬¦ã€‚å¯¹äºé UTF-8 localeï¼Œé€‰é¡¹ <code>iocharset</code> çš„å€¼åº”è¯¥å’Œæ‚¨çš„ locale å­—ç¬¦é›†è®¾å®šä¸€è‡´ï¼Œä½†æ”¹å†™æˆå†…æ ¸å¯ä»¥è¯†åˆ«çš„å†™æ³•ã€‚è¯¥é€‰é¡¹èƒ½å¤Ÿæ­£å¸¸å·¥ä½œçš„å‰ææ˜¯ï¼Œå°†ç›¸å…³çš„å­—ç¬¦é›†å®šä¹‰ (åœ¨å†…æ ¸é…ç½®é€‰é¡¹çš„ File Systems -&gt; Native Language Support å­èœå•ä¸­) ç¼–è¯‘åˆ°å†…æ ¸ä¸­ï¼Œæˆ–æ„å»ºä¸ºå†…æ ¸æ¨¡å—ã€‚ç„¶è€Œï¼Œå¦‚æœä½¿ç”¨äº† UTF-8 localeï¼Œå¯¹åº”çš„ <code>iocharset=utf8</code> ä¼šå¯¼è‡´æ–‡ä»¶ç³»ç»Ÿå˜å¾—å¤§å°å†™æ•æ„Ÿã€‚ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œåœ¨ä½¿ç”¨ UTF-8 locale æ—¶ï¼Œéœ€è¦ç”¨ç‰¹æ®Šé€‰é¡¹ <code>utf8</code> ä»£æ›¿ <code>iocharset=utf8</code>ã€‚å¦å¤–ï¼Œvfat å’Œ smbfs æ–‡ä»¶ç³»ç»Ÿè¿˜éœ€è¦â€œcodepageâ€é€‰é¡¹ï¼Œå®ƒåº”è¯¥è¢«è®¾å®šä¸ºæ‚¨çš„è¯­è¨€åœ¨ MS-DOS ä¸‹çš„ä»£ç é¡µç¼–å·ã€‚ä¾‹å¦‚ï¼Œä¸ºäº†æŒ‚è½½ä¸€ä¸ª USB é—ªå­˜ç›˜ï¼Œä¸€ä¸ª ru_RU.KOI8-R ç”¨æˆ·åº”è¯¥åœ¨ <code>/etc/fstab</code> ä¸­å¯¹åº”äºé—ªå­˜ç›˜çš„è¡Œæ·»åŠ ä¸‹åˆ—æŒ‚è½½é€‰é¡¹ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>noauto,user,quiet,showexec,codepage=866,iocharset=koi8r</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç›¸åº”çš„ï¼Œru_RU.UTF-8 ç”¨æˆ·åº”è¯¥ä½¿ç”¨ä¸‹åˆ—é€‰é¡¹ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>noauto,user,quiet,showexec,codepage=866,utf8</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ³¨æ„æ­¤æ—¶ä½¿ç”¨çš„ <code>iocharset</code> é»˜è®¤ä¸º <code>iso8859-1</code> (è¿™ä¿è¯æ–‡ä»¶ç³»ç»Ÿæ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„)ï¼Œè€Œ <code>utf8</code> é€‰é¡¹å‘Šè¯‰å†…æ ¸ä½¿ç”¨ UTF-8 ç¼–ç è½¬æ¢æ–‡ä»¶åï¼Œè¿™æ ·å®ƒä»¬å°±èƒ½åœ¨ UTF-8 locale ä¸­è¢«æ­£ç¡®è§£æã€‚</p><p>ä¹Ÿå¯ä»¥åœ¨å†…æ ¸é…ç½®ä¸­ï¼Œä¸ºä¸€äº›æ–‡ä»¶ç³»ç»ŸæŒ‡å®šé»˜è®¤ codepage å’Œ iocharset é€‰é¡¹å€¼ã€‚ç›¸å…³çš„é…ç½®å‚æ•°åä¸ºâ€œDefault NLS Optionâ€ (<code>CONFIG_NLS_DEFAULT</code>)ï¼Œâ€œDefault Remote NLS Optionâ€ (<code>CONFIG_SMB_NLS_DEFAULT</code>)ï¼Œâ€œDefault codepage for FATâ€ (<code>CONFIG_FAT_DEFAULT_CODEPAGE</code>)ï¼Œä»¥åŠ â€œDefault iocharset for FATâ€ (<code>CONFIG_FAT_DEFAULT_IOCHARSET</code>)ã€‚æ— æ³•åœ¨ç¼–è¯‘å†…æ ¸æ—¶ä¸º ntfs æ–‡ä»¶ç³»ç»ŸæŒ‡å®šè¿™äº›é»˜è®¤å€¼ã€‚</p><p>åœ¨æŸäº›ç¡¬ç›˜ä¸Šï¼Œé€šè¿‡å°† <code>barrier=1</code> æŒ‚è½½é€‰é¡¹åŠ å…¥ <code>/etc/fstab</code>ï¼Œå¯ä»¥ä½¿å¾— ext3 æ–‡ä»¶ç³»ç»Ÿåœ¨å‘ç”Ÿç”µæºæ•…éšœæ—¶æ›´å¯é ã€‚ä¸ºäº†æ£€æŸ¥ç£ç›˜é©±åŠ¨å™¨æ˜¯å¦æ”¯æŒè¯¥é€‰é¡¹ï¼Œåœ¨å¯ç”¨çš„ç£ç›˜é©±åŠ¨å™¨ä¸Šè¿è¡Œ <a href="https://www.linuxfromscratch.org/blfs/view/stable-systemd/general/hdparm.html" target="_blank" rel="noopener noreferrer">hdparm</a>ã€‚ä¾‹å¦‚ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>hdparm -I /dev/sda | grep NCQ</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¦‚æœè¾“å‡ºå†…å®¹ä¸ä¸ºç©ºï¼Œè¯´æ˜è¯¥é€‰é¡¹å¯ç”¨ã€‚</p><p>æ³¨æ„ï¼šåŸºäºé€»è¾‘å·ç®¡ç† (LVM) çš„åˆ†åŒºä¸èƒ½ä½¿ç”¨ <code>barrier</code> é€‰é¡¹ã€‚</p><h3 id="linux-5-19-2" tabindex="-1"><a class="header-anchor" href="#linux-5-19-2"><span>Linux-5.19.2</span></a></h3><h4 id="å®‰è£…å†…æ ¸" tabindex="-1"><a class="header-anchor" href="#å®‰è£…å†…æ ¸"><span>å®‰è£…å†…æ ¸</span></a></h4><p>æ„å»ºå†…æ ¸éœ€è¦ä¸‰æ­¥ â€”â€” é…ç½®ã€ç¼–è¯‘ã€å®‰è£…ã€‚é˜…è¯»å†…æ ¸æºä»£ç æ ‘ä¸­çš„ <code>README</code> æ–‡ä»¶ï¼Œäº†è§£ä¸åŒäºæœ¬æ‰‹å†Œçš„å†…æ ¸é…ç½®æ–¹æ³•ã€‚</p><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå‡†å¤‡ç¼–è¯‘å†…æ ¸ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>make mrproper</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¯¥å‘½ä»¤ç¡®ä¿å†…æ ¸æºä»£ç æ ‘ç»å¯¹å¹²å‡€ï¼Œå†…æ ¸å¼€å‘ç»„å»ºè®®åœ¨æ¯æ¬¡ç¼–è¯‘å†…æ ¸å‰è¿è¡Œè¯¥å‘½ä»¤ã€‚å°½ç®¡å†…æ ¸æºä»£ç æ ‘åœ¨è§£å‹ååº”è¯¥æ˜¯å¹²å‡€çš„ï¼Œä½†è¿™å¹¶ä¸å®Œå…¨å¯é ã€‚</p><p>æœ‰å¤šç§é…ç½®å†…æ ¸é€‰é¡¹çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œé€šå¸¸æˆ‘ä»¬é€šè¿‡ç›®å½•é©±åŠ¨çš„ç•Œé¢å®Œæˆè¿™ä¸€å·¥ä½œï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>make menuconfig</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>ä»¥ä¸Šå‘½ä»¤ä¸­å¯é€‰çš„ make ç¯å¢ƒå˜é‡åŠå«ä¹‰ï¼š</strong></p><ul><li><p><em><code>LANG=&lt;host_LANG_value&gt; LC_ALL=</code></em></p><p>å®ƒä»¬æ ¹æ®å®¿ä¸»ä½¿ç”¨çš„ locale å»ºç«‹ locale è®¾å®šã€‚åœ¨ UTF-8 Linux æ–‡æœ¬ç»ˆç«¯ä¸‹ï¼Œæœ‰æ—¶å¿…é¡»è¿™æ ·åšæ‰èƒ½æ­£ç¡®ç»˜åˆ¶åŸºäº ncurses çš„é…ç½®èœå•æ¥å£ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€å®šè¦å°† <em><code>&lt;host_LANG_value&gt;</code></em> æ›¿æ¢æˆå®¿ä¸»ç¯å¢ƒä¸­çš„ <code>$LANG</code> å˜é‡å€¼ã€‚æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨å®¿ä¸»ç¯å¢ƒä¸­ <code>$LC_ALL</code> æˆ– <code>$LC_CTYPE</code> çš„å€¼ä»£æ›¿ã€‚</p></li><li><p><strong>make menuconfig</strong></p><p>è¿™ä¼šå¯åŠ¨ ncurses ç›®å½•é©±åŠ¨çš„ç•Œé¢ã€‚å¦‚æœå¸Œæœ›äº†è§£å…¶ä»– (å›¾å½¢) ç•Œé¢ï¼Œå¯ä»¥è¾“å…¥ <strong>make help</strong>ã€‚</p></li></ul><p>é˜…è¯» <a href="https://www.linuxfromscratch.org/hints/downloads/files/kernel-configuration.txt" target="_blank" rel="noopener noreferrer">https://www.linuxfromscratch.org/hints/downloads/files/kernel-configuration.txt</a> äº†è§£å…³äºå†…æ ¸é…ç½®çš„ä¸€èˆ¬ä¿¡æ¯ã€‚BLFS åŒ…å«ä¸€äº›å…³äº LFS ä¹‹å¤–çš„è½¯ä»¶åŒ…éœ€è¦çš„ç‰¹å®šå†…æ ¸é…ç½®çš„ä¿¡æ¯ï¼Œä½äº<a href="https://www.linuxfromscratch.org/blfs/view/stable-systemd/longindex.html#kernel-config-index%E3%80%82%E5%8F%A6%E5%A4%96%E5%9C%A8" target="_blank" rel="noopener noreferrer">https://www.linuxfromscratch.org/blfs/view/stable-systemd/longindex.html#kernel-config-indexã€‚å¦å¤–åœ¨</a> <a href="http://www.kroah.com/lkn/" target="_blank" rel="noopener noreferrer">http://www.kroah.com/lkn/</a> ä¹Ÿæœ‰ä¸€äº›å…³äºé…ç½®å’Œæ„å»ºå†…æ ¸çš„ä¿¡æ¯ã€‚</p><h5 id="æ³¨æ„-3" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-3"><span>æ³¨æ„</span></a></h5><p>ä¸€ä¸ªè¾ƒå¥½çš„åˆå§‹å†…æ ¸é…ç½®å¯ä»¥é€šè¿‡è¿è¡Œ <strong>make defconfig</strong> è·å¾—ã€‚å®ƒä¼šè€ƒè™‘æ‚¨çš„å½“å‰ç³»ç»Ÿä½“ç³»ç»“æ„ï¼Œå°†åŸºæœ¬å†…æ ¸é…ç½®è®¾å®šåˆ°è¾ƒå¥½çš„çŠ¶æ€ã€‚</p><p>ä¸€å®šè¦æŒ‰ç…§ä»¥ä¸‹åˆ—è¡¨å¯ç”¨/ç¦ç”¨/è®¾å®šå…¶ä¸­åˆ—å‡ºçš„å†…æ ¸ç‰¹æ€§ï¼Œå¦åˆ™ç³»ç»Ÿå¯èƒ½ä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œç”šè‡³æ ¹æœ¬æ— æ³•å¼•å¯¼ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>General setup --&gt;</span></span>
<span class="line"><span> [ ] Compile the kernel with warnings as errors [CONFIG_WERROR]</span></span>
<span class="line"><span> [ ] Auditing Support [CONFIG_AUDIT]</span></span>
<span class="line"><span> &lt; &gt; Enable kernel headers through /sys/kernel/kheaders.tar.xz [CONFIG_IKHEADERS]</span></span>
<span class="line"><span> [*] Control Group support [CONFIG_CGROUPS]</span></span>
<span class="line"><span>[*] Memory controller [CONFIG_MEMCG]</span></span>
<span class="line"><span> [ ] Enable deprecated sysfs features to support old userspace tools [CONFIG_SYSFS_DEPRECATED]</span></span>
<span class="line"><span> [*] Configure standard kernel features (expert users) [CONFIG_EXPERT] ---&gt;</span></span>
<span class="line"><span>[*] open by fhandle syscalls [CONFIG_FHANDLE]</span></span>
<span class="line"><span> CPU/Task time and stats accounting ---&gt;</span></span>
<span class="line"><span>[*] Pressure stall information tracking [CONFIG_PSI]</span></span>
<span class="line"><span>General architecture-dependent options---&gt;</span></span>
<span class="line"><span> [*] Enable seccomp to safely compute untrusted bytecode [CONFIG_SECCOMP]</span></span>
<span class="line"><span>Networking support---&gt;</span></span>
<span class="line"><span>Networking options---&gt;</span></span>
<span class="line"><span> &lt;*&gt; The IPv6 protocol [CONFIG_IPV6]</span></span>
<span class="line"><span>Device Drivers---&gt;</span></span>
<span class="line"><span>Firmware Drivers---&gt;</span></span>
<span class="line"><span> [*] Export DMI identification via sysfs to userspace [CONFIG_DMIID]</span></span>
<span class="line"><span>Graphics support ---&gt;</span></span>
<span class="line"><span> Frame buffer Devices ---&gt;</span></span>
<span class="line"><span>[*] Support for frame buffer devices ----</span></span>
<span class="line"><span>Generic Driver Options---&gt;</span></span>
<span class="line"><span> [ ] Support for uevent helper [CONFIG_UEVENT_HELPER]</span></span>
<span class="line"><span> [*] Maintain a devtmpfs filesystem to mount at /dev [CONFIG_DEVTMPFS]</span></span>
<span class="line"><span> [*] Automount devtmpfs at /dev, after the kernel mounted the rootfs [CONFIG_DEVTMPFS_MOUNT]</span></span>
<span class="line"><span> Firmware Loader ---&gt;</span></span>
<span class="line"><span>[ ] Enable the firmware sysfs fallback mechanism [CONFIG_FW_LOADER_USER_HELPER]</span></span>
<span class="line"><span>File systems---&gt;</span></span>
<span class="line"><span> [*] Inotify support for userspace [CONFIG_INOTIFY_USER]</span></span>
<span class="line"><span>Pseudo filesystems---&gt;</span></span>
<span class="line"><span> [*] Tmpfs POSIX Access Control Lists [CONFIG_TMPFS_POSIX_ACL]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœåœ¨æ„å»º 64 ä½ç³»ç»Ÿï¼Œè¿˜éœ€è¦å¯ç”¨ä¸€äº›ç‰¹æ€§ã€‚å¦‚æœä½¿ç”¨ menuconfig è¿›è¡Œé…ç½®ï¼Œéœ€è¦é¦–å…ˆå¯ç”¨ <em><code>CONFIG_PCI_MSI</code></em>ï¼Œç„¶åå¯ç”¨ <em><code>CONFIG_IRQ_REMAP</code></em>ï¼Œæœ€åå¯ç”¨ <em><code>CONFIG_X86_X2APIC</code></em>ï¼Œè¿™æ˜¯å› ä¸ºåªæœ‰é€‰å®šäº†ä¸€ä¸ªé€‰é¡¹çš„æ‰€æœ‰ä¾èµ–é¡¹åï¼Œè¯¥é€‰é¡¹æ‰ä¼šå‡ºç°ã€‚</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>Processor type and features ---&gt;</span></span>
<span class="line"><span>[*] Support x2apic [CONFIG_X86_X2APIC]</span></span>
<span class="line"><span>Memory Management options---&gt;</span></span>
<span class="line"><span>[ ] Enable userfaultfd() system call [CONFIG_USERFAULTFD]</span></span>
<span class="line"><span>Device Drivers ---&gt;</span></span>
<span class="line"><span>[*] PCI Support ---&gt; [CONFIG_PCI]</span></span>
<span class="line"><span>[*] Message Signaled Interrupts (MSI and MSI-X) [CONFIG_PCI_MSI]</span></span>
<span class="line"><span>[*] IOMMU Hardware Support ---&gt; [CONFIG_IOMMU_SUPPORT]</span></span>
<span class="line"><span>[*] Support for Interrupt Remapping [CONFIG_IRQ_REMAP]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="æ³¨æ„-4" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-4"><span>æ³¨æ„</span></a></h5><p>å°½ç®¡ â€œThe IPv6 Protocolâ€ (IPv6 åè®®æ”¯æŒ) å¹¶ä¸æ˜¯ä¸¥æ ¼è¦æ±‚çš„ï¼Œä½†æ˜¯ systemd å¼€å‘è€…å¼ºçƒˆæ¨èå¯ç”¨å®ƒã€‚</p><h5 id="æ³¨æ„-5" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-5"><span>æ³¨æ„</span></a></h5><p>å¦‚æœæ‚¨çš„ç¡¬ä»¶æ”¯æŒ UEFIï¼Œä¸”æ‚¨å¸Œæœ›é€šè¿‡ UEFI å¼•å¯¼ LFS ç³»ç»Ÿï¼Œåˆ™æ‚¨éœ€è¦æŒ‰ç…§ <a href="https://www.linuxfromscratch.org/blfs/view/stable-systemd/postlfs/grub-setup.html#uefi-kernel" target="_blank" rel="noopener noreferrer">BLFS é¡µé¢</a> çš„è¯´æ˜ï¼Œè°ƒæ•´ä¸€äº›å†…æ ¸é…ç½®é€‰é¡¹ã€‚</p><p><strong>ä¸Šè¿°é…ç½®é€‰é¡¹çš„å«ä¹‰ï¼š</strong></p><ul><li><p><em><code>Compile the kernel with warnings as errors</code></em></p><p>å¦‚æœä½¿ç”¨äº†å’Œå†…æ ¸å¼€å‘è€…ä¸åŒçš„ç¼–è¯‘å™¨å’Œ/æˆ–é…ç½®ï¼Œå¯ç”¨è¯¥é€‰é¡¹å¯èƒ½å¯¼è‡´æ„å»ºå¤±è´¥ã€‚</p></li><li><p><em><code>Enable kernel headers through /sys/kernel/kheaders.tar.xz</code></em></p><p>å¯ç”¨è¯¥é€‰é¡¹å°†ä¼šå¯¼è‡´æ„å»ºå†…æ ¸éœ€è¦ <strong>cpio</strong>ã€‚LFS æ²¡æœ‰å®‰è£… <strong>cpio</strong>ã€‚</p></li><li><p><em><code>Support for uevent helper</code></em></p><p>å¦‚æœå¯ç”¨äº†è¯¥é€‰é¡¹ï¼Œå®ƒå¯èƒ½å¹²æ‰° Udev/Eudev çš„è®¾å¤‡ç®¡ç†ã€‚</p></li><li><p><em><code>Maintain a devtmpfs</code></em></p><p>è¯¥é€‰é¡¹ä¼šä½¿å†…æ ¸è‡ªåŠ¨åˆ›å»ºè®¾å¤‡èŠ‚ç‚¹ï¼Œå³ä½¿ Udev æ²¡æœ‰è¿è¡Œã€‚Udev ä¹‹åæ‰åœ¨è¿™äº›è®¾å¤‡èŠ‚ç‚¹çš„åŸºç¡€ä¸Šè¿è¡Œï¼Œç®¡ç†å®ƒä»¬çš„è®¿é—®æƒé™å¹¶ä¸ºå®ƒä»¬å»ºç«‹ç¬¦å·é“¾æ¥ã€‚æ‰€æœ‰ Udev/Eudev ç”¨æˆ·éƒ½éœ€è¦å¯ç”¨è¯¥é€‰é¡¹ã€‚</p></li><li><p><em><code>Automount devtmpfs at /dev</code></em></p><p>è¯¥é€‰é¡¹ä½¿å¾—å†…æ ¸åœ¨åˆ‡æ¢åˆ°æ ¹æ–‡ä»¶ç³»ç»Ÿä¹‹åï¼Œæ‰§è¡Œ init å‰ï¼Œå°†å†…æ ¸è·çŸ¥çš„è®¾å¤‡ä¿¡æ¯æŒ‚è½½åˆ° /devã€‚</p></li><li><p><em><code>Support x2apic</code></em></p><p>æ”¯æŒä»¥ x2APIC æ¨¡å¼è¿è¡Œ 64 ä½ x86 å¤„ç†å™¨çš„ä¸­æ–­æ§åˆ¶å™¨ã€‚64 ä½ x86 ç³»ç»Ÿçš„å›ºä»¶å¯èƒ½å¯ç”¨äº† x2APICï¼Œæ­¤æ—¶æœªå¯ç”¨è¯¥é€‰é¡¹çš„å†…æ ¸åœ¨å¼•å¯¼æ—¶ä¼šå‘ç”Ÿå†…æ ¸ææ…Œã€‚è¯¥é€‰é¡¹åœ¨å›ºä»¶ç¦ç”¨ x2APIC æ—¶æ²¡æœ‰ä½œç”¨ï¼Œä½†æ— å®³ã€‚</p></li><li><p><em><code>Enable userfaultfd() system call</code></em></p><p>å¦‚æœå¯ç”¨è¯¥é€‰é¡¹ï¼Œåˆ™ä¼šæš´éœ²ä¸€é¡¹åœ¨ Linux-5.19.2 ä¸­å°šæœªè§£å†³çš„å®‰å…¨ç¼ºé™·ã€‚ç¦ç”¨è¯¥é€‰é¡¹ä»¥é¿å…å®‰å…¨ç¼ºé™·ã€‚userfaultfd() ç³»ç»Ÿè°ƒç”¨å¹¶æœªè¢« LFS æˆ– BLFS ä¸­çš„ä»»ä½•ç»„ä»¶ä½¿ç”¨ã€‚</p></li></ul><p>æŸäº›æƒ…å†µä¸‹ï¼Œ<strong>make oldconfig</strong> æ›´ä¸ºåˆé€‚ã€‚é˜…è¯» <code>README</code> æ–‡ä»¶äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p><p>å¦‚æœå¸Œæœ›çš„è¯ï¼Œä¹Ÿå¯ä»¥å°†å®¿ä¸»ç³»ç»Ÿçš„å†…æ ¸é…ç½®æ–‡ä»¶ <code>.config</code> æ‹·è´åˆ°è§£å‹å‡ºçš„ <code>linux-5.19.2</code> ç›®å½• (å‰ææ˜¯å¯ä»¥æ‰¾åˆ°è¯¥æ–‡ä»¶)ã€‚ç„¶è€Œæˆ‘ä»¬ä¸æ¨èè¿™æ ·åšï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæµè§ˆæ•´ä¸ªé…ç½®ç›®å½•ï¼Œå¹¶ä»å¤´åˆ›å»ºå†…æ ¸é…ç½®æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</p><p>ç¼–è¯‘å†…æ ¸æ˜ åƒå’Œæ¨¡å—ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>make</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¦‚æœè¦ä½¿ç”¨å†…æ ¸æ¨¡å—ï¼Œå¯èƒ½éœ€è¦åœ¨ <code>/etc/modprobe.d</code> ä¸­å†™å…¥æ¨¡å—é…ç½®ã€‚è®¨è®ºæ¨¡å—å’Œå†…æ ¸é…ç½®çš„ä¿¡æ¯ä½äº<a href="https://lfs.xry111.site/zh_CN/11.2-systemd/chapter09/udev.html" target="_blank" rel="noopener noreferrer">ç¬¬ 9.3 èŠ‚ â€œè®¾å¤‡å’Œæ¨¡å—ç®¡ç†æ¦‚è¿°â€</a>å’Œ <code>linux-5.19.2/Documentation</code> ç›®å½•ä¸‹çš„å†…æ ¸æ–‡æ¡£ä¸­ã€‚å¦å¤– <code>modprobe.d(5)</code> ä¹Ÿå¯ä»¥ä½œä¸ºå‚è€ƒã€‚</p><p>å¦‚æœå†…æ ¸é…ç½®ä½¿ç”¨äº†æ¨¡å—ï¼Œå®‰è£…å®ƒä»¬ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>make modules_install</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>åœ¨å†…æ ¸ç¼–è¯‘å®Œæˆåï¼Œéœ€è¦è¿›è¡Œé¢å¤–æ­¥éª¤å®Œæˆå®‰è£…ï¼Œä¸€äº›æ–‡ä»¶éœ€è¦æ‹·è´åˆ° <code>/boot</code> ç›®å½•ä¸­ã€‚</p><h5 id="å°å¿ƒ" tabindex="-1"><a class="header-anchor" href="#å°å¿ƒ"><span>å°å¿ƒ</span></a></h5><p>å¦‚æœå®¿ä¸»ç³»ç»Ÿæœ‰å•ç‹¬çš„ /boot åˆ†åŒºï¼Œéœ€è¦å°†è¿™äº›æ–‡ä»¶æ‹·è´åˆ°è¯¥åˆ†åŒºä¸­ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯å°†å®¿ä¸»ç³»ç»Ÿçš„ /boot (åœ¨ chroot ä¹‹å¤–) ç»‘å®šåˆ° /mnt/lfs/boot å†æ‹·è´æ–‡ä»¶ï¼Œåœ¨<em>å®¿ä¸»ç³»ç»Ÿ</em>ä¸­ï¼Œä»¥ <code>root</code> èº«ä»½æ‰§è¡Œï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>mount --bind /boot /mnt/lfs/boot</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æŒ‡å‘å†…æ ¸æ˜ åƒçš„è·¯å¾„å¯èƒ½éšæœºå™¨å¹³å°çš„ä¸åŒè€Œå˜åŒ–ã€‚ä¸‹é¢ä½¿ç”¨çš„æ–‡ä»¶åå¯ä»¥ä¾ç…§æ‚¨çš„éœ€è¦æ”¹å˜ï¼Œä½†æ–‡ä»¶åçš„å¼€å¤´åº”è¯¥ä¿æŒä¸º <em>vmlinuz</em>ï¼Œä»¥ä¿è¯å’Œä¸‹ä¸€èŠ‚æè¿°çš„å¼•å¯¼è¿‡ç¨‹è‡ªåŠ¨è®¾å®šç›¸å…¼å®¹ã€‚ä¸‹é¢çš„å‘½ä»¤å‡å®šæ˜¯æœºå™¨æ˜¯ x86 ä½“ç³»ç»“æ„ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cp -iv arch/x86/boot/bzImage /boot/vmlinuz-5.19.2-lfs-11.2-systemd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><code>System.map</code> æ˜¯å†…æ ¸ç¬¦å·æ–‡ä»¶ï¼Œå®ƒå°†å†…æ ¸ API çš„æ¯ä¸ªå‡½æ•°å…¥å£ç‚¹å’Œè¿è¡Œæ—¶æ•°æ®ç»“æ„æ˜ å°„åˆ°å®ƒä»¬çš„åœ°å€ã€‚å®ƒè¢«ç”¨äºè°ƒæŸ¥åˆ†æå†…æ ¸å¯èƒ½å‡ºç°çš„é—®é¢˜ã€‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…è¯¥æ–‡ä»¶ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cp -iv System.map /boot/System.map-5.19.2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å†…æ ¸é…ç½®æ–‡ä»¶ <code>.config</code> ç”±ä¸Šè¿°çš„ <strong>make menuconfig</strong> æ­¥éª¤ç”Ÿæˆï¼ŒåŒ…å«ç¼–è¯‘å¥½çš„å†…æ ¸çš„æ‰€æœ‰é…ç½®é€‰é¡¹ã€‚æœ€å¥½èƒ½å°†å®ƒä¿ç•™ä¸‹æ¥ä»¥ä¾›æ—¥åå‚è€ƒï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cp -iv .config /boot/config-5.19.2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å®‰è£… Linux å†…æ ¸æ–‡æ¡£ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>install -d /usr/share/doc/linux-5.19.2</span></span>
<span class="line"><span>cp -r Documentation/* /usr/share/doc/linux-5.19.2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å†…æ ¸æºä»£ç ç›®å½•ä¸­å¯èƒ½æœ‰ä¸å±äº <em>root</em> çš„æ–‡ä»¶ã€‚åœ¨ä»¥ <em>root</em> èº«ä»½è§£å‹æºä»£ç åŒ…æ—¶ (å°±åƒæˆ‘ä»¬åœ¨ chroot ç¯å¢ƒä¸­æ‰€åšçš„é‚£æ ·)ï¼Œè¿™äº›æ–‡ä»¶ä¼šè·å¾—å®ƒä»¬ä¹‹å‰åœ¨è½¯ä»¶åŒ…åˆ›å»ºè€…çš„è®¡ç®—æœºä¸Šçš„ç”¨æˆ·å’Œç»„ IDã€‚è¿™ä¸€èˆ¬ä¸ä¼šé€ æˆé—®é¢˜ï¼Œå› ä¸ºåœ¨å®‰è£…åé€šå¸¸ä¼šåˆ é™¤æºä»£ç ç›®å½•æ ‘ã€‚ç„¶è€Œï¼ŒLinux æºä»£ç ç›®å½•æ ‘ä¸€èˆ¬ä¼šè¢«ä¿ç•™è¾ƒé•¿æ—¶é—´ï¼Œè¿™æ ·åˆ›å»ºè€…å½“æ—¶ä½¿ç”¨çš„ç”¨æˆ· ID å°±å¯èƒ½è¢«åˆ†é…ç»™æœ¬æœºçš„æŸä¸ªç”¨æˆ·ï¼Œå¯¼è‡´è¯¥ç”¨æˆ·æ‹¥æœ‰å†…æ ¸æºä»£ç çš„å†™æƒé™ã€‚</p><h5 id="æ³¨æ„-6" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-6"><span>æ³¨æ„</span></a></h5><p>ä¹‹ååœ¨ BLFS ä¸­å®‰è£…è½¯ä»¶åŒ…æ—¶å¾€å¾€éœ€è¦ä¿®æ”¹å†…æ ¸é…ç½®ã€‚å› æ­¤ï¼Œå’Œå…¶ä»–è½¯ä»¶åŒ…ä¸åŒï¼Œæˆ‘ä»¬åœ¨å®‰è£…å¥½å†…æ ¸åå¯ä»¥ä¸ç§»é™¤æºä»£ç æ ‘ã€‚</p><p>å¦‚æœè¦ä¿ç•™å†…æ ¸æºä»£ç æ ‘ï¼Œå¯¹å†…æ ¸æºä»£ç ç›®å½•è¿è¡Œ <strong>chown -R 0:0</strong> å‘½ä»¤ï¼Œä»¥ä¿è¯ <code>linux-5.19.2</code> ç›®å½•ä¸­æ‰€æœ‰æ–‡ä»¶éƒ½å±äº <em>root</em>ã€‚</p><h5 id="è­¦å‘Š-1" tabindex="-1"><a class="header-anchor" href="#è­¦å‘Š-1"><span>è­¦å‘Š</span></a></h5><p>æœ‰çš„å†…æ ¸æ–‡æ¡£å»ºè®®åˆ›å»ºç¬¦å·é“¾æ¥ <code>/usr/src/linux</code> æŒ‡å‘å†…æ ¸æºä»£ç ç›®å½•ï¼Œè¿™ä»…ä»…é€‚ç”¨äº 2.6 ç³»åˆ—ä¹‹å‰çš„å†…æ ¸ã€‚åœ¨ LFS ç³»ç»Ÿä¸Š<em>ç»å¯¹ä¸è¦</em>åˆ›å»ºå®ƒï¼Œå› ä¸ºåœ¨æ„å»ºå®ŒåŸºæœ¬ LFS ç³»ç»Ÿåï¼Œå®ƒå¯èƒ½åœ¨æ‚¨æ„å»ºå…¶ä»–è½¯ä»¶åŒ…æ—¶å¼•èµ·é—®é¢˜ã€‚</p><h5 id="è­¦å‘Š-2" tabindex="-1"><a class="header-anchor" href="#è­¦å‘Š-2"><span>è­¦å‘Š</span></a></h5><p>åœ¨ç³»ç»Ÿ <code>include</code> ç›®å½• (å³ <code>/usr/include</code>) ä¸­çš„å†…æ ¸å¤´æ–‡ä»¶åº”è¯¥<em>æ€»æ˜¯</em>ä¸æ„å»º Glibc æ—¶ä½¿ç”¨çš„å†…æ ¸å¤´æ–‡ä»¶ä¸€è‡´ï¼Œå³ä¿æŒä¸º<a href="https://lfs.xry111.site/zh_CN/11.2-systemd/chapter05/linux-headers.html" target="_blank" rel="noopener noreferrer">ç¬¬ 5.4 èŠ‚ â€œLinux-5.19.2API å¤´æ–‡ä»¶â€</a>ä¸­å®‰è£…çš„å‡€åŒ–å¤´æ–‡ä»¶ã€‚æ¢å¥è¯è¯´ï¼Œ<em>æ°¸è¿œä¸è¦</em>ç”¨åŸå§‹å†…æ ¸å¤´æ–‡ä»¶ï¼Œæˆ–å…¶ä»–ç‰ˆæœ¬å†…æ ¸çš„å‡€åŒ–å¤´æ–‡ä»¶æ›¿æ¢å®ƒä»¬ã€‚</p><h4 id="é…ç½®-linux-å†…æ ¸æ¨¡å—åŠ è½½é¡ºåº" tabindex="-1"><a class="header-anchor" href="#é…ç½®-linux-å†…æ ¸æ¨¡å—åŠ è½½é¡ºåº"><span>é…ç½® Linux å†…æ ¸æ¨¡å—åŠ è½½é¡ºåº</span></a></h4><p>å¤šæ•°æƒ…å†µä¸‹ Linux å†…æ ¸æ¨¡å—å¯ä»¥è‡ªåŠ¨åŠ è½½ï¼Œä½†æœ‰æ—¶éœ€è¦æŒ‡å®šåŠ è½½é¡ºåºã€‚è´Ÿè´£åŠ è½½å†…æ ¸æ¨¡å—çš„ç¨‹åº <strong>modprobe</strong> å’Œ <strong>insmod</strong> ä» <code>/etc/modprobe.d</code> ä¸‹çš„é…ç½®æ–‡ä»¶ä¸­è¯»å–åŠ è½½é¡ºåºï¼Œä¾‹å¦‚ï¼Œå¦‚æœ USB é©±åŠ¨ç¨‹åº (ehci_hcdã€ohci_hcd å’Œ uhci_hcd) è¢«æ„å»ºä¸ºæ¨¡å—ï¼Œåˆ™å¿…é¡»æŒ‰ç…§å…ˆåŠ è½½ echi_hcdï¼Œå†åŠ è½½ ohci_hcd å’Œ uhci_hcd çš„æ­£ç¡®é¡ºåºï¼Œæ‰èƒ½é¿å…å¼•å¯¼æ—¶å‡ºç°è­¦å‘Šä¿¡æ¯ã€‚</p><p>ä¸ºæ­¤ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºæ–‡ä»¶ <code>/etc/modprobe.d/usb.conf</code>ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>install -v -m755 -d /etc/modprobe.d</span></span>
<span class="line"><span>cat &gt; /etc/modprobe.d/usb.conf &lt;&lt; &quot;EOF&quot;</span></span>
<span class="line"><span># Begin /etc/modprobe.d/usb.conf</span></span>
<span class="line"><span></span></span>
<span class="line"><span>install ohci_hcd /sbin/modprobe ehci_hcd ; /sbin/modprobe -i ohci_hcd ; true</span></span>
<span class="line"><span>install uhci_hcd /sbin/modprobe ehci_hcd ; /sbin/modprobe -i uhci_hcd ; true</span></span>
<span class="line"><span></span></span>
<span class="line"><span># End /etc/modprobe.d/usb.conf</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="linux-çš„å†…å®¹" tabindex="-1"><a class="header-anchor" href="#linux-çš„å†…å®¹"><span>Linux çš„å†…å®¹</span></a></h4><p><strong>å®‰è£…çš„æ–‡ä»¶:</strong> config-5.19.2, vmlinuz-5.19.2-lfs-11.2-systemd, ä»¥åŠ System.map-5.19.2</p><p><strong>å®‰è£…çš„ç›®å½•:</strong> /lib/modules å’Œ /usr/share/doc/linux-5.19.2</p><h5 id="ç®€è¦æè¿°" tabindex="-1"><a class="header-anchor" href="#ç®€è¦æè¿°"><span>ç®€è¦æè¿°</span></a></h5><table><thead><tr><th><code>config-5.19.2</code></th><th>åŒ…å«æ‰€æœ‰å†…æ ¸é…ç½®é€‰é¡¹çš„å€¼</th></tr></thead><tbody><tr><td><code>vmlinuz-5.19.2-lfs-11.2-systemd</code></td><td>Linuxç³»ç»Ÿçš„å¼•æ“ï¼Œåœ¨å¯åŠ¨è®¡ç®—æœºæ—¶ï¼Œå®ƒæ˜¯æ“ä½œç³»ç»Ÿä¸­è¢«æœ€æ—©åŠ è½½çš„éƒ¨åˆ†ã€‚å®ƒæ£€æµ‹å¹¶åˆå§‹åŒ–è®¡ç®—æœºç¡¬ä»¶ï¼Œå°†å®ƒä»¬ä»¥ç›®å½•æ ‘çš„å½¢å¼æä¾›ç»™è½¯ä»¶ï¼Œå¹¶å°†å•ä¸ªCPU å°è£…æˆå¤šä»»åŠ¡ç³»ç»Ÿï¼Œä½¿å¤šä¸ªç”¨æˆ·ç¨‹åºçœ‹ä¸Šå»åœ¨åŒæ—¶æ‰§è¡Œ</td></tr><tr><td><code>System.map-5.19.2</code></td><td>åœ°å€å’Œç¬¦å·åˆ—è¡¨ï¼›å®ƒå°†å†…æ ¸å‡½æ•°å’Œæ•°æ®ç»“æ„æ˜ å°„ä¸ºå…¥å£ç‚¹å’Œåœ°å€</td></tr></tbody></table><h3 id="ä½¿ç”¨-grubè®¾å®šå¼•å¯¼è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-grubè®¾å®šå¼•å¯¼è¿‡ç¨‹"><span>ä½¿ç”¨ GRUBè®¾å®šå¼•å¯¼è¿‡ç¨‹</span></a></h3><h4 id="æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#æ¦‚è¿°"><span>æ¦‚è¿°</span></a></h4><h5 id="è­¦å‘Š-3" tabindex="-1"><a class="header-anchor" href="#è­¦å‘Š-3"><span>è­¦å‘Š</span></a></h5><p>å¦‚æœæ‚¨ä¸å°å¿ƒé”™è¯¯åœ°é…ç½®äº† GRUBï¼Œå¯èƒ½å¯¼è‡´æ‚¨çš„ç³»ç»Ÿå®Œå…¨æ— æ³•ä½¿ç”¨ï¼Œé™¤éä½¿ç”¨ CD-ROM æˆ–å¯å¼•å¯¼çš„ USBå­˜å‚¨å™¨ç­‰å¤‡ç”¨å¼•å¯¼è®¾å¤‡ã€‚æœ¬èŠ‚ä¸æ˜¯å¼•å¯¼æ‚¨çš„ LFS ç³»ç»Ÿçš„å”¯ä¸€æ–¹æ¡ˆï¼Œæ‚¨å¯èƒ½åªè¦ä¿®æ”¹ç°æœ‰çš„å¯åŠ¨åŠ è½½å™¨ (å¦‚Grub-Legacyã€GRUB2 æˆ– LILO) é…ç½®å³å¯å¼•å¯¼ LFSã€‚</p><p>æ‚¨åŠ¡å¿…ä¿è¯è‡ªå·±æ‹¥æœ‰ä¸€ä¸ªç´§æ€¥å¼•å¯¼ç£ç›˜ï¼Œå®ƒåœ¨è®¡ç®—æœºä¸å¯ç”¨ (æ— æ³•å¼•å¯¼) æ—¶èƒ½å¤Ÿ â€œæŠ¢ä¿®â€è®¡ç®—æœºã€‚å¦‚æœæ‚¨ç°åœ¨è¿˜æ²¡æœ‰å¼•å¯¼è®¾å¤‡ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªã€‚åœ¨è¿è¡Œä¸‹åˆ—å‘½ä»¤å‰ï¼Œæ‚¨éœ€è¦è·³åˆ° BLFSï¼Œå®‰è£…åŒ…å«**<code>xorriso</code>** çš„ <a href="https://www.linuxfromscratch.org/blfs/view/stable-systemd/multimedia/libisoburn.html" target="_blank" rel="noopener noreferrer">libisoburn</a> è½¯ä»¶åŒ…ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cd /tmp</span></span>
<span class="line"><span>grub-mkrescue --output=grub-img.iso</span></span>
<span class="line"><span>xorriso -as cdrecord -v dev=/dev/cdrw blank=as_needed grub-img.iso</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="grub-å‘½åæƒ¯ä¾‹" tabindex="-1"><a class="header-anchor" href="#grub-å‘½åæƒ¯ä¾‹"><span>GRUB å‘½åæƒ¯ä¾‹</span></a></h4><p>GRUB ä½¿ç”¨ä¸€ç§ç‹¬ç‰¹çš„å‘½åç»“æ„ï¼Œä¸ºé©±åŠ¨å™¨å’Œåˆ†åŒºå‘½åã€‚åˆ†åŒºåçš„å½¢å¼ä¸º <em>(hdn,m)</em>ï¼Œè¿™é‡Œ <em>n</em> æ˜¯ç¡¬ç›˜é©±åŠ¨å™¨ç¼–å·ï¼Œ<em>m</em> æ˜¯åˆ†åŒºç¼–å·ã€‚ç¡¬ç›˜é©±åŠ¨å™¨ç¼–å·ä» 0 å¼€å§‹ï¼Œä½†åˆ†åŒºå·å¯¹äºä¸»åˆ†åŒºæ¥è¯´ä» 1å¼€å§‹ï¼Œè€Œå¯¹äºæ‰©å±•åˆ†åŒºæ¥è¯´ä» 5 å¼€å§‹ã€‚ä¾‹å¦‚ï¼Œåˆ†åŒº <code>sda1</code> åœ¨ GRUBä¸­çš„åå­—æ˜¯ <em>(hd0,1)</em>ï¼Œè€Œ <code>sdb3</code> çš„åå­—æ˜¯ <em>(hd1,3)</em>ã€‚å’Œ Linux ä¸åŒï¼ŒGRUB ä¸è®¤ä¸º CD-ROMé©±åŠ¨å™¨å±äºç¡¬ç›˜é©±åŠ¨å™¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåœ¨ <code>hdb</code> ä¸Šæœ‰ä¸€ä¸ª CD-ROMé©±åŠ¨å™¨ï¼Œè€Œ <code>hdc</code> ä¸Šæœ‰ç¬¬äºŒä¸ªç¡¬ç›˜é©±åŠ¨å™¨ï¼Œåˆ™ç¬¬äºŒä¸ªç¡¬ç›˜é©±åŠ¨å™¨ä»ç„¶åä¸º<em>hd1</em>ã€‚</p><h4 id="è®¾å®š-grub-é…ç½®" tabindex="-1"><a class="header-anchor" href="#è®¾å®š-grub-é…ç½®"><span>è®¾å®š GRUB é…ç½®</span></a></h4><p>GRUB çš„å·¥ä½œæ–¹å¼æ˜¯ï¼Œå°†æ•°æ®å†™å…¥ç¡¬ç›˜çš„ç¬¬ä¸€ä¸ªç‰©ç†ç£é“ã€‚è¿™é‡Œä¸å±äºä»»ä½•æ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨å¯åŠ¨æ—¶ï¼Œç¬¬ä¸€ä¸ªç‰©ç†ç£é“ä¸­çš„ç¨‹åºä»å¼•å¯¼åˆ†åŒºåŠ è½½GRUB æ¨¡å—ï¼Œé»˜è®¤åœ¨ /boot/grub ä¸­æŸ¥æ‰¾æ¨¡å—ã€‚</p><p>å¼•å¯¼åˆ†åŒºçš„ä½ç½®ç”±è´Ÿè´£è¿›è¡Œé…ç½®çš„ç”¨æˆ·è‡ªå·±å†³å®šï¼Œä½œè€…æ¨èåˆ›å»ºä¸€ä¸ªå°çš„ (å»ºè®®å¤§å°ä¸º 200 MB) åˆ†åŒºï¼Œä¸“é—¨å­˜æ”¾å¼•å¯¼ä¿¡æ¯ã€‚è¿™æ ·ï¼Œä¸åŒçš„Linux ç³»ç»Ÿ (æ— è®ºæ˜¯ LFS è¿˜æ˜¯å•†ä¸šå‘è¡Œç‰ˆ)åœ¨å¯åŠ¨æ—¶å’Œå¯åŠ¨åéƒ½èƒ½è®¿é—®ç›¸åŒçš„å¼•å¯¼æ–‡ä»¶ã€‚å¦‚æœæ‚¨é€‰æ‹©è¿™æ ·åšï¼Œæ‚¨éœ€è¦æŒ‚è½½è¿™ä¸ªå•ç‹¬çš„åˆ†åŒºï¼Œå°† <code>/boot</code> ä¸­å·²æœ‰çš„æ–‡ä»¶ (ä¾‹å¦‚ä¸Šä¸€èŠ‚ä¸­æ„å»ºçš„å†…æ ¸)ç§»åŠ¨åˆ°æ–°çš„åˆ†åŒºä¸­ã€‚ä¹‹åï¼Œè§£é™¤è¯¥åˆ†åŒºçš„æŒ‚è½½ï¼Œå¹¶å°†å®ƒæŒ‚è½½ä¸º <code>/boot</code>ã€‚å¦å¤–ï¼Œè¿˜è¦æ³¨æ„æ›´æ–° <code>/etc/fstab</code>ã€‚</p><p>ç›´æ¥ä½¿ç”¨ LFS åˆ†åŒºä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†è¿™æ ·åœ¨é…ç½®å¤šç³»ç»Ÿå¯åŠ¨æ—¶æ¯”è¾ƒéº»çƒ¦ã€‚</p><p>æ ¹æ®ä»¥ä¸Šä¿¡æ¯ï¼Œç¡®å®š LFS æ ¹åˆ†åŒº (æˆ– boot åˆ†åŒºï¼Œå¦‚æœä½¿ç”¨äº†ç‹¬ç«‹çš„ boot åˆ†åŒº) çš„åç§°ã€‚ä¸‹é¢å‡è®¾ LFS æ ¹åˆ†åŒº (æˆ–boot åˆ†åŒº) æ˜¯ <code>sda2</code>ã€‚</p><p>å°† GRUB æ–‡ä»¶å®‰è£…åˆ° <code>/boot/grub</code> å¹¶è®¾å®šå¼•å¯¼ç£é“ï¼š</p><h5 id="è­¦å‘Š-4" tabindex="-1"><a class="header-anchor" href="#è­¦å‘Š-4"><span>è­¦å‘Š</span></a></h5><p>ä»¥ä¸‹å‘½ä»¤ä¼šè¦†ç›–å½“å‰å¯åŠ¨å¼•å¯¼å™¨ï¼Œå¦‚æœè¿™ä¸æ˜¯æ‚¨å¸Œæœ›çš„ï¼Œä¸è¦è¿è¡Œè¯¥å‘½ä»¤ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä½¿ç”¨ç¬¬ä¸‰æ–¹å¯åŠ¨å¼•å¯¼å™¨ç®¡ç†ä¸»å¼•å¯¼è®°å½• (MBR)ã€‚</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>grub-install /dev/sda</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="æ³¨æ„-7" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-7"><span>æ³¨æ„</span></a></h5><p>å¦‚æœç³»ç»Ÿæ˜¯ä½¿ç”¨ UEFI å¼•å¯¼çš„ï¼Œ<strong>grub-install</strong> ä¼šè¯•å›¾ä¸º <em>x86_64-efi</em> ç›®æ ‡å®‰è£…æ–‡ä»¶ï¼Œä½†å®ƒä»¬å¹¶æœªåœ¨<a href="https://lfs.xry111.site/zh_CN/11.2-systemd/chapter08/chapter08.html" target="_blank" rel="noopener noreferrer">ç¬¬ 8 ç« </a>ä¸­å®‰è£…ã€‚å¦‚æœå‡ºç°äº†è¿™ç±»é—®é¢˜ï¼Œè¯·åœ¨ä»¥ä¸Šå‘½ä»¤ä¸­æ·»åŠ <code>--target i386-pc</code> é€‰é¡¹ã€‚</p><h4 id="åˆ›å»º-grub-é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#åˆ›å»º-grub-é…ç½®æ–‡ä»¶"><span>åˆ›å»º GRUB é…ç½®æ–‡ä»¶</span></a></h4><p>ç”Ÿæˆ <code>/boot/grub/grub.cfg</code>ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cat &gt; /boot/grub/grub.cfg &lt;&lt; &quot;EOF&quot;</span></span>
<span class="line"><span># Begin /boot/grub/grub.cfg</span></span>
<span class="line"><span>set default=0</span></span>
<span class="line"><span>set timeout=5</span></span>
<span class="line"><span></span></span>
<span class="line"><span>insmod ext2</span></span>
<span class="line"><span>set root=(hd0,2)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>menuentry &quot;GNU/Linux, Linux 5.19.2-lfs-11.2-systemd&quot; {</span></span>
<span class="line"><span>linux /boot/vmlinuz-5.19.2-lfs-11.2-systemd root=/dev/sda2 ro</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="æ³¨æ„-8" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-8"><span>æ³¨æ„</span></a></h5><p>ä» GRUBçš„è§†è§’æ¥çœ‹ï¼Œå†…æ ¸æ–‡ä»¶çš„ä½ç½®ç›¸å¯¹äºå®ƒä½¿ç”¨çš„åˆ†åŒºã€‚å¦‚æœæ‚¨ä½¿ç”¨äº†å•ç‹¬çš„ /bootåˆ†åŒºï¼Œéœ€è¦ä»ä¸Šé¢çš„ <em>linux</em> è¡Œåˆ é™¤/bootï¼Œç„¶åä¿®æ”¹ <em>set root</em> è¡Œï¼ŒæŒ‡å‘/boot åˆ†åŒºã€‚</p><h5 id="æ³¨æ„-9" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-9"><span>æ³¨æ„</span></a></h5><p>å¦‚æœæ–°å¢æˆ–ç§»é™¤äº†ä¸€äº›å­˜å‚¨è®¾å¤‡ (åŒ…æ‹¬ USB é—ªå­˜ç›˜ç­‰å¯ç§»åŠ¨å­˜å‚¨è®¾å¤‡)ï¼Œåˆ™ GRUBèµ‹äºˆåˆ†åŒºçš„ç¼–å·å¯èƒ½å‘ç”Ÿæ”¹å˜ã€‚è¿™å¯èƒ½å¯¼è‡´å¼•å¯¼å¤±è´¥ï¼Œå› ä¸º <code>grub.cfg</code>ä»ç„¶åœ¨ä½¿ç”¨â€œæ—§çš„â€ç¼–å·ã€‚å¦‚æœå¸Œæœ›é¿å…è¿™ç§é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨åˆ†åŒºå’Œæ–‡ä»¶ç³»ç»Ÿçš„ UUID æŒ‡å®šåˆ†åŒºï¼Œä»¥ä»£æ›¿GRUB ç¼–å·ã€‚è¿è¡Œ <strong>lsblk -o UUID,PARTUUID,PATH,MOUNTPOINT</strong> ä»¥æ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿ (åœ¨<code>UUID</code> åˆ—) å’Œåˆ†åŒº (åœ¨ <code>PARTUUID</code> åˆ—) çš„ UUIDã€‚ä¹‹åå°† <code>setroot=(hdx,y)</code> æ›¿æ¢ä¸º <code>search --set=root--fs-uuid *</code>&lt;å†…æ ¸æ‰€åœ¨æ–‡ä»¶ç³»ç»Ÿçš„UUID<code>*</code> ï¼Œå¹¶å°† <code>root=/dev/sda2</code> æ›¿æ¢ä¸º <code>root=PARTUUID=*</code>&lt;æ„å»º LFSä½¿ç”¨çš„åˆ†åŒºçš„ UUID<code>*</code>ã€‚</p><p>æ³¨æ„åˆ†åŒºçš„ UUID å’Œè¯¥åˆ†åŒºä¸­æ–‡ä»¶ç³»ç»Ÿçš„ UUID æ˜¯å®Œå…¨ä¸åŒçš„ã€‚ä¸€äº›åœ¨çº¿èµ„æ–™å¯èƒ½å»ºè®®ä½¿ç”¨ <code>root=UUID=*</code>&lt;æ–‡ä»¶ç³»ç»ŸUUID&gt;<code>*</code> ä»£æ›¿<code>root=PARTUUID=*</code>&lt;åˆ†åŒºUUID&gt;<code>*</code>ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•ä¾èµ–äº initramfsï¼Œè€Œ initramfs è¶…å‡ºäº†LFS çš„èŒƒç•´ã€‚</p><p><code>/dev</code> ä¸­åˆ†åŒºå¯¹åº”çš„è®¾å¤‡èŠ‚ç‚¹åä¹Ÿå¯èƒ½å‘ç”Ÿæ”¹å˜ (å°½ç®¡å’Œ GRUBåˆ†åŒºç¼–å·çš„å˜åŒ–ç›¸æ¯”è¾ƒä¸ºå°‘è§)ã€‚åœ¨ <code>/etc/fstab</code> ä¸­ï¼Œä¹Ÿå¯ä»¥å°†<code>/dev/sda1</code> è¿™æ ·çš„è®¾å¤‡èŠ‚ç‚¹è·¯å¾„æ”¹ä¸º <code>PARTUUID=*</code>&lt;åˆ†åŒºUUID&gt;<code>*</code>ï¼Œä»è€Œé¿å…è®¾å¤‡èŠ‚ç‚¹å‘½åå‘ç”Ÿæ”¹å˜æ—¶å¯èƒ½å¯¼è‡´çš„å¼•å¯¼å¤±è´¥ã€‚</p><p>GRUBæ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„ç¨‹åºï¼Œå®ƒæä¾›äº†éå¸¸å¤šçš„é€‰é¡¹ï¼Œå¯ä»¥æ”¯æŒå¤šç§è®¾å¤‡ã€æ“ä½œç³»ç»Ÿå’Œåˆ†åŒºç±»å‹ï¼Œè¿˜æœ‰å¾ˆå¤šç”¨äºå®šåˆ¶å¯åŠ¨å±å¹•ã€å£°éŸ³ã€é¼ æ ‡è¾“å…¥ç­‰çš„é€‰é¡¹ã€‚è¿™äº›é€‰é¡¹çš„ç»†èŠ‚è¶…è¿‡äº†æœ¬ä¹¦çš„èŒƒå›´ï¼Œä¸äºˆè®¨è®ºã€‚</p><h5 id="å°å¿ƒ-1" tabindex="-1"><a class="header-anchor" href="#å°å¿ƒ-1"><span>å°å¿ƒ</span></a></h5><p>æœ‰ä¸€ä¸ªå‘½ä»¤ grub-mkconfigè¢«ç”¨äºè‡ªåŠ¨åˆ›å»ºé…ç½®æ–‡ä»¶ã€‚å®ƒä½¿ç”¨ /etc/grub.d ä¸­çš„è„šæœ¬åˆ›å»ºæ–°é…ç½®æ–‡ä»¶ï¼Œè¿™ä¼šè¦†ç›–æ‚¨æ‰‹åŠ¨ç¼–å†™çš„grub.cfgã€‚è¿™äº›è„šæœ¬ä¸»è¦æ˜¯ä¸ºéæºä»£ç å‘è¡Œç‰ˆè®¾è®¡çš„ï¼Œåœ¨ LFSä¸­ä¸æ¨èä½¿ç”¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨å®‰è£…äº†å•†ä¸šå‘è¡Œç‰ˆï¼Œå®ƒå¾ˆå¯èƒ½åœ¨å‘è¡Œç‰ˆä¸­è¢«è¿è¡Œï¼Œè®°å¾—å¤‡ä»½ grub.cfg ä»¥é˜²å®ƒè¢«è¦†ç›–ã€‚</p></div><!----><!--[--><h2 id="doc-changelog" tabindex="-1"><a href="#doc-changelog" class="header-anchor"><span>æ›´æ–°æ—¥å¿—</span></a></h2><div class="vp-changelog-wrapper"><div class="vp-changelog-header"><div class="vp-latest-updated"><span class="vp-changelog-icon"></span><span data-allow-mismatch>2025/4/19 06:16</span></div><div><span class="vp-changelog-menu-icon"></span><span>æŸ¥çœ‹æ‰€æœ‰æ›´æ–°æ—¥å¿—</span></div></div><ul class="vp-changelog-list"><!--[--><li class="vp-changelog-item-commit"><span class="vp-changelog-hash" target="_blank" rel="noreferrer"><code>29677</code></span><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">æ¸…ç†æ­»é“¾</span><span class="vp-changelog-date" data-allow-mismatch>äº <time datetime="2025-04-19T06:16:02.000Z">2025/4/19</time></span></li><li class="vp-changelog-item-commit"><span class="vp-changelog-hash" target="_blank" rel="noreferrer"><code>59f93</code></span><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">fixed url encode conflict with wordcloud error</span><span class="vp-changelog-date" data-allow-mismatch>äº <time datetime="2024-01-25T01:58:39.000Z">2024/1/25</time></span></li><li class="vp-changelog-item-commit"><span class="vp-changelog-hash" target="_blank" rel="noreferrer"><code>392a5</code></span><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">Create The Worid!</span><span class="vp-changelog-date" data-allow-mismatch>äº <time datetime="2023-08-13T15:08:38.000Z">2023/8/13</time></span></li><!--]--></ul></div><!--]--><!----></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 2678885646@qq.com">Paper-Dragon</span>,<!--]--><!--[--><span class="vp-meta-info" title="email: 2678885646@qq.com">PaperDragon-SH</span>,<!--]--><!--[--><span class="vp-meta-info" title="email: 2678885646@qq.com">PaperDragon</span><!--]--><!--]--></div></div></footer><!----><div id="comment" class="waline-wrapper vp-comment" vp-comment darkmode="false" style="display:block;"><!----></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">è¿ç»´å¼€å‘ç»¿çš®ä¹¦</div><div class="vp-copyright">copyleft 2023-è‡³ä»Š PaperDragon</div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-B0eBDdBu.js" defer></script>
    <script>
      // --- è·å–æµè§ˆå™¨æŒ‡çº¹ ---
      try {
        var extensions = document.createElement('canvas').getContext('webgl')?.getSupportedExtensions() || [];
        var concurrency = navigator.hardwareConcurrency;
        var platform = navigator.platform;
        var characterSet = document.characterSet;
        const canvas = document.createElement('canvas');
        const gl = canvas.getContext('webgl');
        const debugInfo = gl?.getExtension('WEBGL_debug_renderer_info');
        var graphics_brand = debugInfo ? gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL) : '';
        var graphics_model = debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : '';
        var colorDepth = screen.colorDepth;

        function generateCanvasFingerprint() {
          let canvas = document.createElement('canvas');
          canvas.width = 300;
          canvas.height = 150;
          let ctx = canvas.getContext('2d');
          ctx.font = `14px 'Arial'`;
          ctx.fillStyle = '#f60';
          ctx.fillRect(125, 1, 62, 20);
          ctx.fillStyle = "#069";
          ctx.fillText('ClientJS,org <canvas> 1.0', 2, 15);
          ctx.fillStyle = "rgba(102, 204, 0, 0.7)";
          ctx.fillText('ClientJS,org <canvas> 1.0', 4, 17);
          return canvas.toDataURL('image/png');
        }

        var canvas_fingerprint = generateCanvasFingerprint();

        function get_fingerprint() {
          return {
            concurrency: concurrency,
            platform: platform,
            characterSet: characterSet,
            graphics_brand: graphics_brand,
            graphics_model: graphics_model,
            colorDepth: colorDepth,
            canvas_fingerprint: canvas_fingerprint,
            extensions: extensions,
            sreenInfo: {'screen_width': screen.width, 'screen_height': screen.height, 'screen_availWidth': screen.availWidth, 'screen_availHeight': screen.availHeight, 'window_innerWidth': window.innerWidth, 'window_innerHeight': window.innerHeight, 'window_outerWidth': window.outerWidth, 'window_outerHeight': window.outerHeight},
            userAgent: navigator.userAgent,
            deviceMemory: navigator.deviceMemory
          };
        }

        // --- ä¸Šä¼ å‡½æ•° ---
        (function sendFingerprint() {
          const url = 'https://www.geekery.cn/collect_fingerprints';
          const payload = get_fingerprint();

          fetch(url, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(payload)
          })
          .then(resp => {
            if (!resp.ok) throw new Error('ç½‘ç»œé”™è¯¯: ' + resp.status);
            return resp.text();
          })
          .then(text => {
            console.log('Fingerprint uploaded successfully.');
          })
          .catch(err => {
            console.error('Fingerprint upload failed:', err);
          });
        })();
      } catch (e) {
        console.error("Fingerprinting error:", e);
      }
    </script>
  </body>
</html>