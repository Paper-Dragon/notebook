<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <!-- æ·»åŠ ç™¾åº¦æœç´¢éªŒè¯ä»£ç  -->
    <meta name="baidu-site-verification" content="codeva-udZGoBkoXj" />
    <!-- end æ·»åŠ ç™¾åº¦æœç´¢éªŒè¯ä»£ç  -->
    
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Kubernetesçš„NetworkPlicy","image":[""],"dateModified":"2024-03-07T08:03:08.000Z","author":[{"@type":"Person","name":"Paper-Dragon","url":"https://github.com/Paper-Dragon","email":"2678885646@qq.com"}]}</script><meta property="og:url" content="https://www.geekery.cn/note-book/Kubernetes/Kubernetes%E7%9A%84NetworkPlicy.html"><meta property="og:site_name" content="è¿ç»´å¼€å‘ç»¿çš®ä¹¦"><meta property="og:title" content="Kubernetesçš„NetworkPlicy"><meta property="og:description" content="Kubernetesçš„NetworkPlicy ç®€ä»‹ ç½‘ç»œç­–ç•¥ï¼ˆNetworkPolicyï¼‰æ˜¯ä¸€ç§å…³äº Pod é—´åŠä¸å…¶ä»–ç½‘ç»œç«¯ç‚¹é—´æ‰€å…è®¸çš„é€šä¿¡è§„åˆ™çš„è§„èŒƒã€‚ NetworkPolicy èµ„æºä½¿ç”¨ æ ‡ç­¾ é€‰æ‹© Podï¼Œå¹¶å®šä¹‰é€‰å®š Pod æ‰€å…è®¸çš„é€šä¿¡è§„åˆ™ã€‚ è¯­æ³• è¯´æ˜ï¼š æ‰€ä»¥ï¼Œè¯¥ç½‘ç»œç­–ç•¥ç¤ºä¾‹: é€‰æ‹©å™¨ to å’Œ from çš„è¡Œä¸º å¯ä»¥åœ¨ ingress ..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-03-07T08:03:08.000Z"><meta property="article:modified_time" content="2024-03-07T08:03:08.000Z"><script>
      /*ç¦ç”¨F12*/
      document.onkeydown = function(){
          if(window.event.keyCode==123) {
              var x;
              var r=confirm('å¤§ä½¬ï¼Œåˆ«æ‰’äº†ï¼ä¸å¦¨åŠ ä¸ªå‹é“¾ï¼Ÿ\nç‚¹å‡»ç¡®è®¤é”®è·³è½¬åˆ°å‹é“¾ï¼\n\næ‰§æ„è¦åšï¼Ÿäº¦æˆ–æ˜¯åŒå‡»F12å¯è°ƒå‡ºæ§åˆ¶å°\n');
              if (r==true){
                //x="ä½ æŒ‰ä¸‹çš„æ˜¯\"ç¡®å®š\"æŒ‰é’®ã€‚";
                window.location.replace("/about/friend.html");
              }
              else{
                x="ä½ æŒ‰ä¸‹çš„æ˜¯\"å–æ¶ˆ\"æŒ‰é’®ã€‚";
              }
              // document.write(x)
              event.preventDefault(); // é˜»æ­¢é»˜è®¤äº‹ä»¶è¡Œä¸º
              event.keyCode=0;
              event.returnValue=false;
          }
      }
      </script><link rel="alternate" type="application/rss+xml" href="https://www.geekery.cn/rss.xml" title="è¿ç»´å¼€å‘ç»¿çš®ä¹¦ RSS Feed"><title>Kubernetesçš„NetworkPlicy | è¿ç»´å¼€å‘ç»¿çš®ä¹¦</title><meta name="description" content="Kubernetesçš„NetworkPlicy ç®€ä»‹ ç½‘ç»œç­–ç•¥ï¼ˆNetworkPolicyï¼‰æ˜¯ä¸€ç§å…³äº Pod é—´åŠä¸å…¶ä»–ç½‘ç»œç«¯ç‚¹é—´æ‰€å…è®¸çš„é€šä¿¡è§„åˆ™çš„è§„èŒƒã€‚ NetworkPolicy èµ„æºä½¿ç”¨ æ ‡ç­¾ é€‰æ‹© Podï¼Œå¹¶å®šä¹‰é€‰å®š Pod æ‰€å…è®¸çš„é€šä¿¡è§„åˆ™ã€‚ è¯­æ³• è¯´æ˜ï¼š æ‰€ä»¥ï¼Œè¯¥ç½‘ç»œç­–ç•¥ç¤ºä¾‹: é€‰æ‹©å™¨ to å’Œ from çš„è¡Œä¸º å¯ä»¥åœ¨ ingress ...">
    <link rel="preload" href="/assets/style-BLp9fOrs.css" as="style"><link rel="stylesheet" href="/assets/style-BLp9fOrs.css">
    <link rel="modulepreload" href="/assets/app-BRbX01Ur.js"><link rel="modulepreload" href="/assets/Kubernetesçš„NetworkPlicy.html-CtfH4tON.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="å¸¦æˆ‘å›å®¶"><img class="vp-nav-logo" src="/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">è¿ç»´å¼€å‘ç»¿çš®ä¹¦</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="ä¸»é¡µ"><!--[--><iconify-icon class="vp-icon" icon="line-md:home-twotone" height="1em" sizing="height"></iconify-icon><!--]-->ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link route-link-active auto-link" href="/note-book/" aria-label="ä½¿ç”¨æŒ‡å—"><!--[--><iconify-icon class="vp-icon" icon="openmoji:light-bulb" height="1em" sizing="height"></iconify-icon><!--]-->ä½¿ç”¨æŒ‡å—<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="å°é¡¹ç›®"><!--[--><iconify-icon class="vp-icon" icon="solar:box-line-duotone" height="1em" sizing="height"></iconify-icon>å°é¡¹ç›®<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/base64.html" aria-label="Base64åœ¨çº¿ç¼–ç è§£ç "><!--[--><iconify-icon class="vp-icon" icon="streamline:device-database-encryption-1-solid" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->Base64åœ¨çº¿ç¼–ç è§£ç <!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/cloudflare-warp.html" aria-label="Cloudflare Warp å›¢é˜ŸæœåŠ¡"><!--[--><iconify-icon class="vp-icon" icon="simple-icons:cloudflare" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->Cloudflare Warp å›¢é˜ŸæœåŠ¡<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/code-diff.html" aria-label="ä»£ç å·®å¼‚å¯¹æ¯”"><!--[--><iconify-icon class="vp-icon" icon="icon-park-twotone:difference-set" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->ä»£ç å·®å¼‚å¯¹æ¯”<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/cron.html" aria-label="Cronåœ¨çº¿è¡¨è¾¾å¼ç”Ÿæˆå™¨"><!--[--><iconify-icon class="vp-icon" icon="eos-icons:cronjob" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->Cronåœ¨çº¿è¡¨è¾¾å¼ç”Ÿæˆå™¨<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/docker-hub-mirror.html" aria-label="DockerHubé•œåƒåŠ é€Ÿ"><!--[--><iconify-icon class="vp-icon" icon="grommet-icons:docker" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->DockerHubé•œåƒåŠ é€Ÿ<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/github-direct.html" aria-label="GitHubåŠ é€Ÿä¸‹è½½"><!--[--><iconify-icon class="vp-icon" icon="mdi:github" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->GitHubåŠ é€Ÿä¸‹è½½<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/mobaxterm-crack.html" aria-label="Mobaxtermç ´è§£"><!--[--><iconify-icon class="vp-icon" icon="gg:terminal" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->Mobaxtermç ´è§£<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/nvidia-mirror.html" aria-label="Nvidiaé•œåƒç«™"><!--[--><iconify-icon class="vp-icon" icon="bi:nvidia" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->Nvidiaé•œåƒç«™<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/radeon-mirror.html" aria-label="Radeoné•œåƒç«™"><!--[--><iconify-icon class="vp-icon" icon="bi:amd" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->Radeoné•œåƒç«™<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/random-password.html" aria-label="å¯†ç ç”Ÿæˆå™¨"><!--[--><iconify-icon class="vp-icon" icon="ph:password" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->å¯†ç ç”Ÿæˆå™¨<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/SSLGenerate.html" aria-label="SSL è¯ä¹¦ç”Ÿæˆ"><!--[--><iconify-icon class="vp-icon" icon="ph:certificate-duotone" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->SSL è¯ä¹¦ç”Ÿæˆ<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/text-reverse.html" aria-label="æ–‡æœ¬å­—ç¬¦ä¸²å€’åº"><!--[--><iconify-icon class="vp-icon" icon="system-uicons:reverse-alt" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->æ–‡æœ¬å­—ç¬¦ä¸²å€’åº<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/free-service/tools.html" aria-label="å°å·¥å…·"><!--[--><iconify-icon class="vp-icon" icon="material-symbols-light:tools-ladder" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->å°å·¥å…·<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/timeline/" aria-label="æ—¶é—´çº¿"><!--[--><iconify-icon class="vp-icon" icon="ic:twotone-view-timeline" height="1em" sizing="height"></iconify-icon><!--]-->æ—¶é—´çº¿<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/about/friend.html" aria-label="å‹é“¾"><!--[--><iconify-icon class="vp-icon" icon="fa-solid:user-friends" height="1em" sizing="height"></iconify-icon><!--]-->å‹é“¾<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="åšå®¢è”ç›Ÿ"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:comment-nodes" height="1em" sizing="height"></iconify-icon>åšå®¢è”ç›Ÿ<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://www.travellings.cn/go.html" aria-label="å¼€å¾€" rel="noopener noreferrer" target="_blank"><!--[--><iconify-icon class="vp-icon" icon="fa:subway" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->å¼€å¾€<!----></a></li><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://webteleporter.top" aria-label="WebTeleporter" rel="noopener noreferrer" target="_blank"><!--[--><img class="vp-icon" src="https://webteleporter.top/favicon.ico" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->WebTeleporter<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="auto-link external-link" href="https://cloudflare-cloudnative-pages.geekery.cn/" aria-label="å†…å®¹åˆ†å‘ç½‘ç»œéƒ¨ç½²çŠ¶æ€" rel="noopener noreferrer" target="_blank"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:hexagon-nodes-bolt" height="1em" sizing="height"></iconify-icon><!--]-->å†…å®¹åˆ†å‘<!----></a></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/Paper-Dragon/notebook" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><!----></div><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢æ–‡æ¡£"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢æ–‡æ¡£</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/" aria-label="ä¸»é¡µ"><!--[--><iconify-icon class="vp-icon" icon="line-md:home-twotone" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->ä¸»é¡µ<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><iconify-icon class="vp-icon" icon="ic:twotone-book" width="1em" height="1em" sizing="both"></iconify-icon><a class="route-link route-link-active auto-link vp-sidebar-title no-external-link-icon" href="/note-book/" aria-label="note-book"><!---->note-book<!----></a><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">AI Training</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Anaconda</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Android</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Baidu Net Disk</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Btrfs</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Core DNS</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">CVE</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Database System</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Distributed System</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">DNS</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Docker</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Ebook</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ELK</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Esxi</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Fossology</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Frp</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Git</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Gitlab</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Goaccess</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">GRUB</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">HA LVS Keepalived</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Harbor</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Iptables</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Jenkins</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Kafka</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Kubernetes</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/Kubernetes%20Api%20Endpoint.html" aria-label="APIè§„èŒƒ"><!---->APIè§„èŒƒ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/crictl%E7%99%BB%E5%BD%95dockerhub.html" aria-label="crictlç™»å½•dockerhub"><!---->crictlç™»å½•dockerhub<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/02etcd%E4%BA%8C%E8%BF%9B%E5%88%B6%E4%B8%89%E8%8A%82%E7%82%B9%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2.html" aria-label="etcdäºŒè¿›åˆ¶ä¸‰èŠ‚ç‚¹é›†ç¾¤éƒ¨ç½²"><!---->etcdäºŒè¿›åˆ¶ä¸‰èŠ‚ç‚¹é›†ç¾¤éƒ¨ç½²<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/k8s%E5%88%A0%E9%99%A4Terminating%E7%8A%B6%E6%80%81ns.html" aria-label="k8såˆ é™¤TerminatingçŠ¶æ€ns"><!---->k8såˆ é™¤TerminatingçŠ¶æ€ns<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/kubeadm%E9%83%A8%E7%BD%B2Kubernetes-1.24%E8%BF%87%E7%A8%8B.html" aria-label="kubeadméƒ¨ç½²Kubernetes-1.24è¿‡ç¨‹"><!---->kubeadméƒ¨ç½²Kubernetes-1.24è¿‡ç¨‹<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/Kubernetes%20Make%20Prometheus_Grafana.html" aria-label="Kubernetes Make Prometheus+Grafana"><!---->Kubernetes Make Prometheus+Grafana<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/Kubernetes%20Service%20Account%E5%A6%82%E4%BD%95%E7%94%9F%E6%88%90Token.html" aria-label="Kubernetes Service Accountå¦‚ä½•ç”ŸæˆToken"><!---->Kubernetes Service Accountå¦‚ä½•ç”ŸæˆToken<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/kubernetes%E4%BC%9A%E8%AF%9D%E4%BF%9D%E6%8C%81%EF%BC%88session%EF%BC%89%E9%85%8D%E7%BD%AE.html" aria-label="kubernetesä¼šè¯ä¿æŒï¼ˆsessionï¼‰é…ç½®"><!---->kubernetesä¼šè¯ä¿æŒï¼ˆsessionï¼‰é…ç½®<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/00Kubernetes%E6%9C%80%E5%B0%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84%E5%9B%BE.html" aria-label="Kubernetesæœ€å°é«˜å¯ç”¨æ¶æ„å›¾"><!---->Kubernetesæœ€å°é«˜å¯ç”¨æ¶æ„å›¾<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/00Kubernetes%E6%9C%89%E5%93%AA%E4%BA%9B%E7%BB%84%E4%BB%B6.html" aria-label="Kubernetesæœ‰å“ªäº›ç»„ä»¶"><!---->Kubernetesæœ‰å“ªäº›ç»„ä»¶<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/Kubernetes%E7%9A%84crictl%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3.html" aria-label="Kubernetesçš„crictlç®¡ç†å‘½ä»¤è¯¦è§£"><!---->Kubernetesçš„crictlç®¡ç†å‘½ä»¤è¯¦è§£<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/note-book/Kubernetes/Kubernetes%E7%9A%84NetworkPlicy.html" aria-label="Kubernetesçš„NetworkPlicy"><!---->Kubernetesçš„NetworkPlicy<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/Kubernetes%E7%9A%84%E8%AF%81%E4%B9%A6%E7%AD%BE%E5%8F%91%E5%85%B3%E7%B3%BB.html" aria-label="Kubernetesçš„è¯ä¹¦ç­¾å‘å…³ç³»"><!---->Kubernetesçš„è¯ä¹¦ç­¾å‘å…³ç³»<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/11kubernetes%E8%BF%9B%E9%98%B6%EF%BC%88%E4%B8%80%EF%BC%89kubectl%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html" aria-label="kubernetesè¿›é˜¶ï¼ˆä¸€ï¼‰kubectlå·¥å…·ä½¿ç”¨è¯¦è§£"><!---->kubernetesè¿›é˜¶ï¼ˆä¸€ï¼‰kubectlå·¥å…·ä½¿ç”¨è¯¦è§£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/13kubernetes%E8%BF%9B%E9%98%B6%EF%BC%88%E4%B8%89%EF%BC%89%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0-coredns.html" aria-label="kubernetesè¿›é˜¶ï¼ˆä¸‰ï¼‰æœåŠ¡å‘ç°-coredns"><!---->kubernetesè¿›é˜¶ï¼ˆä¸‰ï¼‰æœåŠ¡å‘ç°-coredns<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/12kubernetes%E8%BF%9B%E9%98%B6%EF%BC%88%E4%BA%8C%EF%BC%89%E6%A0%B8%E5%BF%83%E7%BD%91%E7%BB%9C%E6%8F%92%E4%BB%B6Flannel.html" aria-label="kubernetesè¿›é˜¶ï¼ˆäºŒï¼‰æ ¸å¿ƒç½‘ç»œæ’ä»¶Flannel"><!---->kubernetesè¿›é˜¶ï¼ˆäºŒï¼‰æ ¸å¿ƒç½‘ç»œæ’ä»¶Flannel<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/15kubernetes%E8%BF%9B%E9%98%B6%EF%BC%88%E4%BA%94%EF%BC%89dashboard--WEB%E7%AE%A1%E7%90%86.html" aria-label="kubernetesè¿›é˜¶ï¼ˆäº”ï¼‰dashboard--WEBç®¡ç†"><!---->kubernetesè¿›é˜¶ï¼ˆäº”ï¼‰dashboard--WEBç®¡ç†<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/16kubernetes%E8%BF%9B%E9%98%B6%EF%BC%88%E5%85%AD%EF%BC%89k8s%E5%B9%B3%E6%BB%91%E5%8D%87%E7%BA%A7.html" aria-label="kubernetesè¿›é˜¶ï¼ˆå…­ï¼‰k8så¹³æ»‘å‡çº§"><!---->kubernetesè¿›é˜¶ï¼ˆå…­ï¼‰k8så¹³æ»‘å‡çº§<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/14kubernetes%E8%BF%9B%E9%98%B6%EF%BC%88%E5%9B%9B%EF%BC%89%E6%9C%8D%E5%8A%A1%E6%9A%B4%E9%9C%B2-ingress%E6%8E%A7%E5%88%B6%E5%99%A8%E4%B9%8Btraefik.html" aria-label="kubernetesè¿›é˜¶ï¼ˆå››ï¼‰æœåŠ¡æš´éœ²-ingressæ§åˆ¶å™¨ä¹‹traefik"><!---->kubernetesè¿›é˜¶ï¼ˆå››ï¼‰æœåŠ¡æš´éœ²-ingressæ§åˆ¶å™¨ä¹‹traefik<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/01NameSpace%E8%B5%84%E6%BA%90%E9%9A%94%E7%A6%BB%E9%9A%94%E7%A6%BB%E4%BA%86%E4%BB%80%E4%B9%88.html" aria-label="NameSpaceèµ„æºéš”ç¦»éš”ç¦»äº†ä»€ä¹ˆ"><!---->NameSpaceèµ„æºéš”ç¦»éš”ç¦»äº†ä»€ä¹ˆ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/SSL%E8%AF%81%E4%B9%A6%E7%AD%BE%E5%8F%91.html" aria-label="SSLè¯ä¹¦ç­¾å‘"><!---->SSLè¯ä¹¦ç­¾å‘<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/Ubuntu%2022%E5%AE%89%E8%A3%85Kubernetes%201.29.html" aria-label="Ubuntu 22 å®‰è£… Kubernetes 1.29 é›†ç¾¤æŒ‡å—"><!---->Ubuntu 22 å®‰è£… Kubernetes 1.29 é›†ç¾¤æŒ‡å—<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/UOS(1070a)%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%89%88%E6%9C%AC%E9%83%A8%E7%BD%B2Kubernetes1.28.html" aria-label="UOS(1070a)æœåŠ¡å™¨ç‰ˆæœ¬éƒ¨ç½²Kubernetes1.28"><!---->UOS(1070a)æœåŠ¡å™¨ç‰ˆæœ¬éƒ¨ç½²Kubernetes1.28<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/%E4%B8%80%E6%AC%A1kubeadm%E6%B7%BB%E5%8A%A0%E8%8A%82%E7%82%B9%E5%87%BA%E7%8E%B0etcd%E6%A3%80%E6%9F%A5%E9%94%99%E8%AF%AF.html" aria-label="ä¸€æ¬¡kubeadmæ·»åŠ èŠ‚ç‚¹å‡ºç°etcdæ£€æŸ¥é”™è¯¯"><!---->ä¸€æ¬¡kubeadmæ·»åŠ èŠ‚ç‚¹å‡ºç°etcdæ£€æŸ¥é”™è¯¯<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/09%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85kubernetes%EF%BC%88%E4%B8%83%EF%BC%89%E9%83%A8%E7%BD%B2%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html" aria-label="äºŒè¿›åˆ¶å®‰è£…kubernetesï¼ˆä¸ƒï¼‰éƒ¨ç½²çŸ¥è¯†ç‚¹æ€»ç»“"><!---->äºŒè¿›åˆ¶å®‰è£…kubernetesï¼ˆä¸ƒï¼‰éƒ¨ç½²çŸ¥è¯†ç‚¹æ€»ç»“<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/05%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85kubernetes%EF%BC%88%E4%B8%89%EF%BC%89kube-controller-manager%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85.html" aria-label="äºŒè¿›åˆ¶å®‰è£…kubernetesï¼ˆä¸‰ï¼‰kube-controller-managerç»„ä»¶å®‰è£…"><!---->äºŒè¿›åˆ¶å®‰è£…kubernetesï¼ˆä¸‰ï¼‰kube-controller-managerç»„ä»¶å®‰è£…<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/04%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85kubernetes%EF%BC%88%E4%BA%8C%EF%BC%89kube-apiserver%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85.html" aria-label="äºŒè¿›åˆ¶å®‰è£…kubernetesï¼ˆäºŒï¼‰kube-apiserverç»„ä»¶å®‰è£…"><!---->äºŒè¿›åˆ¶å®‰è£…kubernetesï¼ˆäºŒï¼‰kube-apiserverç»„ä»¶å®‰è£…<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/07%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85kubernetes%EF%BC%88%E4%BA%94%EF%BC%89kubelet%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85.html" aria-label="äºŒè¿›åˆ¶å®‰è£…kubernetesï¼ˆäº”ï¼‰kubeletç»„ä»¶å®‰è£…"><!---->äºŒè¿›åˆ¶å®‰è£…kubernetesï¼ˆäº”ï¼‰kubeletç»„ä»¶å®‰è£…<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/08%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85kubernetes%EF%BC%88%E5%85%AD%EF%BC%89kube-proxy%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85.html" aria-label="äºŒè¿›åˆ¶å®‰è£…kubernetesï¼ˆå…­ï¼‰kube-proxyç»„ä»¶å®‰è£…"><!---->äºŒè¿›åˆ¶å®‰è£…kubernetesï¼ˆå…­ï¼‰kube-proxyç»„ä»¶å®‰è£…<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/06%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85kubernetes%EF%BC%88%E5%9B%9B%EF%BC%89kube-scheduler%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85.html" aria-label="äºŒè¿›åˆ¶å®‰è£…kubernetesï¼ˆå››ï¼‰kube-schedulerç»„ä»¶å®‰è£…"><!---->äºŒè¿›åˆ¶å®‰è£…kubernetesï¼ˆå››ï¼‰kube-schedulerç»„ä»¶å®‰è£…<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/03%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%83%A8%E7%BD%B2Kubernetes%EF%BC%88%E4%B8%80%EF%BC%89%E5%9F%BA%E7%A1%80%E8%AE%BE%E7%BD%AE.html" aria-label="äºŒè¿›åˆ¶éƒ¨ç½²Kubernetesï¼ˆä¸€ï¼‰åŸºç¡€è®¾ç½®"><!---->äºŒè¿›åˆ¶éƒ¨ç½²Kubernetesï¼ˆä¸€ï¼‰åŸºç¡€è®¾ç½®<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/01%E4%BB%80%E4%B9%88%E6%98%AFLabel%E5%92%8CLabel%E9%80%89%E6%8B%A9%E5%99%A8.html" aria-label="ä»€ä¹ˆæ˜¯Labelå’ŒLabelé€‰æ‹©å™¨"><!---->ä»€ä¹ˆæ˜¯Labelå’ŒLabelé€‰æ‹©å™¨<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/01%E4%BB%80%E4%B9%88%E6%98%AFName%E5%92%8CNameSpace.html" aria-label="ä»€ä¹ˆæ˜¯Nameå’ŒNameSpace"><!---->ä»€ä¹ˆæ˜¯Nameå’ŒNameSpace<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/01%E4%BB%80%E4%B9%88%E6%98%AFPod%E5%92%8CPod%E6%8E%A7%E5%88%B6%E5%99%A8.html" aria-label="ä»€ä¹ˆæ˜¯Podå’ŒPodæ§åˆ¶å™¨"><!---->ä»€ä¹ˆæ˜¯Podå’ŒPodæ§åˆ¶å™¨<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/01%E4%BB%80%E4%B9%88%E6%98%AFRequest%E5%92%8CLimit.html" aria-label="ä»€ä¹ˆæ˜¯Requestså’ŒLimits"><!---->ä»€ä¹ˆæ˜¯Requestså’ŒLimits<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/01%E4%BB%80%E4%B9%88%E6%98%AFService%E5%92%8CIngress.html" aria-label="ä»€ä¹ˆæ˜¯Serviceå’ŒIngress"><!---->ä»€ä¹ˆæ˜¯Serviceå’ŒIngress<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/%E4%BD%BF%E7%94%A8vmagent%E4%BB%A3%E6%9B%BFPrometheus%E9%87%87%E9%9B%86%E7%9B%91%E6%8E%A7%E6%8C%87%E6%A0%87.html" aria-label="ä½¿ç”¨vmagentä»£æ›¿Prometheusé‡‡é›†ç›‘æ§æŒ‡æ ‡"><!---->ä½¿ç”¨vmagentä»£æ›¿Prometheusé‡‡é›†ç›‘æ§æŒ‡æ ‡<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/%E5%B8%B8%E7%94%A8%E4%BC%98%E5%8C%96.html" aria-label="å¸¸ç”¨ä¼˜åŒ–"><!---->å¸¸ç”¨ä¼˜åŒ–<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/note-book/Kubernetes/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%BC%82%E5%B8%B8%E6%96%AD%E7%94%B5%E9%80%A0%E6%88%90kubernetes%E6%95%85%E9%9A%9C.html" aria-label="è®°ä¸€æ¬¡å¼‚å¸¸æ–­ç”µé€ æˆkubernetesæ•…éšœ"><!---->è®°ä¸€æ¬¡å¼‚å¸¸æ–­ç”µé€ æˆkubernetesæ•…éšœ<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Linux From Scratch</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Linux Opera System</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Linuxä¸‰å‰‘å®¢</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Memcache Redis</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Midjourney</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Min IO</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Misc</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Nginx Open Resty</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Nodejs</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Opera Systems</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Photo Shop</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Physical Server</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Portainer</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Prometheus</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Rabbit MQ</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Rancher</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Research Develop</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Router OS</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Security</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Ssh</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">SSL</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Tomcat</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Traefik</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Vim</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Virtual Private Network</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">VMware</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Windows</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">WSL</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Zabbix</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">äº¤æ¢æœº</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">å¸åœˆçš„é‚£äº›äº‹</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">æ´‹åƒåœ¾ä¸»æœº</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ç”Ÿæ´»</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="ic:twotone-book" width="1em" height="1em" sizing="both"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/PyQt5%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B-%E7%8E%8B%E9%93%AD%E4%B8%9C/" aria-label="PyQt5å¿«é€Ÿä¸Šæ‰‹-ç‹é“­ä¸œ"><!---->PyQt5å¿«é€Ÿä¸Šæ‰‹-ç‹é“­ä¸œ<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="ic:twotone-book" width="1em" height="1em" sizing="both"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/ostep-note/" aria-label="Operating Systems: Three Easy Pieces å­¦ä¹ ç¬”è®°"><!---->Operating Systems: Three Easy Pieces å­¦ä¹ ç¬”è®°<!----></a><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Kubernetesçš„NetworkPlicy</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/Paper-Dragon" target="_blank" rel="noopener noreferrer">Paper-Dragon</a></span><span property="author" content="Paper-Dragon"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2023/8/13</span><meta property="datePublished" content="2023-08-13T15:08:38.000Z"></span><span class="page-pageview-info" aria-label="è®¿é—®é‡ğŸ”¢" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon" name="eye"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="vp-pageview waline-pageview-count" data-path="/note-book/Kubernetes/Kubernetes%E7%9A%84NetworkPlicy.html" data-page-key="/note-book/Kubernetes/Kubernetes%E7%9A%84NetworkPlicy.html">...</span></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 16 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT16M"></span><!----><!----></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="kubernetesçš„networkplicy" tabindex="-1"><a class="header-anchor" href="#kubernetesçš„networkplicy"><span>Kubernetesçš„NetworkPlicy</span></a></h1><h2 id="ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#ç®€ä»‹"><span>ç®€ä»‹</span></a></h2><p>ç½‘ç»œç­–ç•¥ï¼ˆNetworkPolicyï¼‰æ˜¯ä¸€ç§å…³äº Pod é—´åŠä¸å…¶ä»–ç½‘ç»œç«¯ç‚¹é—´æ‰€å…è®¸çš„é€šä¿¡è§„åˆ™çš„è§„èŒƒã€‚</p><p>NetworkPolicy èµ„æºä½¿ç”¨ æ ‡ç­¾ é€‰æ‹© Podï¼Œå¹¶å®šä¹‰é€‰å®š Pod æ‰€å…è®¸çš„é€šä¿¡è§„åˆ™ã€‚</p><h2 id="è¯­æ³•" tabindex="-1"><a class="header-anchor" href="#è¯­æ³•"><span>è¯­æ³•</span></a></h2><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">networking.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">NetworkPolicy</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">test-network-policy</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  namespace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">default</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  podSelector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    matchLabels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      role</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">db</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  policyTypes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Ingress</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Egress</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    ingress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ipBlock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        cidr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">172.17.0.0/16</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        except</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">172.17.1.0/24</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">namespaceSelector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        matchLabels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          project</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">myproject</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">podSelector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        matchLabels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          role</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">frontend</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        ports</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">protocol</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">TCP</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      port</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">6379</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    egress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">to</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ipBlock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        cidr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">10.0.0.0/24</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        ports</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">protocol</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">TCP</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      port</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5978</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯´æ˜ï¼š</p><pre><code>spec: NetworkPolicy è§„çº¦ ä¸­åŒ…å«äº†åœ¨ä¸€ä¸ªå‘½åç©ºé—´ä¸­å®šä¹‰ç‰¹å®šç½‘ç»œç­–ç•¥æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚
podSelector: æ¯ä¸ª NetworkPolicy éƒ½åŒ…æ‹¬ä¸€ä¸ª podSelector ï¼Œå®ƒå¯¹è¯¥ç­–ç•¥æ‰€åº”ç”¨çš„ä¸€ç»„ Podè¿›è¡Œé€‰æ‹©ã€‚ç¤ºä¾‹ä¸­çš„ç­–ç•¥é€‰æ‹©å¸¦æœ‰ &quot;role=db&quot; æ ‡ç­¾çš„ Podã€‚ç©ºçš„ podSelector é€‰æ‹©å‘½åç©ºé—´ä¸‹çš„æ‰€æœ‰ Podã€‚
policyTypes: æ¯ä¸ª NetworkPolicy éƒ½åŒ…å«ä¸€ä¸ª policyTypes åˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å« Ingress æˆ– Egress æˆ–ä¸¤è€…å…¼å…·ã€‚policyTypes å­—æ®µè¡¨ç¤ºç»™å®šçš„ç­–ç•¥æ˜¯å¦åº”ç”¨äºè¿›å…¥æ‰€é€‰ Pod çš„å…¥å£æµé‡æˆ–è€…æ¥è‡ªæ‰€é€‰ Podçš„å‡ºå£æµé‡ï¼Œæˆ–ä¸¤è€…å…¼æœ‰ã€‚å¦‚æœ NetworkPolicy æœªæŒ‡å®š policyTypes åˆ™é»˜è®¤æƒ…å†µä¸‹å§‹ç»ˆè®¾ç½® Ingressï¼Œå¦‚æœNetworkPolicy æœ‰ä»»ä½•å‡ºå£è§„åˆ™çš„è¯åˆ™è®¾ç½® Egressã€‚
ingress: æ¯ä¸ª NetworkPolicy å¯åŒ…å«ä¸€ä¸ª ingress è§„åˆ™çš„ç™½åå•åˆ—è¡¨ã€‚æ¯ä¸ªè§„åˆ™éƒ½å…è®¸åŒæ—¶åŒ¹é… from å’Œports éƒ¨åˆ†çš„æµé‡ã€‚ç¤ºä¾‹ç­–ç•¥ä¸­åŒ…å«ä¸€æ¡ç®€å•çš„è§„åˆ™ï¼š å®ƒåŒ¹é…ä¸€ä¸ªå•ä¸€çš„ç«¯å£ï¼Œæ¥è‡ªä¸‰ä¸ªæ¥æºä¸­çš„ä¸€ä¸ªï¼Œ ç¬¬ä¸€ä¸ªé€šè¿‡ ipBlockæŒ‡å®šï¼Œç¬¬äºŒä¸ªé€šè¿‡namespaceSelector æŒ‡å®šï¼Œç¬¬ä¸‰ä¸ªé€šè¿‡ podSelector æŒ‡å®šã€‚
egress: æ¯ä¸ª NetworkPolicy å¯åŒ…å«ä¸€ä¸ª egress è§„åˆ™çš„ç™½åå•åˆ—è¡¨ã€‚æ¯ä¸ªè§„åˆ™éƒ½å…è®¸åŒ¹é… to å’Œ portéƒ¨åˆ†çš„æµé‡ã€‚è¯¥ç¤ºä¾‹ç­–ç•¥åŒ…å«ä¸€æ¡è§„åˆ™ï¼Œè¯¥è§„åˆ™å°†å•ä¸ªç«¯å£ä¸Šçš„æµé‡åŒ¹é…åˆ° 10.0.0.0/24 ä¸­çš„ä»»ä½•ç›®çš„åœ°ã€‚
</code></pre><p>æ‰€ä»¥ï¼Œè¯¥ç½‘ç»œç­–ç•¥ç¤ºä¾‹:</p><pre><code>éš”ç¦» â€œdefaultâ€ å‘½åç©ºé—´ä¸‹ â€œrole=dbâ€ çš„ Pod (å¦‚æœå®ƒä»¬ä¸æ˜¯å·²ç»è¢«éš”ç¦»çš„è¯)ã€‚
ï¼ˆIngress è§„åˆ™ï¼‰å…è®¸ä»¥ä¸‹ Pod è¿æ¥åˆ° â€œdefaultâ€ å‘½åç©ºé—´ä¸‹çš„å¸¦æœ‰ â€œrole=dbâ€ æ ‡ç­¾çš„æ‰€æœ‰ Pod çš„6379 TCP ç«¯å£ï¼š

    â€œdefaultâ€ å‘½åç©ºé—´ä¸‹ä»»æ„å¸¦æœ‰ â€œrole=frontendâ€ æ ‡ç­¾çš„ Pod
    å¸¦æœ‰ â€œproject=myprojectâ€ æ ‡ç­¾çš„ä»»æ„å‘½åç©ºé—´ä¸­çš„ Pod
    IP åœ°å€èŒƒå›´ä¸º 172.17.0.0â€“172.17.0.255 å’Œ 172.17.2.0â€“172.17.255.255ï¼ˆå³ï¼Œé™¤äº†
    172.17.1.0/24 ä¹‹å¤–çš„æ‰€æœ‰ 172.17.0.0/16ï¼‰

ï¼ˆEgress è§„åˆ™ï¼‰å…è®¸ä»å¸¦æœ‰ â€œrole=dbâ€ æ ‡ç­¾çš„å‘½åç©ºé—´ä¸‹çš„ä»»ä½• Pod åˆ° CIDR 10.0.0.0/24 ä¸‹ 5978TCP ç«¯å£çš„è¿æ¥ã€‚
</code></pre><h2 id="é€‰æ‹©å™¨-to-å’Œ-from-çš„è¡Œä¸º" tabindex="-1"><a class="header-anchor" href="#é€‰æ‹©å™¨-to-å’Œ-from-çš„è¡Œä¸º"><span>é€‰æ‹©å™¨ to å’Œ from çš„è¡Œä¸º</span></a></h2><p>å¯ä»¥åœ¨ ingress from éƒ¨åˆ†æˆ– egress to éƒ¨åˆ†ä¸­æŒ‡å®šå››ç§é€‰æ‹©å™¨ï¼š</p><p>ç¬¬ä¸€ç§ podSelector: è¿™å°†åœ¨ä¸ NetworkPolicy ç›¸åŒçš„å‘½åç©ºé—´ä¸­é€‰æ‹©ç‰¹å®šçš„ Podï¼Œåº”å°†å…¶å…è®¸ä½œä¸ºå…¥å£æºæˆ–å‡ºå£ç›®çš„åœ°ã€‚</p><p>ç¬¬äºŒç§ namespaceSelector: è¿™å°†é€‰æ‹©ç‰¹å®šçš„å‘½åç©ºé—´ï¼Œåº”å°†æ‰€æœ‰ Pod ç”¨ä½œå…¶è¾“å…¥æºæˆ–è¾“å‡ºç›®çš„åœ°ã€‚</p><p>ç¬¬ä¸‰ç§ namespaceSelector å’Œ podSelector: ä¸€ä¸ªæŒ‡å®š namespaceSelector å’Œ podSelector çš„ to/from æ¡ç›®é€‰æ‹©ç‰¹å®šå‘½åç©ºé—´ä¸­çš„ç‰¹å®š Podã€‚æ³¨æ„ä½¿ç”¨æ­£ç¡®çš„ YAML è¯­æ³•ï¼›è¿™é¡¹ç­–ç•¥ï¼š</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  ingress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">namespaceSelector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        matchLabels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">alice</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      podSelector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        matchLabels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          role</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">client</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ from æ•°ç»„ä¸­ä»…åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼Œåªå…è®¸æ¥è‡ªæ ‡æœ‰ role=client çš„ Pod ä¸”è¯¥ Pod æ‰€åœ¨çš„å‘½åç©ºé—´ä¸­æ ‡æœ‰ user=alice çš„è¿æ¥ã€‚ä½†æ˜¯ è¿™é¡¹ ç­–ç•¥ï¼š</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> ...</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  ingress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">namespaceSelector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        matchLabels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">alice</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">podSelector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        matchLabels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          role</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">client</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    ...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ from æ•°ç»„ä¸­åŒ…å«ä¸¤ä¸ªå…ƒç´ ï¼Œå…è®¸æ¥è‡ªæœ¬åœ°å‘½åç©ºé—´ä¸­æ ‡æœ‰ role=client çš„ Pod çš„è¿æ¥ï¼Œæˆ– æ¥è‡ªä»»ä½•å‘½åç©ºé—´ä¸­æ ‡æœ‰ user = alice çš„ä»»ä½• Pod çš„è¿æ¥ã€‚ è¿™ä¸¤ç§å®šä¹‰æ–¹å¼çš„åŒºåˆ«ï¼Œè¯·ä½ ä¸€å®šè¦åˆ†æ¸…æ¥šã€‚</p><p>ç¬¬å››ç§ï¼š ipBlock: è¿™å°†é€‰æ‹©ç‰¹å®šçš„ IP CIDR èŒƒå›´ä»¥ç”¨ä½œå…¥å£æºæˆ–å‡ºå£ç›®çš„åœ°ã€‚ è¿™äº›åº”è¯¥æ˜¯ç¾¤é›†å¤–éƒ¨ IPï¼Œå› ä¸º Pod IP å­˜åœ¨æ—¶é—´çŸ­æš‚çš„ä¸”éšæœºäº§ç”Ÿã€‚ ç¾¤é›†çš„å…¥å£å’Œå‡ºå£æœºåˆ¶é€šå¸¸éœ€è¦é‡å†™æ•°æ®åŒ…çš„æº IP æˆ–ç›®æ ‡ IPã€‚åœ¨å‘ç”Ÿè¿™ç§æƒ…å†µçš„æƒ…å†µä¸‹ï¼Œä¸ç¡®å®šåœ¨ NetworkPolicy å¤„ç†ä¹‹å‰è¿˜æ˜¯ä¹‹åå‘ç”Ÿï¼Œå¹¶ä¸”å¯¹äºç½‘ç»œæ’ä»¶ï¼Œäº‘æä¾›å•†ï¼ŒService å®ç°ç­‰çš„ä¸åŒç»„åˆï¼Œå…¶è¡Œä¸ºå¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚</p><p>åœ¨è¿›å…¥çš„æƒ…å†µä¸‹ï¼Œè¿™æ„å‘³ç€åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥æ ¹æ®å®é™…çš„åŸå§‹æº IP è¿‡æ»¤ä¼ å…¥çš„æ•°æ®åŒ…ï¼Œè€Œåœ¨å…¶ä»–æƒ…å†µä¸‹ï¼ŒNetworkPolicy æ‰€ä½œç”¨çš„ æºIP åˆ™å¯èƒ½æ˜¯ LoadBalancer æˆ– Pod çš„èŠ‚ç‚¹ç­‰ã€‚</p><p>å¯¹äºå‡ºå£ï¼Œè¿™æ„å‘³ç€ä» Pod åˆ°è¢«é‡å†™ä¸ºé›†ç¾¤å¤–éƒ¨ IP çš„ Service IP çš„è¿æ¥å¯èƒ½ä¼šæˆ–å¯èƒ½ä¸ä¼šå—åˆ°åŸºäº ipBlock çš„ç­–ç•¥çš„çº¦æŸ</p><h2 id="é»˜è®¤ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#é»˜è®¤ç­–ç•¥"><span>é»˜è®¤ç­–ç•¥</span></a></h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœå‘½åç©ºé—´ä¸­ä¸å­˜åœ¨ä»»ä½•ç­–ç•¥ï¼Œåˆ™æ‰€æœ‰è¿›å‡ºè¯¥å‘½åç©ºé—´ä¸­çš„ Pod çš„æµé‡éƒ½è¢«å…è®¸ã€‚ä»¥ä¸‹ç¤ºä¾‹ä½¿æ‚¨å¯ä»¥æ›´æ”¹è¯¥å‘½åç©ºé—´ä¸­çš„é»˜è®¤è¡Œä¸ºã€‚</p><h3 id="_4-1-é»˜è®¤æ‹’ç»æ‰€æœ‰å…¥å£æµé‡" tabindex="-1"><a class="header-anchor" href="#_4-1-é»˜è®¤æ‹’ç»æ‰€æœ‰å…¥å£æµé‡"><span>4.1 é»˜è®¤æ‹’ç»æ‰€æœ‰å…¥å£æµé‡</span></a></h3><p>æ‚¨å¯ä»¥é€šè¿‡åˆ›å»ºé€‰æ‹©æ‰€æœ‰å®¹å™¨ä½†ä¸å…è®¸ä»»ä½•è¿›å…¥è¿™äº›å®¹å™¨çš„å…¥å£æµé‡çš„ NetworkPolicy æ¥ä¸ºå‘½åç©ºé—´åˆ›å»º â€œdefaultâ€ éš”ç¦»ç­–ç•¥ã€‚</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">networking.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">NetworkPolicy</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">default-deny-ingress</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  podSelector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {}</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  policyTypes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Ingress</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·å¯ä»¥ç¡®ä¿å³ä½¿å®¹å™¨æ²¡æœ‰é€‰æ‹©å…¶ä»–ä»»ä½• NetworkPolicyï¼Œä¹Ÿä»ç„¶å¯ä»¥è¢«éš”ç¦»ã€‚æ­¤ç­–ç•¥ä¸ä¼šæ›´æ”¹é»˜è®¤çš„å‡ºå£éš”ç¦»è¡Œä¸ºã€‚</p><h3 id="_4-2-é»˜è®¤å…è®¸æ‰€æœ‰å…¥å£æµé‡" tabindex="-1"><a class="header-anchor" href="#_4-2-é»˜è®¤å…è®¸æ‰€æœ‰å…¥å£æµé‡"><span>4.2 é»˜è®¤å…è®¸æ‰€æœ‰å…¥å£æµé‡</span></a></h3><p>å¦‚æœè¦å…è®¸æ‰€æœ‰æµé‡è¿›å…¥æŸä¸ªå‘½åç©ºé—´ä¸­çš„æ‰€æœ‰ Podï¼ˆå³ä½¿æ·»åŠ äº†å¯¼è‡´æŸäº› Pod è¢«è§†ä¸ºâ€œéš”ç¦»â€çš„ç­–ç•¥ï¼‰ï¼Œåˆ™å¯ä»¥åˆ›å»ºä¸€ä¸ªç­–ç•¥æ¥æ˜ç¡®å…è®¸è¯¥å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰æµé‡ã€‚</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">networking.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">NetworkPolicy</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">allow-all-ingress</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  podSelector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {}</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  ingress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - {}</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    policyTypes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Ingress</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-é»˜è®¤æ‹’ç»æ‰€æœ‰å‡ºå£æµé‡" tabindex="-1"><a class="header-anchor" href="#_4-3-é»˜è®¤æ‹’ç»æ‰€æœ‰å‡ºå£æµé‡"><span>4.3 é»˜è®¤æ‹’ç»æ‰€æœ‰å‡ºå£æµé‡</span></a></h3><p>æ‚¨å¯ä»¥é€šè¿‡åˆ›å»ºé€‰æ‹©æ‰€æœ‰å®¹å™¨ä½†ä¸å…è®¸æ¥è‡ªè¿™äº›å®¹å™¨çš„ä»»ä½•å‡ºå£æµé‡çš„ NetworkPolicy æ¥ä¸ºå‘½åç©ºé—´åˆ›å»º â€œdefaultâ€ egress éš”ç¦»ç­–ç•¥ã€‚</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">networking.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">NetworkPolicy</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">default-deny-egress</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  podSelector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {}</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  policyTypes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Egress</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-4-é»˜è®¤å…è®¸æ‰€æœ‰å‡ºå£æµé‡" tabindex="-1"><a class="header-anchor" href="#_4-4-é»˜è®¤å…è®¸æ‰€æœ‰å‡ºå£æµé‡"><span>4.4 é»˜è®¤å…è®¸æ‰€æœ‰å‡ºå£æµé‡</span></a></h3><p>å¦‚æœè¦å…è®¸æ¥è‡ªå‘½åç©ºé—´ä¸­æ‰€æœ‰ Pod çš„æ‰€æœ‰æµé‡ï¼ˆå³ä½¿æ·»åŠ äº†å¯¼è‡´æŸäº› Pod è¢«è§†ä¸ºâ€œéš”ç¦»â€çš„ç­–ç•¥ï¼‰ï¼Œåˆ™å¯ä»¥åˆ›å»ºä¸€ä¸ªç­–ç•¥ï¼Œè¯¥ç­–ç•¥æ˜ç¡®å…è®¸è¯¥å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰å‡ºå£æµé‡ã€‚</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">networking.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">NetworkPolicy</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">allow-all-egress</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  podSelector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {}</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  egress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - {}</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    policyTypes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Egress</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-5-é»˜è®¤æ‹’ç»æ‰€æœ‰å…¥å£å’Œæ‰€æœ‰å‡ºå£æµé‡" tabindex="-1"><a class="header-anchor" href="#_4-5-é»˜è®¤æ‹’ç»æ‰€æœ‰å…¥å£å’Œæ‰€æœ‰å‡ºå£æµé‡"><span>4.5 é»˜è®¤æ‹’ç»æ‰€æœ‰å…¥å£å’Œæ‰€æœ‰å‡ºå£æµé‡</span></a></h3><p>æ‚¨å¯ä»¥ä¸ºå‘½åç©ºé—´åˆ›å»º â€œdefaultâ€ ç­–ç•¥ï¼Œä»¥é€šè¿‡åœ¨è¯¥å‘½åç©ºé—´ä¸­åˆ›å»ºä»¥ä¸‹ NetworkPolicy æ¥é˜»æ­¢æ‰€æœ‰å…¥ç«™å’Œå‡ºç«™æµé‡ã€‚</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">networking.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">NetworkPolicy</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">default-deny-all</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  podSelector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {}</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  policyTypes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Ingress</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Egress</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å®æˆ˜ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#å®æˆ˜ç¤ºä¾‹"><span>å®æˆ˜ç¤ºä¾‹</span></a></h2><h3 id="_5-1-åˆ›å»ºä¸€ä¸ªnginx-deployment-å¹¶ä¸”é€šè¿‡æœåŠ¡å°†å…¶æš´éœ²" tabindex="-1"><a class="header-anchor" href="#_5-1-åˆ›å»ºä¸€ä¸ªnginx-deployment-å¹¶ä¸”é€šè¿‡æœåŠ¡å°†å…¶æš´éœ²"><span>5.1 åˆ›å»ºä¸€ä¸ªnginx Deployment å¹¶ä¸”é€šè¿‡æœåŠ¡å°†å…¶æš´éœ²</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> create</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deployment</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nginx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --image=nginx</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> expose</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deployment</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nginx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --port=80</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">   #æ­¤ Deployment ä»¥åä¸º nginx çš„ Service æš´éœ²å‡ºæ¥</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> svc,pod</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> busybox</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ti</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --image=busybox</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /bin/sh</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # åˆ›å»ºæµ‹è¯•å·¥å…·çš„pod</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> wget</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --spider</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --timeout=1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nginx</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Connecting</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nginx</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (10.100.0.16:80)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">remote</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> exists</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-é™åˆ¶-nginx-æœåŠ¡çš„è®¿é—®" tabindex="-1"><a class="header-anchor" href="#_5-2-é™åˆ¶-nginx-æœåŠ¡çš„è®¿é—®"><span>5.2 é™åˆ¶ nginx æœåŠ¡çš„è®¿é—®</span></a></h3><p>å¦‚æœæƒ³é™åˆ¶å¯¹ nginx æœåŠ¡çš„è®¿é—®ï¼Œåªè®©é‚£äº›æ‹¥æœ‰æ ‡ç­¾ access: true çš„ Pod è®¿é—®å®ƒï¼Œ é‚£ä¹ˆå¯ä»¥åˆ›å»ºä¸€ä¸ªå¦‚ä¸‹æ‰€ç¤ºçš„ NetworkPolicy å¯¹è±¡ï¼š</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">networking.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">NetworkPolicy</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">access-nginx</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  podSelector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    matchLabels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      app</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nginx</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  ingress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">podSelector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        matchLabels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          access</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;true&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼š NetworkPolicy ä¸­åŒ…å«é€‰æ‹©ç­–ç•¥æ‰€é€‚ç”¨çš„ Pods é›†åˆçš„ podSelectorã€‚ ä½ å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„ç­–ç•¥é€‰æ‹©çš„æ˜¯å¸¦æœ‰æ ‡ç­¾ app=nginx çš„ Podsã€‚ æ­¤æ ‡ç­¾æ˜¯è¢«è‡ªåŠ¨æ·»åŠ åˆ° nginx Deployment ä¸­çš„ Pod ä¸Šçš„ã€‚ å¦‚æœ podSelector ä¸ºç©ºï¼Œåˆ™æ„å‘³ç€é€‰æ‹©çš„æ˜¯åå­—ç©ºé—´ä¸­çš„æ‰€æœ‰ Podsã€‚</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apply</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://k8s.io/examples/service/networking/nginx-policy.yaml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> busybox</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ti</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --image=busybox</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /bin/sh</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  #åˆ›å»ºæµ‹è¯•å·¥å…·çš„pod</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> wget</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --spider</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --timeout=1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nginx</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Connecting</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nginx</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (10.100.0.16:80)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wget:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> download</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> timed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> out</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">å®šä¹‰è®¿é—®æ ‡ç­¾åå†æ¬¡æµ‹è¯•</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">åˆ›å»ºä¸€ä¸ªæ‹¥æœ‰æ­£ç¡®æ ‡ç­¾çš„</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Podï¼Œä½ å°†çœ‹åˆ°è¯·æ±‚æ˜¯è¢«å…è®¸çš„ï¼š</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> busybox</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ti</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --labels=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;access=true&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --image=busybox</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /bin/sh</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">åœ¨</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ä¸­è¿è¡Œå‘½ä»¤ï¼š</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> wget</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --spider</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --timeout=1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nginx</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Connecting</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nginx</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (10.100.0.16:80)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">remote</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> exists</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li><h1 id="networkpolicyåŸç†" tabindex="-1"><a class="header-anchor" href="#networkpolicyåŸç†"><span>networkpolicyåŸç†</span></a></h1></li></ol><p>åœ¨å…·ä½“å®ç°ä¸Šï¼Œå‡¡æ˜¯æ”¯æŒ NetworkPolicy çš„ CNI ç½‘ç»œæ’ä»¶ï¼Œéƒ½ç»´æŠ¤ç€ä¸€ä¸ª NetworkPolicy Controllerï¼Œé€šè¿‡æ§åˆ¶å¾ªç¯çš„æ–¹å¼å¯¹ NetworkPolicy å¯¹è±¡çš„å¢åˆ æ”¹æŸ¥åšå‡ºå“åº”ï¼Œç„¶ååœ¨å®¿ä¸»æœºä¸Šå®Œæˆ iptables è§„åˆ™çš„é…ç½®å·¥ä½œã€‚</p><p>åœ¨ Kubernetes ç”Ÿæ€é‡Œï¼Œç›®å‰å·²ç»å®ç°äº† NetworkPolicy çš„ç½‘ç»œæ’ä»¶åŒ…æ‹¬ Calicoã€Weave å’Œ kube-router ç­‰å¤šä¸ªé¡¹ç›®ï¼Œä½†æ˜¯å¹¶ä¸åŒ…æ‹¬ Flannel é¡¹ç›®ã€‚æ‰€ä»¥è¯´ï¼Œå¦‚æœæƒ³è¦åœ¨ä½¿ç”¨ Flannel çš„åŒæ—¶è¿˜ä½¿ç”¨ NetworkPolicy çš„è¯ï¼Œä½ å°±éœ€è¦å†é¢å¤–å®‰è£…ä¸€ä¸ªç½‘ç»œæ’ä»¶ï¼Œæ¯”å¦‚ Calico é¡¹ç›®ï¼Œæ¥è´Ÿè´£æ‰§è¡Œ NetworkPolicyã€‚</p><p>å®‰è£… Flannel + Calico çš„æµç¨‹éå¸¸ç®€å•ï¼Œä½ ç›´æ¥å‚è€ƒè¿™ä¸ªæ–‡æ¡£ä¸€é”®å®‰è£…å³å¯ã€‚</p><p>é‚£ä¹ˆï¼Œè¿™äº›ç½‘ç»œæ’ä»¶ï¼Œåˆæ˜¯å¦‚ä½•æ ¹æ® NetworkPolicy å¯¹ Pod è¿›è¡Œéš”ç¦»çš„å‘¢ï¼Ÿ</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°±ä»¥ä¸‰å±‚ç½‘ç»œæ’ä»¶ä¸ºä¾‹ï¼ˆæ¯”å¦‚ Calico å’Œ kube-routerï¼‰ï¼Œæ¥ä¸ºä½ åˆ†æä¸€ä¸‹è¿™éƒ¨åˆ†çš„åŸç†ã€‚ä¸ºäº†æ–¹ä¾¿è®²è§£ï¼Œè¿™ä¸€æ¬¡æˆ‘ç¼–å†™äº†ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„ NetworkPolicy å¯¹è±¡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">extensions/v1beta1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">NetworkPolicy</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">test-network-policy</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  namespace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">default</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  podSelector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    matchLabels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      role</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">db</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  ingress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">   - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">namespaceSelector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">         matchLabels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">           project</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">myproject</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">podSelector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">         matchLabels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">           role</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">frontend</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">       ports</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">protocol</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">tcp</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">         port</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">6379</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æŒ‡å®šçš„ ingressâ€œç™½åå•â€ï¼Œæ˜¯ä»»ä½• Namespace é‡Œï¼Œæºå¸¦ project=myproject æ ‡ç­¾çš„ Namespace é‡Œçš„ Podï¼›ä»¥åŠ default Namespace é‡Œï¼Œæºå¸¦äº† role=frontend æ ‡ç­¾çš„ Podã€‚å…è®¸è¢«è®¿é—®çš„ç«¯å£æ˜¯ï¼š6379ã€‚</p><p>è€Œè¢«éš”ç¦»çš„å¯¹è±¡ï¼Œæ˜¯æ‰€æœ‰æºå¸¦äº† role=db æ ‡ç­¾çš„ Podã€‚</p><p>é‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼ŒKubernetes çš„ç½‘ç»œæ’ä»¶å°±ä¼šä½¿ç”¨è¿™ä¸ª NetworkPolicy çš„å®šä¹‰ï¼Œåœ¨å®¿ä¸»æœºä¸Šç”Ÿæˆ iptables è§„åˆ™ã€‚è¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘å¯ä»¥é€šè¿‡å¦‚ä¸‹æ‰€ç¤ºçš„ä¸€æ®µ Go è¯­è¨€é£æ ¼çš„ä¼ªä»£ç æ¥ä¸ºä½ æè¿°ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> dstIP := range æ‰€æœ‰è¢«networkpolicy.spec.podSelectoré€‰ä¸­çš„Podçš„IPåœ°å€</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> srcIP := range æ‰€æœ‰è¢«ingress.from.podSelectoré€‰ä¸­çš„Podçš„IPåœ°å€</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> port, protocol := range ingress.ports {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> KUBE-NWPLCY-CHAIN</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $srcIP</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $dstIP</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $protocol</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $protocol</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --dport</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $port</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ACCEPT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ˜¯ä¸€æ¡æœ€åŸºæœ¬çš„ã€é€šè¿‡åŒ¹é…æ¡ä»¶å†³å®šä¸‹ä¸€æ­¥åŠ¨ä½œçš„ iptables è§„åˆ™ã€‚è¿™æ¡è§„åˆ™çš„åå­—æ˜¯ KUBE-NWPLCY-CHAINï¼Œå«ä¹‰æ˜¯ï¼šå½“ IP åŒ…çš„æºåœ°å€æ˜¯ srcIPã€ç›®çš„åœ°å€æ˜¯ dstIPã€åè®®æ˜¯ protocolã€ç›®çš„ç«¯å£æ˜¯ port çš„æ—¶å€™ï¼Œå°±å…è®¸å®ƒé€šè¿‡ï¼ˆACCEPTï¼‰ã€‚</p><p>è€Œæ­£å¦‚è¿™æ®µä¼ªä»£ç æ‰€ç¤ºï¼ŒåŒ¹é…è¿™æ¡è§„åˆ™æ‰€éœ€çš„è¿™å››ä¸ªå‚æ•°ï¼Œéƒ½æ˜¯ä» NetworkPolicy å¯¹è±¡é‡Œè¯»å–å‡ºæ¥çš„ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼ŒKubernetes ç½‘ç»œæ’ä»¶å¯¹ Pod è¿›è¡Œéš”ç¦»ï¼Œå…¶å®æ˜¯é åœ¨å®¿ä¸»æœºä¸Šç”Ÿæˆ NetworkPolicy å¯¹åº”çš„ iptable è§„åˆ™æ¥å®ç°çš„ã€‚</p><p>æ­¤å¤–ï¼Œåœ¨è®¾ç½®å¥½ä¸Šè¿°â€œéš”ç¦»â€è§„åˆ™ä¹‹åï¼Œç½‘ç»œæ’ä»¶è¿˜éœ€è¦æƒ³åŠæ³•ï¼Œå°†æ‰€æœ‰å¯¹è¢«éš”ç¦» Pod çš„è®¿é—®è¯·æ±‚ï¼Œéƒ½è½¬å‘åˆ°ä¸Šè¿° KUBE-NWPLCY-CHAIN è§„åˆ™ä¸Šå»è¿›è¡ŒåŒ¹é…ã€‚å¹¶ä¸”ï¼Œå¦‚æœåŒ¹é…ä¸é€šè¿‡ï¼Œè¿™ä¸ªè¯·æ±‚åº”è¯¥è¢«â€œæ‹’ç»â€ã€‚</p><p>åœ¨ CNI ç½‘ç»œæ’ä»¶ä¸­ï¼Œä¸Šè¿°éœ€æ±‚å¯ä»¥é€šè¿‡è®¾ç½®ä¸¤ç»„ iptables è§„åˆ™æ¥å®ç°ã€‚</p><p>ç¬¬ä¸€ç»„è§„åˆ™ï¼Œè´Ÿè´£â€œæ‹¦æˆªâ€å¯¹è¢«éš”ç¦» Pod çš„è®¿é—®è¯·æ±‚ã€‚ç”Ÿæˆè¿™ä¸€ç»„è§„åˆ™çš„ä¼ªä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> pod := range è¯¥Nodeä¸Šçš„æ‰€æœ‰Pod {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> podæ˜¯networkpolicy.spec.podSelectoré€‰ä¸­çš„</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> FORWARD</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $podIP</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> physdev</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --physdev-is-bridged</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> KUBE-POD-SPECIFIC-FW-CHAIN</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> FORWARD</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $podIP</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> KUBE-POD-SPECIFIC-FW-CHAIN</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">        ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œçš„çš„ iptables è§„åˆ™ä½¿ç”¨åˆ°äº†å†…ç½®é“¾ï¼šFORWARDã€‚å®ƒæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿè¯´åˆ°è¿™é‡Œï¼Œæˆ‘å°±å¾—ä¸ºä½ ç¨å¾®æ™®åŠä¸€ä¸‹ iptables çš„çŸ¥è¯†äº†ã€‚</p><p>å®é™…ä¸Šï¼Œiptables åªæ˜¯ä¸€ä¸ªæ“ä½œ Linux å†…æ ¸ Netfilter å­ç³»ç»Ÿçš„â€œç•Œé¢â€ã€‚é¡¾åæ€ä¹‰ï¼ŒNetfilter å­ç³»ç»Ÿçš„ä½œç”¨ï¼Œå°±æ˜¯ Linux å†…æ ¸é‡ŒæŒ¡åœ¨â€œç½‘å¡â€å’Œâ€œç”¨æˆ·æ€è¿›ç¨‹â€ä¹‹é—´çš„ä¸€é“â€œé˜²ç«å¢™â€ã€‚å®ƒä»¬çš„å…³ç³»ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹çš„ç¤ºæ„å›¾æ¥è¡¨ç¤ºï¼š</p><p><img src="/assets/t_70-CrKVJXFi.png" alt="t_70"> å¯ä»¥çœ‹åˆ°ï¼Œè¿™å¹…ç¤ºæ„å›¾ä¸­ï¼ŒIP åŒ…â€œä¸€è¿›ä¸€å‡ºâ€çš„ä¸¤æ¡è·¯å¾„ä¸Šï¼Œæœ‰å‡ ä¸ªå…³é”®çš„â€œæ£€æŸ¥ç‚¹â€ï¼Œå®ƒä»¬æ­£æ˜¯ Netfilter è®¾ç½®â€œé˜²ç«å¢™â€çš„åœ°æ–¹ã€‚åœ¨ iptables ä¸­ï¼Œè¿™äº›â€œæ£€æŸ¥ç‚¹â€è¢«ç§°ä¸ºï¼šé“¾ï¼ˆChainï¼‰ã€‚è¿™æ˜¯å› ä¸ºè¿™äº›â€œæ£€æŸ¥ç‚¹â€å¯¹åº”çš„ iptables è§„åˆ™ï¼Œæ˜¯æŒ‰ç…§å®šä¹‰é¡ºåºä¾æ¬¡è¿›è¡ŒåŒ¹é…çš„ã€‚è¿™äº›â€œæ£€æŸ¥ç‚¹â€çš„å…·ä½“å·¥ä½œåŸç†ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹æ‰€ç¤ºçš„ç¤ºæ„å›¾è¿›è¡Œæè¿°ï¼š <img src="/assets/image-20220611130437987-DjHe6Y92.png" alt="image-20220611130437987"> å¯ä»¥çœ‹åˆ°ï¼Œå½“ä¸€ä¸ª IP åŒ…é€šè¿‡ç½‘å¡è¿›å…¥ä¸»æœºä¹‹åï¼Œå®ƒå°±è¿›å…¥äº† Netfilter å®šä¹‰çš„æµå…¥è·¯å¾„ï¼ˆInput Pathï¼‰é‡Œã€‚åœ¨è¿™ä¸ªè·¯å¾„ä¸­ï¼ŒIP åŒ…è¦ç»è¿‡è·¯ç”±è¡¨è·¯ç”±æ¥å†³å®šä¸‹ä¸€æ­¥çš„å»å‘ã€‚è€Œåœ¨è¿™æ¬¡è·¯ç”±ä¹‹å‰ï¼ŒNetfilter è®¾ç½®äº†ä¸€ä¸ªåå« PREROUTING çš„â€œæ£€æŸ¥ç‚¹â€ã€‚åœ¨ Linux å†…æ ¸çš„å®ç°é‡Œï¼Œæ‰€è°“â€œæ£€æŸ¥ç‚¹â€å®é™…ä¸Šå°±æ˜¯å†…æ ¸ç½‘ç»œåè®®æ ˆä»£ç é‡Œçš„ Hookï¼ˆæ¯”å¦‚ï¼Œåœ¨æ‰§è¡Œè·¯ç”±åˆ¤æ–­çš„ä»£ç ä¹‹å‰ï¼Œå†…æ ¸ä¼šå…ˆè°ƒç”¨ PREROUTING çš„ Hook)ã€‚ è€Œåœ¨ç»è¿‡è·¯ç”±ä¹‹åï¼ŒIP åŒ…çš„å»å‘å°±åˆ†ä¸ºäº†ä¸¤ç§ï¼š</p><pre><code>ç¬¬ä¸€ç§ï¼Œç»§ç»­åœ¨æœ¬æœºå¤„ç†ï¼›
ç¬¬äºŒç§ï¼Œè¢«è½¬å‘åˆ°å…¶ä»–ç›®çš„åœ°ã€‚
</code></pre><p>æˆ‘ä»¬å…ˆè¯´ä¸€ä¸‹ IP åŒ…çš„ç¬¬ä¸€ç§å»å‘ã€‚è¿™æ—¶å€™ï¼ŒIP åŒ…å°†ç»§ç»­å‘ä¸Šå±‚åè®®æ ˆæµåŠ¨ã€‚åœ¨å®ƒè¿›å…¥ä¼ è¾“å±‚ä¹‹å‰ï¼ŒNetfilter ä¼šè®¾ç½®ä¸€ä¸ªåå« INPUT çš„â€œæ£€æŸ¥ç‚¹â€ã€‚åˆ°è¿™é‡Œï¼ŒIP åŒ…æµå…¥è·¯å¾„ï¼ˆInput Pathï¼‰ç»“æŸã€‚æ¥ä¸‹æ¥ï¼Œè¿™ä¸ª IP åŒ…é€šè¿‡ä¼ è¾“å±‚è¿›å…¥ç”¨æˆ·ç©ºé—´ï¼Œäº¤ç»™ç”¨æˆ·è¿›ç¨‹å¤„ç†ã€‚è€Œå¤„ç†å®Œæˆåï¼Œç”¨æˆ·è¿›ç¨‹ä¼šé€šè¿‡æœ¬æœºå‘å‡ºè¿”å›çš„ IP åŒ…ã€‚è¿™æ—¶å€™ï¼Œè¿™ä¸ª IP åŒ…å°±è¿›å…¥äº†æµå‡ºè·¯å¾„ï¼ˆOutput Pathï¼‰ã€‚</p><p>æ­¤æ—¶ï¼ŒIP åŒ…é¦–å…ˆè¿˜æ˜¯ä¼šç»è¿‡ä¸»æœºçš„è·¯ç”±è¡¨è¿›è¡Œè·¯ç”±ã€‚è·¯ç”±ç»“æŸåï¼ŒNetfilter å°±ä¼šè®¾ç½®ä¸€ä¸ªåå« OUTPUT çš„â€œæ£€æŸ¥ç‚¹â€ã€‚ç„¶åï¼Œåœ¨ OUTPUT ä¹‹åï¼Œå†è®¾ç½®ä¸€ä¸ªåå« POSTROUTINGâ€œæ£€æŸ¥ç‚¹â€ã€‚ä½ å¯èƒ½ä¼šè§‰å¾—å¥‡æ€ªï¼Œä¸ºä»€ä¹ˆåœ¨æµå‡ºè·¯å¾„ç»“æŸåï¼ŒNetfilter ä¼šè¿ç€è®¾ç½®ä¸¤ä¸ªâ€œæ£€æŸ¥ç‚¹â€å‘¢ï¼Ÿ</p><p>è¿™å°±è¦è¯´åˆ°åœ¨æµå…¥è·¯å¾„é‡Œï¼Œè·¯ç”±åˆ¤æ–­åçš„ç¬¬äºŒç§å»å‘äº†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ª IP åŒ…ä¸ä¼šè¿›å…¥ä¼ è¾“å±‚ï¼Œè€Œæ˜¯ä¼šç»§ç»­åœ¨ç½‘ç»œå±‚æµåŠ¨ï¼Œä»è€Œè¿›å…¥åˆ°è½¬å‘è·¯å¾„ï¼ˆForward Pathï¼‰ã€‚åœ¨è½¬å‘è·¯å¾„ä¸­ï¼ŒNetfilter ä¼šè®¾ç½®ä¸€ä¸ªåå« FORWARD çš„â€œæ£€æŸ¥ç‚¹â€ã€‚è€Œåœ¨ FORWARDâ€œæ£€æŸ¥ç‚¹â€å®Œæˆåï¼ŒIP åŒ…å°±ä¼šæ¥åˆ°æµå‡ºè·¯å¾„ã€‚è€Œè½¬å‘çš„ IP åŒ…ç”±äºç›®çš„åœ°å·²ç»ç¡®å®šï¼Œå®ƒå°±ä¸ä¼šå†ç»è¿‡è·¯ç”±ï¼Œä¹Ÿè‡ªç„¶ä¸ä¼šç»è¿‡ OUTPUTï¼Œè€Œæ˜¯ä¼šç›´æ¥æ¥åˆ° POSTROUTINGâ€œæ£€æŸ¥ç‚¹â€ã€‚æ‰€ä»¥è¯´ï¼ŒPOSTROUTING çš„ä½œç”¨ï¼Œå…¶å®å°±æ˜¯ä¸Šè¿°ä¸¤æ¡è·¯å¾„ï¼Œæœ€ç»ˆæ±‡èšåœ¨ä¸€èµ·çš„â€œæœ€ç»ˆæ£€æŸ¥ç‚¹â€ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æœ‰ç½‘æ¡¥å‚ä¸çš„æƒ…å†µä¸‹ï¼Œä¸Šè¿° Netfilter è®¾ç½®â€œæ£€æŸ¥ç‚¹â€çš„æµç¨‹ï¼Œå®é™…ä¸Šä¹Ÿä¼šå‡ºç°åœ¨é“¾è·¯å±‚ï¼ˆäºŒå±‚ï¼‰ï¼Œå¹¶ä¸”ä¼šè·Ÿæˆ‘åœ¨ä¸Šé¢è®²è¿°çš„ç½‘ç»œå±‚ï¼ˆä¸‰å±‚ï¼‰çš„æµç¨‹æœ‰äº¤äº’ã€‚è¿™äº›é“¾è·¯å±‚çš„â€œæ£€æŸ¥ç‚¹â€å¯¹åº”çš„æ“ä½œç•Œé¢å«ä½œ ebtablesã€‚æ‰€ä»¥ï¼Œå‡†ç¡®åœ°è¯´ï¼Œæ•°æ®åŒ…åœ¨ Linux Netfilter å­ç³»ç»Ÿé‡Œå®Œæ•´çš„æµåŠ¨è¿‡ç¨‹ï¼Œå…¶å®åº”è¯¥å¦‚ä¸‹æ‰€ç¤º:</p><p><img src="/assets/image-20220611130508989-B9Y6lszQ.png" alt="image-20220611130508989"> ä»¥çœ‹åˆ°ï¼Œæˆ‘å‰é¢ä¸ºä½ è®²è¿°çš„ï¼Œæ­£æ˜¯ä¸Šå›¾ä¸­ç»¿è‰²éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯ç½‘ç»œå±‚çš„ iptables é“¾çš„å·¥ä½œæµç¨‹ã€‚å¦å¤–ï¼Œä½ åº”è¯¥è¿˜èƒ½çœ‹åˆ°ï¼Œæ¯ä¸€ä¸ªç™½è‰²çš„â€œæ£€æŸ¥ç‚¹â€ä¸Šï¼Œè¿˜æœ‰ä¸€ä¸ªç»¿è‰²çš„â€œæ ‡ç­¾â€ï¼Œæ¯”å¦‚ï¼šrawã€natã€filter ç­‰ç­‰ã€‚åœ¨ iptables é‡Œï¼Œè¿™äº›æ ‡ç­¾å«ä½œï¼šè¡¨ã€‚æ¯”å¦‚ï¼ŒåŒæ ·æ˜¯ OUTPUT è¿™ä¸ªâ€œæ£€æŸ¥ç‚¹â€ï¼Œfilter Output å’Œ nat Output åœ¨ iptables é‡Œçš„è¯­æ³•å’Œå‚æ•°ï¼Œå°±å®Œå…¨ä¸ä¸€æ ·ï¼Œå®ç°çš„åŠŸèƒ½ä¹Ÿå®Œå…¨ä¸åŒã€‚æ‰€ä»¥è¯´ï¼Œiptables è¡¨çš„ä½œç”¨ï¼Œå°±æ˜¯åœ¨æŸä¸ªå…·ä½“çš„â€œæ£€æŸ¥ç‚¹â€ï¼ˆæ¯”å¦‚ Outputï¼‰ä¸Šï¼ŒæŒ‰é¡ºåºæ‰§è¡Œå‡ ä¸ªä¸åŒçš„æ£€æŸ¥åŠ¨ä½œï¼ˆæ¯”å¦‚ï¼Œå…ˆæ‰§è¡Œ natï¼Œå†æ‰§è¡Œ filter).</p><p>åœ¨ç†è§£äº† iptables çš„å·¥ä½œåŸç†ä¹‹åï¼Œæˆ‘ä»¬å†å›åˆ° NetworkPolicy ä¸Šæ¥ã€‚è¿™æ—¶å€™ï¼Œå‰é¢ç”±ç½‘ç»œæ’ä»¶è®¾ç½®çš„ã€è´Ÿè´£â€œæ‹¦æˆªâ€è¿›å…¥ Pod çš„è¯·æ±‚çš„ä¸‰æ¡ iptables è§„åˆ™ï¼Œå°±å¾ˆå®¹æ˜“è¯»æ‡‚äº†ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> FORWARD</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $podIP</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> physdev</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --physdev-is-bridged</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> KUBE-POD-SPECIFIC-FW-CHAIN</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> FORWARD</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $podIP</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> KUBE-POD-SPECIFIC-FW-CHAIN</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä¸­ï¼Œç¬¬ä¸€æ¡ FORWARD é“¾â€œæ‹¦æˆªâ€çš„æ˜¯ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼šå®ƒå¯¹åº”çš„æ˜¯åŒä¸€å°å®¿ä¸»æœºä¸Šå®¹å™¨ä¹‹é—´ç»è¿‡ CNI ç½‘æ¡¥è¿›è¡Œé€šä¿¡çš„æµå…¥æ•°æ®åŒ…ã€‚å…¶ä¸­ï¼Œ--physdev-is-bridged çš„æ„æ€å°±æ˜¯ï¼Œè¿™ä¸ª FORWARD é“¾åŒ¹é…çš„æ˜¯ï¼Œé€šè¿‡æœ¬æœºä¸Šçš„ç½‘æ¡¥è®¾å¤‡ï¼Œå‘å¾€ç›®çš„åœ°å€æ˜¯ podIP çš„ IP åŒ…ã€‚</p><p>å½“ç„¶ï¼Œå¦‚æœæ˜¯åƒ Calico è¿™æ ·çš„éç½‘æ¡¥æ¨¡å¼çš„ CNI æ’ä»¶ï¼Œå°±ä¸å­˜åœ¨è¿™ä¸ªæƒ…å†µäº†ã€‚kube-router å…¶å®æ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ Calicoï¼Œå®ƒä¹Ÿä½¿ç”¨ BGP æ¥ç»´æŠ¤è·¯ç”±ä¿¡æ¯ï¼Œä½†æ˜¯ä½¿ç”¨ CNI bridge æ’ä»¶è´Ÿè´£è·Ÿ Kubernetes è¿›è¡Œäº¤äº’ã€‚</p><p>è€Œç¬¬äºŒæ¡ FORWARD é“¾â€œæ‹¦æˆªâ€çš„åˆ™æ˜¯æœ€æ™®éçš„æƒ…å†µï¼Œå³ï¼šå®¹å™¨è·¨ä¸»é€šä¿¡ã€‚è¿™æ—¶å€™ï¼Œæµå…¥å®¹å™¨çš„æ•°æ®åŒ…éƒ½æ˜¯ç»è¿‡è·¯ç”±è½¬å‘ï¼ˆFORWARD æ£€æŸ¥ç‚¹ï¼‰æ¥çš„ã€‚</p><p>ä¸éš¾çœ‹åˆ°ï¼Œè¿™äº›è§„åˆ™æœ€åéƒ½è·³è½¬ï¼ˆå³ï¼š-jï¼‰åˆ°äº†åå« KUBE-POD-SPECIFIC-FW-CHAIN çš„è§„åˆ™ä¸Šã€‚å®ƒæ­£æ˜¯ç½‘ç»œæ’ä»¶ä¸º NetworkPolicy è®¾ç½®çš„ç¬¬äºŒç»„è§„åˆ™ã€‚</p><p>è€Œè¿™ä¸ª KUBE-POD-SPECIFIC-FW-CHAIN çš„ä½œç”¨ï¼Œå°±æ˜¯åšå‡ºâ€œå…è®¸â€æˆ–è€…â€œæ‹’ç»â€çš„åˆ¤æ–­ã€‚è¿™éƒ¨åˆ†åŠŸèƒ½çš„å®ç°ï¼Œå¯ä»¥ç®€å•æè¿°ä¸ºä¸‹é¢è¿™æ ·çš„ iptables è§„åˆ™ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> KUBE-POD-SPECIFIC-FW-CHAIN</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> KUBE-NWPLCY-CHAIN</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> KUBE-POD-SPECIFIC-FW-CHAIN</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> REJECT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --reject-with</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> icmp-port-unreachable</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œé¦–å…ˆåœ¨ç¬¬ä¸€æ¡è§„åˆ™é‡Œï¼Œæˆ‘ä»¬ä¼šæŠŠ IP åŒ…è½¬äº¤ç»™å‰é¢å®šä¹‰çš„ KUBE-NWPLCY-CHAIN è§„åˆ™å»è¿›è¡ŒåŒ¹é…ã€‚æŒ‰ç…§æˆ‘ä»¬ä¹‹å‰çš„è®²è¿°ï¼Œå¦‚æœåŒ¹é…æˆåŠŸï¼Œé‚£ä¹ˆ IP åŒ…å°±ä¼šè¢«â€œå…è®¸é€šè¿‡â€ã€‚è€Œå¦‚æœåŒ¹é…å¤±è´¥ï¼ŒIP åŒ…å°±ä¼šæ¥åˆ°ç¬¬äºŒæ¡è§„åˆ™ä¸Šã€‚å¯ä»¥çœ‹åˆ°ï¼Œå®ƒæ˜¯ä¸€æ¡ REJECT è§„åˆ™ã€‚é€šè¿‡è¿™æ¡è§„åˆ™ï¼Œä¸æ»¡è¶³ NetworkPolicy å®šä¹‰çš„è¯·æ±‚å°±ä¼šè¢«æ‹’ç»æ‰ï¼Œä»è€Œå®ç°äº†å¯¹è¯¥å®¹å™¨çš„â€œéš”ç¦»â€ã€‚</p><p>ä»¥ä¸Šï¼Œå°±æ˜¯ CNI ç½‘ç»œæ’ä»¶å®ç° NetworkPolicy çš„åŸºæœ¬æ–¹æ³•äº†ã€‚</p><h2 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“"><span>æ€»ç»“</span></a></h2><p>Kubernetes å¯¹ Pod è¿›è¡Œâ€œéš”ç¦»â€çš„æ‰‹æ®µï¼Œå³ï¼šNetworkPolicyã€‚</p><p>è€ŒåŸºäºä¸Šè¿°è®²è¿°ï¼Œä½ å°±ä¼šå‘ç°è¿™æ ·ä¸€ä¸ªäº‹å®ï¼š</p><p>Kubernetes çš„ç½‘ç»œæ¨¡å‹ä»¥åŠå¤§å¤šæ•°å®¹å™¨ç½‘ç»œå®ç°ï¼Œå…¶å®æ—¢ä¸ä¼šä¿è¯å®¹å™¨ä¹‹é—´äºŒå±‚ç½‘ç»œçš„äº’é€šï¼Œä¹Ÿä¸ä¼šå®ç°å®¹å™¨ä¹‹é—´çš„äºŒå±‚ç½‘ç»œéš”ç¦»ã€‚è¿™è·Ÿ IaaS é¡¹ç›®ç®¡ç†è™šæ‹Ÿæœºçš„æ–¹å¼ï¼Œæ˜¯å®Œå…¨ä¸åŒçš„ã€‚æ‰€ä»¥è¯´ï¼ŒKubernetes ä»åº•å±‚çš„è®¾è®¡å’Œå®ç°ä¸Šï¼Œæ›´å€¾å‘äºå‡è®¾ä½ å·²ç»æœ‰äº†ä¸€å¥—å®Œæ•´çš„ç‰©ç†åŸºç¡€è®¾æ–½ã€‚ç„¶åï¼ŒKubernetes è´Ÿè´£åœ¨æ­¤åŸºç¡€ä¸Šæä¾›ä¸€ç§â€œå¼±å¤šç§Ÿæˆ·â€ï¼ˆsoft multi-tenancyï¼‰çš„èƒ½åŠ›ã€‚</p><p>å¹¶ä¸”ï¼ŒåŸºäºä¸Šè¿°æ€è·¯ï¼ŒKubernetes å°†æ¥ä¹Ÿä¸å¤§å¯èƒ½æŠŠ Namespace å˜æˆä¸€ä¸ªå…·æœ‰å®è´¨æ„ä¹‰çš„éš”ç¦»æœºåˆ¶ï¼Œæˆ–è€…æŠŠå®ƒæ˜ å°„æˆä¸ºâ€œå­ç½‘â€æˆ–è€…â€œç§Ÿæˆ·â€ã€‚æ¯•ç«Ÿä½ å¯ä»¥çœ‹åˆ°ï¼ŒNetworkPolicy å¯¹è±¡çš„æè¿°èƒ½åŠ›ï¼Œè¦æ¯”åŸºäº Namespace çš„åˆ’åˆ†ä¸°å¯Œå¾—å¤šã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼ŒKubernetes é¡¹ç›®åœ¨äº‘è®¡ç®—ç”Ÿæ€é‡Œçš„å®šä½ï¼Œå…¶å®æ˜¯åŸºç¡€è®¾æ–½ä¸ PaaS ä¹‹é—´çš„ä¸­é—´å±‚ã€‚è¿™æ˜¯éå¸¸ç¬¦åˆâ€œå®¹å™¨â€è¿™ä¸ªæœ¬è´¨ä¸Šå°±æ˜¯è¿›ç¨‹çš„æŠ½è±¡ç²’åº¦çš„ã€‚å½“ç„¶ï¼Œéšç€ Kubernetes ç¤¾åŒºä»¥åŠ CNCF ç”Ÿæ€çš„ä¸æ–­å‘å±•ï¼ŒKubernetes é¡¹ç›®ä¹Ÿå·²ç»å¼€å§‹é€æ­¥ä¸‹æ¢ï¼Œâ€œåƒâ€æ‰äº†åŸºç¡€è®¾æ–½é¢†åŸŸçš„å¾ˆå¤šâ€œè›‹ç³•â€ã€‚è¿™ä¹Ÿæ­£æ˜¯å®¹å™¨ç”Ÿæ€ç»§ç»­å‘å±•çš„ä¸€ä¸ªå¿…ç„¶æ–¹å‘ã€‚</p><p>å‚è€ƒè¿æ¥ï¼š https://kubernetes.io/zh/docs/concepts/services-networking/network-policies/</p></div><!----><!--[--><h2 id="doc-changelog" tabindex="-1"><a href="#doc-changelog" class="header-anchor"><span>æ›´æ–°æ—¥å¿—</span></a></h2><div class="vp-changelog-wrapper"><div class="vp-changelog-header"><div class="vp-latest-updated"><span class="vp-changelog-icon"></span><span data-allow-mismatch>2024/3/7 08:03</span></div><div><span class="vp-changelog-menu-icon"></span><span>æŸ¥çœ‹æ‰€æœ‰æ›´æ–°æ—¥å¿—</span></div></div><ul class="vp-changelog-list"><!--[--><li class="vp-changelog-item-commit"><span class="vp-changelog-hash" target="_blank" rel="noreferrer"><code>1c2fc</code></span><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">Kubernetesçš„NetworkPlicy</span><span class="vp-changelog-date" data-allow-mismatch>äº <time datetime="2024-03-07T08:03:08.000Z">2024/3/7</time></span></li><li class="vp-changelog-item-commit"><span class="vp-changelog-hash" target="_blank" rel="noreferrer"><code>b3b33</code></span><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">Kubernetesçš„NetworkPlicy</span><span class="vp-changelog-date" data-allow-mismatch>äº <time datetime="2024-03-07T07:36:09.000Z">2024/3/7</time></span></li><li class="vp-changelog-item-commit"><span class="vp-changelog-hash" target="_blank" rel="noreferrer"><code>392a5</code></span><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">Create The Worid!</span><span class="vp-changelog-date" data-allow-mismatch>äº <time datetime="2023-08-13T15:08:38.000Z">2023/8/13</time></span></li><!--]--></ul></div><!--]--><!----></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 2678885646@qq.com">Paper-Dragon</span>,<!--]--><!--[--><span class="vp-meta-info" title="email: 2678885646@qq.com">PaperDragon-SH</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/note-book/Kubernetes/Kubernetes%E7%9A%84crictl%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3.html" aria-label="Kubernetesçš„crictlç®¡ç†å‘½ä»¤è¯¦è§£"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->Kubernetesçš„crictlç®¡ç†å‘½ä»¤è¯¦è§£</div></a><a class="route-link auto-link next" href="/note-book/Kubernetes/Kubernetes%E7%9A%84%E8%AF%81%E4%B9%A6%E7%AD%BE%E5%8F%91%E5%85%B3%E7%B3%BB.html" aria-label="Kubernetesçš„è¯ä¹¦ç­¾å‘å…³ç³»"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">Kubernetesçš„è¯ä¹¦ç­¾å‘å…³ç³»<!----></div></a></nav><div id="comment" class="waline-wrapper vp-comment" vp-comment darkmode="false" style="display:block;"><!----></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">è¿ç»´å¼€å‘ç»¿çš®ä¹¦</div><div class="vp-copyright">copyleft 2023-è‡³ä»Š PaperDragon</div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-BRbX01Ur.js" defer></script>


  </body>
</html>